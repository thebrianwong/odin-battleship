(()=>{"use strict";const e=(()=>{const e=e=>{const o=["A","B","C","D","E","F","G","H","I","J"],i=["1","2","3","4","5","6","7","8","9","10"];for(let n=-1;n<10;n++)for(let d=-1;d<10;d++)if(-1===n)if(-1===d){const t=document.createElement("div");t.classList.add("gameboard-label"),t.style.visibility="hidden",e.appendChild(t)}else{const t=document.createElement("div");t.classList.add("column-label"),t.textContent=o[d],e.appendChild(t)}else if(-1===d){const t=document.createElement("div");t.classList.add("row-label"),t.textContent=i[n],e.appendChild(t)}else if(Array.from(e.classList).includes("player-board")){const o=document.createElement("div");o.setAttribute("data-row",n),o.setAttribute("data-column",d),o.classList.add("gameboard-cell"),o.addEventListener("dragover",(e=>{s(e)})),o.addEventListener("drop",(e=>{r(e),5===a.getPlayers()[0].getGameboard().getPlacedShips().length&&t()})),e.appendChild(o)}else if(Array.from(e.classList).includes("opponent-board")){const t=document.createElement("button");t.setAttribute("data-row",n),t.setAttribute("data-column",d),t.classList.add("gameboard-cell"),t.disabled=!0,t.addEventListener("click",(e=>{console.log(t);const s=Number(t.dataset.row),r=Number(t.dataset.column);a.getPlayers()[0].sendAttack([s,r])})),e.appendChild(t)}},t=()=>{const e=document.querySelector(".opponent-board");Array.from(e.querySelectorAll(".gameboard-cell")).forEach((e=>{e.disabled=!1}))},s=()=>{event.preventDefault()},r=e=>{e.preventDefault();const t=e.target;if(Array.from(t.classList).includes("contains-ship-image"))return;const s=e.dataTransfer.getData("image"),o=JSON.parse(s);if(!((e,t)=>{const s=[Number(e.dataset.row),Number(e.dataset.column)],r=Number(t.shipLength);return t.horizontal?a.getPlayers()[0].checkIfValidEmptyCoordinates(s,r,"right")?(console.log("fits"),!0):(console.log("nope"),!1):t.vertical?a.getPlayers()[0].checkIfValidEmptyCoordinates(s,r,"down")?(console.log("fits"),!0):(console.log("nope"),!1):void 0})(t,o))return;const i=((e,t)=>{const a=t.shipLength,s=Number(e.dataset.row),r=Number(e.dataset.column),o=[[s,r]];e.classList.add("contains-ship-image"),e.classList.add("ship-image"),e.classList.add(`ship-image-${a}`),e.classList.add(`ship-image-${a}-1`),t.horizontal?e.classList.add("horizontal"):t.vertical&&e.classList.add("vertical");for(let e=1;e<a;e++){let i;t.horizontal?(i=document.querySelector(`.player-board [data-row='${s}'][data-column='${r+e}']`),i.classList.add("horizontal"),o.push([s,r+e])):t.vertical&&(i=document.querySelector(`.player-board [data-row='${s+e}'][data-column='${r}']`),i.classList.add("vertical"),o.push([s+e,r])),i.classList.add("contains-ship-image"),i.classList.add("ship-image"),i.classList.add(`ship-image-${a}`),i.classList.add(`ship-image-${a}-${e+1}`)}return o})(t,o);a.getPlayers()[0].addShipToGameboard(Number(o.shipLength),i),(e=>{const t=e.elementID,a=document.querySelector(`#${t}`),s=a.parentNode.querySelector("button");a.setAttribute("draggable",!1),a.classList.add("disabled-image"),s.disabled=!0})(o),t.removeEventListener("drop",r)};return{initializeBoardDOM:()=>{const t=document.querySelector(".player-board"),a=document.querySelector(".opponent-board");e(t),e(a)},insertDraggedImage:r,rotateShipImage:e=>{const t=Array.from(e.classList);t.includes("horizontal")?(e.classList.remove("horizontal"),e.classList.add("vertical")):t.includes("vertical")&&(e.classList.remove("vertical"),e.classList.add("horizontal"))},rotateDraggedImage:e=>{const t=e.target.cloneNode(),a=document.createElement("div");a.classList.add("temp-rotate"),((e,t)=>{const a=Array.from(t.classList);a.includes("horizontal")?e.classList.add("temp-rotate-horizontal"):a.includes("vertical")&&(e.classList.add("temp-rotate-vertical"),"5"===t.dataset.shipLength?e.classList.add("temp-rotate-vertical-5"):"4"===t.dataset.shipLength?e.classList.add("temp-rotate-vertical-4"):"3"===t.dataset.shipLength?e.classList.add("temp-rotate-vertical-3"):"2"===t.dataset.shipLength&&e.classList.add("temp-rotate-vertical-2"))})(a,t),a.appendChild(t),document.body.appendChild(a),e.dataTransfer.setDragImage(a,0,0),setTimeout((()=>{document.body.removeChild(a)}),0)},getDraggedImage:e=>{const t={image:e.target.src,shipLength:e.target.dataset.shipLength,horizontal:!1,vertical:!1,elementID:e.target.getAttribute("id")};Array.from(e.target.classList).includes("horizontal")?t.horizontal=!0:Array.from(e.target.classList).includes("vertical")&&(t.vertical=!0),console.log(t);const a=JSON.stringify(t);e.dataTransfer.setData("image",a)},dragOver:s,addAttackResultDOM:(e,t,a)=>{const s=a[0],r=a[1];console.log(e);const o=document.querySelector(`.${e}-board`).querySelector(`[data-row='${s}'][data-column='${r}']`),i=document.createElement("img");i.classList.add("attack-results"),o.appendChild(i),"hit"===t?i.setAttribute("src","../dist/red_X.png"):i.setAttribute("src","../dist/white_O.png")}}})(),t=t=>{const s="human"!==t&&("computer"===t||void 0),r=(()=>{const e=(()=>{const e=[];for(let t=0;t<10;t++){e.push([]);for(let a=0;a<10;a++)e[t].push(void 0)}return e})(),t=[],a=[],s=[],r=[],o=[];let i=!1;const n=t=>e[t[0]][t[1]];return{getCoordinates:n,getPlacedShips:()=>t,getReceivedMissedShots:()=>a,getReceivedHitShots:()=>s,getSentMissedShots:()=>r,getSentHitShots:()=>o,isAllShipsSunk:()=>i,placeShip:(a,s)=>{for(const t of s)e[t[0]][t[1]]=a;t.push(a)},receiveAttack:e=>{const r=n(e);return void 0!==r?(r.hit(),t.every((e=>e.isSunk()))&&(i=!0),s.push(e),"hit"):(a.push(e),"miss")},addSentMissedShot:e=>{r.push(e)},addSentHitShot:e=>{o.push(e)}}})();let o;const i=()=>s,n=(e,t)=>{const a=(e=>{const t=e;let a=0,s=!1;return{getShipLength:()=>t,getShipHits:()=>a,isSunk:()=>s,hit:()=>{if(s)return"That ship has already been sunk!";a+=1,a===t&&(s=!0)}}})(e);r.placeShip(a,t)},d=t=>{const s=o.getGameboard(),n=o.receiveAttack(t);if("hit"===n){if(r.addSentHitShot(t),i()?i()&&e.addAttackResultDOM("player",n,t):e.addAttackResultDOM("opponent",n,t),s.isAllShipsSunk())return void a.endGame(o)}else"miss"===n&&(r.addSentMissedShot(t),i()?i()&&e.addAttackResultDOM("player",n,t):e.addAttackResultDOM("opponent",n,t));o.isComputer()&&o.sendComputerAttack()},l=e=>{let t=[];do{t=[];const a=c(),s=u(a,e);t.push(a),t=t.concat(s)}while(t.length<e);return t},c=()=>{const e=[void 0,void 0];do{e[0]=h(),e[1]=h()}while(void 0!==r.getCoordinates(e));return e},u=(e,t)=>{const a=[];if(m(e,t,"up")){const s=[];for(let a=1;a<t;a++)s.push([e[0]-a,e[1]]);a.push(s)}if(m(e,t,"right")){const s=[];for(let a=1;a<t;a++)s.push([e[0],e[1]+a]);a.push(s)}if(m(e,t,"down")){const s=[];for(let a=1;a<t;a++)s.push([e[0]+a,e[1]]);a.push(s)}if(m(e,t,"left")){const s=[];for(let a=1;a<t;a++)s.push([e[0],e[1]-a]);a.push(s)}return 0===a.length?a:a[Math.floor(Math.random()*a.length)]},h=()=>Math.floor(10*Math.random()),p=(e,t)=>e.some((e=>e[0]===t[0]&&e[1]===t[1])),m=(e,t,a)=>{switch(a){case"up":if(e[0]-(t-1)<0)return!1;for(let a=1;a<t;a++)if(void 0!==r.getCoordinates([e[0]-a,e[1]]))return!1;return!0;case"right":if(e[1]+(t-1)>9)return!1;for(let a=1;a<t;a++)if(void 0!==r.getCoordinates([e[0],e[1]+a]))return!1;return!0;case"down":if(e[0]+(t-1)>9)return!1;for(let a=1;a<t;a++)if(void 0!==r.getCoordinates([e[0]+a,e[1]]))return!1;return!0;case"left":if(e[1]-(t-1)<0)return!1;for(let a=1;a<t;a++)if(void 0!==r.getCoordinates([e[0],e[1]-a]))return!1;return!0}};return{isComputer:i,getGameboard:()=>r,getOpposingPlayer:()=>o,setOpposingPlayer:e=>{o=e},addShipToGameboard:n,sendAttack:d,initializeComputerGameboard:()=>{if(!s)return;const e=[5,4,3,3,2];for(const t of e){const e=l(t);n(t,e)}},sendComputerAttack:()=>{if(!s)return;const e=(()=>{const e=o.getGameboard().getReceivedMissedShots(),t=o.getGameboard().getReceivedHitShots(),a=[void 0,void 0];do{a[0]=h(),a[1]=h()}while(p(e,a)||p(t,a));return a})();d(e)},receiveAttack:e=>r.receiveAttack(e),checkIfValidEmptyCoordinates:m}},a=(()=>{const e=[];let a,s=!0;return{getPlayers:()=>e,isInProgress:()=>s,getWinner:()=>a,createGame:()=>{const a=t("human");e.push(a);const s=t("computer");e.push(s),a.setOpposingPlayer(s),s.setOpposingPlayer(a),s.initializeComputerGameboard()},endGame:e=>{s=!1,(e=>{const t=e.getOpposingPlayer();a=t})(e)},resetGame:()=>{e.length=0,s=!0,a=void 0}}})(),s=()=>{document.querySelectorAll(".ship-placement").forEach((t=>{const a=t.children[0];t.children[2].addEventListener("click",(()=>{e.rotateShipImage(a)}))}))},r=()=>{Array.from(document.querySelectorAll(".ship-piece")).forEach((t=>{t.addEventListener("dragstart",(t=>{e.getDraggedImage(t),e.rotateDraggedImage(t)}))}))};a.createGame(),e.initializeBoardDOM(),s(),r()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEtBQ1JySyxNQUFNQyxLQUFLWCxTQUFTcUMsaUJBQWlCLGdCQUM3Q0MsU0FBUzZFLElBQ2xCQSxFQUFLcEcsaUJBQWlCLGFBQWNDLElBQ2xDeEIsRUFBYzhGLGdCQUFnQnRFLEdBQzlCeEIsRUFBY29GLG1CQUFtQjVELEVBQU0sR0FDdkMsR0FDRixFQ2hCTkcsRUFBU3NKLGFBRVRqTCxFQUFjNkUscUJBRWQwRyxJQUVBQSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb2Rpbi1iYXR0bGVzaGlwLy4vc3JjL3NoaXAuanMiLCJ3ZWJwYWNrOi8vb2Rpbi1iYXR0bGVzaGlwLy4vc3JjL0RPTV9jb250cm9sbGVyLmpzIiwid2VicGFjazovL29kaW4tYmF0dGxlc2hpcC8uL3NyYy9wbGF5ZXIuanMiLCJ3ZWJwYWNrOi8vb2Rpbi1iYXR0bGVzaGlwLy4vc3JjL2dhbWVib2FyZC5qcyIsIndlYnBhY2s6Ly9vZGluLWJhdHRsZXNoaXAvLi9zcmMvZ2FtZWxvb3AuanMiLCJ3ZWJwYWNrOi8vb2Rpbi1iYXR0bGVzaGlwLy4vc3JjL2V2ZW50X2xpc3RlbmVyX2NvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vb2Rpbi1iYXR0bGVzaGlwLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFNoaXAgPSAoZ2l2ZW5MZW5ndGgpID0+IHtcbiAgY29uc3QgbGVuZ3RoID0gZ2l2ZW5MZW5ndGg7XG4gIGxldCBoaXRzID0gMDtcbiAgbGV0IHN1bmsgPSBmYWxzZTtcbiAgY29uc3QgZ2V0U2hpcExlbmd0aCA9ICgpID0+IGxlbmd0aDtcbiAgY29uc3QgZ2V0U2hpcEhpdHMgPSAoKSA9PiBoaXRzO1xuICBjb25zdCBpc1N1bmsgPSAoKSA9PiBzdW5rO1xuICBjb25zdCBjaGVja0lmU3VuayA9ICgpID0+IHtcbiAgICBpZiAoaGl0cyA9PT0gbGVuZ3RoKSB7XG4gICAgICBzdW5rID0gdHJ1ZTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGhpdCA9ICgpID0+IHtcbiAgICBpZiAoIXN1bmspIHtcbiAgICAgIGhpdHMgKz0gMTtcbiAgICAgIGNoZWNrSWZTdW5rKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBcIlRoYXQgc2hpcCBoYXMgYWxyZWFkeSBiZWVuIHN1bmshXCI7XG4gICAgfVxuICB9O1xuICByZXR1cm4ge1xuICAgIGdldFNoaXBMZW5ndGgsXG4gICAgZ2V0U2hpcEhpdHMsXG4gICAgaXNTdW5rLFxuICAgIGhpdCxcbiAgfTtcbn07XG5cbmV4cG9ydCB7IFNoaXAgfTtcbiIsImltcG9ydCB7IEdhbWVMb29wIH0gZnJvbSBcIi4vZ2FtZWxvb3BcIjtcblxuY29uc3QgRE9NQ29udHJvbGxlciA9ICgoKSA9PiB7XG4gIGNvbnN0IGNyZWF0ZUJvYXJkQ2VsbHMgPSAoZ2FtZWJvYXJkRE9NKSA9PiB7XG4gICAgY29uc3QgQk9BUkRBWEVTTEVOR1RIID0gMTA7XG4gICAgY29uc3QgY29sdW1uTGFiZWxzID0gW1wiQVwiLCBcIkJcIiwgXCJDXCIsIFwiRFwiLCBcIkVcIiwgXCJGXCIsIFwiR1wiLCBcIkhcIiwgXCJJXCIsIFwiSlwiXTtcbiAgICBjb25zdCByb3dMYWJlbHMgPSBbXCIxXCIsIFwiMlwiLCBcIjNcIiwgXCI0XCIsIFwiNVwiLCBcIjZcIiwgXCI3XCIsIFwiOFwiLCBcIjlcIiwgXCIxMFwiXTtcbiAgICBmb3IgKGxldCBpID0gLTE7IGkgPCBCT0FSREFYRVNMRU5HVEg7IGkrKykge1xuICAgICAgZm9yIChsZXQgaiA9IC0xOyBqIDwgQk9BUkRBWEVTTEVOR1RIOyBqKyspIHtcbiAgICAgICAgaWYgKGkgPT09IC0xKSB7XG4gICAgICAgICAgaWYgKGogPT09IC0xKSB7XG4gICAgICAgICAgICBjb25zdCBpbnZpc2libGVQbGFjZWhvbGRlckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgaW52aXNpYmxlUGxhY2Vob2xkZXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJnYW1lYm9hcmQtbGFiZWxcIik7XG4gICAgICAgICAgICBpbnZpc2libGVQbGFjZWhvbGRlckVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG4gICAgICAgICAgICBnYW1lYm9hcmRET00uYXBwZW5kQ2hpbGQoaW52aXNpYmxlUGxhY2Vob2xkZXJFbGVtZW50KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgY29sdW1uTGFiZWxFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIGNvbHVtbkxhYmVsRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiY29sdW1uLWxhYmVsXCIpO1xuICAgICAgICAgICAgY29sdW1uTGFiZWxFbGVtZW50LnRleHRDb250ZW50ID0gY29sdW1uTGFiZWxzW2pdO1xuICAgICAgICAgICAgZ2FtZWJvYXJkRE9NLmFwcGVuZENoaWxkKGNvbHVtbkxhYmVsRWxlbWVudCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGogPT09IC0xKSB7XG4gICAgICAgICAgY29uc3Qgcm93TGFiZWxFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICByb3dMYWJlbEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInJvdy1sYWJlbFwiKTtcbiAgICAgICAgICByb3dMYWJlbEVsZW1lbnQudGV4dENvbnRlbnQgPSByb3dMYWJlbHNbaV07XG4gICAgICAgICAgZ2FtZWJvYXJkRE9NLmFwcGVuZENoaWxkKHJvd0xhYmVsRWxlbWVudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gY29uc3QgY2VsbEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgIC8vIGNlbGxFbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtcm93XCIsIGkpO1xuICAgICAgICAgIC8vIGNlbGxFbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtY29sdW1uXCIsIGopO1xuICAgICAgICAgIC8vIGNlbGxFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJnYW1lYm9hcmQtY2VsbFwiKTtcbiAgICAgICAgICAvLyBjZWxsRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ292ZXJcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgLy8gICBkcmFnT3ZlcihldmVudCk7XG4gICAgICAgICAgLy8gfSk7XG4gICAgICAgICAgLy8gY2VsbEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyb3BcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgLy8gICBpbnNlcnREcmFnZ2VkSW1hZ2UoZXZlbnQpO1xuICAgICAgICAgIC8vIH0pO1xuICAgICAgICAgIGlmIChBcnJheS5mcm9tKGdhbWVib2FyZERPTS5jbGFzc0xpc3QpLmluY2x1ZGVzKFwicGxheWVyLWJvYXJkXCIpKSB7XG4gICAgICAgICAgICBjb25zdCBjZWxsRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBjZWxsRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXJvd1wiLCBpKTtcbiAgICAgICAgICAgIGNlbGxFbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtY29sdW1uXCIsIGopO1xuICAgICAgICAgICAgY2VsbEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImdhbWVib2FyZC1jZWxsXCIpO1xuICAgICAgICAgICAgY2VsbEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdvdmVyXCIsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgICBkcmFnT3ZlcihldmVudCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNlbGxFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkcm9wXCIsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgICBpbnNlcnREcmFnZ2VkSW1hZ2UoZXZlbnQpO1xuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgR2FtZUxvb3AuZ2V0UGxheWVycygpWzBdLmdldEdhbWVib2FyZCgpLmdldFBsYWNlZFNoaXBzKClcbiAgICAgICAgICAgICAgICAgIC5sZW5ndGggPT09IDVcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgZW5hYmxlQ29tcHV0ZXJHYW1lYm9hcmQoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBnYW1lYm9hcmRET00uYXBwZW5kQ2hpbGQoY2VsbEVsZW1lbnQpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICBBcnJheS5mcm9tKGdhbWVib2FyZERPTS5jbGFzc0xpc3QpLmluY2x1ZGVzKFwib3Bwb25lbnQtYm9hcmRcIilcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnN0IGNlbGxFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgICAgIGNlbGxFbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtcm93XCIsIGkpO1xuICAgICAgICAgICAgY2VsbEVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1jb2x1bW5cIiwgaik7XG4gICAgICAgICAgICBjZWxsRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZ2FtZWJvYXJkLWNlbGxcIik7XG4gICAgICAgICAgICBjZWxsRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICBjZWxsRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNlbGxFbGVtZW50KTtcbiAgICAgICAgICAgICAgY29uc3QgY2VsbFJvdyA9IE51bWJlcihjZWxsRWxlbWVudC5kYXRhc2V0LnJvdyk7XG4gICAgICAgICAgICAgIGNvbnN0IGNlbGxDb2x1bW4gPSBOdW1iZXIoY2VsbEVsZW1lbnQuZGF0YXNldC5jb2x1bW4pO1xuICAgICAgICAgICAgICBHYW1lTG9vcC5nZXRQbGF5ZXJzKClbMF0uc2VuZEF0dGFjayhbY2VsbFJvdywgY2VsbENvbHVtbl0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBnYW1lYm9hcmRET00uYXBwZW5kQ2hpbGQoY2VsbEVsZW1lbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBzb21lIGNsaWNrIGV2ZW50IGxpc3RlbmVyIHdoZXJlIGF0dGFjayBpcyBtYWRlIE9SIHByaW9yIHRvIHRoYXQsIHBsYWNpbmcgc2hpcCBvbiB0aGF0IGNlbGxcbiAgICAgICAgICAvLyBnYW1lYm9hcmRET00uYXBwZW5kQ2hpbGQoY2VsbEVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuICBjb25zdCBlbmFibGVDb21wdXRlckdhbWVib2FyZCA9ICgpID0+IHtcbiAgICBjb25zdCBjb21wdXRlckdhbWVib2FyZEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm9wcG9uZW50LWJvYXJkXCIpO1xuICAgIGNvbnN0IGNlbGxFbGVtZW50cyA9IEFycmF5LmZyb20oXG4gICAgICBjb21wdXRlckdhbWVib2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5nYW1lYm9hcmQtY2VsbFwiKVxuICAgICk7XG4gICAgY2VsbEVsZW1lbnRzLmZvckVhY2goKGNlbGxFbGVtZW50KSA9PiB7XG4gICAgICBjZWxsRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH0pO1xuICB9O1xuICBjb25zdCBnZXREcmFnZ2VkSW1hZ2UgPSAoZXZlbnQpID0+IHtcbiAgICBjb25zdCBkYXRhT2JqZWN0ID0ge1xuICAgICAgaW1hZ2U6IGV2ZW50LnRhcmdldC5zcmMsXG4gICAgICBzaGlwTGVuZ3RoOiBldmVudC50YXJnZXQuZGF0YXNldC5zaGlwTGVuZ3RoLFxuICAgICAgaG9yaXpvbnRhbDogZmFsc2UsXG4gICAgICB2ZXJ0aWNhbDogZmFsc2UsXG4gICAgICBlbGVtZW50SUQ6IGV2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJpZFwiKSxcbiAgICB9O1xuICAgIGlmIChBcnJheS5mcm9tKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QpLmluY2x1ZGVzKFwiaG9yaXpvbnRhbFwiKSkge1xuICAgICAgZGF0YU9iamVjdC5ob3Jpem9udGFsID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKEFycmF5LmZyb20oZXZlbnQudGFyZ2V0LmNsYXNzTGlzdCkuaW5jbHVkZXMoXCJ2ZXJ0aWNhbFwiKSkge1xuICAgICAgZGF0YU9iamVjdC52ZXJ0aWNhbCA9IHRydWU7XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKGRhdGFPYmplY3QpO1xuICAgIGNvbnN0IGRhdGFTdHJpbmcgPSBKU09OLnN0cmluZ2lmeShkYXRhT2JqZWN0KTtcbiAgICBldmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YShcImltYWdlXCIsIGRhdGFTdHJpbmcpO1xuICB9O1xuICBjb25zdCBkcmFnT3ZlciA9ICgpID0+IHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICB9O1xuICBjb25zdCBpbml0aWFsaXplQm9hcmRET00gPSAoKSA9PiB7XG4gICAgY29uc3QgaHVtYW5QbGF5ZXJHYW1lYm9hcmRET00gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBsYXllci1ib2FyZFwiKTtcbiAgICBjb25zdCBvcHBvbmVudEdhbWVib2FyZERPTSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIub3Bwb25lbnQtYm9hcmRcIik7XG4gICAgY3JlYXRlQm9hcmRDZWxscyhodW1hblBsYXllckdhbWVib2FyZERPTSk7XG4gICAgY3JlYXRlQm9hcmRDZWxscyhvcHBvbmVudEdhbWVib2FyZERPTSk7XG4gIH07XG4gIGNvbnN0IGlzVmFsaWRHYW1lYm9hcmRDZWxsID0gKHRhcmdldENlbGwsIGRhdGFPYmplY3QpID0+IHtcbiAgICBjb25zdCBjZWxsQ29vcmRpbmF0ZXMgPSBbXG4gICAgICBOdW1iZXIodGFyZ2V0Q2VsbC5kYXRhc2V0LnJvdyksXG4gICAgICBOdW1iZXIodGFyZ2V0Q2VsbC5kYXRhc2V0LmNvbHVtbiksXG4gICAgXTtcbiAgICBjb25zdCBsZW5ndGggPSBOdW1iZXIoZGF0YU9iamVjdC5zaGlwTGVuZ3RoKTtcbiAgICBpZiAoZGF0YU9iamVjdC5ob3Jpem9udGFsKSB7XG4gICAgICBpZiAoXG4gICAgICAgIEdhbWVMb29wLmdldFBsYXllcnMoKVswXS5jaGVja0lmVmFsaWRFbXB0eUNvb3JkaW5hdGVzKFxuICAgICAgICAgIGNlbGxDb29yZGluYXRlcyxcbiAgICAgICAgICBsZW5ndGgsXG4gICAgICAgICAgXCJyaWdodFwiXG4gICAgICAgIClcbiAgICAgICkge1xuICAgICAgICBjb25zb2xlLmxvZyhcImZpdHNcIik7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coXCJub3BlXCIpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoZGF0YU9iamVjdC52ZXJ0aWNhbCkge1xuICAgICAgaWYgKFxuICAgICAgICBHYW1lTG9vcC5nZXRQbGF5ZXJzKClbMF0uY2hlY2tJZlZhbGlkRW1wdHlDb29yZGluYXRlcyhcbiAgICAgICAgICBjZWxsQ29vcmRpbmF0ZXMsXG4gICAgICAgICAgbGVuZ3RoLFxuICAgICAgICAgIFwiZG93blwiXG4gICAgICAgIClcbiAgICAgICkge1xuICAgICAgICBjb25zb2xlLmxvZyhcImZpdHNcIik7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coXCJub3BlXCIpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgYWRkU2hpcFRvRE9NID0gKHRhcmdldENlbGwsIGRhdGFPYmplY3QpID0+IHtcbiAgICBjb25zdCBsZW5ndGggPSBkYXRhT2JqZWN0LnNoaXBMZW5ndGg7XG4gICAgY29uc3QgdGFyZ2V0Q2VsbFJvdyA9IE51bWJlcih0YXJnZXRDZWxsLmRhdGFzZXQucm93KTtcbiAgICBjb25zdCB0YXJnZXRDZWxsQ29sdW1uID0gTnVtYmVyKHRhcmdldENlbGwuZGF0YXNldC5jb2x1bW4pO1xuICAgIGNvbnN0IGNvb3JkaW5hdGVzQXJyYXkgPSBbW3RhcmdldENlbGxSb3csIHRhcmdldENlbGxDb2x1bW5dXTtcbiAgICB0YXJnZXRDZWxsLmNsYXNzTGlzdC5hZGQoXCJjb250YWlucy1zaGlwLWltYWdlXCIpO1xuICAgIHRhcmdldENlbGwuY2xhc3NMaXN0LmFkZChcInNoaXAtaW1hZ2VcIik7XG4gICAgdGFyZ2V0Q2VsbC5jbGFzc0xpc3QuYWRkKGBzaGlwLWltYWdlLSR7bGVuZ3RofWApO1xuICAgIHRhcmdldENlbGwuY2xhc3NMaXN0LmFkZChgc2hpcC1pbWFnZS0ke2xlbmd0aH0tMWApO1xuICAgIGlmIChkYXRhT2JqZWN0Lmhvcml6b250YWwpIHtcbiAgICAgIHRhcmdldENlbGwuY2xhc3NMaXN0LmFkZChcImhvcml6b250YWxcIik7XG4gICAgfSBlbHNlIGlmIChkYXRhT2JqZWN0LnZlcnRpY2FsKSB7XG4gICAgICB0YXJnZXRDZWxsLmNsYXNzTGlzdC5hZGQoXCJ2ZXJ0aWNhbFwiKTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgbGV0IHJlbWFpbmluZ0NlbGw7XG4gICAgICBpZiAoZGF0YU9iamVjdC5ob3Jpem9udGFsKSB7XG4gICAgICAgIHJlbWFpbmluZ0NlbGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgIGAucGxheWVyLWJvYXJkIFtkYXRhLXJvdz0nJHt0YXJnZXRDZWxsUm93fSddW2RhdGEtY29sdW1uPScke1xuICAgICAgICAgICAgdGFyZ2V0Q2VsbENvbHVtbiArIGlcbiAgICAgICAgICB9J11gXG4gICAgICAgICk7XG4gICAgICAgIHJlbWFpbmluZ0NlbGwuY2xhc3NMaXN0LmFkZChcImhvcml6b250YWxcIik7XG4gICAgICAgIGNvb3JkaW5hdGVzQXJyYXkucHVzaChbdGFyZ2V0Q2VsbFJvdywgdGFyZ2V0Q2VsbENvbHVtbiArIGldKTtcbiAgICAgIH0gZWxzZSBpZiAoZGF0YU9iamVjdC52ZXJ0aWNhbCkge1xuICAgICAgICByZW1haW5pbmdDZWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICBgLnBsYXllci1ib2FyZCBbZGF0YS1yb3c9JyR7XG4gICAgICAgICAgICB0YXJnZXRDZWxsUm93ICsgaVxuICAgICAgICAgIH0nXVtkYXRhLWNvbHVtbj0nJHt0YXJnZXRDZWxsQ29sdW1ufSddYFxuICAgICAgICApO1xuICAgICAgICByZW1haW5pbmdDZWxsLmNsYXNzTGlzdC5hZGQoXCJ2ZXJ0aWNhbFwiKTtcbiAgICAgICAgY29vcmRpbmF0ZXNBcnJheS5wdXNoKFt0YXJnZXRDZWxsUm93ICsgaSwgdGFyZ2V0Q2VsbENvbHVtbl0pO1xuICAgICAgfVxuICAgICAgcmVtYWluaW5nQ2VsbC5jbGFzc0xpc3QuYWRkKFwiY29udGFpbnMtc2hpcC1pbWFnZVwiKTtcbiAgICAgIHJlbWFpbmluZ0NlbGwuY2xhc3NMaXN0LmFkZChcInNoaXAtaW1hZ2VcIik7XG4gICAgICByZW1haW5pbmdDZWxsLmNsYXNzTGlzdC5hZGQoYHNoaXAtaW1hZ2UtJHtsZW5ndGh9YCk7XG4gICAgICByZW1haW5pbmdDZWxsLmNsYXNzTGlzdC5hZGQoYHNoaXAtaW1hZ2UtJHtsZW5ndGh9LSR7aSArIDF9YCk7XG4gICAgfVxuICAgIHJldHVybiBjb29yZGluYXRlc0FycmF5O1xuICB9O1xuICBjb25zdCBkaXNhYmxlSW1hZ2VCdXR0b25JbnRlcmFjdGlvbnMgPSAoZGF0YU9iamVjdCkgPT4ge1xuICAgIGNvbnN0IElEID0gZGF0YU9iamVjdC5lbGVtZW50SUQ7XG4gICAgY29uc3QgaW1hZ2VFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7SUR9YCk7XG4gICAgY29uc3QgYnV0dG9uRWxlbWVudCA9IGltYWdlRWxlbWVudC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoXCJidXR0b25cIik7XG4gICAgaW1hZ2VFbGVtZW50LnNldEF0dHJpYnV0ZShcImRyYWdnYWJsZVwiLCBmYWxzZSk7XG4gICAgaW1hZ2VFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZC1pbWFnZVwiKTtcbiAgICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgfTtcbiAgY29uc3QgaW5zZXJ0RHJhZ2dlZEltYWdlID0gKGV2ZW50KSA9PiB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCB0YXJnZXRDZWxsID0gZXZlbnQudGFyZ2V0O1xuICAgIGlmIChBcnJheS5mcm9tKHRhcmdldENlbGwuY2xhc3NMaXN0KS5pbmNsdWRlcyhcImNvbnRhaW5zLXNoaXAtaW1hZ2VcIikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZGF0YVN0cmluZyA9IGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKFwiaW1hZ2VcIik7XG4gICAgY29uc3QgZGF0YU9iamVjdCA9IEpTT04ucGFyc2UoZGF0YVN0cmluZyk7XG4gICAgaWYgKCFpc1ZhbGlkR2FtZWJvYXJkQ2VsbCh0YXJnZXRDZWxsLCBkYXRhT2JqZWN0KSkge1xuICAgICAgLy8gcHJvYmFibHkgbWFrZSBzb21lIERPTSBlcnJvciBtZXNzYWdlIGFwcGVhclxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBzaGlwQ29vcmRpbmF0ZXMgPSBhZGRTaGlwVG9ET00odGFyZ2V0Q2VsbCwgZGF0YU9iamVjdCk7XG4gICAgR2FtZUxvb3AuZ2V0UGxheWVycygpWzBdLmFkZFNoaXBUb0dhbWVib2FyZChcbiAgICAgIE51bWJlcihkYXRhT2JqZWN0LnNoaXBMZW5ndGgpLFxuICAgICAgc2hpcENvb3JkaW5hdGVzXG4gICAgKTtcbiAgICBkaXNhYmxlSW1hZ2VCdXR0b25JbnRlcmFjdGlvbnMoZGF0YU9iamVjdCk7XG4gICAgdGFyZ2V0Q2VsbC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZHJvcFwiLCBpbnNlcnREcmFnZ2VkSW1hZ2UpO1xuICB9O1xuICBjb25zdCByb3RhdGVTaGlwSW1hZ2UgPSAoaW1hZ2UpID0+IHtcbiAgICBjb25zdCBpbWFnZUNsYXNzZXMgPSBBcnJheS5mcm9tKGltYWdlLmNsYXNzTGlzdCk7XG4gICAgaWYgKGltYWdlQ2xhc3Nlcy5pbmNsdWRlcyhcImhvcml6b250YWxcIikpIHtcbiAgICAgIGltYWdlLmNsYXNzTGlzdC5yZW1vdmUoXCJob3Jpem9udGFsXCIpO1xuICAgICAgaW1hZ2UuY2xhc3NMaXN0LmFkZChcInZlcnRpY2FsXCIpO1xuICAgIH0gZWxzZSBpZiAoaW1hZ2VDbGFzc2VzLmluY2x1ZGVzKFwidmVydGljYWxcIikpIHtcbiAgICAgIGltYWdlLmNsYXNzTGlzdC5yZW1vdmUoXCJ2ZXJ0aWNhbFwiKTtcbiAgICAgIGltYWdlLmNsYXNzTGlzdC5hZGQoXCJob3Jpem9udGFsXCIpO1xuICAgIH1cbiAgfTtcbiAgY29uc3Qgcm90YXRlUGVyTGVuZ3RoID0gKHRlbXBEaXYsIGNsb25lZEltYWdlRWxlbWVudCkgPT4ge1xuICAgIGNvbnN0IGNsb25lZEltYWdlRWxlbWVudENsYXNzZXMgPSBBcnJheS5mcm9tKGNsb25lZEltYWdlRWxlbWVudC5jbGFzc0xpc3QpO1xuICAgIGlmIChjbG9uZWRJbWFnZUVsZW1lbnRDbGFzc2VzLmluY2x1ZGVzKFwiaG9yaXpvbnRhbFwiKSkge1xuICAgICAgdGVtcERpdi5jbGFzc0xpc3QuYWRkKFwidGVtcC1yb3RhdGUtaG9yaXpvbnRhbFwiKTtcbiAgICB9IGVsc2UgaWYgKGNsb25lZEltYWdlRWxlbWVudENsYXNzZXMuaW5jbHVkZXMoXCJ2ZXJ0aWNhbFwiKSkge1xuICAgICAgdGVtcERpdi5jbGFzc0xpc3QuYWRkKFwidGVtcC1yb3RhdGUtdmVydGljYWxcIik7XG4gICAgICBpZiAoY2xvbmVkSW1hZ2VFbGVtZW50LmRhdGFzZXQuc2hpcExlbmd0aCA9PT0gXCI1XCIpIHtcbiAgICAgICAgdGVtcERpdi5jbGFzc0xpc3QuYWRkKFwidGVtcC1yb3RhdGUtdmVydGljYWwtNVwiKTtcbiAgICAgIH0gZWxzZSBpZiAoY2xvbmVkSW1hZ2VFbGVtZW50LmRhdGFzZXQuc2hpcExlbmd0aCA9PT0gXCI0XCIpIHtcbiAgICAgICAgdGVtcERpdi5jbGFzc0xpc3QuYWRkKFwidGVtcC1yb3RhdGUtdmVydGljYWwtNFwiKTtcbiAgICAgIH0gZWxzZSBpZiAoY2xvbmVkSW1hZ2VFbGVtZW50LmRhdGFzZXQuc2hpcExlbmd0aCA9PT0gXCIzXCIpIHtcbiAgICAgICAgdGVtcERpdi5jbGFzc0xpc3QuYWRkKFwidGVtcC1yb3RhdGUtdmVydGljYWwtM1wiKTtcbiAgICAgIH0gZWxzZSBpZiAoY2xvbmVkSW1hZ2VFbGVtZW50LmRhdGFzZXQuc2hpcExlbmd0aCA9PT0gXCIyXCIpIHtcbiAgICAgICAgdGVtcERpdi5jbGFzc0xpc3QuYWRkKFwidGVtcC1yb3RhdGUtdmVydGljYWwtMlwiKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGNvbnN0IHJvdGF0ZURyYWdnZWRJbWFnZSA9IChldmVudCkgPT4ge1xuICAgIGNvbnN0IGltYWdlRWxlbWVudCA9IGV2ZW50LnRhcmdldDtcbiAgICBjb25zdCBjbG9uZWRJbWFnZUVsZW1lbnQgPSBpbWFnZUVsZW1lbnQuY2xvbmVOb2RlKCk7XG4gICAgY29uc3QgdGVtcERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGVtcERpdi5jbGFzc0xpc3QuYWRkKFwidGVtcC1yb3RhdGVcIik7XG4gICAgcm90YXRlUGVyTGVuZ3RoKHRlbXBEaXYsIGNsb25lZEltYWdlRWxlbWVudCk7XG4gICAgdGVtcERpdi5hcHBlbmRDaGlsZChjbG9uZWRJbWFnZUVsZW1lbnQpO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGVtcERpdik7XG4gICAgZXZlbnQuZGF0YVRyYW5zZmVyLnNldERyYWdJbWFnZSh0ZW1wRGl2LCAwLCAwKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGVtcERpdik7XG4gICAgfSwgMCk7XG4gIH07XG4gIGNvbnN0IGFkZEF0dGFja1Jlc3VsdERPTSA9IChwbGF5ZXJUeXBlLCBhdHRhY2tSZXN1bHRzLCBjb29yZGluYXRlcykgPT4ge1xuICAgIGNvbnN0IGNlbGxSb3cgPSBjb29yZGluYXRlc1swXTtcbiAgICBjb25zdCBjZWxsQ29sdW1uID0gY29vcmRpbmF0ZXNbMV07XG4gICAgY29uc29sZS5sb2cocGxheWVyVHlwZSk7XG4gICAgY29uc3QgZ2FtZWJvYXJkRE9NID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7cGxheWVyVHlwZX0tYm9hcmRgKTtcbiAgICBjb25zdCB0YXJnZXRDZWxsID0gZ2FtZWJvYXJkRE9NLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgW2RhdGEtcm93PScke2NlbGxSb3d9J11bZGF0YS1jb2x1bW49JyR7Y2VsbENvbHVtbn0nXWBcbiAgICApO1xuICAgIGNvbnN0IGF0dGFja1Jlc3VsdHNFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgICBhdHRhY2tSZXN1bHRzRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiYXR0YWNrLXJlc3VsdHNcIik7XG4gICAgdGFyZ2V0Q2VsbC5hcHBlbmRDaGlsZChhdHRhY2tSZXN1bHRzRWxlbWVudCk7XG4gICAgaWYgKGF0dGFja1Jlc3VsdHMgPT09IFwiaGl0XCIpIHtcbiAgICAgIGF0dGFja1Jlc3VsdHNFbGVtZW50LnNldEF0dHJpYnV0ZShcInNyY1wiLCBcIi4uL2Rpc3QvcmVkX1gucG5nXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhdHRhY2tSZXN1bHRzRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgXCIuLi9kaXN0L3doaXRlX08ucG5nXCIpO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIHtcbiAgICBpbml0aWFsaXplQm9hcmRET00sXG4gICAgaW5zZXJ0RHJhZ2dlZEltYWdlLFxuICAgIHJvdGF0ZVNoaXBJbWFnZSxcbiAgICByb3RhdGVEcmFnZ2VkSW1hZ2UsXG4gICAgZ2V0RHJhZ2dlZEltYWdlLFxuICAgIGRyYWdPdmVyLFxuICAgIGFkZEF0dGFja1Jlc3VsdERPTSxcbiAgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IERPTUNvbnRyb2xsZXIgfTtcbiIsImltcG9ydCB7IFNoaXAgfSBmcm9tIFwiLi9zaGlwXCI7XG5pbXBvcnQgeyBHYW1lYm9hcmQgfSBmcm9tIFwiLi9nYW1lYm9hcmRcIjtcbmltcG9ydCB7IEdhbWVMb29wIH0gZnJvbSBcIi4vZ2FtZWxvb3BcIjtcbmltcG9ydCB7IERPTUNvbnRyb2xsZXIgfSBmcm9tIFwiLi9ET01fY29udHJvbGxlclwiO1xuXG5jb25zdCBQbGF5ZXIgPSAocGxheWVyVHlwZSkgPT4ge1xuICBjb25zdCBkZXRlcm1pbmVQbGF5ZXJUeXBlID0gKCkgPT4ge1xuICAgIGlmIChwbGF5ZXJUeXBlID09PSBcImh1bWFuXCIpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHBsYXllclR5cGUgPT09IFwiY29tcHV0ZXJcIikge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9O1xuICBjb25zdCBjb21wdXRlclBsYXllciA9IGRldGVybWluZVBsYXllclR5cGUoKTtcbiAgY29uc3QgcGxheWVyR2FtZWJvYXJkID0gR2FtZWJvYXJkKCk7XG4gIGxldCBvcHBvc2luZ1BsYXllcjtcbiAgY29uc3QgaXNDb21wdXRlciA9ICgpID0+IGNvbXB1dGVyUGxheWVyO1xuICBjb25zdCBnZXRHYW1lYm9hcmQgPSAoKSA9PiBwbGF5ZXJHYW1lYm9hcmQ7XG4gIGNvbnN0IGdldE9wcG9zaW5nUGxheWVyID0gKCkgPT4gb3Bwb3NpbmdQbGF5ZXI7XG4gIGNvbnN0IHNldE9wcG9zaW5nUGxheWVyID0gKHBsYXllcikgPT4ge1xuICAgIG9wcG9zaW5nUGxheWVyID0gcGxheWVyO1xuICB9O1xuICBjb25zdCBhZGRTaGlwVG9HYW1lYm9hcmQgPSAoc2hpcExlbmd0aCwgY29vcmRpbmF0ZXMpID0+IHtcbiAgICBjb25zdCBzaGlwID0gU2hpcChzaGlwTGVuZ3RoKTtcbiAgICBwbGF5ZXJHYW1lYm9hcmQucGxhY2VTaGlwKHNoaXAsIGNvb3JkaW5hdGVzKTtcbiAgfTtcbiAgY29uc3Qgc2VuZEF0dGFjayA9IChjb29yZGluYXRlcykgPT4ge1xuICAgIGNvbnN0IG9wcG9zaW5nUGxheWVyR2FtZWJvYXJkID0gb3Bwb3NpbmdQbGF5ZXIuZ2V0R2FtZWJvYXJkKCk7XG4gICAgY29uc3QgYXR0YWNrUmVzdWx0cyA9IG9wcG9zaW5nUGxheWVyLnJlY2VpdmVBdHRhY2soY29vcmRpbmF0ZXMpO1xuICAgIGlmIChhdHRhY2tSZXN1bHRzID09PSBcImhpdFwiKSB7XG4gICAgICBwbGF5ZXJHYW1lYm9hcmQuYWRkU2VudEhpdFNob3QoY29vcmRpbmF0ZXMpO1xuICAgICAgaWYgKCFpc0NvbXB1dGVyKCkpIHtcbiAgICAgICAgRE9NQ29udHJvbGxlci5hZGRBdHRhY2tSZXN1bHRET00oXG4gICAgICAgICAgXCJvcHBvbmVudFwiLFxuICAgICAgICAgIGF0dGFja1Jlc3VsdHMsXG4gICAgICAgICAgY29vcmRpbmF0ZXNcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSBpZiAoaXNDb21wdXRlcigpKSB7XG4gICAgICAgIERPTUNvbnRyb2xsZXIuYWRkQXR0YWNrUmVzdWx0RE9NKFwicGxheWVyXCIsIGF0dGFja1Jlc3VsdHMsIGNvb3JkaW5hdGVzKTtcbiAgICAgIH1cbiAgICAgIGlmIChvcHBvc2luZ1BsYXllckdhbWVib2FyZC5pc0FsbFNoaXBzU3VuaygpKSB7XG4gICAgICAgIEdhbWVMb29wLmVuZEdhbWUob3Bwb3NpbmdQbGF5ZXIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChhdHRhY2tSZXN1bHRzID09PSBcIm1pc3NcIikge1xuICAgICAgcGxheWVyR2FtZWJvYXJkLmFkZFNlbnRNaXNzZWRTaG90KGNvb3JkaW5hdGVzKTtcbiAgICAgIGlmICghaXNDb21wdXRlcigpKSB7XG4gICAgICAgIERPTUNvbnRyb2xsZXIuYWRkQXR0YWNrUmVzdWx0RE9NKFxuICAgICAgICAgIFwib3Bwb25lbnRcIixcbiAgICAgICAgICBhdHRhY2tSZXN1bHRzLFxuICAgICAgICAgIGNvb3JkaW5hdGVzXG4gICAgICAgICk7XG4gICAgICB9IGVsc2UgaWYgKGlzQ29tcHV0ZXIoKSkge1xuICAgICAgICBET01Db250cm9sbGVyLmFkZEF0dGFja1Jlc3VsdERPTShcInBsYXllclwiLCBhdHRhY2tSZXN1bHRzLCBjb29yZGluYXRlcyk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChvcHBvc2luZ1BsYXllci5pc0NvbXB1dGVyKCkpIHtcbiAgICAgIG9wcG9zaW5nUGxheWVyLnNlbmRDb21wdXRlckF0dGFjaygpO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgaW5pdGlhbGl6ZUNvbXB1dGVyR2FtZWJvYXJkID0gKCkgPT4ge1xuICAgIGlmICghY29tcHV0ZXJQbGF5ZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgbGVuZ3Roc09mU2hpcHMgPSBbNSwgNCwgMywgMywgMl07XG4gICAgZm9yIChjb25zdCBzaGlwTGVuZ3RoIG9mIGxlbmd0aHNPZlNoaXBzKSB7XG4gICAgICBjb25zdCBzaGlwQ29vcmRpbmF0ZXMgPSBnZW5lcmF0ZUNvbXB1dGVyU2hpcENvb3JkaW5hdGVzKHNoaXBMZW5ndGgpO1xuICAgICAgYWRkU2hpcFRvR2FtZWJvYXJkKHNoaXBMZW5ndGgsIHNoaXBDb29yZGluYXRlcyk7XG4gICAgfVxuICB9O1xuICBjb25zdCBzZW5kQ29tcHV0ZXJBdHRhY2sgPSAoKSA9PiB7XG4gICAgaWYgKCFjb21wdXRlclBsYXllcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBhdHRhY2tDb29yZGluYXRlcyA9IGdlbmVyYXRlQXR0YWNrQ29vcmRpbmF0ZXMoKTtcbiAgICBzZW5kQXR0YWNrKGF0dGFja0Nvb3JkaW5hdGVzKTtcbiAgfTtcbiAgY29uc3QgcmVjZWl2ZUF0dGFjayA9IChjb29yZGluYXRlcykgPT4ge1xuICAgIGNvbnN0IGF0dGFja1Jlc3VsdHMgPSBwbGF5ZXJHYW1lYm9hcmQucmVjZWl2ZUF0dGFjayhjb29yZGluYXRlcyk7XG4gICAgcmV0dXJuIGF0dGFja1Jlc3VsdHM7XG4gIH07XG4gIGNvbnN0IGdlbmVyYXRlQ29tcHV0ZXJTaGlwQ29vcmRpbmF0ZXMgPSAoc2hpcExlbmd0aCkgPT4ge1xuICAgIGxldCBsaXN0T2ZDb29yZGluYXRlcyA9IFtdO1xuICAgIGRvIHtcbiAgICAgIGxpc3RPZkNvb3JkaW5hdGVzID0gW107XG4gICAgICBjb25zdCBzdGFydGluZ0Nvb3JkaW5hdGVzID0gZ2VuZXJhdGVTdGFydGluZ0Nvb3JkaW5hdGVzKCk7XG4gICAgICBjb25zdCBub25TdGFydGluZ0Nvb3JkaW5hdGVzID0gZ2VuZXJhdGVOb25TdGFydGluZ0Nvb3JkaW5hdGVzKFxuICAgICAgICBzdGFydGluZ0Nvb3JkaW5hdGVzLFxuICAgICAgICBzaGlwTGVuZ3RoXG4gICAgICApO1xuICAgICAgbGlzdE9mQ29vcmRpbmF0ZXMucHVzaChzdGFydGluZ0Nvb3JkaW5hdGVzKTtcbiAgICAgIGxpc3RPZkNvb3JkaW5hdGVzID0gbGlzdE9mQ29vcmRpbmF0ZXMuY29uY2F0KG5vblN0YXJ0aW5nQ29vcmRpbmF0ZXMpO1xuICAgIH0gd2hpbGUgKGxpc3RPZkNvb3JkaW5hdGVzLmxlbmd0aCA8IHNoaXBMZW5ndGgpO1xuICAgIHJldHVybiBsaXN0T2ZDb29yZGluYXRlcztcbiAgfTtcbiAgY29uc3QgZ2VuZXJhdGVTdGFydGluZ0Nvb3JkaW5hdGVzID0gKCkgPT4ge1xuICAgIGNvbnN0IHN0YXJ0aW5nQ29vcmRpbmF0ZXMgPSBbdW5kZWZpbmVkLCB1bmRlZmluZWRdO1xuICAgIGRvIHtcbiAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMF0gPSBnZW5lcmF0ZVJhbmRvbUNvb3JkaW5hdGUoKTtcbiAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMV0gPSBnZW5lcmF0ZVJhbmRvbUNvb3JkaW5hdGUoKTtcbiAgICB9IHdoaWxlIChwbGF5ZXJHYW1lYm9hcmQuZ2V0Q29vcmRpbmF0ZXMoc3RhcnRpbmdDb29yZGluYXRlcykgIT09IHVuZGVmaW5lZCk7XG4gICAgcmV0dXJuIHN0YXJ0aW5nQ29vcmRpbmF0ZXM7XG4gIH07XG4gIGNvbnN0IGdlbmVyYXRlTm9uU3RhcnRpbmdDb29yZGluYXRlcyA9IChzdGFydGluZ0Nvb3JkaW5hdGVzLCBzaGlwTGVuZ3RoKSA9PiB7XG4gICAgY29uc3QgcG9zc2libGVDb29yZGluYXRlcyA9IFtdO1xuICAgIGlmIChjaGVja0lmVmFsaWRFbXB0eUNvb3JkaW5hdGVzKHN0YXJ0aW5nQ29vcmRpbmF0ZXMsIHNoaXBMZW5ndGgsIFwidXBcIikpIHtcbiAgICAgIGNvbnN0IHVwQ29vcmRpbmF0ZXMgPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgc2hpcExlbmd0aDsgaSsrKSB7XG4gICAgICAgIHVwQ29vcmRpbmF0ZXMucHVzaChbXG4gICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1swXSAtIGksXG4gICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1sxXSxcbiAgICAgICAgXSk7XG4gICAgICB9XG4gICAgICBwb3NzaWJsZUNvb3JkaW5hdGVzLnB1c2godXBDb29yZGluYXRlcyk7XG4gICAgfVxuICAgIGlmIChcbiAgICAgIGNoZWNrSWZWYWxpZEVtcHR5Q29vcmRpbmF0ZXMoc3RhcnRpbmdDb29yZGluYXRlcywgc2hpcExlbmd0aCwgXCJyaWdodFwiKVxuICAgICkge1xuICAgICAgY29uc3QgcmlnaHRDb29yZGluYXRlcyA9IFtdO1xuICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBzaGlwTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcmlnaHRDb29yZGluYXRlcy5wdXNoKFtcbiAgICAgICAgICBzdGFydGluZ0Nvb3JkaW5hdGVzWzBdLFxuICAgICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMV0gKyBpLFxuICAgICAgICBdKTtcbiAgICAgIH1cbiAgICAgIHBvc3NpYmxlQ29vcmRpbmF0ZXMucHVzaChyaWdodENvb3JkaW5hdGVzKTtcbiAgICB9XG4gICAgaWYgKGNoZWNrSWZWYWxpZEVtcHR5Q29vcmRpbmF0ZXMoc3RhcnRpbmdDb29yZGluYXRlcywgc2hpcExlbmd0aCwgXCJkb3duXCIpKSB7XG4gICAgICBjb25zdCBkb3duQ29vcmRpbmF0ZXMgPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgc2hpcExlbmd0aDsgaSsrKSB7XG4gICAgICAgIGRvd25Db29yZGluYXRlcy5wdXNoKFtcbiAgICAgICAgICBzdGFydGluZ0Nvb3JkaW5hdGVzWzBdICsgaSxcbiAgICAgICAgICBzdGFydGluZ0Nvb3JkaW5hdGVzWzFdLFxuICAgICAgICBdKTtcbiAgICAgIH1cbiAgICAgIHBvc3NpYmxlQ29vcmRpbmF0ZXMucHVzaChkb3duQ29vcmRpbmF0ZXMpO1xuICAgIH1cbiAgICBpZiAoY2hlY2tJZlZhbGlkRW1wdHlDb29yZGluYXRlcyhzdGFydGluZ0Nvb3JkaW5hdGVzLCBzaGlwTGVuZ3RoLCBcImxlZnRcIikpIHtcbiAgICAgIGNvbnN0IGxlZnRDb29yZGluYXRlcyA9IFtdO1xuICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBzaGlwTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGVmdENvb3JkaW5hdGVzLnB1c2goW1xuICAgICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMF0sXG4gICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1sxXSAtIGksXG4gICAgICAgIF0pO1xuICAgICAgfVxuICAgICAgcG9zc2libGVDb29yZGluYXRlcy5wdXNoKGxlZnRDb29yZGluYXRlcyk7XG4gICAgfVxuICAgIGlmIChwb3NzaWJsZUNvb3JkaW5hdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHBvc3NpYmxlQ29vcmRpbmF0ZXM7XG4gICAgfVxuICAgIGNvbnN0IHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogcG9zc2libGVDb29yZGluYXRlcy5sZW5ndGgpO1xuICAgIHJldHVybiBwb3NzaWJsZUNvb3JkaW5hdGVzW3JhbmRvbUluZGV4XTtcbiAgfTtcbiAgY29uc3QgZ2VuZXJhdGVSYW5kb21Db29yZGluYXRlID0gKCkgPT4ge1xuICAgIGNvbnN0IEJPQVJEQVhFU0xFTkdUSCA9IDEwO1xuICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBCT0FSREFYRVNMRU5HVEgpO1xuICB9O1xuICBjb25zdCBjaGVja0lmUHJldmlvdXNseUF0dGFja2VkID0gKFxuICAgIG9wcG9zaW5nUGxheWVyUmVjZWl2ZWRTaG90cyxcbiAgICBhdHRhY2tDb29yZGluYXRlc1xuICApID0+XG4gICAgb3Bwb3NpbmdQbGF5ZXJSZWNlaXZlZFNob3RzLnNvbWUoXG4gICAgICAocmVjZWl2ZWRTaG90KSA9PlxuICAgICAgICByZWNlaXZlZFNob3RbMF0gPT09IGF0dGFja0Nvb3JkaW5hdGVzWzBdICYmXG4gICAgICAgIHJlY2VpdmVkU2hvdFsxXSA9PT0gYXR0YWNrQ29vcmRpbmF0ZXNbMV1cbiAgICApO1xuICBjb25zdCBnZW5lcmF0ZUF0dGFja0Nvb3JkaW5hdGVzID0gKCkgPT4ge1xuICAgIGNvbnN0IHJlY2VpdmVkTWlzc2VkU2hvdHMgPSBvcHBvc2luZ1BsYXllclxuICAgICAgLmdldEdhbWVib2FyZCgpXG4gICAgICAuZ2V0UmVjZWl2ZWRNaXNzZWRTaG90cygpO1xuICAgIGNvbnN0IHJlY2VpdmVkSGl0U2hvdHMgPSBvcHBvc2luZ1BsYXllclxuICAgICAgLmdldEdhbWVib2FyZCgpXG4gICAgICAuZ2V0UmVjZWl2ZWRIaXRTaG90cygpO1xuICAgIGNvbnN0IGF0dGFja0Nvb3JkaW5hdGVzID0gW3VuZGVmaW5lZCwgdW5kZWZpbmVkXTtcbiAgICBkbyB7XG4gICAgICBhdHRhY2tDb29yZGluYXRlc1swXSA9IGdlbmVyYXRlUmFuZG9tQ29vcmRpbmF0ZSgpO1xuICAgICAgYXR0YWNrQ29vcmRpbmF0ZXNbMV0gPSBnZW5lcmF0ZVJhbmRvbUNvb3JkaW5hdGUoKTtcbiAgICB9IHdoaWxlIChcbiAgICAgIGNoZWNrSWZQcmV2aW91c2x5QXR0YWNrZWQocmVjZWl2ZWRNaXNzZWRTaG90cywgYXR0YWNrQ29vcmRpbmF0ZXMpIHx8XG4gICAgICBjaGVja0lmUHJldmlvdXNseUF0dGFja2VkKHJlY2VpdmVkSGl0U2hvdHMsIGF0dGFja0Nvb3JkaW5hdGVzKVxuICAgICk7XG4gICAgcmV0dXJuIGF0dGFja0Nvb3JkaW5hdGVzO1xuICB9O1xuICBjb25zdCBjaGVja0lmVmFsaWRFbXB0eUNvb3JkaW5hdGVzID0gKFxuICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXMsXG4gICAgc2hpcExlbmd0aCxcbiAgICBkaXJlY3Rpb25cbiAgKSA9PiB7XG4gICAgc3dpdGNoIChkaXJlY3Rpb24pIHtcbiAgICAgIGNhc2UgXCJ1cFwiOlxuICAgICAgICBpZiAoc3RhcnRpbmdDb29yZGluYXRlc1swXSAtIChzaGlwTGVuZ3RoIC0gMSkgPCAwKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgc2hpcExlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgcGxheWVyR2FtZWJvYXJkLmdldENvb3JkaW5hdGVzKFtcbiAgICAgICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1swXSAtIGksXG4gICAgICAgICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMV0sXG4gICAgICAgICAgICBdKSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICBjYXNlIFwicmlnaHRcIjpcbiAgICAgICAgaWYgKHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMV0gKyAoc2hpcExlbmd0aCAtIDEpID4gOSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHNoaXBMZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHBsYXllckdhbWVib2FyZC5nZXRDb29yZGluYXRlcyhbXG4gICAgICAgICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMF0sXG4gICAgICAgICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMV0gKyBpLFxuICAgICAgICAgICAgXSkgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcblxuICAgICAgY2FzZSBcImRvd25cIjpcbiAgICAgICAgaWYgKHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMF0gKyAoc2hpcExlbmd0aCAtIDEpID4gOSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHNoaXBMZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHBsYXllckdhbWVib2FyZC5nZXRDb29yZGluYXRlcyhbXG4gICAgICAgICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMF0gKyBpLFxuICAgICAgICAgICAgICBzdGFydGluZ0Nvb3JkaW5hdGVzWzFdLFxuICAgICAgICAgICAgXSkgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcblxuICAgICAgY2FzZSBcImxlZnRcIjpcbiAgICAgICAgaWYgKHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMV0gLSAoc2hpcExlbmd0aCAtIDEpIDwgMCkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHNoaXBMZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHBsYXllckdhbWVib2FyZC5nZXRDb29yZGluYXRlcyhbXG4gICAgICAgICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMF0sXG4gICAgICAgICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMV0gLSBpLFxuICAgICAgICAgICAgXSkgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9O1xuICByZXR1cm4ge1xuICAgIGlzQ29tcHV0ZXIsXG4gICAgZ2V0R2FtZWJvYXJkLFxuICAgIGdldE9wcG9zaW5nUGxheWVyLFxuICAgIHNldE9wcG9zaW5nUGxheWVyLFxuICAgIGFkZFNoaXBUb0dhbWVib2FyZCxcbiAgICBzZW5kQXR0YWNrLFxuICAgIGluaXRpYWxpemVDb21wdXRlckdhbWVib2FyZCxcbiAgICBzZW5kQ29tcHV0ZXJBdHRhY2ssXG4gICAgcmVjZWl2ZUF0dGFjayxcbiAgICBjaGVja0lmVmFsaWRFbXB0eUNvb3JkaW5hdGVzLFxuICB9O1xufTtcblxuZXhwb3J0IHsgUGxheWVyIH07XG4iLCJjb25zdCBHYW1lYm9hcmQgPSAoKSA9PiB7XG4gIGNvbnN0IGNyZWF0ZUJvYXJkID0gKCkgPT4ge1xuICAgIGNvbnN0IGJvYXJkID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XG4gICAgICBib2FyZC5wdXNoKFtdKTtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMTA7IGorKykge1xuICAgICAgICBib2FyZFtpXS5wdXNoKHVuZGVmaW5lZCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBib2FyZDtcbiAgfTtcbiAgY29uc3QgYm9hcmQgPSBjcmVhdGVCb2FyZCgpO1xuICBjb25zdCBwbGFjZWRTaGlwcyA9IFtdO1xuICBjb25zdCByZWNlaXZlZE1pc3NlZFNob3RzID0gW107XG4gIGNvbnN0IHJlY2VpdmVkSGl0U2hvdHMgPSBbXTtcbiAgY29uc3Qgc2VudE1pc3NlZFNob3RzID0gW107XG4gIGNvbnN0IHNlbnRIaXRTaG90cyA9IFtdO1xuICBsZXQgYWxsU2hpcHNTdW5rID0gZmFsc2U7XG4gIGNvbnN0IGdldENvb3JkaW5hdGVzID0gKGNvb3JkaW5hdGVzKSA9PiBib2FyZFtjb29yZGluYXRlc1swXV1bY29vcmRpbmF0ZXNbMV1dO1xuICBjb25zdCBnZXRQbGFjZWRTaGlwcyA9ICgpID0+IHBsYWNlZFNoaXBzO1xuICBjb25zdCBnZXRSZWNlaXZlZE1pc3NlZFNob3RzID0gKCkgPT4gcmVjZWl2ZWRNaXNzZWRTaG90cztcbiAgY29uc3QgZ2V0UmVjZWl2ZWRIaXRTaG90cyA9ICgpID0+IHJlY2VpdmVkSGl0U2hvdHM7XG4gIGNvbnN0IGdldFNlbnRNaXNzZWRTaG90cyA9ICgpID0+IHNlbnRNaXNzZWRTaG90cztcbiAgY29uc3QgZ2V0U2VudEhpdFNob3RzID0gKCkgPT4gc2VudEhpdFNob3RzO1xuICBjb25zdCBpc0FsbFNoaXBzU3VuayA9ICgpID0+IGFsbFNoaXBzU3VuaztcbiAgY29uc3QgcGxhY2VTaGlwID0gKHNoaXAsIGNvb3JkaW5hdGVzTGlzdCkgPT4ge1xuICAgIGZvciAoY29uc3QgY29vcmRpbmF0ZXMgb2YgY29vcmRpbmF0ZXNMaXN0KSB7XG4gICAgICBib2FyZFtjb29yZGluYXRlc1swXV1bY29vcmRpbmF0ZXNbMV1dID0gc2hpcDtcbiAgICB9XG4gICAgcGxhY2VkU2hpcHMucHVzaChzaGlwKTtcbiAgfTtcbiAgY29uc3QgY2hlY2tBbGxTaGlwc1N1bmsgPSAoKSA9PiB7XG4gICAgaWYgKHBsYWNlZFNoaXBzLmV2ZXJ5KChzaGlwKSA9PiBzaGlwLmlzU3VuaygpKSkge1xuICAgICAgYWxsU2hpcHNTdW5rID0gdHJ1ZTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHJlY2VpdmVBdHRhY2sgPSAoY29vcmRpbmF0ZXMpID0+IHtcbiAgICBjb25zdCBlbnRpdHlBdENvb3JkaW5hdGVzID0gZ2V0Q29vcmRpbmF0ZXMoY29vcmRpbmF0ZXMpO1xuICAgIGlmIChlbnRpdHlBdENvb3JkaW5hdGVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGVudGl0eUF0Q29vcmRpbmF0ZXMuaGl0KCk7XG4gICAgICBjaGVja0FsbFNoaXBzU3VuaygpO1xuICAgICAgcmVjZWl2ZWRIaXRTaG90cy5wdXNoKGNvb3JkaW5hdGVzKTtcbiAgICAgIHJldHVybiBcImhpdFwiO1xuICAgIH1cbiAgICByZWNlaXZlZE1pc3NlZFNob3RzLnB1c2goY29vcmRpbmF0ZXMpO1xuICAgIHJldHVybiBcIm1pc3NcIjtcbiAgfTtcbiAgY29uc3QgYWRkU2VudE1pc3NlZFNob3QgPSAoY29vcmRpbmF0ZXMpID0+IHtcbiAgICBzZW50TWlzc2VkU2hvdHMucHVzaChjb29yZGluYXRlcyk7XG4gIH07XG4gIGNvbnN0IGFkZFNlbnRIaXRTaG90ID0gKGNvb3JkaW5hdGVzKSA9PiB7XG4gICAgc2VudEhpdFNob3RzLnB1c2goY29vcmRpbmF0ZXMpO1xuICB9O1xuICByZXR1cm4ge1xuICAgIGdldENvb3JkaW5hdGVzLFxuICAgIGdldFBsYWNlZFNoaXBzLFxuICAgIGdldFJlY2VpdmVkTWlzc2VkU2hvdHMsXG4gICAgZ2V0UmVjZWl2ZWRIaXRTaG90cyxcbiAgICBnZXRTZW50TWlzc2VkU2hvdHMsXG4gICAgZ2V0U2VudEhpdFNob3RzLFxuICAgIGlzQWxsU2hpcHNTdW5rLFxuICAgIHBsYWNlU2hpcCxcbiAgICByZWNlaXZlQXR0YWNrLFxuICAgIGFkZFNlbnRNaXNzZWRTaG90LFxuICAgIGFkZFNlbnRIaXRTaG90LFxuICB9O1xufTtcblxuZXhwb3J0IHsgR2FtZWJvYXJkIH07XG4iLCJpbXBvcnQgeyBTaGlwIH0gZnJvbSBcIi4vc2hpcFwiO1xuaW1wb3J0IHsgR2FtZWJvYXJkIH0gZnJvbSBcIi4vZ2FtZWJvYXJkXCI7XG5pbXBvcnQgeyBQbGF5ZXIgfSBmcm9tIFwiLi9wbGF5ZXJcIjtcblxuY29uc3QgR2FtZUxvb3AgPSAoKCkgPT4ge1xuICBjb25zdCBwbGF5ZXJzID0gW107XG4gIGxldCBpblByb2dyZXNzID0gdHJ1ZTtcbiAgbGV0IHdpbm5lcjtcbiAgY29uc3QgZ2V0UGxheWVycyA9ICgpID0+IHBsYXllcnM7XG4gIGNvbnN0IGlzSW5Qcm9ncmVzcyA9ICgpID0+IGluUHJvZ3Jlc3M7XG4gIGNvbnN0IGdldFdpbm5lciA9ICgpID0+IHdpbm5lcjtcbiAgY29uc3Qgc2V0V2lubmVyID0gKGxvc2VyUGxheWVyKSA9PiB7XG4gICAgY29uc3Qgd2lubmVyUGxheWVyID0gbG9zZXJQbGF5ZXIuZ2V0T3Bwb3NpbmdQbGF5ZXIoKTtcbiAgICB3aW5uZXIgPSB3aW5uZXJQbGF5ZXI7XG4gIH07XG4gIGNvbnN0IGNyZWF0ZUdhbWUgPSAoKSA9PiB7XG4gICAgY29uc3QgaHVtYW5QbGF5ZXIgPSBQbGF5ZXIoXCJodW1hblwiKTtcbiAgICBwbGF5ZXJzLnB1c2goaHVtYW5QbGF5ZXIpO1xuICAgIGNvbnN0IGNvbXB1dGVyUGxheWVyID0gUGxheWVyKFwiY29tcHV0ZXJcIik7XG4gICAgcGxheWVycy5wdXNoKGNvbXB1dGVyUGxheWVyKTtcbiAgICBodW1hblBsYXllci5zZXRPcHBvc2luZ1BsYXllcihjb21wdXRlclBsYXllcik7XG4gICAgY29tcHV0ZXJQbGF5ZXIuc2V0T3Bwb3NpbmdQbGF5ZXIoaHVtYW5QbGF5ZXIpO1xuICAgIGNvbXB1dGVyUGxheWVyLmluaXRpYWxpemVDb21wdXRlckdhbWVib2FyZCgpO1xuICB9O1xuICBjb25zdCBlbmRHYW1lID0gKGxvc2VyUGxheWVyKSA9PiB7XG4gICAgaW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgIHNldFdpbm5lcihsb3NlclBsYXllcik7XG4gIH07XG4gIGNvbnN0IHJlc2V0R2FtZSA9ICgpID0+IHtcbiAgICBwbGF5ZXJzLmxlbmd0aCA9IDA7XG4gICAgaW5Qcm9ncmVzcyA9IHRydWU7XG4gICAgd2lubmVyID0gdW5kZWZpbmVkO1xuICB9O1xuICByZXR1cm4ge1xuICAgIGdldFBsYXllcnMsXG4gICAgaXNJblByb2dyZXNzLFxuICAgIGdldFdpbm5lcixcbiAgICBjcmVhdGVHYW1lLFxuICAgIGVuZEdhbWUsXG4gICAgcmVzZXRHYW1lLFxuICB9O1xufSkoKTtcblxuZXhwb3J0IHsgR2FtZUxvb3AgfTtcbiIsImltcG9ydCB7IERPTUNvbnRyb2xsZXIgfSBmcm9tIFwiLi9ET01fY29udHJvbGxlclwiO1xuXG5jb25zdCBFdmVudExpc3RlbmVyQ29udHJvbGxlciA9ICgoKSA9PiB7XG4gIGNvbnN0IHJvdGF0ZVNoaXBJbWFnZUxpc3RlbmVycyA9ICgpID0+IHtcbiAgICBjb25zdCBzaGlwUGxhY2VtZW50RWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNoaXAtcGxhY2VtZW50XCIpO1xuICAgIHNoaXBQbGFjZW1lbnRFbGVtZW50cy5mb3JFYWNoKChncm91cCkgPT4ge1xuICAgICAgY29uc3QgaW1nID0gZ3JvdXAuY2hpbGRyZW5bMF07XG4gICAgICBjb25zdCBidG4gPSBncm91cC5jaGlsZHJlblsyXTtcbiAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBET01Db250cm9sbGVyLnJvdGF0ZVNoaXBJbWFnZShpbWcpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG4gIGNvbnN0IGFkZFNoaXBQbGFjZW1lbnREcmFnID0gKCkgPT4ge1xuICAgIGNvbnN0IHNoaXBJbWFnZXMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2hpcC1waWVjZVwiKSk7XG4gICAgc2hpcEltYWdlcy5mb3JFYWNoKChzaGlwKSA9PiB7XG4gICAgICBzaGlwLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnc3RhcnRcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgIERPTUNvbnRyb2xsZXIuZ2V0RHJhZ2dlZEltYWdlKGV2ZW50KTtcbiAgICAgICAgRE9NQ29udHJvbGxlci5yb3RhdGVEcmFnZ2VkSW1hZ2UoZXZlbnQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG4gIHJldHVybiB7XG4gICAgcm90YXRlU2hpcEltYWdlTGlzdGVuZXJzLFxuICAgIGFkZFNoaXBQbGFjZW1lbnREcmFnLFxuICB9O1xufSkoKTtcblxuZXhwb3J0IHsgRXZlbnRMaXN0ZW5lckNvbnRyb2xsZXIgfTtcbiIsImltcG9ydCB7IEdhbWVMb29wIH0gZnJvbSBcIi4vZ2FtZWxvb3BcIjtcbmltcG9ydCB7IERPTUNvbnRyb2xsZXIgfSBmcm9tIFwiLi9ET01fY29udHJvbGxlclwiO1xuaW1wb3J0IHsgRXZlbnRMaXN0ZW5lckNvbnRyb2xsZXIgfSBmcm9tIFwiLi9ldmVudF9saXN0ZW5lcl9jb250cm9sbGVyXCI7XG5cbkdhbWVMb29wLmNyZWF0ZUdhbWUoKTtcblxuRE9NQ29udHJvbGxlci5pbml0aWFsaXplQm9hcmRET00oKTtcblxuRXZlbnRMaXN0ZW5lckNvbnRyb2xsZXIucm90YXRlU2hpcEltYWdlTGlzdGVuZXJzKCk7XG5cbkV2ZW50TGlzdGVuZXJDb250cm9sbGVyLmFkZFNoaXBQbGFjZW1lbnREcmFnKCk7XG4iXSwibmFtZXMiOlsiRE9NQ29udHJvbGxlciIsImNyZWF0ZUJvYXJkQ2VsbHMiLCJnYW1lYm9hcmRET00iLCJjb2x1bW5MYWJlbHMiLCJyb3dMYWJlbHMiLCJpIiwiaiIsImludmlzaWJsZVBsYWNlaG9sZGVyRWxlbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInN0eWxlIiwidmlzaWJpbGl0eSIsImFwcGVuZENoaWxkIiwiY29sdW1uTGFiZWxFbGVtZW50IiwidGV4dENvbnRlbnQiLCJyb3dMYWJlbEVsZW1lbnQiLCJBcnJheSIsImZyb20iLCJpbmNsdWRlcyIsImNlbGxFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwiZHJhZ092ZXIiLCJpbnNlcnREcmFnZ2VkSW1hZ2UiLCJHYW1lTG9vcCIsImdldFBsYXllcnMiLCJnZXRHYW1lYm9hcmQiLCJnZXRQbGFjZWRTaGlwcyIsImxlbmd0aCIsImVuYWJsZUNvbXB1dGVyR2FtZWJvYXJkIiwiZGlzYWJsZWQiLCJjb25zb2xlIiwibG9nIiwiY2VsbFJvdyIsIk51bWJlciIsImRhdGFzZXQiLCJyb3ciLCJjZWxsQ29sdW1uIiwiY29sdW1uIiwic2VuZEF0dGFjayIsImNvbXB1dGVyR2FtZWJvYXJkRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsInByZXZlbnREZWZhdWx0IiwidGFyZ2V0Q2VsbCIsInRhcmdldCIsImRhdGFTdHJpbmciLCJkYXRhVHJhbnNmZXIiLCJnZXREYXRhIiwiZGF0YU9iamVjdCIsIkpTT04iLCJwYXJzZSIsImNlbGxDb29yZGluYXRlcyIsInNoaXBMZW5ndGgiLCJob3Jpem9udGFsIiwiY2hlY2tJZlZhbGlkRW1wdHlDb29yZGluYXRlcyIsInZlcnRpY2FsIiwiaXNWYWxpZEdhbWVib2FyZENlbGwiLCJzaGlwQ29vcmRpbmF0ZXMiLCJ0YXJnZXRDZWxsUm93IiwidGFyZ2V0Q2VsbENvbHVtbiIsImNvb3JkaW5hdGVzQXJyYXkiLCJyZW1haW5pbmdDZWxsIiwicHVzaCIsImFkZFNoaXBUb0RPTSIsImFkZFNoaXBUb0dhbWVib2FyZCIsIklEIiwiZWxlbWVudElEIiwiaW1hZ2VFbGVtZW50IiwiYnV0dG9uRWxlbWVudCIsInBhcmVudE5vZGUiLCJkaXNhYmxlSW1hZ2VCdXR0b25JbnRlcmFjdGlvbnMiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiaW5pdGlhbGl6ZUJvYXJkRE9NIiwiaHVtYW5QbGF5ZXJHYW1lYm9hcmRET00iLCJvcHBvbmVudEdhbWVib2FyZERPTSIsInJvdGF0ZVNoaXBJbWFnZSIsImltYWdlIiwiaW1hZ2VDbGFzc2VzIiwicmVtb3ZlIiwicm90YXRlRHJhZ2dlZEltYWdlIiwiY2xvbmVkSW1hZ2VFbGVtZW50IiwiY2xvbmVOb2RlIiwidGVtcERpdiIsImNsb25lZEltYWdlRWxlbWVudENsYXNzZXMiLCJyb3RhdGVQZXJMZW5ndGgiLCJib2R5Iiwic2V0RHJhZ0ltYWdlIiwic2V0VGltZW91dCIsInJlbW92ZUNoaWxkIiwiZ2V0RHJhZ2dlZEltYWdlIiwic3JjIiwiZ2V0QXR0cmlidXRlIiwic3RyaW5naWZ5Iiwic2V0RGF0YSIsImFkZEF0dGFja1Jlc3VsdERPTSIsInBsYXllclR5cGUiLCJhdHRhY2tSZXN1bHRzIiwiY29vcmRpbmF0ZXMiLCJhdHRhY2tSZXN1bHRzRWxlbWVudCIsIlBsYXllciIsImNvbXB1dGVyUGxheWVyIiwicGxheWVyR2FtZWJvYXJkIiwiYm9hcmQiLCJ1bmRlZmluZWQiLCJjcmVhdGVCb2FyZCIsInBsYWNlZFNoaXBzIiwicmVjZWl2ZWRNaXNzZWRTaG90cyIsInJlY2VpdmVkSGl0U2hvdHMiLCJzZW50TWlzc2VkU2hvdHMiLCJzZW50SGl0U2hvdHMiLCJhbGxTaGlwc1N1bmsiLCJnZXRDb29yZGluYXRlcyIsImdldFJlY2VpdmVkTWlzc2VkU2hvdHMiLCJnZXRSZWNlaXZlZEhpdFNob3RzIiwiZ2V0U2VudE1pc3NlZFNob3RzIiwiZ2V0U2VudEhpdFNob3RzIiwiaXNBbGxTaGlwc1N1bmsiLCJwbGFjZVNoaXAiLCJzaGlwIiwiY29vcmRpbmF0ZXNMaXN0IiwicmVjZWl2ZUF0dGFjayIsImVudGl0eUF0Q29vcmRpbmF0ZXMiLCJoaXQiLCJldmVyeSIsImlzU3VuayIsImFkZFNlbnRNaXNzZWRTaG90IiwiYWRkU2VudEhpdFNob3QiLCJHYW1lYm9hcmQiLCJvcHBvc2luZ1BsYXllciIsImlzQ29tcHV0ZXIiLCJnaXZlbkxlbmd0aCIsImhpdHMiLCJzdW5rIiwiZ2V0U2hpcExlbmd0aCIsImdldFNoaXBIaXRzIiwiU2hpcCIsIm9wcG9zaW5nUGxheWVyR2FtZWJvYXJkIiwiZW5kR2FtZSIsInNlbmRDb21wdXRlckF0dGFjayIsImdlbmVyYXRlQ29tcHV0ZXJTaGlwQ29vcmRpbmF0ZXMiLCJsaXN0T2ZDb29yZGluYXRlcyIsInN0YXJ0aW5nQ29vcmRpbmF0ZXMiLCJnZW5lcmF0ZVN0YXJ0aW5nQ29vcmRpbmF0ZXMiLCJub25TdGFydGluZ0Nvb3JkaW5hdGVzIiwiZ2VuZXJhdGVOb25TdGFydGluZ0Nvb3JkaW5hdGVzIiwiY29uY2F0IiwiZ2VuZXJhdGVSYW5kb21Db29yZGluYXRlIiwicG9zc2libGVDb29yZGluYXRlcyIsInVwQ29vcmRpbmF0ZXMiLCJyaWdodENvb3JkaW5hdGVzIiwiZG93bkNvb3JkaW5hdGVzIiwibGVmdENvb3JkaW5hdGVzIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiY2hlY2tJZlByZXZpb3VzbHlBdHRhY2tlZCIsIm9wcG9zaW5nUGxheWVyUmVjZWl2ZWRTaG90cyIsImF0dGFja0Nvb3JkaW5hdGVzIiwic29tZSIsInJlY2VpdmVkU2hvdCIsImRpcmVjdGlvbiIsImdldE9wcG9zaW5nUGxheWVyIiwic2V0T3Bwb3NpbmdQbGF5ZXIiLCJwbGF5ZXIiLCJpbml0aWFsaXplQ29tcHV0ZXJHYW1lYm9hcmQiLCJsZW5ndGhzT2ZTaGlwcyIsImdlbmVyYXRlQXR0YWNrQ29vcmRpbmF0ZXMiLCJwbGF5ZXJzIiwid2lubmVyIiwiaW5Qcm9ncmVzcyIsImlzSW5Qcm9ncmVzcyIsImdldFdpbm5lciIsImNyZWF0ZUdhbWUiLCJodW1hblBsYXllciIsImxvc2VyUGxheWVyIiwid2lubmVyUGxheWVyIiwic2V0V2lubmVyIiwicmVzZXRHYW1lIiwiRXZlbnRMaXN0ZW5lckNvbnRyb2xsZXIiLCJncm91cCIsImltZyIsImNoaWxkcmVuIl0sInNvdXJjZVJvb3QiOiIifQ==