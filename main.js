(()=>{"use strict";const t=(()=>{const t=t=>{const i=["A","B","C","D","E","F","G","H","I","J"],o=["1","2","3","4","5","6","7","8","9","10"],d=a.getPlayers()[0];for(let n=-1;n<10;n++)for(let c=-1;c<10;c++)if(-1===n)if(-1===c){const e=document.createElement("div");e.classList.add("gameboard-label"),e.style.visibility="hidden",t.appendChild(e)}else{const e=document.createElement("div");e.classList.add("column-label"),e.textContent=i[c],t.appendChild(e)}else if(-1===c){const e=document.createElement("div");e.classList.add("row-label"),e.textContent=o[n],t.appendChild(e)}else if(Array.from(t.classList).includes("player-board")){const a=document.createElement("div");a.setAttribute("data-row",n),a.setAttribute("data-column",c),a.classList.add("gameboard-cell"),a.addEventListener("dragover",(t=>{s(t)})),a.addEventListener("drop",(t=>{r(t),5===d.getGameboard().getPlacedShips().length&&e("enable")})),t.appendChild(a)}else if(Array.from(t.classList).includes("computer-board")){const e=document.createElement("button");e.setAttribute("data-row",n),e.setAttribute("data-column",c),e.classList.add("gameboard-cell"),e.disabled=!0,e.addEventListener("click",(()=>{if(!a.isMidAttack()){const t=Number(e.dataset.row),a=Number(e.dataset.column);d.sendAttack([t,a])}})),t.appendChild(e)}},e=t=>{const e=document.querySelector(".computer-board"),a=Array.from(e.querySelectorAll(".gameboard-cell"));"enable"===t?a.forEach((t=>{t.disabled=!1})):"disable"===t&&a.forEach((t=>{t.disabled=!0}))},s=t=>{t.preventDefault()},r=t=>{t.preventDefault();const e=a.getPlayers()[0],s=t.target;if(Array.from(s.classList).includes("contains-ship-image"))return;const i=t.dataTransfer.getData("image"),o=JSON.parse(i);if(!((t,e)=>{const s=[Number(t.dataset.row),Number(t.dataset.column)],r=Number(e.shipLength);return e.horizontal?!!a.getPlayers()[0].checkIfValidEmptyCoordinates(s,r,"right"):e.vertical?!!a.getPlayers()[0].checkIfValidEmptyCoordinates(s,r,"down"):void 0})(s,o))return;const d=((t,e)=>{const a=e.shipLength,s=Number(t.dataset.row),r=Number(t.dataset.column),i=[[s,r]];t.classList.add("contains-ship-image"),t.classList.add("ship-image"),t.classList.add(`ship-image-${a}`),t.classList.add(`ship-image-${a}-1`),e.horizontal?t.classList.add("horizontal"):e.vertical&&t.classList.add("vertical");for(let t=1;t<a;t++){let o;e.horizontal?(o=document.querySelector(`.player-board [data-row='${s}'][data-column='${r+t}']`),o.classList.add("horizontal"),i.push([s,r+t])):e.vertical&&(o=document.querySelector(`.player-board [data-row='${s+t}'][data-column='${r}']`),o.classList.add("vertical"),i.push([s+t,r])),o.classList.add("contains-ship-image"),o.classList.add("ship-image"),o.classList.add(`ship-image-${a}`),o.classList.add(`ship-image-${a}-${t+1}`)}return i})(s,o);e.addShipToGameboard(Number(o.shipLength),d),(t=>{const e=t.elementID,a=document.querySelector(`#${e}`),s=a.parentNode.querySelector("button");a.setAttribute("draggable",!1),a.classList.add("disabled-image"),s.disabled=!0})(o),s.removeEventListener("drop",r)};return{initializeBoardDOM:()=>{const e=document.querySelector(".player-board"),a=document.querySelector(".computer-board");t(e),t(a)},insertDraggedImage:r,rotateShipImage:t=>{const e=Array.from(t.classList);e.includes("horizontal")?(t.classList.remove("horizontal"),t.classList.add("vertical")):e.includes("vertical")&&(t.classList.remove("vertical"),t.classList.add("horizontal"))},rotateDraggedImage:t=>{const e=t.target.cloneNode(),a=document.createElement("div");a.classList.add("temp-rotate"),((t,e)=>{const a=Array.from(e.classList);a.includes("horizontal")?t.classList.add("temp-rotate-horizontal"):a.includes("vertical")&&(t.classList.add("temp-rotate-vertical"),"5"===e.dataset.shipLength?t.classList.add("temp-rotate-vertical-5"):"4"===e.dataset.shipLength?t.classList.add("temp-rotate-vertical-4"):"3"===e.dataset.shipLength?t.classList.add("temp-rotate-vertical-3"):"2"===e.dataset.shipLength&&t.classList.add("temp-rotate-vertical-2"))})(a,e),a.appendChild(e),document.body.appendChild(a),t.dataTransfer.setDragImage(a,0,0),setTimeout((()=>{document.body.removeChild(a)}),0)},getDraggedImage:t=>{const e={image:t.target.src,shipLength:t.target.dataset.shipLength,horizontal:!1,vertical:!1,elementID:t.target.getAttribute("id")};Array.from(t.target.classList).includes("horizontal")?e.horizontal=!0:Array.from(t.target.classList).includes("vertical")&&(e.vertical=!0);const a=JSON.stringify(e);t.dataTransfer.setData("image",a)},dragOver:s,addAttackResultDOM:(t,e,a)=>{const s=a[0],r=a[1],i=document.querySelector(`.${t}-board`).querySelector(`[data-row='${s}'][data-column='${r}']`),o=document.createElement("img");o.classList.add("attack-results"),i.appendChild(o),"hit"===e?o.setAttribute("src","../dist/red_X.png"):o.setAttribute("src","../dist/white_O.png"),i.disabled=!0},toggleAbilityToAttack:e}})(),e=e=>{const s="human"!==e&&("computer"===e||void 0),r=(()=>{const t=(()=>{const t=[];for(let e=0;e<10;e++){t.push([]);for(let a=0;a<10;a++)t[e].push(void 0)}return t})(),e=[],a=[],s=[],r=[],i=[];let o=!1;const d=e=>t[e[0]][e[1]];return{getCoordinates:d,getPlacedShips:()=>e,getReceivedMissedShots:()=>a,getReceivedHitShots:()=>s,getSentMissedShots:()=>r,getSentHitShots:()=>i,isAllShipsSunk:()=>o,placeShip:(a,s)=>{for(const e of s)t[e[0]][e[1]]=a;e.push(a)},receiveAttack:t=>{const r=d(t);return void 0!==r?(r.hit(),e.every((t=>t.isSunk()))&&(o=!0),s.push(t),"hit"):(a.push(t),"miss")},addSentMissedShot:t=>{r.push(t)},addSentHitShot:t=>{i.push(t)}}})();let i;const o=()=>s,d=(t,e)=>{const a=(t=>{const e=t;let a=0,s=!1;return{getShipLength:()=>e,getShipHits:()=>a,isSunk:()=>s,hit:()=>{if(s)return"That ship has already been sunk!";a+=1,a===e&&(s=!0)}}})(t);r.placeShip(a,e)},n=e=>{if(h(e)||!a.isInProgress()||a.isMidAttack())return;const s=i.getGameboard(),d=i.receiveAttack(e);if("hit"===d){if(r.addSentHitShot(e),o()?o()&&t.addAttackResultDOM("player",d,e):t.addAttackResultDOM("computer",d,e),s.isAllShipsSunk())return void a.endGame(i)}else"miss"===d&&(r.addSentMissedShot(e),o()?o()&&t.addAttackResultDOM("player",d,e):t.addAttackResultDOM("computer",d,e));i.isComputer()&&(a.toggleMidAttack(!0),setTimeout((()=>{a.toggleMidAttack(!1),i.sendComputerAttack()}),1e3))},c=t=>{let e=[];do{e=[];const a=l(),s=u(a,t);e.push(a),e=e.concat(s)}while(e.length<t);return e},l=()=>{const t=[void 0,void 0];do{t[0]=m(),t[1]=m()}while(void 0!==r.getCoordinates(t));return t},u=(t,e)=>{const a=[];if(g(t,e,"up")){const s=[];for(let a=1;a<e;a++)s.push([t[0]-a,t[1]]);a.push(s)}if(g(t,e,"right")){const s=[];for(let a=1;a<e;a++)s.push([t[0],t[1]+a]);a.push(s)}if(g(t,e,"down")){const s=[];for(let a=1;a<e;a++)s.push([t[0]+a,t[1]]);a.push(s)}if(g(t,e,"left")){const s=[];for(let a=1;a<e;a++)s.push([t[0],t[1]-a]);a.push(s)}return 0===a.length?a:a[Math.floor(Math.random()*a.length)]},m=()=>Math.floor(10*Math.random()),h=t=>{let e=!1;const a=i.getGameboard().getReceivedMissedShots(),s=i.getGameboard().getReceivedHitShots();return e=a.some((e=>e[0]===t[0]&&e[1]===t[1])),e||(e=s.some((e=>e[0]===t[0]&&e[1]===t[1]))),e},g=(t,e,a)=>{switch(a){case"up":if(t[0]-(e-1)<0)return!1;for(let a=1;a<e;a++)if(void 0!==r.getCoordinates([t[0]-a,t[1]]))return!1;return!0;case"right":if(t[1]+(e-1)>9)return!1;for(let a=1;a<e;a++)if(void 0!==r.getCoordinates([t[0],t[1]+a]))return!1;return!0;case"down":if(t[0]+(e-1)>9)return!1;for(let a=1;a<e;a++)if(void 0!==r.getCoordinates([t[0]+a,t[1]]))return!1;return!0;case"left":if(t[1]-(e-1)<0)return!1;for(let a=1;a<e;a++)if(void 0!==r.getCoordinates([t[0],t[1]-a]))return!1;return!0}};return{isComputer:o,getGameboard:()=>r,getOpposingPlayer:()=>i,setOpposingPlayer:t=>{i=t},addShipToGameboard:d,sendAttack:n,initializeComputerGameboard:()=>{if(!s)return;const t=[5,4,3,3,2];for(const e of t){const t=c(e);d(e,t)}},sendComputerAttack:()=>{if(!s||!a.isInProgress())return;const t=(()=>{const t=[void 0,void 0];do{t[0]=m(),t[1]=m()}while(h(t));return t})();n(t)},receiveAttack:t=>r.receiveAttack(t),checkIfValidEmptyCoordinates:g}},a=(()=>{const a=[];let s,r=!0,i=!1;return{getPlayers:()=>a,isInProgress:()=>r,getWinner:()=>s,isMidAttack:()=>i,toggleMidAttack:t=>{i=!!t},createGame:()=>{const t=e("human");a.push(t);const s=e("computer");a.push(s),t.setOpposingPlayer(s),s.setOpposingPlayer(t),s.initializeComputerGameboard()},endGame:e=>{r=!1,(t=>{const e=t.getOpposingPlayer();s=e})(e),t.toggleAbilityToAttack("disable")},resetGame:()=>{a.length=0,r=!0,s=void 0}}})(),s=()=>{document.querySelectorAll(".ship-placement").forEach((e=>{const a=e.querySelector("img");e.querySelector("button").addEventListener("click",(()=>{t.rotateShipImage(a)}))}))},r=()=>{Array.from(document.querySelectorAll(".ship-piece")).forEach((e=>{e.addEventListener("dragstart",(e=>{t.getDraggedImage(e),t.rotateDraggedImage(e)}))}))};a.createGame(),t.initializeBoardDOM(),s(),r()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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akJlc0MsSUFDZk4sR0FBYSxFQWxCRyxDQUFDTSxJQUNqQixNQUFNQyxFQUFlRCxFQUFZZCxvQkFDakNPLEVBQVNRLENBQVksRUFpQnJCQyxDQUFVRixHQUNWMUwsRUFBY2lDLHNCQUFzQixVQUFVLEVBZTlDNEosVUFiZ0IsS0FDaEJYLEVBQVFsSixPQUFTLEVBQ2pCb0osR0FBYSxFQUNiRCxPQUFTbkUsQ0FBUyxFQVlyQixFQTdDZ0IsR0NIWDhFLEVBQzZCLEtBQ0RuTCxTQUFTcUMsaUJBQWlCLG1CQUNsQ0MsU0FBUzhJLElBQzdCLE1BQU1uSCxFQUFlbUgsRUFBZ0JqSixjQUFjLE9BQzdCaUosRUFBZ0JqSixjQUFjLFVBQ3RDcEIsaUJBQWlCLFNBQVMsS0FDdEMxQixFQUFjb0YsZ0JBQWdCUixFQUFhLEdBQzNDLEdBQ0YsRUFUQWtILEVBV3lCLEtBQ1J6SyxNQUFNQyxLQUFLWCxTQUFTcUMsaUJBQWlCLGdCQUM3Q0MsU0FBUzhFLElBQ2xCQSxFQUFLckcsaUJBQWlCLGFBQWNDLElBQ2xDM0IsRUFBY2tHLGdCQUFnQnZFLEdBQzlCM0IsRUFBY3dGLG1CQUFtQjdELEVBQU0sR0FDdkMsR0FDRixFQ2hCTnJCLEVBQVNrTCxhQUVUeEwsRUFBY2lGLHFCQUVkNkcsSUFFQUEsRyIsInNvdXJjZXMiOlsid2VicGFjazovL29kaW4tYmF0dGxlc2hpcC8uL3NyYy9zaGlwLmpzIiwid2VicGFjazovL29kaW4tYmF0dGxlc2hpcC8uL3NyYy9ET01fY29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly9vZGluLWJhdHRsZXNoaXAvLi9zcmMvcGxheWVyLmpzIiwid2VicGFjazovL29kaW4tYmF0dGxlc2hpcC8uL3NyYy9nYW1lYm9hcmQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi1iYXR0bGVzaGlwLy4vc3JjL2dhbWVsb29wLmpzIiwid2VicGFjazovL29kaW4tYmF0dGxlc2hpcC8uL3NyYy9ldmVudF9saXN0ZW5lcl9jb250cm9sbGVyLmpzIiwid2VicGFjazovL29kaW4tYmF0dGxlc2hpcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBTaGlwID0gKGdpdmVuTGVuZ3RoKSA9PiB7XG4gIGNvbnN0IGxlbmd0aCA9IGdpdmVuTGVuZ3RoO1xuICBsZXQgaGl0cyA9IDA7XG4gIGxldCBzdW5rID0gZmFsc2U7XG4gIGNvbnN0IGdldFNoaXBMZW5ndGggPSAoKSA9PiBsZW5ndGg7XG4gIGNvbnN0IGdldFNoaXBIaXRzID0gKCkgPT4gaGl0cztcbiAgY29uc3QgaXNTdW5rID0gKCkgPT4gc3VuaztcbiAgY29uc3QgY2hlY2tJZlN1bmsgPSAoKSA9PiB7XG4gICAgaWYgKGhpdHMgPT09IGxlbmd0aCkge1xuICAgICAgc3VuayA9IHRydWU7XG4gICAgfVxuICB9O1xuICBjb25zdCBoaXQgPSAoKSA9PiB7XG4gICAgaWYgKCFzdW5rKSB7XG4gICAgICBoaXRzICs9IDE7XG4gICAgICBjaGVja0lmU3VuaygpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gXCJUaGF0IHNoaXAgaGFzIGFscmVhZHkgYmVlbiBzdW5rIVwiO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIHtcbiAgICBnZXRTaGlwTGVuZ3RoLFxuICAgIGdldFNoaXBIaXRzLFxuICAgIGlzU3VuayxcbiAgICBoaXQsXG4gIH07XG59O1xuXG5leHBvcnQgeyBTaGlwIH07XG4iLCJpbXBvcnQgeyBHYW1lTG9vcCB9IGZyb20gXCIuL2dhbWVsb29wXCI7XG5cbmNvbnN0IERPTUNvbnRyb2xsZXIgPSAoKCkgPT4ge1xuICBjb25zdCBjcmVhdGVCb2FyZENlbGxzID0gKGdhbWVib2FyZERPTSkgPT4ge1xuICAgIGNvbnN0IEJPQVJEQVhFU0xFTkdUSCA9IDEwO1xuICAgIGNvbnN0IGNvbHVtbkxhYmVscyA9IFtcIkFcIiwgXCJCXCIsIFwiQ1wiLCBcIkRcIiwgXCJFXCIsIFwiRlwiLCBcIkdcIiwgXCJIXCIsIFwiSVwiLCBcIkpcIl07XG4gICAgY29uc3Qgcm93TGFiZWxzID0gW1wiMVwiLCBcIjJcIiwgXCIzXCIsIFwiNFwiLCBcIjVcIiwgXCI2XCIsIFwiN1wiLCBcIjhcIiwgXCI5XCIsIFwiMTBcIl07XG4gICAgY29uc3QgaHVtYW5QbGF5ZXJPYmplY3QgPSBHYW1lTG9vcC5nZXRQbGF5ZXJzKClbMF07XG4gICAgZm9yIChsZXQgaSA9IC0xOyBpIDwgQk9BUkRBWEVTTEVOR1RIOyBpKyspIHtcbiAgICAgIGZvciAobGV0IGogPSAtMTsgaiA8IEJPQVJEQVhFU0xFTkdUSDsgaisrKSB7XG4gICAgICAgIGlmIChpID09PSAtMSkge1xuICAgICAgICAgIGlmIChqID09PSAtMSkge1xuICAgICAgICAgICAgY29uc3QgaW52aXNpYmxlUGxhY2Vob2xkZXJFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIGludmlzaWJsZVBsYWNlaG9sZGVyRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZ2FtZWJvYXJkLWxhYmVsXCIpO1xuICAgICAgICAgICAgaW52aXNpYmxlUGxhY2Vob2xkZXJFbGVtZW50LnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuICAgICAgICAgICAgZ2FtZWJvYXJkRE9NLmFwcGVuZENoaWxkKGludmlzaWJsZVBsYWNlaG9sZGVyRWxlbWVudCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbHVtbkxhYmVsRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBjb2x1bW5MYWJlbEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImNvbHVtbi1sYWJlbFwiKTtcbiAgICAgICAgICAgIGNvbHVtbkxhYmVsRWxlbWVudC50ZXh0Q29udGVudCA9IGNvbHVtbkxhYmVsc1tqXTtcbiAgICAgICAgICAgIGdhbWVib2FyZERPTS5hcHBlbmRDaGlsZChjb2x1bW5MYWJlbEVsZW1lbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChqID09PSAtMSkge1xuICAgICAgICAgIGNvbnN0IHJvd0xhYmVsRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgcm93TGFiZWxFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJyb3ctbGFiZWxcIik7XG4gICAgICAgICAgcm93TGFiZWxFbGVtZW50LnRleHRDb250ZW50ID0gcm93TGFiZWxzW2ldO1xuICAgICAgICAgIGdhbWVib2FyZERPTS5hcHBlbmRDaGlsZChyb3dMYWJlbEVsZW1lbnQpO1xuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIEFycmF5LmZyb20oZ2FtZWJvYXJkRE9NLmNsYXNzTGlzdCkuaW5jbHVkZXMoXCJwbGF5ZXItYm9hcmRcIilcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgcGxheWVyQ2VsbEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgIHBsYXllckNlbGxFbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtcm93XCIsIGkpO1xuICAgICAgICAgIHBsYXllckNlbGxFbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtY29sdW1uXCIsIGopO1xuICAgICAgICAgIHBsYXllckNlbGxFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJnYW1lYm9hcmQtY2VsbFwiKTtcbiAgICAgICAgICBwbGF5ZXJDZWxsRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ292ZXJcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBkcmFnT3ZlcihldmVudCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcGxheWVyQ2VsbEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyb3BcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpbnNlcnREcmFnZ2VkSW1hZ2UoZXZlbnQpO1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBodW1hblBsYXllck9iamVjdC5nZXRHYW1lYm9hcmQoKS5nZXRQbGFjZWRTaGlwcygpLmxlbmd0aCA9PT0gNVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIHRvZ2dsZUFiaWxpdHlUb0F0dGFjayhcImVuYWJsZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBnYW1lYm9hcmRET00uYXBwZW5kQ2hpbGQocGxheWVyQ2VsbEVsZW1lbnQpO1xuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIEFycmF5LmZyb20oZ2FtZWJvYXJkRE9NLmNsYXNzTGlzdCkuaW5jbHVkZXMoXCJjb21wdXRlci1ib2FyZFwiKVxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCBjb21wdXRlckNlbGxFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgICBjb21wdXRlckNlbGxFbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtcm93XCIsIGkpO1xuICAgICAgICAgIGNvbXB1dGVyQ2VsbEVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1jb2x1bW5cIiwgaik7XG4gICAgICAgICAgY29tcHV0ZXJDZWxsRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZ2FtZWJvYXJkLWNlbGxcIik7XG4gICAgICAgICAgY29tcHV0ZXJDZWxsRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgY29tcHV0ZXJDZWxsRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFHYW1lTG9vcC5pc01pZEF0dGFjaygpKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGNlbGxSb3cgPSBOdW1iZXIoY29tcHV0ZXJDZWxsRWxlbWVudC5kYXRhc2V0LnJvdyk7XG4gICAgICAgICAgICAgIGNvbnN0IGNlbGxDb2x1bW4gPSBOdW1iZXIoY29tcHV0ZXJDZWxsRWxlbWVudC5kYXRhc2V0LmNvbHVtbik7XG4gICAgICAgICAgICAgIGh1bWFuUGxheWVyT2JqZWN0LnNlbmRBdHRhY2soW2NlbGxSb3csIGNlbGxDb2x1bW5dKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBnYW1lYm9hcmRET00uYXBwZW5kQ2hpbGQoY29tcHV0ZXJDZWxsRWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGNvbnN0IHRvZ2dsZUFiaWxpdHlUb0F0dGFjayA9IChhY3Rpb24pID0+IHtcbiAgICBjb25zdCBjb21wdXRlckdhbWVib2FyZEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbXB1dGVyLWJvYXJkXCIpO1xuICAgIGNvbnN0IGNlbGxFbGVtZW50cyA9IEFycmF5LmZyb20oXG4gICAgICBjb21wdXRlckdhbWVib2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5nYW1lYm9hcmQtY2VsbFwiKVxuICAgICk7XG4gICAgaWYgKGFjdGlvbiA9PT0gXCJlbmFibGVcIikge1xuICAgICAgY2VsbEVsZW1lbnRzLmZvckVhY2goKGNlbGxFbGVtZW50KSA9PiB7XG4gICAgICAgIGNlbGxFbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gXCJkaXNhYmxlXCIpIHtcbiAgICAgIGNlbGxFbGVtZW50cy5mb3JFYWNoKChjZWxsRWxlbWVudCkgPT4ge1xuICAgICAgICBjZWxsRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGdldERyYWdnZWRJbWFnZSA9IChldmVudCkgPT4ge1xuICAgIGNvbnN0IGRhdGFPYmplY3QgPSB7XG4gICAgICBpbWFnZTogZXZlbnQudGFyZ2V0LnNyYyxcbiAgICAgIHNoaXBMZW5ndGg6IGV2ZW50LnRhcmdldC5kYXRhc2V0LnNoaXBMZW5ndGgsXG4gICAgICBob3Jpem9udGFsOiBmYWxzZSxcbiAgICAgIHZlcnRpY2FsOiBmYWxzZSxcbiAgICAgIGVsZW1lbnRJRDogZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZShcImlkXCIpLFxuICAgIH07XG4gICAgaWYgKEFycmF5LmZyb20oZXZlbnQudGFyZ2V0LmNsYXNzTGlzdCkuaW5jbHVkZXMoXCJob3Jpem9udGFsXCIpKSB7XG4gICAgICBkYXRhT2JqZWN0Lmhvcml6b250YWwgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAoQXJyYXkuZnJvbShldmVudC50YXJnZXQuY2xhc3NMaXN0KS5pbmNsdWRlcyhcInZlcnRpY2FsXCIpKSB7XG4gICAgICBkYXRhT2JqZWN0LnZlcnRpY2FsID0gdHJ1ZTtcbiAgICB9XG4gICAgY29uc3QgZGF0YVN0cmluZyA9IEpTT04uc3RyaW5naWZ5KGRhdGFPYmplY3QpO1xuICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKFwiaW1hZ2VcIiwgZGF0YVN0cmluZyk7XG4gIH07XG4gIGNvbnN0IGRyYWdPdmVyID0gKGV2ZW50KSA9PiB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgfTtcbiAgY29uc3QgaW5pdGlhbGl6ZUJvYXJkRE9NID0gKCkgPT4ge1xuICAgIGNvbnN0IGh1bWFuUGxheWVyR2FtZWJvYXJkRE9NID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wbGF5ZXItYm9hcmRcIik7XG4gICAgY29uc3QgY29tcHV0ZXJHYW1lYm9hcmRET00gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbXB1dGVyLWJvYXJkXCIpO1xuICAgIGNyZWF0ZUJvYXJkQ2VsbHMoaHVtYW5QbGF5ZXJHYW1lYm9hcmRET00pO1xuICAgIGNyZWF0ZUJvYXJkQ2VsbHMoY29tcHV0ZXJHYW1lYm9hcmRET00pO1xuICB9O1xuICBjb25zdCBpc1ZhbGlkR2FtZWJvYXJkQ2VsbCA9ICh0YXJnZXRDZWxsLCBkYXRhT2JqZWN0KSA9PiB7XG4gICAgY29uc3QgY2VsbENvb3JkaW5hdGVzID0gW1xuICAgICAgTnVtYmVyKHRhcmdldENlbGwuZGF0YXNldC5yb3cpLFxuICAgICAgTnVtYmVyKHRhcmdldENlbGwuZGF0YXNldC5jb2x1bW4pLFxuICAgIF07XG4gICAgY29uc3QgbGVuZ3RoID0gTnVtYmVyKGRhdGFPYmplY3Quc2hpcExlbmd0aCk7XG4gICAgaWYgKGRhdGFPYmplY3QuaG9yaXpvbnRhbCkge1xuICAgICAgaWYgKFxuICAgICAgICBHYW1lTG9vcC5nZXRQbGF5ZXJzKClbMF0uY2hlY2tJZlZhbGlkRW1wdHlDb29yZGluYXRlcyhcbiAgICAgICAgICBjZWxsQ29vcmRpbmF0ZXMsXG4gICAgICAgICAgbGVuZ3RoLFxuICAgICAgICAgIFwicmlnaHRcIlxuICAgICAgICApXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChkYXRhT2JqZWN0LnZlcnRpY2FsKSB7XG4gICAgICBpZiAoXG4gICAgICAgIEdhbWVMb29wLmdldFBsYXllcnMoKVswXS5jaGVja0lmVmFsaWRFbXB0eUNvb3JkaW5hdGVzKFxuICAgICAgICAgIGNlbGxDb29yZGluYXRlcyxcbiAgICAgICAgICBsZW5ndGgsXG4gICAgICAgICAgXCJkb3duXCJcbiAgICAgICAgKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgYWRkU2hpcFRvRE9NID0gKHRhcmdldENlbGwsIGRhdGFPYmplY3QpID0+IHtcbiAgICBjb25zdCBsZW5ndGggPSBkYXRhT2JqZWN0LnNoaXBMZW5ndGg7XG4gICAgY29uc3QgdGFyZ2V0Q2VsbFJvdyA9IE51bWJlcih0YXJnZXRDZWxsLmRhdGFzZXQucm93KTtcbiAgICBjb25zdCB0YXJnZXRDZWxsQ29sdW1uID0gTnVtYmVyKHRhcmdldENlbGwuZGF0YXNldC5jb2x1bW4pO1xuICAgIGNvbnN0IGNvb3JkaW5hdGVzQXJyYXkgPSBbW3RhcmdldENlbGxSb3csIHRhcmdldENlbGxDb2x1bW5dXTtcbiAgICB0YXJnZXRDZWxsLmNsYXNzTGlzdC5hZGQoXCJjb250YWlucy1zaGlwLWltYWdlXCIpO1xuICAgIHRhcmdldENlbGwuY2xhc3NMaXN0LmFkZChcInNoaXAtaW1hZ2VcIik7XG4gICAgdGFyZ2V0Q2VsbC5jbGFzc0xpc3QuYWRkKGBzaGlwLWltYWdlLSR7bGVuZ3RofWApO1xuICAgIHRhcmdldENlbGwuY2xhc3NMaXN0LmFkZChgc2hpcC1pbWFnZS0ke2xlbmd0aH0tMWApO1xuICAgIGlmIChkYXRhT2JqZWN0Lmhvcml6b250YWwpIHtcbiAgICAgIHRhcmdldENlbGwuY2xhc3NMaXN0LmFkZChcImhvcml6b250YWxcIik7XG4gICAgfSBlbHNlIGlmIChkYXRhT2JqZWN0LnZlcnRpY2FsKSB7XG4gICAgICB0YXJnZXRDZWxsLmNsYXNzTGlzdC5hZGQoXCJ2ZXJ0aWNhbFwiKTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgbGV0IHJlbWFpbmluZ0NlbGw7XG4gICAgICBpZiAoZGF0YU9iamVjdC5ob3Jpem9udGFsKSB7XG4gICAgICAgIHJlbWFpbmluZ0NlbGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgIGAucGxheWVyLWJvYXJkIFtkYXRhLXJvdz0nJHt0YXJnZXRDZWxsUm93fSddW2RhdGEtY29sdW1uPScke1xuICAgICAgICAgICAgdGFyZ2V0Q2VsbENvbHVtbiArIGlcbiAgICAgICAgICB9J11gXG4gICAgICAgICk7XG4gICAgICAgIHJlbWFpbmluZ0NlbGwuY2xhc3NMaXN0LmFkZChcImhvcml6b250YWxcIik7XG4gICAgICAgIGNvb3JkaW5hdGVzQXJyYXkucHVzaChbdGFyZ2V0Q2VsbFJvdywgdGFyZ2V0Q2VsbENvbHVtbiArIGldKTtcbiAgICAgIH0gZWxzZSBpZiAoZGF0YU9iamVjdC52ZXJ0aWNhbCkge1xuICAgICAgICByZW1haW5pbmdDZWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICBgLnBsYXllci1ib2FyZCBbZGF0YS1yb3c9JyR7XG4gICAgICAgICAgICB0YXJnZXRDZWxsUm93ICsgaVxuICAgICAgICAgIH0nXVtkYXRhLWNvbHVtbj0nJHt0YXJnZXRDZWxsQ29sdW1ufSddYFxuICAgICAgICApO1xuICAgICAgICByZW1haW5pbmdDZWxsLmNsYXNzTGlzdC5hZGQoXCJ2ZXJ0aWNhbFwiKTtcbiAgICAgICAgY29vcmRpbmF0ZXNBcnJheS5wdXNoKFt0YXJnZXRDZWxsUm93ICsgaSwgdGFyZ2V0Q2VsbENvbHVtbl0pO1xuICAgICAgfVxuICAgICAgcmVtYWluaW5nQ2VsbC5jbGFzc0xpc3QuYWRkKFwiY29udGFpbnMtc2hpcC1pbWFnZVwiKTtcbiAgICAgIHJlbWFpbmluZ0NlbGwuY2xhc3NMaXN0LmFkZChcInNoaXAtaW1hZ2VcIik7XG4gICAgICByZW1haW5pbmdDZWxsLmNsYXNzTGlzdC5hZGQoYHNoaXAtaW1hZ2UtJHtsZW5ndGh9YCk7XG4gICAgICByZW1haW5pbmdDZWxsLmNsYXNzTGlzdC5hZGQoYHNoaXAtaW1hZ2UtJHtsZW5ndGh9LSR7aSArIDF9YCk7XG4gICAgfVxuICAgIHJldHVybiBjb29yZGluYXRlc0FycmF5O1xuICB9O1xuICBjb25zdCBkaXNhYmxlSW1hZ2VCdXR0b25JbnRlcmFjdGlvbnMgPSAoZGF0YU9iamVjdCkgPT4ge1xuICAgIGNvbnN0IElEID0gZGF0YU9iamVjdC5lbGVtZW50SUQ7XG4gICAgY29uc3QgaW1hZ2VFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7SUR9YCk7XG4gICAgY29uc3QgYnV0dG9uRWxlbWVudCA9IGltYWdlRWxlbWVudC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoXCJidXR0b25cIik7XG4gICAgaW1hZ2VFbGVtZW50LnNldEF0dHJpYnV0ZShcImRyYWdnYWJsZVwiLCBmYWxzZSk7XG4gICAgaW1hZ2VFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZC1pbWFnZVwiKTtcbiAgICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgfTtcbiAgY29uc3QgaW5zZXJ0RHJhZ2dlZEltYWdlID0gKGV2ZW50KSA9PiB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBodW1hblBsYXllck9iamVjdCA9IEdhbWVMb29wLmdldFBsYXllcnMoKVswXTtcbiAgICBjb25zdCB0YXJnZXRDZWxsID0gZXZlbnQudGFyZ2V0O1xuICAgIGlmIChBcnJheS5mcm9tKHRhcmdldENlbGwuY2xhc3NMaXN0KS5pbmNsdWRlcyhcImNvbnRhaW5zLXNoaXAtaW1hZ2VcIikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZGF0YVN0cmluZyA9IGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKFwiaW1hZ2VcIik7XG4gICAgY29uc3QgZGF0YU9iamVjdCA9IEpTT04ucGFyc2UoZGF0YVN0cmluZyk7XG4gICAgaWYgKCFpc1ZhbGlkR2FtZWJvYXJkQ2VsbCh0YXJnZXRDZWxsLCBkYXRhT2JqZWN0KSkge1xuICAgICAgLy8gcHJvYmFibHkgbWFrZSBzb21lIERPTSBlcnJvciBtZXNzYWdlIGFwcGVhclxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBzaGlwQ29vcmRpbmF0ZXMgPSBhZGRTaGlwVG9ET00odGFyZ2V0Q2VsbCwgZGF0YU9iamVjdCk7XG4gICAgaHVtYW5QbGF5ZXJPYmplY3QuYWRkU2hpcFRvR2FtZWJvYXJkKFxuICAgICAgTnVtYmVyKGRhdGFPYmplY3Quc2hpcExlbmd0aCksXG4gICAgICBzaGlwQ29vcmRpbmF0ZXNcbiAgICApO1xuICAgIGRpc2FibGVJbWFnZUJ1dHRvbkludGVyYWN0aW9ucyhkYXRhT2JqZWN0KTtcbiAgICB0YXJnZXRDZWxsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkcm9wXCIsIGluc2VydERyYWdnZWRJbWFnZSk7XG4gIH07XG4gIGNvbnN0IHJvdGF0ZVNoaXBJbWFnZSA9IChpbWFnZSkgPT4ge1xuICAgIGNvbnN0IGltYWdlQ2xhc3NlcyA9IEFycmF5LmZyb20oaW1hZ2UuY2xhc3NMaXN0KTtcbiAgICBpZiAoaW1hZ2VDbGFzc2VzLmluY2x1ZGVzKFwiaG9yaXpvbnRhbFwiKSkge1xuICAgICAgaW1hZ2UuY2xhc3NMaXN0LnJlbW92ZShcImhvcml6b250YWxcIik7XG4gICAgICBpbWFnZS5jbGFzc0xpc3QuYWRkKFwidmVydGljYWxcIik7XG4gICAgfSBlbHNlIGlmIChpbWFnZUNsYXNzZXMuaW5jbHVkZXMoXCJ2ZXJ0aWNhbFwiKSkge1xuICAgICAgaW1hZ2UuY2xhc3NMaXN0LnJlbW92ZShcInZlcnRpY2FsXCIpO1xuICAgICAgaW1hZ2UuY2xhc3NMaXN0LmFkZChcImhvcml6b250YWxcIik7XG4gICAgfVxuICB9O1xuICBjb25zdCByb3RhdGVQZXJMZW5ndGggPSAodGVtcERpdiwgY2xvbmVkSW1hZ2VFbGVtZW50KSA9PiB7XG4gICAgY29uc3QgY2xvbmVkSW1hZ2VFbGVtZW50Q2xhc3NlcyA9IEFycmF5LmZyb20oY2xvbmVkSW1hZ2VFbGVtZW50LmNsYXNzTGlzdCk7XG4gICAgaWYgKGNsb25lZEltYWdlRWxlbWVudENsYXNzZXMuaW5jbHVkZXMoXCJob3Jpem9udGFsXCIpKSB7XG4gICAgICB0ZW1wRGl2LmNsYXNzTGlzdC5hZGQoXCJ0ZW1wLXJvdGF0ZS1ob3Jpem9udGFsXCIpO1xuICAgIH0gZWxzZSBpZiAoY2xvbmVkSW1hZ2VFbGVtZW50Q2xhc3Nlcy5pbmNsdWRlcyhcInZlcnRpY2FsXCIpKSB7XG4gICAgICB0ZW1wRGl2LmNsYXNzTGlzdC5hZGQoXCJ0ZW1wLXJvdGF0ZS12ZXJ0aWNhbFwiKTtcbiAgICAgIGlmIChjbG9uZWRJbWFnZUVsZW1lbnQuZGF0YXNldC5zaGlwTGVuZ3RoID09PSBcIjVcIikge1xuICAgICAgICB0ZW1wRGl2LmNsYXNzTGlzdC5hZGQoXCJ0ZW1wLXJvdGF0ZS12ZXJ0aWNhbC01XCIpO1xuICAgICAgfSBlbHNlIGlmIChjbG9uZWRJbWFnZUVsZW1lbnQuZGF0YXNldC5zaGlwTGVuZ3RoID09PSBcIjRcIikge1xuICAgICAgICB0ZW1wRGl2LmNsYXNzTGlzdC5hZGQoXCJ0ZW1wLXJvdGF0ZS12ZXJ0aWNhbC00XCIpO1xuICAgICAgfSBlbHNlIGlmIChjbG9uZWRJbWFnZUVsZW1lbnQuZGF0YXNldC5zaGlwTGVuZ3RoID09PSBcIjNcIikge1xuICAgICAgICB0ZW1wRGl2LmNsYXNzTGlzdC5hZGQoXCJ0ZW1wLXJvdGF0ZS12ZXJ0aWNhbC0zXCIpO1xuICAgICAgfSBlbHNlIGlmIChjbG9uZWRJbWFnZUVsZW1lbnQuZGF0YXNldC5zaGlwTGVuZ3RoID09PSBcIjJcIikge1xuICAgICAgICB0ZW1wRGl2LmNsYXNzTGlzdC5hZGQoXCJ0ZW1wLXJvdGF0ZS12ZXJ0aWNhbC0yXCIpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgY29uc3Qgcm90YXRlRHJhZ2dlZEltYWdlID0gKGV2ZW50KSA9PiB7XG4gICAgY29uc3QgaW1hZ2VFbGVtZW50ID0gZXZlbnQudGFyZ2V0O1xuICAgIGNvbnN0IGNsb25lZEltYWdlRWxlbWVudCA9IGltYWdlRWxlbWVudC5jbG9uZU5vZGUoKTtcbiAgICBjb25zdCB0ZW1wRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB0ZW1wRGl2LmNsYXNzTGlzdC5hZGQoXCJ0ZW1wLXJvdGF0ZVwiKTtcbiAgICByb3RhdGVQZXJMZW5ndGgodGVtcERpdiwgY2xvbmVkSW1hZ2VFbGVtZW50KTtcbiAgICB0ZW1wRGl2LmFwcGVuZENoaWxkKGNsb25lZEltYWdlRWxlbWVudCk7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0ZW1wRGl2KTtcbiAgICBldmVudC5kYXRhVHJhbnNmZXIuc2V0RHJhZ0ltYWdlKHRlbXBEaXYsIDAsIDApO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0ZW1wRGl2KTtcbiAgICB9LCAwKTtcbiAgfTtcbiAgY29uc3QgYWRkQXR0YWNrUmVzdWx0RE9NID0gKHBsYXllclR5cGUsIGF0dGFja1Jlc3VsdHMsIGNvb3JkaW5hdGVzKSA9PiB7XG4gICAgY29uc3QgY2VsbFJvdyA9IGNvb3JkaW5hdGVzWzBdO1xuICAgIGNvbnN0IGNlbGxDb2x1bW4gPSBjb29yZGluYXRlc1sxXTtcbiAgICBjb25zdCBnYW1lYm9hcmRET00gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtwbGF5ZXJUeXBlfS1ib2FyZGApO1xuICAgIGNvbnN0IHRhcmdldENlbGwgPSBnYW1lYm9hcmRET00ucXVlcnlTZWxlY3RvcihcbiAgICAgIGBbZGF0YS1yb3c9JyR7Y2VsbFJvd30nXVtkYXRhLWNvbHVtbj0nJHtjZWxsQ29sdW1ufSddYFxuICAgICk7XG4gICAgY29uc3QgYXR0YWNrUmVzdWx0c0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICAgIGF0dGFja1Jlc3VsdHNFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJhdHRhY2stcmVzdWx0c1wiKTtcbiAgICB0YXJnZXRDZWxsLmFwcGVuZENoaWxkKGF0dGFja1Jlc3VsdHNFbGVtZW50KTtcbiAgICBpZiAoYXR0YWNrUmVzdWx0cyA9PT0gXCJoaXRcIikge1xuICAgICAgYXR0YWNrUmVzdWx0c0VsZW1lbnQuc2V0QXR0cmlidXRlKFwic3JjXCIsIFwiLi4vZGlzdC9yZWRfWC5wbmdcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGF0dGFja1Jlc3VsdHNFbGVtZW50LnNldEF0dHJpYnV0ZShcInNyY1wiLCBcIi4uL2Rpc3Qvd2hpdGVfTy5wbmdcIik7XG4gICAgfVxuICAgIHRhcmdldENlbGwuZGlzYWJsZWQgPSB0cnVlO1xuICB9O1xuICByZXR1cm4ge1xuICAgIGluaXRpYWxpemVCb2FyZERPTSxcbiAgICBpbnNlcnREcmFnZ2VkSW1hZ2UsXG4gICAgcm90YXRlU2hpcEltYWdlLFxuICAgIHJvdGF0ZURyYWdnZWRJbWFnZSxcbiAgICBnZXREcmFnZ2VkSW1hZ2UsXG4gICAgZHJhZ092ZXIsXG4gICAgYWRkQXR0YWNrUmVzdWx0RE9NLFxuICAgIHRvZ2dsZUFiaWxpdHlUb0F0dGFjayxcbiAgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IERPTUNvbnRyb2xsZXIgfTtcbiIsImltcG9ydCB7IFNoaXAgfSBmcm9tIFwiLi9zaGlwXCI7XG5pbXBvcnQgeyBHYW1lYm9hcmQgfSBmcm9tIFwiLi9nYW1lYm9hcmRcIjtcbmltcG9ydCB7IEdhbWVMb29wIH0gZnJvbSBcIi4vZ2FtZWxvb3BcIjtcbmltcG9ydCB7IERPTUNvbnRyb2xsZXIgfSBmcm9tIFwiLi9ET01fY29udHJvbGxlclwiO1xuXG5jb25zdCBQbGF5ZXIgPSAocGxheWVyVHlwZSkgPT4ge1xuICBjb25zdCBkZXRlcm1pbmVQbGF5ZXJUeXBlID0gKCkgPT4ge1xuICAgIGlmIChwbGF5ZXJUeXBlID09PSBcImh1bWFuXCIpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHBsYXllclR5cGUgPT09IFwiY29tcHV0ZXJcIikge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9O1xuICBjb25zdCBjb21wdXRlclBsYXllciA9IGRldGVybWluZVBsYXllclR5cGUoKTtcbiAgY29uc3QgcGxheWVyR2FtZWJvYXJkID0gR2FtZWJvYXJkKCk7XG4gIGxldCBvcHBvc2luZ1BsYXllcjtcbiAgY29uc3QgaXNDb21wdXRlciA9ICgpID0+IGNvbXB1dGVyUGxheWVyO1xuICBjb25zdCBnZXRHYW1lYm9hcmQgPSAoKSA9PiBwbGF5ZXJHYW1lYm9hcmQ7XG4gIGNvbnN0IGdldE9wcG9zaW5nUGxheWVyID0gKCkgPT4gb3Bwb3NpbmdQbGF5ZXI7XG4gIGNvbnN0IHNldE9wcG9zaW5nUGxheWVyID0gKHBsYXllcikgPT4ge1xuICAgIG9wcG9zaW5nUGxheWVyID0gcGxheWVyO1xuICB9O1xuICBjb25zdCBhZGRTaGlwVG9HYW1lYm9hcmQgPSAoc2hpcExlbmd0aCwgY29vcmRpbmF0ZXMpID0+IHtcbiAgICBjb25zdCBzaGlwID0gU2hpcChzaGlwTGVuZ3RoKTtcbiAgICBwbGF5ZXJHYW1lYm9hcmQucGxhY2VTaGlwKHNoaXAsIGNvb3JkaW5hdGVzKTtcbiAgfTtcbiAgY29uc3Qgc2VuZEF0dGFjayA9IChjb29yZGluYXRlcykgPT4ge1xuICAgIGlmIChcbiAgICAgIGNoZWNrSWZQcmV2aW91c2x5QXR0YWNrZWQoY29vcmRpbmF0ZXMpIHx8XG4gICAgICAhR2FtZUxvb3AuaXNJblByb2dyZXNzKCkgfHxcbiAgICAgIEdhbWVMb29wLmlzTWlkQXR0YWNrKClcbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgb3Bwb3NpbmdQbGF5ZXJHYW1lYm9hcmQgPSBvcHBvc2luZ1BsYXllci5nZXRHYW1lYm9hcmQoKTtcbiAgICBjb25zdCBhdHRhY2tSZXN1bHRzID0gb3Bwb3NpbmdQbGF5ZXIucmVjZWl2ZUF0dGFjayhjb29yZGluYXRlcyk7XG4gICAgaWYgKGF0dGFja1Jlc3VsdHMgPT09IFwiaGl0XCIpIHtcbiAgICAgIHBsYXllckdhbWVib2FyZC5hZGRTZW50SGl0U2hvdChjb29yZGluYXRlcyk7XG4gICAgICBpZiAoIWlzQ29tcHV0ZXIoKSkge1xuICAgICAgICBET01Db250cm9sbGVyLmFkZEF0dGFja1Jlc3VsdERPTShcbiAgICAgICAgICBcImNvbXB1dGVyXCIsXG4gICAgICAgICAgYXR0YWNrUmVzdWx0cyxcbiAgICAgICAgICBjb29yZGluYXRlc1xuICAgICAgICApO1xuICAgICAgfSBlbHNlIGlmIChpc0NvbXB1dGVyKCkpIHtcbiAgICAgICAgRE9NQ29udHJvbGxlci5hZGRBdHRhY2tSZXN1bHRET00oXCJwbGF5ZXJcIiwgYXR0YWNrUmVzdWx0cywgY29vcmRpbmF0ZXMpO1xuICAgICAgfVxuICAgICAgaWYgKG9wcG9zaW5nUGxheWVyR2FtZWJvYXJkLmlzQWxsU2hpcHNTdW5rKCkpIHtcbiAgICAgICAgR2FtZUxvb3AuZW5kR2FtZShvcHBvc2luZ1BsYXllcik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGF0dGFja1Jlc3VsdHMgPT09IFwibWlzc1wiKSB7XG4gICAgICBwbGF5ZXJHYW1lYm9hcmQuYWRkU2VudE1pc3NlZFNob3QoY29vcmRpbmF0ZXMpO1xuICAgICAgaWYgKCFpc0NvbXB1dGVyKCkpIHtcbiAgICAgICAgRE9NQ29udHJvbGxlci5hZGRBdHRhY2tSZXN1bHRET00oXG4gICAgICAgICAgXCJjb21wdXRlclwiLFxuICAgICAgICAgIGF0dGFja1Jlc3VsdHMsXG4gICAgICAgICAgY29vcmRpbmF0ZXNcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSBpZiAoaXNDb21wdXRlcigpKSB7XG4gICAgICAgIERPTUNvbnRyb2xsZXIuYWRkQXR0YWNrUmVzdWx0RE9NKFwicGxheWVyXCIsIGF0dGFja1Jlc3VsdHMsIGNvb3JkaW5hdGVzKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG9wcG9zaW5nUGxheWVyLmlzQ29tcHV0ZXIoKSkge1xuICAgICAgR2FtZUxvb3AudG9nZ2xlTWlkQXR0YWNrKHRydWUpO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIEdhbWVMb29wLnRvZ2dsZU1pZEF0dGFjayhmYWxzZSk7XG4gICAgICAgIG9wcG9zaW5nUGxheWVyLnNlbmRDb21wdXRlckF0dGFjaygpO1xuICAgICAgfSwgMTAwMCk7XG4gICAgfVxuICB9O1xuICBjb25zdCBpbml0aWFsaXplQ29tcHV0ZXJHYW1lYm9hcmQgPSAoKSA9PiB7XG4gICAgaWYgKCFjb21wdXRlclBsYXllcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBsZW5ndGhzT2ZTaGlwcyA9IFs1LCA0LCAzLCAzLCAyXTtcbiAgICBmb3IgKGNvbnN0IHNoaXBMZW5ndGggb2YgbGVuZ3Roc09mU2hpcHMpIHtcbiAgICAgIGNvbnN0IHNoaXBDb29yZGluYXRlcyA9IGdlbmVyYXRlQ29tcHV0ZXJTaGlwQ29vcmRpbmF0ZXMoc2hpcExlbmd0aCk7XG4gICAgICBhZGRTaGlwVG9HYW1lYm9hcmQoc2hpcExlbmd0aCwgc2hpcENvb3JkaW5hdGVzKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHNlbmRDb21wdXRlckF0dGFjayA9ICgpID0+IHtcbiAgICBpZiAoIWNvbXB1dGVyUGxheWVyIHx8ICFHYW1lTG9vcC5pc0luUHJvZ3Jlc3MoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBhdHRhY2tDb29yZGluYXRlcyA9IGdlbmVyYXRlQXR0YWNrQ29vcmRpbmF0ZXMoKTtcbiAgICBzZW5kQXR0YWNrKGF0dGFja0Nvb3JkaW5hdGVzKTtcbiAgfTtcbiAgY29uc3QgcmVjZWl2ZUF0dGFjayA9IChjb29yZGluYXRlcykgPT4ge1xuICAgIGNvbnN0IGF0dGFja1Jlc3VsdHMgPSBwbGF5ZXJHYW1lYm9hcmQucmVjZWl2ZUF0dGFjayhjb29yZGluYXRlcyk7XG4gICAgcmV0dXJuIGF0dGFja1Jlc3VsdHM7XG4gIH07XG4gIGNvbnN0IGdlbmVyYXRlQ29tcHV0ZXJTaGlwQ29vcmRpbmF0ZXMgPSAoc2hpcExlbmd0aCkgPT4ge1xuICAgIGxldCBsaXN0T2ZDb29yZGluYXRlcyA9IFtdO1xuICAgIGRvIHtcbiAgICAgIGxpc3RPZkNvb3JkaW5hdGVzID0gW107XG4gICAgICBjb25zdCBzdGFydGluZ0Nvb3JkaW5hdGVzID0gZ2VuZXJhdGVTdGFydGluZ0Nvb3JkaW5hdGVzKCk7XG4gICAgICBjb25zdCBub25TdGFydGluZ0Nvb3JkaW5hdGVzID0gZ2VuZXJhdGVOb25TdGFydGluZ0Nvb3JkaW5hdGVzKFxuICAgICAgICBzdGFydGluZ0Nvb3JkaW5hdGVzLFxuICAgICAgICBzaGlwTGVuZ3RoXG4gICAgICApO1xuICAgICAgbGlzdE9mQ29vcmRpbmF0ZXMucHVzaChzdGFydGluZ0Nvb3JkaW5hdGVzKTtcbiAgICAgIGxpc3RPZkNvb3JkaW5hdGVzID0gbGlzdE9mQ29vcmRpbmF0ZXMuY29uY2F0KG5vblN0YXJ0aW5nQ29vcmRpbmF0ZXMpO1xuICAgIH0gd2hpbGUgKGxpc3RPZkNvb3JkaW5hdGVzLmxlbmd0aCA8IHNoaXBMZW5ndGgpO1xuICAgIHJldHVybiBsaXN0T2ZDb29yZGluYXRlcztcbiAgfTtcbiAgY29uc3QgZ2VuZXJhdGVTdGFydGluZ0Nvb3JkaW5hdGVzID0gKCkgPT4ge1xuICAgIGNvbnN0IHN0YXJ0aW5nQ29vcmRpbmF0ZXMgPSBbdW5kZWZpbmVkLCB1bmRlZmluZWRdO1xuICAgIGRvIHtcbiAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMF0gPSBnZW5lcmF0ZVJhbmRvbUNvb3JkaW5hdGUoKTtcbiAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMV0gPSBnZW5lcmF0ZVJhbmRvbUNvb3JkaW5hdGUoKTtcbiAgICB9IHdoaWxlIChwbGF5ZXJHYW1lYm9hcmQuZ2V0Q29vcmRpbmF0ZXMoc3RhcnRpbmdDb29yZGluYXRlcykgIT09IHVuZGVmaW5lZCk7XG4gICAgcmV0dXJuIHN0YXJ0aW5nQ29vcmRpbmF0ZXM7XG4gIH07XG4gIGNvbnN0IGdlbmVyYXRlTm9uU3RhcnRpbmdDb29yZGluYXRlcyA9IChzdGFydGluZ0Nvb3JkaW5hdGVzLCBzaGlwTGVuZ3RoKSA9PiB7XG4gICAgY29uc3QgcG9zc2libGVDb29yZGluYXRlcyA9IFtdO1xuICAgIGlmIChjaGVja0lmVmFsaWRFbXB0eUNvb3JkaW5hdGVzKHN0YXJ0aW5nQ29vcmRpbmF0ZXMsIHNoaXBMZW5ndGgsIFwidXBcIikpIHtcbiAgICAgIGNvbnN0IHVwQ29vcmRpbmF0ZXMgPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgc2hpcExlbmd0aDsgaSsrKSB7XG4gICAgICAgIHVwQ29vcmRpbmF0ZXMucHVzaChbXG4gICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1swXSAtIGksXG4gICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1sxXSxcbiAgICAgICAgXSk7XG4gICAgICB9XG4gICAgICBwb3NzaWJsZUNvb3JkaW5hdGVzLnB1c2godXBDb29yZGluYXRlcyk7XG4gICAgfVxuICAgIGlmIChcbiAgICAgIGNoZWNrSWZWYWxpZEVtcHR5Q29vcmRpbmF0ZXMoc3RhcnRpbmdDb29yZGluYXRlcywgc2hpcExlbmd0aCwgXCJyaWdodFwiKVxuICAgICkge1xuICAgICAgY29uc3QgcmlnaHRDb29yZGluYXRlcyA9IFtdO1xuICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBzaGlwTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcmlnaHRDb29yZGluYXRlcy5wdXNoKFtcbiAgICAgICAgICBzdGFydGluZ0Nvb3JkaW5hdGVzWzBdLFxuICAgICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMV0gKyBpLFxuICAgICAgICBdKTtcbiAgICAgIH1cbiAgICAgIHBvc3NpYmxlQ29vcmRpbmF0ZXMucHVzaChyaWdodENvb3JkaW5hdGVzKTtcbiAgICB9XG4gICAgaWYgKGNoZWNrSWZWYWxpZEVtcHR5Q29vcmRpbmF0ZXMoc3RhcnRpbmdDb29yZGluYXRlcywgc2hpcExlbmd0aCwgXCJkb3duXCIpKSB7XG4gICAgICBjb25zdCBkb3duQ29vcmRpbmF0ZXMgPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgc2hpcExlbmd0aDsgaSsrKSB7XG4gICAgICAgIGRvd25Db29yZGluYXRlcy5wdXNoKFtcbiAgICAgICAgICBzdGFydGluZ0Nvb3JkaW5hdGVzWzBdICsgaSxcbiAgICAgICAgICBzdGFydGluZ0Nvb3JkaW5hdGVzWzFdLFxuICAgICAgICBdKTtcbiAgICAgIH1cbiAgICAgIHBvc3NpYmxlQ29vcmRpbmF0ZXMucHVzaChkb3duQ29vcmRpbmF0ZXMpO1xuICAgIH1cbiAgICBpZiAoY2hlY2tJZlZhbGlkRW1wdHlDb29yZGluYXRlcyhzdGFydGluZ0Nvb3JkaW5hdGVzLCBzaGlwTGVuZ3RoLCBcImxlZnRcIikpIHtcbiAgICAgIGNvbnN0IGxlZnRDb29yZGluYXRlcyA9IFtdO1xuICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBzaGlwTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGVmdENvb3JkaW5hdGVzLnB1c2goW1xuICAgICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMF0sXG4gICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1sxXSAtIGksXG4gICAgICAgIF0pO1xuICAgICAgfVxuICAgICAgcG9zc2libGVDb29yZGluYXRlcy5wdXNoKGxlZnRDb29yZGluYXRlcyk7XG4gICAgfVxuICAgIGlmIChwb3NzaWJsZUNvb3JkaW5hdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHBvc3NpYmxlQ29vcmRpbmF0ZXM7XG4gICAgfVxuICAgIGNvbnN0IHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogcG9zc2libGVDb29yZGluYXRlcy5sZW5ndGgpO1xuICAgIHJldHVybiBwb3NzaWJsZUNvb3JkaW5hdGVzW3JhbmRvbUluZGV4XTtcbiAgfTtcbiAgY29uc3QgZ2VuZXJhdGVSYW5kb21Db29yZGluYXRlID0gKCkgPT4ge1xuICAgIGNvbnN0IEJPQVJEQVhFU0xFTkdUSCA9IDEwO1xuICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBCT0FSREFYRVNMRU5HVEgpO1xuICB9O1xuICBjb25zdCBjaGVja0lmUHJldmlvdXNseUF0dGFja2VkID0gKGF0dGFja0Nvb3JkaW5hdGVzKSA9PiB7XG4gICAgbGV0IHByZXZpb3VzbHlBdHRhY2tlZCA9IGZhbHNlO1xuICAgIGNvbnN0IHJlY2VpdmVkTWlzc2VkU2hvdHMgPSBvcHBvc2luZ1BsYXllclxuICAgICAgLmdldEdhbWVib2FyZCgpXG4gICAgICAuZ2V0UmVjZWl2ZWRNaXNzZWRTaG90cygpO1xuICAgIGNvbnN0IHJlY2VpdmVkSGl0U2hvdHMgPSBvcHBvc2luZ1BsYXllclxuICAgICAgLmdldEdhbWVib2FyZCgpXG4gICAgICAuZ2V0UmVjZWl2ZWRIaXRTaG90cygpO1xuICAgIHByZXZpb3VzbHlBdHRhY2tlZCA9IHJlY2VpdmVkTWlzc2VkU2hvdHMuc29tZShcbiAgICAgIChzaG90KSA9PlxuICAgICAgICBzaG90WzBdID09PSBhdHRhY2tDb29yZGluYXRlc1swXSAmJiBzaG90WzFdID09PSBhdHRhY2tDb29yZGluYXRlc1sxXVxuICAgICk7XG4gICAgaWYgKCFwcmV2aW91c2x5QXR0YWNrZWQpIHtcbiAgICAgIHByZXZpb3VzbHlBdHRhY2tlZCA9IHJlY2VpdmVkSGl0U2hvdHMuc29tZShcbiAgICAgICAgKHNob3QpID0+XG4gICAgICAgICAgc2hvdFswXSA9PT0gYXR0YWNrQ29vcmRpbmF0ZXNbMF0gJiYgc2hvdFsxXSA9PT0gYXR0YWNrQ29vcmRpbmF0ZXNbMV1cbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBwcmV2aW91c2x5QXR0YWNrZWQ7XG4gIH07XG4gIGNvbnN0IGdlbmVyYXRlQXR0YWNrQ29vcmRpbmF0ZXMgPSAoKSA9PiB7XG4gICAgY29uc3QgYXR0YWNrQ29vcmRpbmF0ZXMgPSBbdW5kZWZpbmVkLCB1bmRlZmluZWRdO1xuICAgIGRvIHtcbiAgICAgIGF0dGFja0Nvb3JkaW5hdGVzWzBdID0gZ2VuZXJhdGVSYW5kb21Db29yZGluYXRlKCk7XG4gICAgICBhdHRhY2tDb29yZGluYXRlc1sxXSA9IGdlbmVyYXRlUmFuZG9tQ29vcmRpbmF0ZSgpO1xuICAgIH0gd2hpbGUgKGNoZWNrSWZQcmV2aW91c2x5QXR0YWNrZWQoYXR0YWNrQ29vcmRpbmF0ZXMpKTtcbiAgICByZXR1cm4gYXR0YWNrQ29vcmRpbmF0ZXM7XG4gIH07XG4gIGNvbnN0IGNoZWNrSWZWYWxpZEVtcHR5Q29vcmRpbmF0ZXMgPSAoXG4gICAgc3RhcnRpbmdDb29yZGluYXRlcyxcbiAgICBzaGlwTGVuZ3RoLFxuICAgIGRpcmVjdGlvblxuICApID0+IHtcbiAgICBzd2l0Y2ggKGRpcmVjdGlvbikge1xuICAgICAgY2FzZSBcInVwXCI6XG4gICAgICAgIGlmIChzdGFydGluZ0Nvb3JkaW5hdGVzWzBdIC0gKHNoaXBMZW5ndGggLSAxKSA8IDApIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBzaGlwTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBwbGF5ZXJHYW1lYm9hcmQuZ2V0Q29vcmRpbmF0ZXMoW1xuICAgICAgICAgICAgICBzdGFydGluZ0Nvb3JkaW5hdGVzWzBdIC0gaSxcbiAgICAgICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1sxXSxcbiAgICAgICAgICAgIF0pICE9PSB1bmRlZmluZWRcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICAgIGNhc2UgXCJyaWdodFwiOlxuICAgICAgICBpZiAoc3RhcnRpbmdDb29yZGluYXRlc1sxXSArIChzaGlwTGVuZ3RoIC0gMSkgPiA5KSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgc2hpcExlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgcGxheWVyR2FtZWJvYXJkLmdldENvb3JkaW5hdGVzKFtcbiAgICAgICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1swXSxcbiAgICAgICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1sxXSArIGksXG4gICAgICAgICAgICBdKSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICBjYXNlIFwiZG93blwiOlxuICAgICAgICBpZiAoc3RhcnRpbmdDb29yZGluYXRlc1swXSArIChzaGlwTGVuZ3RoIC0gMSkgPiA5KSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgc2hpcExlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgcGxheWVyR2FtZWJvYXJkLmdldENvb3JkaW5hdGVzKFtcbiAgICAgICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1swXSArIGksXG4gICAgICAgICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMV0sXG4gICAgICAgICAgICBdKSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICBjYXNlIFwibGVmdFwiOlxuICAgICAgICBpZiAoc3RhcnRpbmdDb29yZGluYXRlc1sxXSAtIChzaGlwTGVuZ3RoIC0gMSkgPCAwKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgc2hpcExlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgcGxheWVyR2FtZWJvYXJkLmdldENvb3JkaW5hdGVzKFtcbiAgICAgICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1swXSxcbiAgICAgICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1sxXSAtIGksXG4gICAgICAgICAgICBdKSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVhaztcbiAgICB9XG4gIH07XG4gIHJldHVybiB7XG4gICAgaXNDb21wdXRlcixcbiAgICBnZXRHYW1lYm9hcmQsXG4gICAgZ2V0T3Bwb3NpbmdQbGF5ZXIsXG4gICAgc2V0T3Bwb3NpbmdQbGF5ZXIsXG4gICAgYWRkU2hpcFRvR2FtZWJvYXJkLFxuICAgIHNlbmRBdHRhY2ssXG4gICAgaW5pdGlhbGl6ZUNvbXB1dGVyR2FtZWJvYXJkLFxuICAgIHNlbmRDb21wdXRlckF0dGFjayxcbiAgICByZWNlaXZlQXR0YWNrLFxuICAgIGNoZWNrSWZWYWxpZEVtcHR5Q29vcmRpbmF0ZXMsXG4gIH07XG59O1xuXG5leHBvcnQgeyBQbGF5ZXIgfTtcbiIsImNvbnN0IEdhbWVib2FyZCA9ICgpID0+IHtcbiAgY29uc3QgY3JlYXRlQm9hcmQgPSAoKSA9PiB7XG4gICAgY29uc3QgYm9hcmQgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpKyspIHtcbiAgICAgIGJvYXJkLnB1c2goW10pO1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAxMDsgaisrKSB7XG4gICAgICAgIGJvYXJkW2ldLnB1c2godW5kZWZpbmVkKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGJvYXJkO1xuICB9O1xuICBjb25zdCBib2FyZCA9IGNyZWF0ZUJvYXJkKCk7XG4gIGNvbnN0IHBsYWNlZFNoaXBzID0gW107XG4gIGNvbnN0IHJlY2VpdmVkTWlzc2VkU2hvdHMgPSBbXTtcbiAgY29uc3QgcmVjZWl2ZWRIaXRTaG90cyA9IFtdO1xuICBjb25zdCBzZW50TWlzc2VkU2hvdHMgPSBbXTtcbiAgY29uc3Qgc2VudEhpdFNob3RzID0gW107XG4gIGxldCBhbGxTaGlwc1N1bmsgPSBmYWxzZTtcbiAgY29uc3QgZ2V0Q29vcmRpbmF0ZXMgPSAoY29vcmRpbmF0ZXMpID0+IGJvYXJkW2Nvb3JkaW5hdGVzWzBdXVtjb29yZGluYXRlc1sxXV07XG4gIGNvbnN0IGdldFBsYWNlZFNoaXBzID0gKCkgPT4gcGxhY2VkU2hpcHM7XG4gIGNvbnN0IGdldFJlY2VpdmVkTWlzc2VkU2hvdHMgPSAoKSA9PiByZWNlaXZlZE1pc3NlZFNob3RzO1xuICBjb25zdCBnZXRSZWNlaXZlZEhpdFNob3RzID0gKCkgPT4gcmVjZWl2ZWRIaXRTaG90cztcbiAgY29uc3QgZ2V0U2VudE1pc3NlZFNob3RzID0gKCkgPT4gc2VudE1pc3NlZFNob3RzO1xuICBjb25zdCBnZXRTZW50SGl0U2hvdHMgPSAoKSA9PiBzZW50SGl0U2hvdHM7XG4gIGNvbnN0IGlzQWxsU2hpcHNTdW5rID0gKCkgPT4gYWxsU2hpcHNTdW5rO1xuICBjb25zdCBwbGFjZVNoaXAgPSAoc2hpcCwgY29vcmRpbmF0ZXNMaXN0KSA9PiB7XG4gICAgZm9yIChjb25zdCBjb29yZGluYXRlcyBvZiBjb29yZGluYXRlc0xpc3QpIHtcbiAgICAgIGJvYXJkW2Nvb3JkaW5hdGVzWzBdXVtjb29yZGluYXRlc1sxXV0gPSBzaGlwO1xuICAgIH1cbiAgICBwbGFjZWRTaGlwcy5wdXNoKHNoaXApO1xuICB9O1xuICBjb25zdCBjaGVja0FsbFNoaXBzU3VuayA9ICgpID0+IHtcbiAgICBpZiAocGxhY2VkU2hpcHMuZXZlcnkoKHNoaXApID0+IHNoaXAuaXNTdW5rKCkpKSB7XG4gICAgICBhbGxTaGlwc1N1bmsgPSB0cnVlO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgcmVjZWl2ZUF0dGFjayA9IChjb29yZGluYXRlcykgPT4ge1xuICAgIGNvbnN0IGVudGl0eUF0Q29vcmRpbmF0ZXMgPSBnZXRDb29yZGluYXRlcyhjb29yZGluYXRlcyk7XG4gICAgaWYgKGVudGl0eUF0Q29vcmRpbmF0ZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgZW50aXR5QXRDb29yZGluYXRlcy5oaXQoKTtcbiAgICAgIGNoZWNrQWxsU2hpcHNTdW5rKCk7XG4gICAgICByZWNlaXZlZEhpdFNob3RzLnB1c2goY29vcmRpbmF0ZXMpO1xuICAgICAgcmV0dXJuIFwiaGl0XCI7XG4gICAgfVxuICAgIHJlY2VpdmVkTWlzc2VkU2hvdHMucHVzaChjb29yZGluYXRlcyk7XG4gICAgcmV0dXJuIFwibWlzc1wiO1xuICB9O1xuICBjb25zdCBhZGRTZW50TWlzc2VkU2hvdCA9IChjb29yZGluYXRlcykgPT4ge1xuICAgIHNlbnRNaXNzZWRTaG90cy5wdXNoKGNvb3JkaW5hdGVzKTtcbiAgfTtcbiAgY29uc3QgYWRkU2VudEhpdFNob3QgPSAoY29vcmRpbmF0ZXMpID0+IHtcbiAgICBzZW50SGl0U2hvdHMucHVzaChjb29yZGluYXRlcyk7XG4gIH07XG4gIHJldHVybiB7XG4gICAgZ2V0Q29vcmRpbmF0ZXMsXG4gICAgZ2V0UGxhY2VkU2hpcHMsXG4gICAgZ2V0UmVjZWl2ZWRNaXNzZWRTaG90cyxcbiAgICBnZXRSZWNlaXZlZEhpdFNob3RzLFxuICAgIGdldFNlbnRNaXNzZWRTaG90cyxcbiAgICBnZXRTZW50SGl0U2hvdHMsXG4gICAgaXNBbGxTaGlwc1N1bmssXG4gICAgcGxhY2VTaGlwLFxuICAgIHJlY2VpdmVBdHRhY2ssXG4gICAgYWRkU2VudE1pc3NlZFNob3QsXG4gICAgYWRkU2VudEhpdFNob3QsXG4gIH07XG59O1xuXG5leHBvcnQgeyBHYW1lYm9hcmQgfTtcbiIsImltcG9ydCB7IFNoaXAgfSBmcm9tIFwiLi9zaGlwXCI7XG5pbXBvcnQgeyBHYW1lYm9hcmQgfSBmcm9tIFwiLi9nYW1lYm9hcmRcIjtcbmltcG9ydCB7IFBsYXllciB9IGZyb20gXCIuL3BsYXllclwiO1xuaW1wb3J0IHsgRE9NQ29udHJvbGxlciB9IGZyb20gXCIuL0RPTV9jb250cm9sbGVyXCI7XG5cbmNvbnN0IEdhbWVMb29wID0gKCgpID0+IHtcbiAgY29uc3QgcGxheWVycyA9IFtdO1xuICBsZXQgaW5Qcm9ncmVzcyA9IHRydWU7XG4gIGxldCB3aW5uZXI7XG4gIGxldCBtaWRBdHRhY2sgPSBmYWxzZTtcbiAgY29uc3QgZ2V0UGxheWVycyA9ICgpID0+IHBsYXllcnM7XG4gIGNvbnN0IGlzSW5Qcm9ncmVzcyA9ICgpID0+IGluUHJvZ3Jlc3M7XG4gIGNvbnN0IGdldFdpbm5lciA9ICgpID0+IHdpbm5lcjtcbiAgY29uc3Qgc2V0V2lubmVyID0gKGxvc2VyUGxheWVyKSA9PiB7XG4gICAgY29uc3Qgd2lubmVyUGxheWVyID0gbG9zZXJQbGF5ZXIuZ2V0T3Bwb3NpbmdQbGF5ZXIoKTtcbiAgICB3aW5uZXIgPSB3aW5uZXJQbGF5ZXI7XG4gIH07XG4gIGNvbnN0IGlzTWlkQXR0YWNrID0gKCkgPT4gbWlkQXR0YWNrO1xuICBjb25zdCB0b2dnbGVNaWRBdHRhY2sgPSAoc3RhdGUpID0+IHtcbiAgICBzdGF0ZSA/IChtaWRBdHRhY2sgPSB0cnVlKSA6IChtaWRBdHRhY2sgPSBmYWxzZSk7XG4gIH07XG4gIGNvbnN0IGNyZWF0ZUdhbWUgPSAoKSA9PiB7XG4gICAgY29uc3QgaHVtYW5QbGF5ZXIgPSBQbGF5ZXIoXCJodW1hblwiKTtcbiAgICBwbGF5ZXJzLnB1c2goaHVtYW5QbGF5ZXIpO1xuICAgIGNvbnN0IGNvbXB1dGVyUGxheWVyID0gUGxheWVyKFwiY29tcHV0ZXJcIik7XG4gICAgcGxheWVycy5wdXNoKGNvbXB1dGVyUGxheWVyKTtcbiAgICBodW1hblBsYXllci5zZXRPcHBvc2luZ1BsYXllcihjb21wdXRlclBsYXllcik7XG4gICAgY29tcHV0ZXJQbGF5ZXIuc2V0T3Bwb3NpbmdQbGF5ZXIoaHVtYW5QbGF5ZXIpO1xuICAgIGNvbXB1dGVyUGxheWVyLmluaXRpYWxpemVDb21wdXRlckdhbWVib2FyZCgpO1xuICB9O1xuICBjb25zdCBlbmRHYW1lID0gKGxvc2VyUGxheWVyKSA9PiB7XG4gICAgaW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgIHNldFdpbm5lcihsb3NlclBsYXllcik7XG4gICAgRE9NQ29udHJvbGxlci50b2dnbGVBYmlsaXR5VG9BdHRhY2soXCJkaXNhYmxlXCIpO1xuICB9O1xuICBjb25zdCByZXNldEdhbWUgPSAoKSA9PiB7XG4gICAgcGxheWVycy5sZW5ndGggPSAwO1xuICAgIGluUHJvZ3Jlc3MgPSB0cnVlO1xuICAgIHdpbm5lciA9IHVuZGVmaW5lZDtcbiAgfTtcbiAgcmV0dXJuIHtcbiAgICBnZXRQbGF5ZXJzLFxuICAgIGlzSW5Qcm9ncmVzcyxcbiAgICBnZXRXaW5uZXIsXG4gICAgaXNNaWRBdHRhY2ssXG4gICAgdG9nZ2xlTWlkQXR0YWNrLFxuICAgIGNyZWF0ZUdhbWUsXG4gICAgZW5kR2FtZSxcbiAgICByZXNldEdhbWUsXG4gIH07XG59KSgpO1xuXG5leHBvcnQgeyBHYW1lTG9vcCB9O1xuIiwiaW1wb3J0IHsgRE9NQ29udHJvbGxlciB9IGZyb20gXCIuL0RPTV9jb250cm9sbGVyXCI7XG5cbmNvbnN0IEV2ZW50TGlzdGVuZXJDb250cm9sbGVyID0gKCgpID0+IHtcbiAgY29uc3Qgcm90YXRlU2hpcEltYWdlTGlzdGVuZXJzID0gKCkgPT4ge1xuICAgIGNvbnN0IHNoaXBQbGFjZW1lbnRFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2hpcC1wbGFjZW1lbnRcIik7XG4gICAgc2hpcFBsYWNlbWVudEVsZW1lbnRzLmZvckVhY2goKGdyb3VwT2ZFbGVtZW50cykgPT4ge1xuICAgICAgY29uc3QgaW1hZ2VFbGVtZW50ID0gZ3JvdXBPZkVsZW1lbnRzLnF1ZXJ5U2VsZWN0b3IoXCJpbWdcIik7XG4gICAgICBjb25zdCBidXR0b25FbGVtZW50ID0gZ3JvdXBPZkVsZW1lbnRzLnF1ZXJ5U2VsZWN0b3IoXCJidXR0b25cIik7XG4gICAgICBidXR0b25FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIERPTUNvbnRyb2xsZXIucm90YXRlU2hpcEltYWdlKGltYWdlRWxlbWVudCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcbiAgY29uc3QgYWRkU2hpcFBsYWNlbWVudERyYWcgPSAoKSA9PiB7XG4gICAgY29uc3Qgc2hpcEltYWdlcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zaGlwLXBpZWNlXCIpKTtcbiAgICBzaGlwSW1hZ2VzLmZvckVhY2goKHNoaXApID0+IHtcbiAgICAgIHNoaXAuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdzdGFydFwiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgRE9NQ29udHJvbGxlci5nZXREcmFnZ2VkSW1hZ2UoZXZlbnQpO1xuICAgICAgICBET01Db250cm9sbGVyLnJvdGF0ZURyYWdnZWRJbWFnZShldmVudCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcbiAgcmV0dXJuIHtcbiAgICByb3RhdGVTaGlwSW1hZ2VMaXN0ZW5lcnMsXG4gICAgYWRkU2hpcFBsYWNlbWVudERyYWcsXG4gIH07XG59KSgpO1xuXG5leHBvcnQgeyBFdmVudExpc3RlbmVyQ29udHJvbGxlciB9O1xuIiwiaW1wb3J0IHsgR2FtZUxvb3AgfSBmcm9tIFwiLi9nYW1lbG9vcFwiO1xuaW1wb3J0IHsgRE9NQ29udHJvbGxlciB9IGZyb20gXCIuL0RPTV9jb250cm9sbGVyXCI7XG5pbXBvcnQgeyBFdmVudExpc3RlbmVyQ29udHJvbGxlciB9IGZyb20gXCIuL2V2ZW50X2xpc3RlbmVyX2NvbnRyb2xsZXJcIjtcblxuR2FtZUxvb3AuY3JlYXRlR2FtZSgpO1xuXG5ET01Db250cm9sbGVyLmluaXRpYWxpemVCb2FyZERPTSgpO1xuXG5FdmVudExpc3RlbmVyQ29udHJvbGxlci5yb3RhdGVTaGlwSW1hZ2VMaXN0ZW5lcnMoKTtcblxuRXZlbnRMaXN0ZW5lckNvbnRyb2xsZXIuYWRkU2hpcFBsYWNlbWVudERyYWcoKTtcbiJdLCJuYW1lcyI6WyJET01Db250cm9sbGVyIiwiY3JlYXRlQm9hcmRDZWxscyIsImdhbWVib2FyZERPTSIsImNvbHVtbkxhYmVscyIsInJvd0xhYmVscyIsImh1bWFuUGxheWVyT2JqZWN0IiwiR2FtZUxvb3AiLCJnZXRQbGF5ZXJzIiwiaSIsImoiLCJpbnZpc2libGVQbGFjZWhvbGRlckVsZW1lbnQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJzdHlsZSIsInZpc2liaWxpdHkiLCJhcHBlbmRDaGlsZCIsImNvbHVtbkxhYmVsRWxlbWVudCIsInRleHRDb250ZW50Iiwicm93TGFiZWxFbGVtZW50IiwiQXJyYXkiLCJmcm9tIiwiaW5jbHVkZXMiLCJwbGF5ZXJDZWxsRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsImRyYWdPdmVyIiwiaW5zZXJ0RHJhZ2dlZEltYWdlIiwiZ2V0R2FtZWJvYXJkIiwiZ2V0UGxhY2VkU2hpcHMiLCJsZW5ndGgiLCJ0b2dnbGVBYmlsaXR5VG9BdHRhY2siLCJjb21wdXRlckNlbGxFbGVtZW50IiwiZGlzYWJsZWQiLCJpc01pZEF0dGFjayIsImNlbGxSb3ciLCJOdW1iZXIiLCJkYXRhc2V0Iiwicm93IiwiY2VsbENvbHVtbiIsImNvbHVtbiIsInNlbmRBdHRhY2siLCJhY3Rpb24iLCJjb21wdXRlckdhbWVib2FyZEVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY2VsbEVsZW1lbnRzIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJjZWxsRWxlbWVudCIsInByZXZlbnREZWZhdWx0IiwidGFyZ2V0Q2VsbCIsInRhcmdldCIsImRhdGFTdHJpbmciLCJkYXRhVHJhbnNmZXIiLCJnZXREYXRhIiwiZGF0YU9iamVjdCIsIkpTT04iLCJwYXJzZSIsImNlbGxDb29yZGluYXRlcyIsInNoaXBMZW5ndGgiLCJob3Jpem9udGFsIiwiY2hlY2tJZlZhbGlkRW1wdHlDb29yZGluYXRlcyIsInZlcnRpY2FsIiwiaXNWYWxpZEdhbWVib2FyZENlbGwiLCJzaGlwQ29vcmRpbmF0ZXMiLCJ0YXJnZXRDZWxsUm93IiwidGFyZ2V0Q2VsbENvbHVtbiIsImNvb3JkaW5hdGVzQXJyYXkiLCJyZW1haW5pbmdDZWxsIiwicHVzaCIsImFkZFNoaXBUb0RPTSIsImFkZFNoaXBUb0dhbWVib2FyZCIsIklEIiwiZWxlbWVudElEIiwiaW1hZ2VFbGVtZW50IiwiYnV0dG9uRWxlbWVudCIsInBhcmVudE5vZGUiLCJkaXNhYmxlSW1hZ2VCdXR0b25JbnRlcmFjdGlvbnMiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiaW5pdGlhbGl6ZUJvYXJkRE9NIiwiaHVtYW5QbGF5ZXJHYW1lYm9hcmRET00iLCJjb21wdXRlckdhbWVib2FyZERPTSIsInJvdGF0ZVNoaXBJbWFnZSIsImltYWdlIiwiaW1hZ2VDbGFzc2VzIiwicmVtb3ZlIiwicm90YXRlRHJhZ2dlZEltYWdlIiwiY2xvbmVkSW1hZ2VFbGVtZW50IiwiY2xvbmVOb2RlIiwidGVtcERpdiIsImNsb25lZEltYWdlRWxlbWVudENsYXNzZXMiLCJyb3RhdGVQZXJMZW5ndGgiLCJib2R5Iiwic2V0RHJhZ0ltYWdlIiwic2V0VGltZW91dCIsInJlbW92ZUNoaWxkIiwiZ2V0RHJhZ2dlZEltYWdlIiwic3JjIiwiZ2V0QXR0cmlidXRlIiwic3RyaW5naWZ5Iiwic2V0RGF0YSIsImFkZEF0dGFja1Jlc3VsdERPTSIsInBsYXllclR5cGUiLCJhdHRhY2tSZXN1bHRzIiwiY29vcmRpbmF0ZXMiLCJhdHRhY2tSZXN1bHRzRWxlbWVudCIsIlBsYXllciIsImNvbXB1dGVyUGxheWVyIiwicGxheWVyR2FtZWJvYXJkIiwiYm9hcmQiLCJ1bmRlZmluZWQiLCJjcmVhdGVCb2FyZCIsInBsYWNlZFNoaXBzIiwicmVjZWl2ZWRNaXNzZWRTaG90cyIsInJlY2VpdmVkSGl0U2hvdHMiLCJzZW50TWlzc2VkU2hvdHMiLCJzZW50SGl0U2hvdHMiLCJhbGxTaGlwc1N1bmsiLCJnZXRDb29yZGluYXRlcyIsImdldFJlY2VpdmVkTWlzc2VkU2hvdHMiLCJnZXRSZWNlaXZlZEhpdFNob3RzIiwiZ2V0U2VudE1pc3NlZFNob3RzIiwiZ2V0U2VudEhpdFNob3RzIiwiaXNBbGxTaGlwc1N1bmsiLCJwbGFjZVNoaXAiLCJzaGlwIiwiY29vcmRpbmF0ZXNMaXN0IiwicmVjZWl2ZUF0dGFjayIsImVudGl0eUF0Q29vcmRpbmF0ZXMiLCJoaXQiLCJldmVyeSIsImlzU3VuayIsImFkZFNlbnRNaXNzZWRTaG90IiwiYWRkU2VudEhpdFNob3QiLCJHYW1lYm9hcmQiLCJvcHBvc2luZ1BsYXllciIsImlzQ29tcHV0ZXIiLCJnaXZlbkxlbmd0aCIsImhpdHMiLCJzdW5rIiwiZ2V0U2hpcExlbmd0aCIsImdldFNoaXBIaXRzIiwiU2hpcCIsImNoZWNrSWZQcmV2aW91c2x5QXR0YWNrZWQiLCJpc0luUHJvZ3Jlc3MiLCJvcHBvc2luZ1BsYXllckdhbWVib2FyZCIsImVuZEdhbWUiLCJ0b2dnbGVNaWRBdHRhY2siLCJzZW5kQ29tcHV0ZXJBdHRhY2siLCJnZW5lcmF0ZUNvbXB1dGVyU2hpcENvb3JkaW5hdGVzIiwibGlzdE9mQ29vcmRpbmF0ZXMiLCJzdGFydGluZ0Nvb3JkaW5hdGVzIiwiZ2VuZXJhdGVTdGFydGluZ0Nvb3JkaW5hdGVzIiwibm9uU3RhcnRpbmdDb29yZGluYXRlcyIsImdlbmVyYXRlTm9uU3RhcnRpbmdDb29yZGluYXRlcyIsImNvbmNhdCIsImdlbmVyYXRlUmFuZG9tQ29vcmRpbmF0ZSIsInBvc3NpYmxlQ29vcmRpbmF0ZXMiLCJ1cENvb3JkaW5hdGVzIiwicmlnaHRDb29yZGluYXRlcyIsImRvd25Db29yZGluYXRlcyIsImxlZnRDb29yZGluYXRlcyIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImF0dGFja0Nvb3JkaW5hdGVzIiwicHJldmlvdXNseUF0dGFja2VkIiwic29tZSIsInNob3QiLCJkaXJlY3Rpb24iLCJnZXRPcHBvc2luZ1BsYXllciIsInNldE9wcG9zaW5nUGxheWVyIiwicGxheWVyIiwiaW5pdGlhbGl6ZUNvbXB1dGVyR2FtZWJvYXJkIiwibGVuZ3Roc09mU2hpcHMiLCJnZW5lcmF0ZUF0dGFja0Nvb3JkaW5hdGVzIiwicGxheWVycyIsIndpbm5lciIsImluUHJvZ3Jlc3MiLCJtaWRBdHRhY2siLCJnZXRXaW5uZXIiLCJzdGF0ZSIsImNyZWF0ZUdhbWUiLCJodW1hblBsYXllciIsImxvc2VyUGxheWVyIiwid2lubmVyUGxheWVyIiwic2V0V2lubmVyIiwicmVzZXRHYW1lIiwiRXZlbnRMaXN0ZW5lckNvbnRyb2xsZXIiLCJncm91cE9mRWxlbWVudHMiXSwic291cmNlUm9vdCI6IiJ9