(()=>{"use strict";const e=(()=>{const e=e=>{const o=["A","B","C","D","E","F","G","H","I","J"],i=["1","2","3","4","5","6","7","8","9","10"];for(let d=-1;d<10;d++)for(let n=-1;n<10;n++)if(-1===d)if(-1===n){const t=document.createElement("div");t.classList.add("gameboard-label"),t.style.visibility="hidden",e.appendChild(t)}else{const t=document.createElement("div");t.classList.add("column-label"),t.textContent=o[n],e.appendChild(t)}else if(-1===n){const t=document.createElement("div");t.classList.add("row-label"),t.textContent=i[d],e.appendChild(t)}else if(Array.from(e.classList).includes("player-board")){const o=document.createElement("div");o.setAttribute("data-row",d),o.setAttribute("data-column",n),o.classList.add("gameboard-cell"),o.addEventListener("dragover",(e=>{s(e)})),o.addEventListener("drop",(e=>{r(e),5===a.getPlayers()[0].getGameboard().getPlacedShips().length&&t("enable")})),e.appendChild(o)}else if(Array.from(e.classList).includes("opponent-board")){const t=document.createElement("button");t.setAttribute("data-row",d),t.setAttribute("data-column",n),t.classList.add("gameboard-cell"),t.disabled=!0,t.addEventListener("click",(e=>{if(!a.isMidAttack()){console.log(t);const e=Number(t.dataset.row),s=Number(t.dataset.column);a.getPlayers()[0].sendAttack([e,s])}})),e.appendChild(t)}},t=e=>{const t=document.querySelector(".opponent-board"),a=Array.from(t.querySelectorAll(".gameboard-cell"));"enable"===e?a.forEach((e=>{e.disabled=!1})):"disable"===e&&a.forEach((e=>{e.disabled=!0}))},s=()=>{event.preventDefault()},r=e=>{e.preventDefault();const t=e.target;if(Array.from(t.classList).includes("contains-ship-image"))return;const s=e.dataTransfer.getData("image"),o=JSON.parse(s);if(!((e,t)=>{const s=[Number(e.dataset.row),Number(e.dataset.column)],r=Number(t.shipLength);return t.horizontal?a.getPlayers()[0].checkIfValidEmptyCoordinates(s,r,"right")?(console.log("fits"),!0):(console.log("nope"),!1):t.vertical?a.getPlayers()[0].checkIfValidEmptyCoordinates(s,r,"down")?(console.log("fits"),!0):(console.log("nope"),!1):void 0})(t,o))return;const i=((e,t)=>{const a=t.shipLength,s=Number(e.dataset.row),r=Number(e.dataset.column),o=[[s,r]];e.classList.add("contains-ship-image"),e.classList.add("ship-image"),e.classList.add(`ship-image-${a}`),e.classList.add(`ship-image-${a}-1`),t.horizontal?e.classList.add("horizontal"):t.vertical&&e.classList.add("vertical");for(let e=1;e<a;e++){let i;t.horizontal?(i=document.querySelector(`.player-board [data-row='${s}'][data-column='${r+e}']`),i.classList.add("horizontal"),o.push([s,r+e])):t.vertical&&(i=document.querySelector(`.player-board [data-row='${s+e}'][data-column='${r}']`),i.classList.add("vertical"),o.push([s+e,r])),i.classList.add("contains-ship-image"),i.classList.add("ship-image"),i.classList.add(`ship-image-${a}`),i.classList.add(`ship-image-${a}-${e+1}`)}return o})(t,o);a.getPlayers()[0].addShipToGameboard(Number(o.shipLength),i),(e=>{const t=e.elementID,a=document.querySelector(`#${t}`),s=a.parentNode.querySelector("button");a.setAttribute("draggable",!1),a.classList.add("disabled-image"),s.disabled=!0})(o),t.removeEventListener("drop",r)};return{initializeBoardDOM:()=>{const t=document.querySelector(".player-board"),a=document.querySelector(".opponent-board");e(t),e(a)},insertDraggedImage:r,rotateShipImage:e=>{const t=Array.from(e.classList);t.includes("horizontal")?(e.classList.remove("horizontal"),e.classList.add("vertical")):t.includes("vertical")&&(e.classList.remove("vertical"),e.classList.add("horizontal"))},rotateDraggedImage:e=>{const t=e.target.cloneNode(),a=document.createElement("div");a.classList.add("temp-rotate"),((e,t)=>{const a=Array.from(t.classList);a.includes("horizontal")?e.classList.add("temp-rotate-horizontal"):a.includes("vertical")&&(e.classList.add("temp-rotate-vertical"),"5"===t.dataset.shipLength?e.classList.add("temp-rotate-vertical-5"):"4"===t.dataset.shipLength?e.classList.add("temp-rotate-vertical-4"):"3"===t.dataset.shipLength?e.classList.add("temp-rotate-vertical-3"):"2"===t.dataset.shipLength&&e.classList.add("temp-rotate-vertical-2"))})(a,t),a.appendChild(t),document.body.appendChild(a),e.dataTransfer.setDragImage(a,0,0),setTimeout((()=>{document.body.removeChild(a)}),0)},getDraggedImage:e=>{const t={image:e.target.src,shipLength:e.target.dataset.shipLength,horizontal:!1,vertical:!1,elementID:e.target.getAttribute("id")};Array.from(e.target.classList).includes("horizontal")?t.horizontal=!0:Array.from(e.target.classList).includes("vertical")&&(t.vertical=!0),console.log(t);const a=JSON.stringify(t);e.dataTransfer.setData("image",a)},dragOver:s,addAttackResultDOM:(e,t,a)=>{const s=a[0],r=a[1];console.log(e);const o=document.querySelector(`.${e}-board`).querySelector(`[data-row='${s}'][data-column='${r}']`),i=document.createElement("img");i.classList.add("attack-results"),o.appendChild(i),"hit"===t?i.setAttribute("src","../dist/red_X.png"):i.setAttribute("src","../dist/white_O.png"),o.disabled=!0},toggleAbilityToAttack:t}})(),t=t=>{const s="human"!==t&&("computer"===t||void 0),r=(()=>{const e=(()=>{const e=[];for(let t=0;t<10;t++){e.push([]);for(let a=0;a<10;a++)e[t].push(void 0)}return e})(),t=[],a=[],s=[],r=[],o=[];let i=!1;const d=t=>e[t[0]][t[1]];return{getCoordinates:d,getPlacedShips:()=>t,getReceivedMissedShots:()=>a,getReceivedHitShots:()=>s,getSentMissedShots:()=>r,getSentHitShots:()=>o,isAllShipsSunk:()=>i,placeShip:(a,s)=>{for(const t of s)e[t[0]][t[1]]=a;t.push(a)},receiveAttack:e=>{const r=d(e);return void 0!==r?(r.hit(),t.every((e=>e.isSunk()))&&(i=!0),s.push(e),"hit"):(a.push(e),"miss")},addSentMissedShot:e=>{r.push(e)},addSentHitShot:e=>{o.push(e)}}})();let o;const i=()=>s,d=(e,t)=>{const a=(e=>{const t=e;let a=0,s=!1;return{getShipLength:()=>t,getShipHits:()=>a,isSunk:()=>s,hit:()=>{if(s)return"That ship has already been sunk!";a+=1,a===t&&(s=!0)}}})(e);r.placeShip(a,t)},n=t=>{if(h(t)||!a.isInProgress()||a.isMidAttack())return;const s=o.getGameboard(),d=o.receiveAttack(t);if("hit"===d){if(r.addSentHitShot(t),i()?i()&&e.addAttackResultDOM("player",d,t):e.addAttackResultDOM("opponent",d,t),s.isAllShipsSunk())return void a.endGame(o)}else"miss"===d&&(r.addSentMissedShot(t),i()?i()&&e.addAttackResultDOM("player",d,t):e.addAttackResultDOM("opponent",d,t));o.isComputer()&&(a.toggleMidAttack(!0),setTimeout((()=>{a.toggleMidAttack(!1),o.sendComputerAttack()}),1e3))},l=e=>{let t=[];do{t=[];const a=c(),s=u(a,e);t.push(a),t=t.concat(s)}while(t.length<e);return t},c=()=>{const e=[void 0,void 0];do{e[0]=g(),e[1]=g()}while(void 0!==r.getCoordinates(e));return e},u=(e,t)=>{const a=[];if(p(e,t,"up")){const s=[];for(let a=1;a<t;a++)s.push([e[0]-a,e[1]]);a.push(s)}if(p(e,t,"right")){const s=[];for(let a=1;a<t;a++)s.push([e[0],e[1]+a]);a.push(s)}if(p(e,t,"down")){const s=[];for(let a=1;a<t;a++)s.push([e[0]+a,e[1]]);a.push(s)}if(p(e,t,"left")){const s=[];for(let a=1;a<t;a++)s.push([e[0],e[1]-a]);a.push(s)}return 0===a.length?a:a[Math.floor(Math.random()*a.length)]},g=()=>Math.floor(10*Math.random()),h=e=>{let t=!1;const a=o.getGameboard().getReceivedMissedShots(),s=o.getGameboard().getReceivedHitShots();return t=a.some((t=>t[0]===e[0]&&t[1]===e[1])),t||(t=s.some((t=>t[0]===e[0]&&t[1]===e[1]))),t},p=(e,t,a)=>{switch(a){case"up":if(e[0]-(t-1)<0)return!1;for(let a=1;a<t;a++)if(void 0!==r.getCoordinates([e[0]-a,e[1]]))return!1;return!0;case"right":if(e[1]+(t-1)>9)return!1;for(let a=1;a<t;a++)if(void 0!==r.getCoordinates([e[0],e[1]+a]))return!1;return!0;case"down":if(e[0]+(t-1)>9)return!1;for(let a=1;a<t;a++)if(void 0!==r.getCoordinates([e[0]+a,e[1]]))return!1;return!0;case"left":if(e[1]-(t-1)<0)return!1;for(let a=1;a<t;a++)if(void 0!==r.getCoordinates([e[0],e[1]-a]))return!1;return!0}};return{isComputer:i,getGameboard:()=>r,getOpposingPlayer:()=>o,setOpposingPlayer:e=>{o=e},addShipToGameboard:d,sendAttack:n,initializeComputerGameboard:()=>{if(!s)return;const e=[5,4,3,3,2];for(const t of e){const e=l(t);d(t,e)}},sendComputerAttack:()=>{if(!s||!a.isInProgress())return;const e=(()=>{const e=[void 0,void 0];do{e[0]=g(),e[1]=g()}while(h(e));return e})();n(e)},receiveAttack:e=>r.receiveAttack(e),checkIfValidEmptyCoordinates:p}},a=(()=>{const a=[];let s,r=!0,o=!1;return{getPlayers:()=>a,isInProgress:()=>r,getWinner:()=>s,isMidAttack:()=>o,toggleMidAttack:e=>{o=!!e},createGame:()=>{const e=t("human");a.push(e);const s=t("computer");a.push(s),e.setOpposingPlayer(s),s.setOpposingPlayer(e),s.initializeComputerGameboard()},endGame:t=>{r=!1,(e=>{const t=e.getOpposingPlayer();s=t})(t),e.toggleAbilityToAttack("disable")},resetGame:()=>{a.length=0,r=!0,s=void 0}}})(),s=()=>{document.querySelectorAll(".ship-placement").forEach((t=>{const a=t.querySelector("img");t.querySelector("button").addEventListener("click",(()=>{e.rotateShipImage(a)}))}))},r=()=>{Array.from(document.querySelectorAll(".ship-piece")).forEach((t=>{t.addEventListener("dragstart",(t=>{e.getDraggedImage(t),e.rotateDraggedImage(t)}))}))};a.createGame(),e.initializeBoardDOM(),s(),r()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBTyxZQUM5QnNFLEVBQVEzRyxLQUFLc0MsR0FDYjRFLEVBQVlaLGtCQUFrQmhFLEdBQzlCQSxFQUFlZ0Usa0JBQWtCWSxHQUNqQzVFLEVBQWVrRSw2QkFBNkIsRUFtQjVDM0IsUUFqQmVzQyxJQUNmTixHQUFhLEVBbEJHLENBQUNNLElBQ2pCLE1BQU1DLEVBQWVELEVBQVlkLG9CQUNqQ08sRUFBU1EsQ0FBWSxFQWlCckJDLENBQVVGLEdBQ1Z6TCxFQUFjZ0Msc0JBQXNCLFVBQVUsRUFlOUM0SixVQWJnQixLQUNoQlgsRUFBUWxKLE9BQVMsRUFDakJvSixHQUFhLEVBQ2JELE9BQVNuRSxDQUFTLEVBWXJCLEVBN0NnQixHQ0hYOEUsRUFDNkIsS0FDRHJMLFNBQVN3QyxpQkFBaUIsbUJBQ2xDQyxTQUFTNkksSUFDN0IsTUFBTTFHLEVBQVEwRyxFQUFnQmhKLGNBQWMsT0FDN0JnSixFQUFnQmhKLGNBQWMsVUFDdEN2QixpQkFBaUIsU0FBUyxLQUMvQnZCLEVBQWNtRixnQkFBZ0JDLEVBQU0sR0FDcEMsR0FDRixFQVRBeUcsRUFXeUIsS0FDUjNLLE1BQU1DLEtBQUtYLFNBQVN3QyxpQkFBaUIsZ0JBQzdDQyxTQUFTNkUsSUFDbEJBLEVBQUt2RyxpQkFBaUIsYUFBY0MsSUFDbEN4QixFQUFjaUcsZ0JBQWdCekUsR0FDOUJ4QixFQUFjdUYsbUJBQW1CL0QsRUFBTSxHQUN2QyxHQUNGLEVDaEJORyxFQUFTNEosYUFFVHZMLEVBQWNnRixxQkFFZDZHLElBRUFBLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vZGluLWJhdHRsZXNoaXAvLi9zcmMvc2hpcC5qcyIsIndlYnBhY2s6Ly9vZGluLWJhdHRsZXNoaXAvLi9zcmMvRE9NX2NvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vb2Rpbi1iYXR0bGVzaGlwLy4vc3JjL3BsYXllci5qcyIsIndlYnBhY2s6Ly9vZGluLWJhdHRsZXNoaXAvLi9zcmMvZ2FtZWJvYXJkLmpzIiwid2VicGFjazovL29kaW4tYmF0dGxlc2hpcC8uL3NyYy9nYW1lbG9vcC5qcyIsIndlYnBhY2s6Ly9vZGluLWJhdHRsZXNoaXAvLi9zcmMvZXZlbnRfbGlzdGVuZXJfY29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly9vZGluLWJhdHRsZXNoaXAvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgU2hpcCA9IChnaXZlbkxlbmd0aCkgPT4ge1xuICBjb25zdCBsZW5ndGggPSBnaXZlbkxlbmd0aDtcbiAgbGV0IGhpdHMgPSAwO1xuICBsZXQgc3VuayA9IGZhbHNlO1xuICBjb25zdCBnZXRTaGlwTGVuZ3RoID0gKCkgPT4gbGVuZ3RoO1xuICBjb25zdCBnZXRTaGlwSGl0cyA9ICgpID0+IGhpdHM7XG4gIGNvbnN0IGlzU3VuayA9ICgpID0+IHN1bms7XG4gIGNvbnN0IGNoZWNrSWZTdW5rID0gKCkgPT4ge1xuICAgIGlmIChoaXRzID09PSBsZW5ndGgpIHtcbiAgICAgIHN1bmsgPSB0cnVlO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgaGl0ID0gKCkgPT4ge1xuICAgIGlmICghc3Vuaykge1xuICAgICAgaGl0cyArPSAxO1xuICAgICAgY2hlY2tJZlN1bmsoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFwiVGhhdCBzaGlwIGhhcyBhbHJlYWR5IGJlZW4gc3VuayFcIjtcbiAgICB9XG4gIH07XG4gIHJldHVybiB7XG4gICAgZ2V0U2hpcExlbmd0aCxcbiAgICBnZXRTaGlwSGl0cyxcbiAgICBpc1N1bmssXG4gICAgaGl0LFxuICB9O1xufTtcblxuZXhwb3J0IHsgU2hpcCB9O1xuIiwiaW1wb3J0IHsgR2FtZUxvb3AgfSBmcm9tIFwiLi9nYW1lbG9vcFwiO1xuXG5jb25zdCBET01Db250cm9sbGVyID0gKCgpID0+IHtcbiAgY29uc3QgY3JlYXRlQm9hcmRDZWxscyA9IChnYW1lYm9hcmRET00pID0+IHtcbiAgICBjb25zdCBCT0FSREFYRVNMRU5HVEggPSAxMDtcbiAgICBjb25zdCBjb2x1bW5MYWJlbHMgPSBbXCJBXCIsIFwiQlwiLCBcIkNcIiwgXCJEXCIsIFwiRVwiLCBcIkZcIiwgXCJHXCIsIFwiSFwiLCBcIklcIiwgXCJKXCJdO1xuICAgIGNvbnN0IHJvd0xhYmVscyA9IFtcIjFcIiwgXCIyXCIsIFwiM1wiLCBcIjRcIiwgXCI1XCIsIFwiNlwiLCBcIjdcIiwgXCI4XCIsIFwiOVwiLCBcIjEwXCJdO1xuICAgIGZvciAobGV0IGkgPSAtMTsgaSA8IEJPQVJEQVhFU0xFTkdUSDsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gLTE7IGogPCBCT0FSREFYRVNMRU5HVEg7IGorKykge1xuICAgICAgICBpZiAoaSA9PT0gLTEpIHtcbiAgICAgICAgICBpZiAoaiA9PT0gLTEpIHtcbiAgICAgICAgICAgIGNvbnN0IGludmlzaWJsZVBsYWNlaG9sZGVyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBpbnZpc2libGVQbGFjZWhvbGRlckVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImdhbWVib2FyZC1sYWJlbFwiKTtcbiAgICAgICAgICAgIGludmlzaWJsZVBsYWNlaG9sZGVyRWxlbWVudC5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcbiAgICAgICAgICAgIGdhbWVib2FyZERPTS5hcHBlbmRDaGlsZChpbnZpc2libGVQbGFjZWhvbGRlckVsZW1lbnQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBjb2x1bW5MYWJlbEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgY29sdW1uTGFiZWxFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJjb2x1bW4tbGFiZWxcIik7XG4gICAgICAgICAgICBjb2x1bW5MYWJlbEVsZW1lbnQudGV4dENvbnRlbnQgPSBjb2x1bW5MYWJlbHNbal07XG4gICAgICAgICAgICBnYW1lYm9hcmRET00uYXBwZW5kQ2hpbGQoY29sdW1uTGFiZWxFbGVtZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoaiA9PT0gLTEpIHtcbiAgICAgICAgICBjb25zdCByb3dMYWJlbEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgIHJvd0xhYmVsRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicm93LWxhYmVsXCIpO1xuICAgICAgICAgIHJvd0xhYmVsRWxlbWVudC50ZXh0Q29udGVudCA9IHJvd0xhYmVsc1tpXTtcbiAgICAgICAgICBnYW1lYm9hcmRET00uYXBwZW5kQ2hpbGQocm93TGFiZWxFbGVtZW50KTtcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICBBcnJheS5mcm9tKGdhbWVib2FyZERPTS5jbGFzc0xpc3QpLmluY2x1ZGVzKFwicGxheWVyLWJvYXJkXCIpXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IGNlbGxFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICBjZWxsRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXJvd1wiLCBpKTtcbiAgICAgICAgICBjZWxsRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLWNvbHVtblwiLCBqKTtcbiAgICAgICAgICBjZWxsRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZ2FtZWJvYXJkLWNlbGxcIik7XG4gICAgICAgICAgY2VsbEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdvdmVyXCIsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgZHJhZ092ZXIoZXZlbnQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGNlbGxFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkcm9wXCIsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgaW5zZXJ0RHJhZ2dlZEltYWdlKGV2ZW50KTtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgR2FtZUxvb3AuZ2V0UGxheWVycygpWzBdLmdldEdhbWVib2FyZCgpLmdldFBsYWNlZFNoaXBzKClcbiAgICAgICAgICAgICAgICAubGVuZ3RoID09PSA1XG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgdG9nZ2xlQWJpbGl0eVRvQXR0YWNrKFwiZW5hYmxlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGdhbWVib2FyZERPTS5hcHBlbmRDaGlsZChjZWxsRWxlbWVudCk7XG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgQXJyYXkuZnJvbShnYW1lYm9hcmRET00uY2xhc3NMaXN0KS5pbmNsdWRlcyhcIm9wcG9uZW50LWJvYXJkXCIpXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IGNlbGxFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgICBjZWxsRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXJvd1wiLCBpKTtcbiAgICAgICAgICBjZWxsRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLWNvbHVtblwiLCBqKTtcbiAgICAgICAgICBjZWxsRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZ2FtZWJvYXJkLWNlbGxcIik7XG4gICAgICAgICAgY2VsbEVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgIGNlbGxFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmICghR2FtZUxvb3AuaXNNaWRBdHRhY2soKSkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjZWxsRWxlbWVudCk7XG4gICAgICAgICAgICAgIGNvbnN0IGNlbGxSb3cgPSBOdW1iZXIoY2VsbEVsZW1lbnQuZGF0YXNldC5yb3cpO1xuICAgICAgICAgICAgICBjb25zdCBjZWxsQ29sdW1uID0gTnVtYmVyKGNlbGxFbGVtZW50LmRhdGFzZXQuY29sdW1uKTtcbiAgICAgICAgICAgICAgR2FtZUxvb3AuZ2V0UGxheWVycygpWzBdLnNlbmRBdHRhY2soW2NlbGxSb3csIGNlbGxDb2x1bW5dKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBnYW1lYm9hcmRET00uYXBwZW5kQ2hpbGQoY2VsbEVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuICBjb25zdCB0b2dnbGVBYmlsaXR5VG9BdHRhY2sgPSAoYWN0aW9uKSA9PiB7XG4gICAgY29uc3QgY29tcHV0ZXJHYW1lYm9hcmRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5vcHBvbmVudC1ib2FyZFwiKTtcbiAgICBjb25zdCBjZWxsRWxlbWVudHMgPSBBcnJheS5mcm9tKFxuICAgICAgY29tcHV0ZXJHYW1lYm9hcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZ2FtZWJvYXJkLWNlbGxcIilcbiAgICApO1xuICAgIGlmIChhY3Rpb24gPT09IFwiZW5hYmxlXCIpIHtcbiAgICAgIGNlbGxFbGVtZW50cy5mb3JFYWNoKChjZWxsRWxlbWVudCkgPT4ge1xuICAgICAgICBjZWxsRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChhY3Rpb24gPT09IFwiZGlzYWJsZVwiKSB7XG4gICAgICBjZWxsRWxlbWVudHMuZm9yRWFjaCgoY2VsbEVsZW1lbnQpID0+IHtcbiAgICAgICAgY2VsbEVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuICBjb25zdCBnZXREcmFnZ2VkSW1hZ2UgPSAoZXZlbnQpID0+IHtcbiAgICBjb25zdCBkYXRhT2JqZWN0ID0ge1xuICAgICAgaW1hZ2U6IGV2ZW50LnRhcmdldC5zcmMsXG4gICAgICBzaGlwTGVuZ3RoOiBldmVudC50YXJnZXQuZGF0YXNldC5zaGlwTGVuZ3RoLFxuICAgICAgaG9yaXpvbnRhbDogZmFsc2UsXG4gICAgICB2ZXJ0aWNhbDogZmFsc2UsXG4gICAgICBlbGVtZW50SUQ6IGV2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJpZFwiKSxcbiAgICB9O1xuICAgIGlmIChBcnJheS5mcm9tKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QpLmluY2x1ZGVzKFwiaG9yaXpvbnRhbFwiKSkge1xuICAgICAgZGF0YU9iamVjdC5ob3Jpem9udGFsID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKEFycmF5LmZyb20oZXZlbnQudGFyZ2V0LmNsYXNzTGlzdCkuaW5jbHVkZXMoXCJ2ZXJ0aWNhbFwiKSkge1xuICAgICAgZGF0YU9iamVjdC52ZXJ0aWNhbCA9IHRydWU7XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKGRhdGFPYmplY3QpO1xuICAgIGNvbnN0IGRhdGFTdHJpbmcgPSBKU09OLnN0cmluZ2lmeShkYXRhT2JqZWN0KTtcbiAgICBldmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YShcImltYWdlXCIsIGRhdGFTdHJpbmcpO1xuICB9O1xuICBjb25zdCBkcmFnT3ZlciA9ICgpID0+IHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICB9O1xuICBjb25zdCBpbml0aWFsaXplQm9hcmRET00gPSAoKSA9PiB7XG4gICAgY29uc3QgaHVtYW5QbGF5ZXJHYW1lYm9hcmRET00gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBsYXllci1ib2FyZFwiKTtcbiAgICBjb25zdCBvcHBvbmVudEdhbWVib2FyZERPTSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIub3Bwb25lbnQtYm9hcmRcIik7XG4gICAgY3JlYXRlQm9hcmRDZWxscyhodW1hblBsYXllckdhbWVib2FyZERPTSk7XG4gICAgY3JlYXRlQm9hcmRDZWxscyhvcHBvbmVudEdhbWVib2FyZERPTSk7XG4gIH07XG4gIGNvbnN0IGlzVmFsaWRHYW1lYm9hcmRDZWxsID0gKHRhcmdldENlbGwsIGRhdGFPYmplY3QpID0+IHtcbiAgICBjb25zdCBjZWxsQ29vcmRpbmF0ZXMgPSBbXG4gICAgICBOdW1iZXIodGFyZ2V0Q2VsbC5kYXRhc2V0LnJvdyksXG4gICAgICBOdW1iZXIodGFyZ2V0Q2VsbC5kYXRhc2V0LmNvbHVtbiksXG4gICAgXTtcbiAgICBjb25zdCBsZW5ndGggPSBOdW1iZXIoZGF0YU9iamVjdC5zaGlwTGVuZ3RoKTtcbiAgICBpZiAoZGF0YU9iamVjdC5ob3Jpem9udGFsKSB7XG4gICAgICBpZiAoXG4gICAgICAgIEdhbWVMb29wLmdldFBsYXllcnMoKVswXS5jaGVja0lmVmFsaWRFbXB0eUNvb3JkaW5hdGVzKFxuICAgICAgICAgIGNlbGxDb29yZGluYXRlcyxcbiAgICAgICAgICBsZW5ndGgsXG4gICAgICAgICAgXCJyaWdodFwiXG4gICAgICAgIClcbiAgICAgICkge1xuICAgICAgICBjb25zb2xlLmxvZyhcImZpdHNcIik7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coXCJub3BlXCIpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoZGF0YU9iamVjdC52ZXJ0aWNhbCkge1xuICAgICAgaWYgKFxuICAgICAgICBHYW1lTG9vcC5nZXRQbGF5ZXJzKClbMF0uY2hlY2tJZlZhbGlkRW1wdHlDb29yZGluYXRlcyhcbiAgICAgICAgICBjZWxsQ29vcmRpbmF0ZXMsXG4gICAgICAgICAgbGVuZ3RoLFxuICAgICAgICAgIFwiZG93blwiXG4gICAgICAgIClcbiAgICAgICkge1xuICAgICAgICBjb25zb2xlLmxvZyhcImZpdHNcIik7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coXCJub3BlXCIpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgYWRkU2hpcFRvRE9NID0gKHRhcmdldENlbGwsIGRhdGFPYmplY3QpID0+IHtcbiAgICBjb25zdCBsZW5ndGggPSBkYXRhT2JqZWN0LnNoaXBMZW5ndGg7XG4gICAgY29uc3QgdGFyZ2V0Q2VsbFJvdyA9IE51bWJlcih0YXJnZXRDZWxsLmRhdGFzZXQucm93KTtcbiAgICBjb25zdCB0YXJnZXRDZWxsQ29sdW1uID0gTnVtYmVyKHRhcmdldENlbGwuZGF0YXNldC5jb2x1bW4pO1xuICAgIGNvbnN0IGNvb3JkaW5hdGVzQXJyYXkgPSBbW3RhcmdldENlbGxSb3csIHRhcmdldENlbGxDb2x1bW5dXTtcbiAgICB0YXJnZXRDZWxsLmNsYXNzTGlzdC5hZGQoXCJjb250YWlucy1zaGlwLWltYWdlXCIpO1xuICAgIHRhcmdldENlbGwuY2xhc3NMaXN0LmFkZChcInNoaXAtaW1hZ2VcIik7XG4gICAgdGFyZ2V0Q2VsbC5jbGFzc0xpc3QuYWRkKGBzaGlwLWltYWdlLSR7bGVuZ3RofWApO1xuICAgIHRhcmdldENlbGwuY2xhc3NMaXN0LmFkZChgc2hpcC1pbWFnZS0ke2xlbmd0aH0tMWApO1xuICAgIGlmIChkYXRhT2JqZWN0Lmhvcml6b250YWwpIHtcbiAgICAgIHRhcmdldENlbGwuY2xhc3NMaXN0LmFkZChcImhvcml6b250YWxcIik7XG4gICAgfSBlbHNlIGlmIChkYXRhT2JqZWN0LnZlcnRpY2FsKSB7XG4gICAgICB0YXJnZXRDZWxsLmNsYXNzTGlzdC5hZGQoXCJ2ZXJ0aWNhbFwiKTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgbGV0IHJlbWFpbmluZ0NlbGw7XG4gICAgICBpZiAoZGF0YU9iamVjdC5ob3Jpem9udGFsKSB7XG4gICAgICAgIHJlbWFpbmluZ0NlbGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgIGAucGxheWVyLWJvYXJkIFtkYXRhLXJvdz0nJHt0YXJnZXRDZWxsUm93fSddW2RhdGEtY29sdW1uPScke1xuICAgICAgICAgICAgdGFyZ2V0Q2VsbENvbHVtbiArIGlcbiAgICAgICAgICB9J11gXG4gICAgICAgICk7XG4gICAgICAgIHJlbWFpbmluZ0NlbGwuY2xhc3NMaXN0LmFkZChcImhvcml6b250YWxcIik7XG4gICAgICAgIGNvb3JkaW5hdGVzQXJyYXkucHVzaChbdGFyZ2V0Q2VsbFJvdywgdGFyZ2V0Q2VsbENvbHVtbiArIGldKTtcbiAgICAgIH0gZWxzZSBpZiAoZGF0YU9iamVjdC52ZXJ0aWNhbCkge1xuICAgICAgICByZW1haW5pbmdDZWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICBgLnBsYXllci1ib2FyZCBbZGF0YS1yb3c9JyR7XG4gICAgICAgICAgICB0YXJnZXRDZWxsUm93ICsgaVxuICAgICAgICAgIH0nXVtkYXRhLWNvbHVtbj0nJHt0YXJnZXRDZWxsQ29sdW1ufSddYFxuICAgICAgICApO1xuICAgICAgICByZW1haW5pbmdDZWxsLmNsYXNzTGlzdC5hZGQoXCJ2ZXJ0aWNhbFwiKTtcbiAgICAgICAgY29vcmRpbmF0ZXNBcnJheS5wdXNoKFt0YXJnZXRDZWxsUm93ICsgaSwgdGFyZ2V0Q2VsbENvbHVtbl0pO1xuICAgICAgfVxuICAgICAgcmVtYWluaW5nQ2VsbC5jbGFzc0xpc3QuYWRkKFwiY29udGFpbnMtc2hpcC1pbWFnZVwiKTtcbiAgICAgIHJlbWFpbmluZ0NlbGwuY2xhc3NMaXN0LmFkZChcInNoaXAtaW1hZ2VcIik7XG4gICAgICByZW1haW5pbmdDZWxsLmNsYXNzTGlzdC5hZGQoYHNoaXAtaW1hZ2UtJHtsZW5ndGh9YCk7XG4gICAgICByZW1haW5pbmdDZWxsLmNsYXNzTGlzdC5hZGQoYHNoaXAtaW1hZ2UtJHtsZW5ndGh9LSR7aSArIDF9YCk7XG4gICAgfVxuICAgIHJldHVybiBjb29yZGluYXRlc0FycmF5O1xuICB9O1xuICBjb25zdCBkaXNhYmxlSW1hZ2VCdXR0b25JbnRlcmFjdGlvbnMgPSAoZGF0YU9iamVjdCkgPT4ge1xuICAgIGNvbnN0IElEID0gZGF0YU9iamVjdC5lbGVtZW50SUQ7XG4gICAgY29uc3QgaW1hZ2VFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7SUR9YCk7XG4gICAgY29uc3QgYnV0dG9uRWxlbWVudCA9IGltYWdlRWxlbWVudC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoXCJidXR0b25cIik7XG4gICAgaW1hZ2VFbGVtZW50LnNldEF0dHJpYnV0ZShcImRyYWdnYWJsZVwiLCBmYWxzZSk7XG4gICAgaW1hZ2VFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZC1pbWFnZVwiKTtcbiAgICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgfTtcbiAgY29uc3QgaW5zZXJ0RHJhZ2dlZEltYWdlID0gKGV2ZW50KSA9PiB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCB0YXJnZXRDZWxsID0gZXZlbnQudGFyZ2V0O1xuICAgIGlmIChBcnJheS5mcm9tKHRhcmdldENlbGwuY2xhc3NMaXN0KS5pbmNsdWRlcyhcImNvbnRhaW5zLXNoaXAtaW1hZ2VcIikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZGF0YVN0cmluZyA9IGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKFwiaW1hZ2VcIik7XG4gICAgY29uc3QgZGF0YU9iamVjdCA9IEpTT04ucGFyc2UoZGF0YVN0cmluZyk7XG4gICAgaWYgKCFpc1ZhbGlkR2FtZWJvYXJkQ2VsbCh0YXJnZXRDZWxsLCBkYXRhT2JqZWN0KSkge1xuICAgICAgLy8gcHJvYmFibHkgbWFrZSBzb21lIERPTSBlcnJvciBtZXNzYWdlIGFwcGVhclxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBzaGlwQ29vcmRpbmF0ZXMgPSBhZGRTaGlwVG9ET00odGFyZ2V0Q2VsbCwgZGF0YU9iamVjdCk7XG4gICAgR2FtZUxvb3AuZ2V0UGxheWVycygpWzBdLmFkZFNoaXBUb0dhbWVib2FyZChcbiAgICAgIE51bWJlcihkYXRhT2JqZWN0LnNoaXBMZW5ndGgpLFxuICAgICAgc2hpcENvb3JkaW5hdGVzXG4gICAgKTtcbiAgICBkaXNhYmxlSW1hZ2VCdXR0b25JbnRlcmFjdGlvbnMoZGF0YU9iamVjdCk7XG4gICAgdGFyZ2V0Q2VsbC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZHJvcFwiLCBpbnNlcnREcmFnZ2VkSW1hZ2UpO1xuICB9O1xuICBjb25zdCByb3RhdGVTaGlwSW1hZ2UgPSAoaW1hZ2UpID0+IHtcbiAgICBjb25zdCBpbWFnZUNsYXNzZXMgPSBBcnJheS5mcm9tKGltYWdlLmNsYXNzTGlzdCk7XG4gICAgaWYgKGltYWdlQ2xhc3Nlcy5pbmNsdWRlcyhcImhvcml6b250YWxcIikpIHtcbiAgICAgIGltYWdlLmNsYXNzTGlzdC5yZW1vdmUoXCJob3Jpem9udGFsXCIpO1xuICAgICAgaW1hZ2UuY2xhc3NMaXN0LmFkZChcInZlcnRpY2FsXCIpO1xuICAgIH0gZWxzZSBpZiAoaW1hZ2VDbGFzc2VzLmluY2x1ZGVzKFwidmVydGljYWxcIikpIHtcbiAgICAgIGltYWdlLmNsYXNzTGlzdC5yZW1vdmUoXCJ2ZXJ0aWNhbFwiKTtcbiAgICAgIGltYWdlLmNsYXNzTGlzdC5hZGQoXCJob3Jpem9udGFsXCIpO1xuICAgIH1cbiAgfTtcbiAgY29uc3Qgcm90YXRlUGVyTGVuZ3RoID0gKHRlbXBEaXYsIGNsb25lZEltYWdlRWxlbWVudCkgPT4ge1xuICAgIGNvbnN0IGNsb25lZEltYWdlRWxlbWVudENsYXNzZXMgPSBBcnJheS5mcm9tKGNsb25lZEltYWdlRWxlbWVudC5jbGFzc0xpc3QpO1xuICAgIGlmIChjbG9uZWRJbWFnZUVsZW1lbnRDbGFzc2VzLmluY2x1ZGVzKFwiaG9yaXpvbnRhbFwiKSkge1xuICAgICAgdGVtcERpdi5jbGFzc0xpc3QuYWRkKFwidGVtcC1yb3RhdGUtaG9yaXpvbnRhbFwiKTtcbiAgICB9IGVsc2UgaWYgKGNsb25lZEltYWdlRWxlbWVudENsYXNzZXMuaW5jbHVkZXMoXCJ2ZXJ0aWNhbFwiKSkge1xuICAgICAgdGVtcERpdi5jbGFzc0xpc3QuYWRkKFwidGVtcC1yb3RhdGUtdmVydGljYWxcIik7XG4gICAgICBpZiAoY2xvbmVkSW1hZ2VFbGVtZW50LmRhdGFzZXQuc2hpcExlbmd0aCA9PT0gXCI1XCIpIHtcbiAgICAgICAgdGVtcERpdi5jbGFzc0xpc3QuYWRkKFwidGVtcC1yb3RhdGUtdmVydGljYWwtNVwiKTtcbiAgICAgIH0gZWxzZSBpZiAoY2xvbmVkSW1hZ2VFbGVtZW50LmRhdGFzZXQuc2hpcExlbmd0aCA9PT0gXCI0XCIpIHtcbiAgICAgICAgdGVtcERpdi5jbGFzc0xpc3QuYWRkKFwidGVtcC1yb3RhdGUtdmVydGljYWwtNFwiKTtcbiAgICAgIH0gZWxzZSBpZiAoY2xvbmVkSW1hZ2VFbGVtZW50LmRhdGFzZXQuc2hpcExlbmd0aCA9PT0gXCIzXCIpIHtcbiAgICAgICAgdGVtcERpdi5jbGFzc0xpc3QuYWRkKFwidGVtcC1yb3RhdGUtdmVydGljYWwtM1wiKTtcbiAgICAgIH0gZWxzZSBpZiAoY2xvbmVkSW1hZ2VFbGVtZW50LmRhdGFzZXQuc2hpcExlbmd0aCA9PT0gXCIyXCIpIHtcbiAgICAgICAgdGVtcERpdi5jbGFzc0xpc3QuYWRkKFwidGVtcC1yb3RhdGUtdmVydGljYWwtMlwiKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGNvbnN0IHJvdGF0ZURyYWdnZWRJbWFnZSA9IChldmVudCkgPT4ge1xuICAgIGNvbnN0IGltYWdlRWxlbWVudCA9IGV2ZW50LnRhcmdldDtcbiAgICBjb25zdCBjbG9uZWRJbWFnZUVsZW1lbnQgPSBpbWFnZUVsZW1lbnQuY2xvbmVOb2RlKCk7XG4gICAgY29uc3QgdGVtcERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGVtcERpdi5jbGFzc0xpc3QuYWRkKFwidGVtcC1yb3RhdGVcIik7XG4gICAgcm90YXRlUGVyTGVuZ3RoKHRlbXBEaXYsIGNsb25lZEltYWdlRWxlbWVudCk7XG4gICAgdGVtcERpdi5hcHBlbmRDaGlsZChjbG9uZWRJbWFnZUVsZW1lbnQpO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGVtcERpdik7XG4gICAgZXZlbnQuZGF0YVRyYW5zZmVyLnNldERyYWdJbWFnZSh0ZW1wRGl2LCAwLCAwKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGVtcERpdik7XG4gICAgfSwgMCk7XG4gIH07XG4gIGNvbnN0IGFkZEF0dGFja1Jlc3VsdERPTSA9IChwbGF5ZXJUeXBlLCBhdHRhY2tSZXN1bHRzLCBjb29yZGluYXRlcykgPT4ge1xuICAgIGNvbnN0IGNlbGxSb3cgPSBjb29yZGluYXRlc1swXTtcbiAgICBjb25zdCBjZWxsQ29sdW1uID0gY29vcmRpbmF0ZXNbMV07XG4gICAgY29uc29sZS5sb2cocGxheWVyVHlwZSk7XG4gICAgY29uc3QgZ2FtZWJvYXJkRE9NID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7cGxheWVyVHlwZX0tYm9hcmRgKTtcbiAgICBjb25zdCB0YXJnZXRDZWxsID0gZ2FtZWJvYXJkRE9NLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgW2RhdGEtcm93PScke2NlbGxSb3d9J11bZGF0YS1jb2x1bW49JyR7Y2VsbENvbHVtbn0nXWBcbiAgICApO1xuICAgIGNvbnN0IGF0dGFja1Jlc3VsdHNFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgICBhdHRhY2tSZXN1bHRzRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiYXR0YWNrLXJlc3VsdHNcIik7XG4gICAgdGFyZ2V0Q2VsbC5hcHBlbmRDaGlsZChhdHRhY2tSZXN1bHRzRWxlbWVudCk7XG4gICAgaWYgKGF0dGFja1Jlc3VsdHMgPT09IFwiaGl0XCIpIHtcbiAgICAgIGF0dGFja1Jlc3VsdHNFbGVtZW50LnNldEF0dHJpYnV0ZShcInNyY1wiLCBcIi4uL2Rpc3QvcmVkX1gucG5nXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhdHRhY2tSZXN1bHRzRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgXCIuLi9kaXN0L3doaXRlX08ucG5nXCIpO1xuICAgIH1cbiAgICB0YXJnZXRDZWxsLmRpc2FibGVkID0gdHJ1ZTtcbiAgfTtcbiAgcmV0dXJuIHtcbiAgICBpbml0aWFsaXplQm9hcmRET00sXG4gICAgaW5zZXJ0RHJhZ2dlZEltYWdlLFxuICAgIHJvdGF0ZVNoaXBJbWFnZSxcbiAgICByb3RhdGVEcmFnZ2VkSW1hZ2UsXG4gICAgZ2V0RHJhZ2dlZEltYWdlLFxuICAgIGRyYWdPdmVyLFxuICAgIGFkZEF0dGFja1Jlc3VsdERPTSxcbiAgICB0b2dnbGVBYmlsaXR5VG9BdHRhY2ssXG4gIH07XG59KSgpO1xuXG5leHBvcnQgeyBET01Db250cm9sbGVyIH07XG4iLCJpbXBvcnQgeyBTaGlwIH0gZnJvbSBcIi4vc2hpcFwiO1xuaW1wb3J0IHsgR2FtZWJvYXJkIH0gZnJvbSBcIi4vZ2FtZWJvYXJkXCI7XG5pbXBvcnQgeyBHYW1lTG9vcCB9IGZyb20gXCIuL2dhbWVsb29wXCI7XG5pbXBvcnQgeyBET01Db250cm9sbGVyIH0gZnJvbSBcIi4vRE9NX2NvbnRyb2xsZXJcIjtcblxuY29uc3QgUGxheWVyID0gKHBsYXllclR5cGUpID0+IHtcbiAgY29uc3QgZGV0ZXJtaW5lUGxheWVyVHlwZSA9ICgpID0+IHtcbiAgICBpZiAocGxheWVyVHlwZSA9PT0gXCJodW1hblwiKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChwbGF5ZXJUeXBlID09PSBcImNvbXB1dGVyXCIpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgY29tcHV0ZXJQbGF5ZXIgPSBkZXRlcm1pbmVQbGF5ZXJUeXBlKCk7XG4gIGNvbnN0IHBsYXllckdhbWVib2FyZCA9IEdhbWVib2FyZCgpO1xuICBsZXQgb3Bwb3NpbmdQbGF5ZXI7XG4gIGNvbnN0IGlzQ29tcHV0ZXIgPSAoKSA9PiBjb21wdXRlclBsYXllcjtcbiAgY29uc3QgZ2V0R2FtZWJvYXJkID0gKCkgPT4gcGxheWVyR2FtZWJvYXJkO1xuICBjb25zdCBnZXRPcHBvc2luZ1BsYXllciA9ICgpID0+IG9wcG9zaW5nUGxheWVyO1xuICBjb25zdCBzZXRPcHBvc2luZ1BsYXllciA9IChwbGF5ZXIpID0+IHtcbiAgICBvcHBvc2luZ1BsYXllciA9IHBsYXllcjtcbiAgfTtcbiAgY29uc3QgYWRkU2hpcFRvR2FtZWJvYXJkID0gKHNoaXBMZW5ndGgsIGNvb3JkaW5hdGVzKSA9PiB7XG4gICAgY29uc3Qgc2hpcCA9IFNoaXAoc2hpcExlbmd0aCk7XG4gICAgcGxheWVyR2FtZWJvYXJkLnBsYWNlU2hpcChzaGlwLCBjb29yZGluYXRlcyk7XG4gIH07XG4gIGNvbnN0IHNlbmRBdHRhY2sgPSAoY29vcmRpbmF0ZXMpID0+IHtcbiAgICBpZiAoXG4gICAgICBjaGVja0lmUHJldmlvdXNseUF0dGFja2VkKGNvb3JkaW5hdGVzKSB8fFxuICAgICAgIUdhbWVMb29wLmlzSW5Qcm9ncmVzcygpIHx8XG4gICAgICBHYW1lTG9vcC5pc01pZEF0dGFjaygpXG4gICAgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG9wcG9zaW5nUGxheWVyR2FtZWJvYXJkID0gb3Bwb3NpbmdQbGF5ZXIuZ2V0R2FtZWJvYXJkKCk7XG4gICAgY29uc3QgYXR0YWNrUmVzdWx0cyA9IG9wcG9zaW5nUGxheWVyLnJlY2VpdmVBdHRhY2soY29vcmRpbmF0ZXMpO1xuICAgIGlmIChhdHRhY2tSZXN1bHRzID09PSBcImhpdFwiKSB7XG4gICAgICBwbGF5ZXJHYW1lYm9hcmQuYWRkU2VudEhpdFNob3QoY29vcmRpbmF0ZXMpO1xuICAgICAgaWYgKCFpc0NvbXB1dGVyKCkpIHtcbiAgICAgICAgRE9NQ29udHJvbGxlci5hZGRBdHRhY2tSZXN1bHRET00oXG4gICAgICAgICAgXCJvcHBvbmVudFwiLFxuICAgICAgICAgIGF0dGFja1Jlc3VsdHMsXG4gICAgICAgICAgY29vcmRpbmF0ZXNcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSBpZiAoaXNDb21wdXRlcigpKSB7XG4gICAgICAgIERPTUNvbnRyb2xsZXIuYWRkQXR0YWNrUmVzdWx0RE9NKFwicGxheWVyXCIsIGF0dGFja1Jlc3VsdHMsIGNvb3JkaW5hdGVzKTtcbiAgICAgIH1cbiAgICAgIGlmIChvcHBvc2luZ1BsYXllckdhbWVib2FyZC5pc0FsbFNoaXBzU3VuaygpKSB7XG4gICAgICAgIEdhbWVMb29wLmVuZEdhbWUob3Bwb3NpbmdQbGF5ZXIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChhdHRhY2tSZXN1bHRzID09PSBcIm1pc3NcIikge1xuICAgICAgcGxheWVyR2FtZWJvYXJkLmFkZFNlbnRNaXNzZWRTaG90KGNvb3JkaW5hdGVzKTtcbiAgICAgIGlmICghaXNDb21wdXRlcigpKSB7XG4gICAgICAgIERPTUNvbnRyb2xsZXIuYWRkQXR0YWNrUmVzdWx0RE9NKFxuICAgICAgICAgIFwib3Bwb25lbnRcIixcbiAgICAgICAgICBhdHRhY2tSZXN1bHRzLFxuICAgICAgICAgIGNvb3JkaW5hdGVzXG4gICAgICAgICk7XG4gICAgICB9IGVsc2UgaWYgKGlzQ29tcHV0ZXIoKSkge1xuICAgICAgICBET01Db250cm9sbGVyLmFkZEF0dGFja1Jlc3VsdERPTShcInBsYXllclwiLCBhdHRhY2tSZXN1bHRzLCBjb29yZGluYXRlcyk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChvcHBvc2luZ1BsYXllci5pc0NvbXB1dGVyKCkpIHtcbiAgICAgIEdhbWVMb29wLnRvZ2dsZU1pZEF0dGFjayh0cnVlKTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBHYW1lTG9vcC50b2dnbGVNaWRBdHRhY2soZmFsc2UpO1xuICAgICAgICBvcHBvc2luZ1BsYXllci5zZW5kQ29tcHV0ZXJBdHRhY2soKTtcbiAgICAgIH0sIDEwMDApO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgaW5pdGlhbGl6ZUNvbXB1dGVyR2FtZWJvYXJkID0gKCkgPT4ge1xuICAgIGlmICghY29tcHV0ZXJQbGF5ZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgbGVuZ3Roc09mU2hpcHMgPSBbNSwgNCwgMywgMywgMl07XG4gICAgZm9yIChjb25zdCBzaGlwTGVuZ3RoIG9mIGxlbmd0aHNPZlNoaXBzKSB7XG4gICAgICBjb25zdCBzaGlwQ29vcmRpbmF0ZXMgPSBnZW5lcmF0ZUNvbXB1dGVyU2hpcENvb3JkaW5hdGVzKHNoaXBMZW5ndGgpO1xuICAgICAgYWRkU2hpcFRvR2FtZWJvYXJkKHNoaXBMZW5ndGgsIHNoaXBDb29yZGluYXRlcyk7XG4gICAgfVxuICB9O1xuICBjb25zdCBzZW5kQ29tcHV0ZXJBdHRhY2sgPSAoKSA9PiB7XG4gICAgaWYgKCFjb21wdXRlclBsYXllciB8fCAhR2FtZUxvb3AuaXNJblByb2dyZXNzKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgYXR0YWNrQ29vcmRpbmF0ZXMgPSBnZW5lcmF0ZUF0dGFja0Nvb3JkaW5hdGVzKCk7XG4gICAgc2VuZEF0dGFjayhhdHRhY2tDb29yZGluYXRlcyk7XG4gIH07XG4gIGNvbnN0IHJlY2VpdmVBdHRhY2sgPSAoY29vcmRpbmF0ZXMpID0+IHtcbiAgICBjb25zdCBhdHRhY2tSZXN1bHRzID0gcGxheWVyR2FtZWJvYXJkLnJlY2VpdmVBdHRhY2soY29vcmRpbmF0ZXMpO1xuICAgIHJldHVybiBhdHRhY2tSZXN1bHRzO1xuICB9O1xuICBjb25zdCBnZW5lcmF0ZUNvbXB1dGVyU2hpcENvb3JkaW5hdGVzID0gKHNoaXBMZW5ndGgpID0+IHtcbiAgICBsZXQgbGlzdE9mQ29vcmRpbmF0ZXMgPSBbXTtcbiAgICBkbyB7XG4gICAgICBsaXN0T2ZDb29yZGluYXRlcyA9IFtdO1xuICAgICAgY29uc3Qgc3RhcnRpbmdDb29yZGluYXRlcyA9IGdlbmVyYXRlU3RhcnRpbmdDb29yZGluYXRlcygpO1xuICAgICAgY29uc3Qgbm9uU3RhcnRpbmdDb29yZGluYXRlcyA9IGdlbmVyYXRlTm9uU3RhcnRpbmdDb29yZGluYXRlcyhcbiAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlcyxcbiAgICAgICAgc2hpcExlbmd0aFxuICAgICAgKTtcbiAgICAgIGxpc3RPZkNvb3JkaW5hdGVzLnB1c2goc3RhcnRpbmdDb29yZGluYXRlcyk7XG4gICAgICBsaXN0T2ZDb29yZGluYXRlcyA9IGxpc3RPZkNvb3JkaW5hdGVzLmNvbmNhdChub25TdGFydGluZ0Nvb3JkaW5hdGVzKTtcbiAgICB9IHdoaWxlIChsaXN0T2ZDb29yZGluYXRlcy5sZW5ndGggPCBzaGlwTGVuZ3RoKTtcbiAgICByZXR1cm4gbGlzdE9mQ29vcmRpbmF0ZXM7XG4gIH07XG4gIGNvbnN0IGdlbmVyYXRlU3RhcnRpbmdDb29yZGluYXRlcyA9ICgpID0+IHtcbiAgICBjb25zdCBzdGFydGluZ0Nvb3JkaW5hdGVzID0gW3VuZGVmaW5lZCwgdW5kZWZpbmVkXTtcbiAgICBkbyB7XG4gICAgICBzdGFydGluZ0Nvb3JkaW5hdGVzWzBdID0gZ2VuZXJhdGVSYW5kb21Db29yZGluYXRlKCk7XG4gICAgICBzdGFydGluZ0Nvb3JkaW5hdGVzWzFdID0gZ2VuZXJhdGVSYW5kb21Db29yZGluYXRlKCk7XG4gICAgfSB3aGlsZSAocGxheWVyR2FtZWJvYXJkLmdldENvb3JkaW5hdGVzKHN0YXJ0aW5nQ29vcmRpbmF0ZXMpICE9PSB1bmRlZmluZWQpO1xuICAgIHJldHVybiBzdGFydGluZ0Nvb3JkaW5hdGVzO1xuICB9O1xuICBjb25zdCBnZW5lcmF0ZU5vblN0YXJ0aW5nQ29vcmRpbmF0ZXMgPSAoc3RhcnRpbmdDb29yZGluYXRlcywgc2hpcExlbmd0aCkgPT4ge1xuICAgIGNvbnN0IHBvc3NpYmxlQ29vcmRpbmF0ZXMgPSBbXTtcbiAgICBpZiAoY2hlY2tJZlZhbGlkRW1wdHlDb29yZGluYXRlcyhzdGFydGluZ0Nvb3JkaW5hdGVzLCBzaGlwTGVuZ3RoLCBcInVwXCIpKSB7XG4gICAgICBjb25zdCB1cENvb3JkaW5hdGVzID0gW107XG4gICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHNoaXBMZW5ndGg7IGkrKykge1xuICAgICAgICB1cENvb3JkaW5hdGVzLnB1c2goW1xuICAgICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMF0gLSBpLFxuICAgICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMV0sXG4gICAgICAgIF0pO1xuICAgICAgfVxuICAgICAgcG9zc2libGVDb29yZGluYXRlcy5wdXNoKHVwQ29vcmRpbmF0ZXMpO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICBjaGVja0lmVmFsaWRFbXB0eUNvb3JkaW5hdGVzKHN0YXJ0aW5nQ29vcmRpbmF0ZXMsIHNoaXBMZW5ndGgsIFwicmlnaHRcIilcbiAgICApIHtcbiAgICAgIGNvbnN0IHJpZ2h0Q29vcmRpbmF0ZXMgPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgc2hpcExlbmd0aDsgaSsrKSB7XG4gICAgICAgIHJpZ2h0Q29vcmRpbmF0ZXMucHVzaChbXG4gICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1swXSxcbiAgICAgICAgICBzdGFydGluZ0Nvb3JkaW5hdGVzWzFdICsgaSxcbiAgICAgICAgXSk7XG4gICAgICB9XG4gICAgICBwb3NzaWJsZUNvb3JkaW5hdGVzLnB1c2gocmlnaHRDb29yZGluYXRlcyk7XG4gICAgfVxuICAgIGlmIChjaGVja0lmVmFsaWRFbXB0eUNvb3JkaW5hdGVzKHN0YXJ0aW5nQ29vcmRpbmF0ZXMsIHNoaXBMZW5ndGgsIFwiZG93blwiKSkge1xuICAgICAgY29uc3QgZG93bkNvb3JkaW5hdGVzID0gW107XG4gICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHNoaXBMZW5ndGg7IGkrKykge1xuICAgICAgICBkb3duQ29vcmRpbmF0ZXMucHVzaChbXG4gICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1swXSArIGksXG4gICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1sxXSxcbiAgICAgICAgXSk7XG4gICAgICB9XG4gICAgICBwb3NzaWJsZUNvb3JkaW5hdGVzLnB1c2goZG93bkNvb3JkaW5hdGVzKTtcbiAgICB9XG4gICAgaWYgKGNoZWNrSWZWYWxpZEVtcHR5Q29vcmRpbmF0ZXMoc3RhcnRpbmdDb29yZGluYXRlcywgc2hpcExlbmd0aCwgXCJsZWZ0XCIpKSB7XG4gICAgICBjb25zdCBsZWZ0Q29vcmRpbmF0ZXMgPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgc2hpcExlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxlZnRDb29yZGluYXRlcy5wdXNoKFtcbiAgICAgICAgICBzdGFydGluZ0Nvb3JkaW5hdGVzWzBdLFxuICAgICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMV0gLSBpLFxuICAgICAgICBdKTtcbiAgICAgIH1cbiAgICAgIHBvc3NpYmxlQ29vcmRpbmF0ZXMucHVzaChsZWZ0Q29vcmRpbmF0ZXMpO1xuICAgIH1cbiAgICBpZiAocG9zc2libGVDb29yZGluYXRlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBwb3NzaWJsZUNvb3JkaW5hdGVzO1xuICAgIH1cbiAgICBjb25zdCByYW5kb21JbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvc3NpYmxlQ29vcmRpbmF0ZXMubGVuZ3RoKTtcbiAgICByZXR1cm4gcG9zc2libGVDb29yZGluYXRlc1tyYW5kb21JbmRleF07XG4gIH07XG4gIGNvbnN0IGdlbmVyYXRlUmFuZG9tQ29vcmRpbmF0ZSA9ICgpID0+IHtcbiAgICBjb25zdCBCT0FSREFYRVNMRU5HVEggPSAxMDtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogQk9BUkRBWEVTTEVOR1RIKTtcbiAgfTtcbiAgY29uc3QgY2hlY2tJZlByZXZpb3VzbHlBdHRhY2tlZCA9IChhdHRhY2tDb29yZGluYXRlcykgPT4ge1xuICAgIGxldCBwcmV2aW91c2x5QXR0YWNrZWQgPSBmYWxzZTtcbiAgICBjb25zdCByZWNlaXZlZE1pc3NlZFNob3RzID0gb3Bwb3NpbmdQbGF5ZXJcbiAgICAgIC5nZXRHYW1lYm9hcmQoKVxuICAgICAgLmdldFJlY2VpdmVkTWlzc2VkU2hvdHMoKTtcbiAgICBjb25zdCByZWNlaXZlZEhpdFNob3RzID0gb3Bwb3NpbmdQbGF5ZXJcbiAgICAgIC5nZXRHYW1lYm9hcmQoKVxuICAgICAgLmdldFJlY2VpdmVkSGl0U2hvdHMoKTtcbiAgICBwcmV2aW91c2x5QXR0YWNrZWQgPSByZWNlaXZlZE1pc3NlZFNob3RzLnNvbWUoXG4gICAgICAoc2hvdCkgPT5cbiAgICAgICAgc2hvdFswXSA9PT0gYXR0YWNrQ29vcmRpbmF0ZXNbMF0gJiYgc2hvdFsxXSA9PT0gYXR0YWNrQ29vcmRpbmF0ZXNbMV1cbiAgICApO1xuICAgIGlmICghcHJldmlvdXNseUF0dGFja2VkKSB7XG4gICAgICBwcmV2aW91c2x5QXR0YWNrZWQgPSByZWNlaXZlZEhpdFNob3RzLnNvbWUoXG4gICAgICAgIChzaG90KSA9PlxuICAgICAgICAgIHNob3RbMF0gPT09IGF0dGFja0Nvb3JkaW5hdGVzWzBdICYmIHNob3RbMV0gPT09IGF0dGFja0Nvb3JkaW5hdGVzWzFdXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gcHJldmlvdXNseUF0dGFja2VkO1xuICB9O1xuICBjb25zdCBnZW5lcmF0ZUF0dGFja0Nvb3JkaW5hdGVzID0gKCkgPT4ge1xuICAgIGNvbnN0IGF0dGFja0Nvb3JkaW5hdGVzID0gW3VuZGVmaW5lZCwgdW5kZWZpbmVkXTtcbiAgICBkbyB7XG4gICAgICBhdHRhY2tDb29yZGluYXRlc1swXSA9IGdlbmVyYXRlUmFuZG9tQ29vcmRpbmF0ZSgpO1xuICAgICAgYXR0YWNrQ29vcmRpbmF0ZXNbMV0gPSBnZW5lcmF0ZVJhbmRvbUNvb3JkaW5hdGUoKTtcbiAgICB9IHdoaWxlIChjaGVja0lmUHJldmlvdXNseUF0dGFja2VkKGF0dGFja0Nvb3JkaW5hdGVzKSk7XG4gICAgcmV0dXJuIGF0dGFja0Nvb3JkaW5hdGVzO1xuICB9O1xuICBjb25zdCBjaGVja0lmVmFsaWRFbXB0eUNvb3JkaW5hdGVzID0gKFxuICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXMsXG4gICAgc2hpcExlbmd0aCxcbiAgICBkaXJlY3Rpb25cbiAgKSA9PiB7XG4gICAgc3dpdGNoIChkaXJlY3Rpb24pIHtcbiAgICAgIGNhc2UgXCJ1cFwiOlxuICAgICAgICBpZiAoc3RhcnRpbmdDb29yZGluYXRlc1swXSAtIChzaGlwTGVuZ3RoIC0gMSkgPCAwKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgc2hpcExlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgcGxheWVyR2FtZWJvYXJkLmdldENvb3JkaW5hdGVzKFtcbiAgICAgICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1swXSAtIGksXG4gICAgICAgICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMV0sXG4gICAgICAgICAgICBdKSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICBjYXNlIFwicmlnaHRcIjpcbiAgICAgICAgaWYgKHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMV0gKyAoc2hpcExlbmd0aCAtIDEpID4gOSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHNoaXBMZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHBsYXllckdhbWVib2FyZC5nZXRDb29yZGluYXRlcyhbXG4gICAgICAgICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMF0sXG4gICAgICAgICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMV0gKyBpLFxuICAgICAgICAgICAgXSkgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcblxuICAgICAgY2FzZSBcImRvd25cIjpcbiAgICAgICAgaWYgKHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMF0gKyAoc2hpcExlbmd0aCAtIDEpID4gOSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHNoaXBMZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHBsYXllckdhbWVib2FyZC5nZXRDb29yZGluYXRlcyhbXG4gICAgICAgICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMF0gKyBpLFxuICAgICAgICAgICAgICBzdGFydGluZ0Nvb3JkaW5hdGVzWzFdLFxuICAgICAgICAgICAgXSkgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcblxuICAgICAgY2FzZSBcImxlZnRcIjpcbiAgICAgICAgaWYgKHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMV0gLSAoc2hpcExlbmd0aCAtIDEpIDwgMCkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHNoaXBMZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHBsYXllckdhbWVib2FyZC5nZXRDb29yZGluYXRlcyhbXG4gICAgICAgICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMF0sXG4gICAgICAgICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMV0gLSBpLFxuICAgICAgICAgICAgXSkgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9O1xuICByZXR1cm4ge1xuICAgIGlzQ29tcHV0ZXIsXG4gICAgZ2V0R2FtZWJvYXJkLFxuICAgIGdldE9wcG9zaW5nUGxheWVyLFxuICAgIHNldE9wcG9zaW5nUGxheWVyLFxuICAgIGFkZFNoaXBUb0dhbWVib2FyZCxcbiAgICBzZW5kQXR0YWNrLFxuICAgIGluaXRpYWxpemVDb21wdXRlckdhbWVib2FyZCxcbiAgICBzZW5kQ29tcHV0ZXJBdHRhY2ssXG4gICAgcmVjZWl2ZUF0dGFjayxcbiAgICBjaGVja0lmVmFsaWRFbXB0eUNvb3JkaW5hdGVzLFxuICB9O1xufTtcblxuZXhwb3J0IHsgUGxheWVyIH07XG4iLCJjb25zdCBHYW1lYm9hcmQgPSAoKSA9PiB7XG4gIGNvbnN0IGNyZWF0ZUJvYXJkID0gKCkgPT4ge1xuICAgIGNvbnN0IGJvYXJkID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XG4gICAgICBib2FyZC5wdXNoKFtdKTtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMTA7IGorKykge1xuICAgICAgICBib2FyZFtpXS5wdXNoKHVuZGVmaW5lZCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBib2FyZDtcbiAgfTtcbiAgY29uc3QgYm9hcmQgPSBjcmVhdGVCb2FyZCgpO1xuICBjb25zdCBwbGFjZWRTaGlwcyA9IFtdO1xuICBjb25zdCByZWNlaXZlZE1pc3NlZFNob3RzID0gW107XG4gIGNvbnN0IHJlY2VpdmVkSGl0U2hvdHMgPSBbXTtcbiAgY29uc3Qgc2VudE1pc3NlZFNob3RzID0gW107XG4gIGNvbnN0IHNlbnRIaXRTaG90cyA9IFtdO1xuICBsZXQgYWxsU2hpcHNTdW5rID0gZmFsc2U7XG4gIGNvbnN0IGdldENvb3JkaW5hdGVzID0gKGNvb3JkaW5hdGVzKSA9PiBib2FyZFtjb29yZGluYXRlc1swXV1bY29vcmRpbmF0ZXNbMV1dO1xuICBjb25zdCBnZXRQbGFjZWRTaGlwcyA9ICgpID0+IHBsYWNlZFNoaXBzO1xuICBjb25zdCBnZXRSZWNlaXZlZE1pc3NlZFNob3RzID0gKCkgPT4gcmVjZWl2ZWRNaXNzZWRTaG90cztcbiAgY29uc3QgZ2V0UmVjZWl2ZWRIaXRTaG90cyA9ICgpID0+IHJlY2VpdmVkSGl0U2hvdHM7XG4gIGNvbnN0IGdldFNlbnRNaXNzZWRTaG90cyA9ICgpID0+IHNlbnRNaXNzZWRTaG90cztcbiAgY29uc3QgZ2V0U2VudEhpdFNob3RzID0gKCkgPT4gc2VudEhpdFNob3RzO1xuICBjb25zdCBpc0FsbFNoaXBzU3VuayA9ICgpID0+IGFsbFNoaXBzU3VuaztcbiAgY29uc3QgcGxhY2VTaGlwID0gKHNoaXAsIGNvb3JkaW5hdGVzTGlzdCkgPT4ge1xuICAgIGZvciAoY29uc3QgY29vcmRpbmF0ZXMgb2YgY29vcmRpbmF0ZXNMaXN0KSB7XG4gICAgICBib2FyZFtjb29yZGluYXRlc1swXV1bY29vcmRpbmF0ZXNbMV1dID0gc2hpcDtcbiAgICB9XG4gICAgcGxhY2VkU2hpcHMucHVzaChzaGlwKTtcbiAgfTtcbiAgY29uc3QgY2hlY2tBbGxTaGlwc1N1bmsgPSAoKSA9PiB7XG4gICAgaWYgKHBsYWNlZFNoaXBzLmV2ZXJ5KChzaGlwKSA9PiBzaGlwLmlzU3VuaygpKSkge1xuICAgICAgYWxsU2hpcHNTdW5rID0gdHJ1ZTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHJlY2VpdmVBdHRhY2sgPSAoY29vcmRpbmF0ZXMpID0+IHtcbiAgICBjb25zdCBlbnRpdHlBdENvb3JkaW5hdGVzID0gZ2V0Q29vcmRpbmF0ZXMoY29vcmRpbmF0ZXMpO1xuICAgIGlmIChlbnRpdHlBdENvb3JkaW5hdGVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGVudGl0eUF0Q29vcmRpbmF0ZXMuaGl0KCk7XG4gICAgICBjaGVja0FsbFNoaXBzU3VuaygpO1xuICAgICAgcmVjZWl2ZWRIaXRTaG90cy5wdXNoKGNvb3JkaW5hdGVzKTtcbiAgICAgIHJldHVybiBcImhpdFwiO1xuICAgIH1cbiAgICByZWNlaXZlZE1pc3NlZFNob3RzLnB1c2goY29vcmRpbmF0ZXMpO1xuICAgIHJldHVybiBcIm1pc3NcIjtcbiAgfTtcbiAgY29uc3QgYWRkU2VudE1pc3NlZFNob3QgPSAoY29vcmRpbmF0ZXMpID0+IHtcbiAgICBzZW50TWlzc2VkU2hvdHMucHVzaChjb29yZGluYXRlcyk7XG4gIH07XG4gIGNvbnN0IGFkZFNlbnRIaXRTaG90ID0gKGNvb3JkaW5hdGVzKSA9PiB7XG4gICAgc2VudEhpdFNob3RzLnB1c2goY29vcmRpbmF0ZXMpO1xuICB9O1xuICByZXR1cm4ge1xuICAgIGdldENvb3JkaW5hdGVzLFxuICAgIGdldFBsYWNlZFNoaXBzLFxuICAgIGdldFJlY2VpdmVkTWlzc2VkU2hvdHMsXG4gICAgZ2V0UmVjZWl2ZWRIaXRTaG90cyxcbiAgICBnZXRTZW50TWlzc2VkU2hvdHMsXG4gICAgZ2V0U2VudEhpdFNob3RzLFxuICAgIGlzQWxsU2hpcHNTdW5rLFxuICAgIHBsYWNlU2hpcCxcbiAgICByZWNlaXZlQXR0YWNrLFxuICAgIGFkZFNlbnRNaXNzZWRTaG90LFxuICAgIGFkZFNlbnRIaXRTaG90LFxuICB9O1xufTtcblxuZXhwb3J0IHsgR2FtZWJvYXJkIH07XG4iLCJpbXBvcnQgeyBTaGlwIH0gZnJvbSBcIi4vc2hpcFwiO1xuaW1wb3J0IHsgR2FtZWJvYXJkIH0gZnJvbSBcIi4vZ2FtZWJvYXJkXCI7XG5pbXBvcnQgeyBQbGF5ZXIgfSBmcm9tIFwiLi9wbGF5ZXJcIjtcbmltcG9ydCB7IERPTUNvbnRyb2xsZXIgfSBmcm9tIFwiLi9ET01fY29udHJvbGxlclwiO1xuXG5jb25zdCBHYW1lTG9vcCA9ICgoKSA9PiB7XG4gIGNvbnN0IHBsYXllcnMgPSBbXTtcbiAgbGV0IGluUHJvZ3Jlc3MgPSB0cnVlO1xuICBsZXQgd2lubmVyO1xuICBsZXQgbWlkQXR0YWNrID0gZmFsc2U7XG4gIGNvbnN0IGdldFBsYXllcnMgPSAoKSA9PiBwbGF5ZXJzO1xuICBjb25zdCBpc0luUHJvZ3Jlc3MgPSAoKSA9PiBpblByb2dyZXNzO1xuICBjb25zdCBnZXRXaW5uZXIgPSAoKSA9PiB3aW5uZXI7XG4gIGNvbnN0IHNldFdpbm5lciA9IChsb3NlclBsYXllcikgPT4ge1xuICAgIGNvbnN0IHdpbm5lclBsYXllciA9IGxvc2VyUGxheWVyLmdldE9wcG9zaW5nUGxheWVyKCk7XG4gICAgd2lubmVyID0gd2lubmVyUGxheWVyO1xuICB9O1xuICBjb25zdCBpc01pZEF0dGFjayA9ICgpID0+IG1pZEF0dGFjaztcbiAgY29uc3QgdG9nZ2xlTWlkQXR0YWNrID0gKHN0YXRlKSA9PiB7XG4gICAgc3RhdGUgPyAobWlkQXR0YWNrID0gdHJ1ZSkgOiAobWlkQXR0YWNrID0gZmFsc2UpO1xuICB9O1xuICBjb25zdCBjcmVhdGVHYW1lID0gKCkgPT4ge1xuICAgIGNvbnN0IGh1bWFuUGxheWVyID0gUGxheWVyKFwiaHVtYW5cIik7XG4gICAgcGxheWVycy5wdXNoKGh1bWFuUGxheWVyKTtcbiAgICBjb25zdCBjb21wdXRlclBsYXllciA9IFBsYXllcihcImNvbXB1dGVyXCIpO1xuICAgIHBsYXllcnMucHVzaChjb21wdXRlclBsYXllcik7XG4gICAgaHVtYW5QbGF5ZXIuc2V0T3Bwb3NpbmdQbGF5ZXIoY29tcHV0ZXJQbGF5ZXIpO1xuICAgIGNvbXB1dGVyUGxheWVyLnNldE9wcG9zaW5nUGxheWVyKGh1bWFuUGxheWVyKTtcbiAgICBjb21wdXRlclBsYXllci5pbml0aWFsaXplQ29tcHV0ZXJHYW1lYm9hcmQoKTtcbiAgfTtcbiAgY29uc3QgZW5kR2FtZSA9IChsb3NlclBsYXllcikgPT4ge1xuICAgIGluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICBzZXRXaW5uZXIobG9zZXJQbGF5ZXIpO1xuICAgIERPTUNvbnRyb2xsZXIudG9nZ2xlQWJpbGl0eVRvQXR0YWNrKFwiZGlzYWJsZVwiKTtcbiAgfTtcbiAgY29uc3QgcmVzZXRHYW1lID0gKCkgPT4ge1xuICAgIHBsYXllcnMubGVuZ3RoID0gMDtcbiAgICBpblByb2dyZXNzID0gdHJ1ZTtcbiAgICB3aW5uZXIgPSB1bmRlZmluZWQ7XG4gIH07XG4gIHJldHVybiB7XG4gICAgZ2V0UGxheWVycyxcbiAgICBpc0luUHJvZ3Jlc3MsXG4gICAgZ2V0V2lubmVyLFxuICAgIGlzTWlkQXR0YWNrLFxuICAgIHRvZ2dsZU1pZEF0dGFjayxcbiAgICBjcmVhdGVHYW1lLFxuICAgIGVuZEdhbWUsXG4gICAgcmVzZXRHYW1lLFxuICB9O1xufSkoKTtcblxuZXhwb3J0IHsgR2FtZUxvb3AgfTtcbiIsImltcG9ydCB7IERPTUNvbnRyb2xsZXIgfSBmcm9tIFwiLi9ET01fY29udHJvbGxlclwiO1xuXG5jb25zdCBFdmVudExpc3RlbmVyQ29udHJvbGxlciA9ICgoKSA9PiB7XG4gIGNvbnN0IHJvdGF0ZVNoaXBJbWFnZUxpc3RlbmVycyA9ICgpID0+IHtcbiAgICBjb25zdCBzaGlwUGxhY2VtZW50RWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNoaXAtcGxhY2VtZW50XCIpO1xuICAgIHNoaXBQbGFjZW1lbnRFbGVtZW50cy5mb3JFYWNoKChncm91cE9mRWxlbWVudHMpID0+IHtcbiAgICAgIGNvbnN0IGltYWdlID0gZ3JvdXBPZkVsZW1lbnRzLnF1ZXJ5U2VsZWN0b3IoXCJpbWdcIik7XG4gICAgICBjb25zdCBidXR0b24gPSBncm91cE9mRWxlbWVudHMucXVlcnlTZWxlY3RvcihcImJ1dHRvblwiKTtcbiAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBET01Db250cm9sbGVyLnJvdGF0ZVNoaXBJbWFnZShpbWFnZSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcbiAgY29uc3QgYWRkU2hpcFBsYWNlbWVudERyYWcgPSAoKSA9PiB7XG4gICAgY29uc3Qgc2hpcEltYWdlcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zaGlwLXBpZWNlXCIpKTtcbiAgICBzaGlwSW1hZ2VzLmZvckVhY2goKHNoaXApID0+IHtcbiAgICAgIHNoaXAuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdzdGFydFwiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgRE9NQ29udHJvbGxlci5nZXREcmFnZ2VkSW1hZ2UoZXZlbnQpO1xuICAgICAgICBET01Db250cm9sbGVyLnJvdGF0ZURyYWdnZWRJbWFnZShldmVudCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcbiAgcmV0dXJuIHtcbiAgICByb3RhdGVTaGlwSW1hZ2VMaXN0ZW5lcnMsXG4gICAgYWRkU2hpcFBsYWNlbWVudERyYWcsXG4gIH07XG59KSgpO1xuXG5leHBvcnQgeyBFdmVudExpc3RlbmVyQ29udHJvbGxlciB9O1xuIiwiaW1wb3J0IHsgR2FtZUxvb3AgfSBmcm9tIFwiLi9nYW1lbG9vcFwiO1xuaW1wb3J0IHsgRE9NQ29udHJvbGxlciB9IGZyb20gXCIuL0RPTV9jb250cm9sbGVyXCI7XG5pbXBvcnQgeyBFdmVudExpc3RlbmVyQ29udHJvbGxlciB9IGZyb20gXCIuL2V2ZW50X2xpc3RlbmVyX2NvbnRyb2xsZXJcIjtcblxuR2FtZUxvb3AuY3JlYXRlR2FtZSgpO1xuXG5ET01Db250cm9sbGVyLmluaXRpYWxpemVCb2FyZERPTSgpO1xuXG5FdmVudExpc3RlbmVyQ29udHJvbGxlci5yb3RhdGVTaGlwSW1hZ2VMaXN0ZW5lcnMoKTtcblxuRXZlbnRMaXN0ZW5lckNvbnRyb2xsZXIuYWRkU2hpcFBsYWNlbWVudERyYWcoKTtcbiJdLCJuYW1lcyI6WyJET01Db250cm9sbGVyIiwiY3JlYXRlQm9hcmRDZWxscyIsImdhbWVib2FyZERPTSIsImNvbHVtbkxhYmVscyIsInJvd0xhYmVscyIsImkiLCJqIiwiaW52aXNpYmxlUGxhY2Vob2xkZXJFbGVtZW50IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwic3R5bGUiLCJ2aXNpYmlsaXR5IiwiYXBwZW5kQ2hpbGQiLCJjb2x1bW5MYWJlbEVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsInJvd0xhYmVsRWxlbWVudCIsIkFycmF5IiwiZnJvbSIsImluY2x1ZGVzIiwiY2VsbEVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJkcmFnT3ZlciIsImluc2VydERyYWdnZWRJbWFnZSIsIkdhbWVMb29wIiwiZ2V0UGxheWVycyIsImdldEdhbWVib2FyZCIsImdldFBsYWNlZFNoaXBzIiwibGVuZ3RoIiwidG9nZ2xlQWJpbGl0eVRvQXR0YWNrIiwiZGlzYWJsZWQiLCJpc01pZEF0dGFjayIsImNvbnNvbGUiLCJsb2ciLCJjZWxsUm93IiwiTnVtYmVyIiwiZGF0YXNldCIsInJvdyIsImNlbGxDb2x1bW4iLCJjb2x1bW4iLCJzZW5kQXR0YWNrIiwiYWN0aW9uIiwiY29tcHV0ZXJHYW1lYm9hcmRFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImNlbGxFbGVtZW50cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwicHJldmVudERlZmF1bHQiLCJ0YXJnZXRDZWxsIiwidGFyZ2V0IiwiZGF0YVN0cmluZyIsImRhdGFUcmFuc2ZlciIsImdldERhdGEiLCJkYXRhT2JqZWN0IiwiSlNPTiIsInBhcnNlIiwiY2VsbENvb3JkaW5hdGVzIiwic2hpcExlbmd0aCIsImhvcml6b250YWwiLCJjaGVja0lmVmFsaWRFbXB0eUNvb3JkaW5hdGVzIiwidmVydGljYWwiLCJpc1ZhbGlkR2FtZWJvYXJkQ2VsbCIsInNoaXBDb29yZGluYXRlcyIsInRhcmdldENlbGxSb3ciLCJ0YXJnZXRDZWxsQ29sdW1uIiwiY29vcmRpbmF0ZXNBcnJheSIsInJlbWFpbmluZ0NlbGwiLCJwdXNoIiwiYWRkU2hpcFRvRE9NIiwiYWRkU2hpcFRvR2FtZWJvYXJkIiwiSUQiLCJlbGVtZW50SUQiLCJpbWFnZUVsZW1lbnQiLCJidXR0b25FbGVtZW50IiwicGFyZW50Tm9kZSIsImRpc2FibGVJbWFnZUJ1dHRvbkludGVyYWN0aW9ucyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJpbml0aWFsaXplQm9hcmRET00iLCJodW1hblBsYXllckdhbWVib2FyZERPTSIsIm9wcG9uZW50R2FtZWJvYXJkRE9NIiwicm90YXRlU2hpcEltYWdlIiwiaW1hZ2UiLCJpbWFnZUNsYXNzZXMiLCJyZW1vdmUiLCJyb3RhdGVEcmFnZ2VkSW1hZ2UiLCJjbG9uZWRJbWFnZUVsZW1lbnQiLCJjbG9uZU5vZGUiLCJ0ZW1wRGl2IiwiY2xvbmVkSW1hZ2VFbGVtZW50Q2xhc3NlcyIsInJvdGF0ZVBlckxlbmd0aCIsImJvZHkiLCJzZXREcmFnSW1hZ2UiLCJzZXRUaW1lb3V0IiwicmVtb3ZlQ2hpbGQiLCJnZXREcmFnZ2VkSW1hZ2UiLCJzcmMiLCJnZXRBdHRyaWJ1dGUiLCJzdHJpbmdpZnkiLCJzZXREYXRhIiwiYWRkQXR0YWNrUmVzdWx0RE9NIiwicGxheWVyVHlwZSIsImF0dGFja1Jlc3VsdHMiLCJjb29yZGluYXRlcyIsImF0dGFja1Jlc3VsdHNFbGVtZW50IiwiUGxheWVyIiwiY29tcHV0ZXJQbGF5ZXIiLCJwbGF5ZXJHYW1lYm9hcmQiLCJib2FyZCIsInVuZGVmaW5lZCIsImNyZWF0ZUJvYXJkIiwicGxhY2VkU2hpcHMiLCJyZWNlaXZlZE1pc3NlZFNob3RzIiwicmVjZWl2ZWRIaXRTaG90cyIsInNlbnRNaXNzZWRTaG90cyIsInNlbnRIaXRTaG90cyIsImFsbFNoaXBzU3VuayIsImdldENvb3JkaW5hdGVzIiwiZ2V0UmVjZWl2ZWRNaXNzZWRTaG90cyIsImdldFJlY2VpdmVkSGl0U2hvdHMiLCJnZXRTZW50TWlzc2VkU2hvdHMiLCJnZXRTZW50SGl0U2hvdHMiLCJpc0FsbFNoaXBzU3VuayIsInBsYWNlU2hpcCIsInNoaXAiLCJjb29yZGluYXRlc0xpc3QiLCJyZWNlaXZlQXR0YWNrIiwiZW50aXR5QXRDb29yZGluYXRlcyIsImhpdCIsImV2ZXJ5IiwiaXNTdW5rIiwiYWRkU2VudE1pc3NlZFNob3QiLCJhZGRTZW50SGl0U2hvdCIsIkdhbWVib2FyZCIsIm9wcG9zaW5nUGxheWVyIiwiaXNDb21wdXRlciIsImdpdmVuTGVuZ3RoIiwiaGl0cyIsInN1bmsiLCJnZXRTaGlwTGVuZ3RoIiwiZ2V0U2hpcEhpdHMiLCJTaGlwIiwiY2hlY2tJZlByZXZpb3VzbHlBdHRhY2tlZCIsImlzSW5Qcm9ncmVzcyIsIm9wcG9zaW5nUGxheWVyR2FtZWJvYXJkIiwiZW5kR2FtZSIsInRvZ2dsZU1pZEF0dGFjayIsInNlbmRDb21wdXRlckF0dGFjayIsImdlbmVyYXRlQ29tcHV0ZXJTaGlwQ29vcmRpbmF0ZXMiLCJsaXN0T2ZDb29yZGluYXRlcyIsInN0YXJ0aW5nQ29vcmRpbmF0ZXMiLCJnZW5lcmF0ZVN0YXJ0aW5nQ29vcmRpbmF0ZXMiLCJub25TdGFydGluZ0Nvb3JkaW5hdGVzIiwiZ2VuZXJhdGVOb25TdGFydGluZ0Nvb3JkaW5hdGVzIiwiY29uY2F0IiwiZ2VuZXJhdGVSYW5kb21Db29yZGluYXRlIiwicG9zc2libGVDb29yZGluYXRlcyIsInVwQ29vcmRpbmF0ZXMiLCJyaWdodENvb3JkaW5hdGVzIiwiZG93bkNvb3JkaW5hdGVzIiwibGVmdENvb3JkaW5hdGVzIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiYXR0YWNrQ29vcmRpbmF0ZXMiLCJwcmV2aW91c2x5QXR0YWNrZWQiLCJzb21lIiwic2hvdCIsImRpcmVjdGlvbiIsImdldE9wcG9zaW5nUGxheWVyIiwic2V0T3Bwb3NpbmdQbGF5ZXIiLCJwbGF5ZXIiLCJpbml0aWFsaXplQ29tcHV0ZXJHYW1lYm9hcmQiLCJsZW5ndGhzT2ZTaGlwcyIsImdlbmVyYXRlQXR0YWNrQ29vcmRpbmF0ZXMiLCJwbGF5ZXJzIiwid2lubmVyIiwiaW5Qcm9ncmVzcyIsIm1pZEF0dGFjayIsImdldFdpbm5lciIsInN0YXRlIiwiY3JlYXRlR2FtZSIsImh1bWFuUGxheWVyIiwibG9zZXJQbGF5ZXIiLCJ3aW5uZXJQbGF5ZXIiLCJzZXRXaW5uZXIiLCJyZXNldEdhbWUiLCJFdmVudExpc3RlbmVyQ29udHJvbGxlciIsImdyb3VwT2ZFbGVtZW50cyJdLCJzb3VyY2VSb290IjoiIn0=