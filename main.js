(()=>{"use strict";const t=(()=>{const t=t=>{const i=["A","B","C","D","E","F","G","H","I","J"],o=["1","2","3","4","5","6","7","8","9","10"],d=a.getPlayers()[0];for(let n=-1;n<10;n++)for(let l=-1;l<10;l++)if(-1===n)if(-1===l){const e=document.createElement("div");e.classList.add("gameboard-label"),e.style.visibility="hidden",t.appendChild(e)}else{const e=document.createElement("div");e.classList.add("column-label"),e.textContent=i[l],t.appendChild(e)}else if(-1===l){const e=document.createElement("div");e.classList.add("row-label"),e.textContent=o[n],t.appendChild(e)}else if(Array.from(t.classList).includes("player-board")){const a=document.createElement("div");a.setAttribute("data-row",n),a.setAttribute("data-column",l),a.classList.add("gameboard-cell"),a.addEventListener("dragover",(t=>{s(t)})),a.addEventListener("drop",(t=>{r(t),5===d.getGameboard().getPlacedShips().length&&e("enable")})),t.appendChild(a)}else if(Array.from(t.classList).includes("computer-board")){const e=document.createElement("button");e.setAttribute("data-row",n),e.setAttribute("data-column",l),e.classList.add("gameboard-cell"),e.disabled=!0,e.addEventListener("click",(()=>{if(!a.isMidAttack()){const t=Number(e.dataset.row),a=Number(e.dataset.column);d.sendAttack([t,a])}})),t.appendChild(e)}},e=t=>{const e=document.querySelector(".computer-board"),a=Array.from(e.querySelectorAll(".gameboard-cell"));"enable"===t?a.forEach((t=>{t.disabled=!1})):"disable"===t&&a.forEach((t=>{t.disabled=!0}))},s=t=>{t.preventDefault()},r=t=>{t.preventDefault();const e=a.getPlayers()[0],s=t.target;if(Array.from(s.classList).includes("contains-ship-image"))return;const i=t.dataTransfer.getData("image"),o=JSON.parse(i);if(!((t,e)=>{const s=[Number(t.dataset.row),Number(t.dataset.column)],r=Number(e.shipLength);return e.horizontal?!!a.getPlayers()[0].checkIfValidEmptyCoordinates(s,r,"right"):e.vertical?!!a.getPlayers()[0].checkIfValidEmptyCoordinates(s,r,"down"):void 0})(s,o))return;const d=((t,e)=>{const a=e.shipLength,s=Number(t.dataset.row),r=Number(t.dataset.column),i=[[s,r]];t.classList.add("contains-ship-image"),t.classList.add("ship-image"),t.classList.add(`ship-image-${a}`),t.classList.add(`ship-image-${a}-1`),e.horizontal?t.classList.add("horizontal"):e.vertical&&t.classList.add("vertical");for(let t=1;t<a;t++){let o;e.horizontal?(o=document.querySelector(`.player-board [data-row='${s}'][data-column='${r+t}']`),o.classList.add("horizontal"),i.push([s,r+t])):e.vertical&&(o=document.querySelector(`.player-board [data-row='${s+t}'][data-column='${r}']`),o.classList.add("vertical"),i.push([s+t,r])),o.classList.add("contains-ship-image"),o.classList.add("ship-image"),o.classList.add(`ship-image-${a}`),o.classList.add(`ship-image-${a}-${t+1}`)}return i})(s,o);e.addShipToGameboard(Number(o.shipLength),d),(t=>{const e=t.elementID,a=document.querySelector(`#${e}`),s=a.parentNode.querySelector("button");a.setAttribute("draggable",!1),a.classList.add("disabled-image"),s.disabled=!0})(o),s.removeEventListener("drop",r)};return{initializeBoardDOM:()=>{const e=document.querySelector(".player-board"),a=document.querySelector(".computer-board");t(e),t(a)},insertDraggedImage:r,rotateShipImage:t=>{const e=Array.from(t.classList);e.includes("horizontal")?(t.classList.remove("horizontal"),t.classList.add("vertical")):e.includes("vertical")&&(t.classList.remove("vertical"),t.classList.add("horizontal"))},rotateDraggedImage:t=>{const e=t.target.cloneNode(),a=document.createElement("div");a.classList.add("temp-rotate"),((t,e)=>{const a=Array.from(e.classList);a.includes("horizontal")?t.classList.add("temp-rotate-horizontal"):a.includes("vertical")&&(t.classList.add("temp-rotate-vertical"),"5"===e.dataset.shipLength?t.classList.add("temp-rotate-vertical-5"):"4"===e.dataset.shipLength?t.classList.add("temp-rotate-vertical-4"):"3"===e.dataset.shipLength?t.classList.add("temp-rotate-vertical-3"):"2"===e.dataset.shipLength&&t.classList.add("temp-rotate-vertical-2"))})(a,e),a.appendChild(e),document.body.appendChild(a),t.dataTransfer.setDragImage(a,0,0),setTimeout((()=>{document.body.removeChild(a)}),0)},getDraggedImage:t=>{const e={image:t.target.src,shipLength:t.target.dataset.shipLength,horizontal:!1,vertical:!1,elementID:t.target.getAttribute("id")};Array.from(t.target.classList).includes("horizontal")?e.horizontal=!0:Array.from(t.target.classList).includes("vertical")&&(e.vertical=!0);const a=JSON.stringify(e);t.dataTransfer.setData("image",a)},dragOver:s,addAttackResultDOM:(t,e,a)=>{const s=a[0],r=a[1],i=document.querySelector(`.${t}-board`).querySelector(`[data-row='${s}'][data-column='${r}']`),o=document.createElement("img");o.classList.add("attack-results"),i.appendChild(o),"hit"===e?o.setAttribute("src","../dist/red_X.png"):o.setAttribute("src","../dist/white_O.png"),i.disabled=!0},toggleAbilityToAttack:e,displayWinner:t=>{const e=t.isComputer();document.querySelector(".game-results").classList.remove("default-hidden");document.querySelector(".display-winner").textContent=e?"Oh no, you lost! Try again!":"Congratulations, you won!"}}})(),e=e=>{const s="human"!==e&&("computer"===e||void 0),r=(()=>{const t=(()=>{const t=[];for(let e=0;e<10;e++){t.push([]);for(let a=0;a<10;a++)t[e].push(void 0)}return t})(),e=[],a=[],s=[],r=[],i=[];let o=!1;const d=e=>t[e[0]][e[1]];return{getCoordinates:d,getPlacedShips:()=>e,getReceivedMissedShots:()=>a,getReceivedHitShots:()=>s,getSentMissedShots:()=>r,getSentHitShots:()=>i,isAllShipsSunk:()=>o,placeShip:(a,s)=>{for(const e of s)t[e[0]][e[1]]=a;e.push(a)},receiveAttack:t=>{const r=d(t);return void 0!==r?(r.hit(),e.every((t=>t.isSunk()))&&(o=!0),s.push(t),"hit"):(a.push(t),"miss")},addSentMissedShot:t=>{r.push(t)},addSentHitShot:t=>{i.push(t)}}})();let i;const o=()=>s,d=(t,e)=>{const a=(t=>{const e=t;let a=0,s=!1;return{getShipLength:()=>e,getShipHits:()=>a,isSunk:()=>s,hit:()=>{if(s)return"That ship has already been sunk!";a+=1,a===e&&(s=!0)}}})(t);r.placeShip(a,e)},n=e=>{if(h(e)||!a.isInProgress()||a.isMidAttack())return;const s=i.getGameboard(),d=i.receiveAttack(e);if("hit"===d){if(r.addSentHitShot(e),o()?o()&&t.addAttackResultDOM("player",d,e):t.addAttackResultDOM("computer",d,e),s.isAllShipsSunk())return void a.endGame(i)}else"miss"===d&&(r.addSentMissedShot(e),o()?o()&&t.addAttackResultDOM("player",d,e):t.addAttackResultDOM("computer",d,e));i.isComputer()&&(a.toggleMidAttack(!0),setTimeout((()=>{a.toggleMidAttack(!1),i.sendComputerAttack()}),0))},l=t=>{let e=[];do{e=[];const a=c(),s=u(a,t);e.push(a),e=e.concat(s)}while(e.length<t);return e},c=()=>{const t=[void 0,void 0];do{t[0]=m(),t[1]=m()}while(void 0!==r.getCoordinates(t));return t},u=(t,e)=>{const a=[];if(p(t,e,"up")){const s=[];for(let a=1;a<e;a++)s.push([t[0]-a,t[1]]);a.push(s)}if(p(t,e,"right")){const s=[];for(let a=1;a<e;a++)s.push([t[0],t[1]+a]);a.push(s)}if(p(t,e,"down")){const s=[];for(let a=1;a<e;a++)s.push([t[0]+a,t[1]]);a.push(s)}if(p(t,e,"left")){const s=[];for(let a=1;a<e;a++)s.push([t[0],t[1]-a]);a.push(s)}return 0===a.length?a:a[Math.floor(Math.random()*a.length)]},m=()=>Math.floor(10*Math.random()),h=t=>{let e=!1;const a=i.getGameboard().getReceivedMissedShots(),s=i.getGameboard().getReceivedHitShots();return e=a.some((e=>e[0]===t[0]&&e[1]===t[1])),e||(e=s.some((e=>e[0]===t[0]&&e[1]===t[1]))),e},p=(t,e,a)=>{switch(a){case"up":if(t[0]-(e-1)<0)return!1;for(let a=1;a<e;a++)if(void 0!==r.getCoordinates([t[0]-a,t[1]]))return!1;return!0;case"right":if(t[1]+(e-1)>9)return!1;for(let a=1;a<e;a++)if(void 0!==r.getCoordinates([t[0],t[1]+a]))return!1;return!0;case"down":if(t[0]+(e-1)>9)return!1;for(let a=1;a<e;a++)if(void 0!==r.getCoordinates([t[0]+a,t[1]]))return!1;return!0;case"left":if(t[1]-(e-1)<0)return!1;for(let a=1;a<e;a++)if(void 0!==r.getCoordinates([t[0],t[1]-a]))return!1;return!0}};return{isComputer:o,getGameboard:()=>r,getOpposingPlayer:()=>i,setOpposingPlayer:t=>{i=t},addShipToGameboard:d,sendAttack:n,initializeComputerGameboard:()=>{if(!s)return;const t=[5,4,3,3,2];for(const e of t){const t=l(e);d(e,t)}},sendComputerAttack:()=>{if(!s||!a.isInProgress())return;const t=(()=>{const t=[void 0,void 0];do{t[0]=m(),t[1]=m()}while(h(t));return t})();n(t)},receiveAttack:t=>r.receiveAttack(t),checkIfValidEmptyCoordinates:p}},a=(()=>{const a=[];let s,r=!0,i=!1;return{getPlayers:()=>a,isInProgress:()=>r,getWinner:()=>s,isMidAttack:()=>i,toggleMidAttack:t=>{i=!!t},createGame:()=>{const t=e("human");a.push(t);const s=e("computer");a.push(s),t.setOpposingPlayer(s),s.setOpposingPlayer(t),s.initializeComputerGameboard()},endGame:e=>{const a=e.getOpposingPlayer();r=!1,s=a,t.toggleAbilityToAttack("disable"),t.displayWinner(s)},resetGame:()=>{a.length=0,r=!0,s=void 0}}})(),s=()=>{document.querySelectorAll(".ship-placement").forEach((e=>{const a=e.querySelector("img");e.querySelector("button").addEventListener("click",(()=>{t.rotateShipImage(a)}))}))},r=()=>{Array.from(document.querySelectorAll(".ship-piece")).forEach((e=>{e.addEventListener("dragstart",(e=>{t.getDraggedImage(e),t.rotateDraggedImage(e)}))}))};a.createGame(),t.initializeBoardDOM(),s(),r()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoibUJBQUEsTUNFTUEsRUFBZ0IsTUFDcEIsTUFBTUMsRUFBb0JDLElBQ3hCLE1BQ01DLEVBQWUsQ0FBQyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxLQUM3REMsRUFBWSxDQUFDLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLE1BQzFEQyxFQUFvQkMsRUFBU0MsYUFBYSxHQUNoRCxJQUFLLElBQUlDLEdBQUssRUFBR0EsRUFKTyxHQUljQSxJQUNwQyxJQUFLLElBQUlDLEdBQUssRUFBR0EsRUFMSyxHQUtnQkEsSUFDcEMsSUFBVyxJQUFQRCxFQUNGLElBQVcsSUFBUEMsRUFBVSxDQUNaLE1BQU1DLEVBQThCQyxTQUFTQyxjQUFjLE9BQzNERixFQUE0QkcsVUFBVUMsSUFBSSxtQkFDMUNKLEVBQTRCSyxNQUFNQyxXQUFhLFNBQy9DZCxFQUFhZSxZQUFZUCxFQUMzQixLQUFPLENBQ0wsTUFBTVEsRUFBcUJQLFNBQVNDLGNBQWMsT0FDbERNLEVBQW1CTCxVQUFVQyxJQUFJLGdCQUNqQ0ksRUFBbUJDLFlBQWNoQixFQUFhTSxHQUM5Q1AsRUFBYWUsWUFBWUMsRUFDM0IsTUFDSyxJQUFXLElBQVBULEVBQVUsQ0FDbkIsTUFBTVcsRUFBa0JULFNBQVNDLGNBQWMsT0FDL0NRLEVBQWdCUCxVQUFVQyxJQUFJLGFBQzlCTSxFQUFnQkQsWUFBY2YsRUFBVUksR0FDeENOLEVBQWFlLFlBQVlHLEVBQzNCLE1BQU8sR0FDTEMsTUFBTUMsS0FBS3BCLEVBQWFXLFdBQVdVLFNBQVMsZ0JBQzVDLENBQ0EsTUFBTUMsRUFBb0JiLFNBQVNDLGNBQWMsT0FDakRZLEVBQWtCQyxhQUFhLFdBQVlqQixHQUMzQ2dCLEVBQWtCQyxhQUFhLGNBQWVoQixHQUM5Q2UsRUFBa0JYLFVBQVVDLElBQUksa0JBQ2hDVSxFQUFrQkUsaUJBQWlCLFlBQWFDLElBQzlDQyxFQUFTRCxFQUFNLElBRWpCSCxFQUFrQkUsaUJBQWlCLFFBQVNDLElBQzFDRSxFQUFtQkYsR0FFNEMsSUFBN0R0QixFQUFrQnlCLGVBQWVDLGlCQUFpQkMsUUFFbERDLEVBQXNCLFNBQ3hCLElBRUYvQixFQUFhZSxZQUFZTyxFQUMzQixNQUFPLEdBQ0xILE1BQU1DLEtBQUtwQixFQUFhVyxXQUFXVSxTQUFTLGtCQUM1QyxDQUNBLE1BQU1XLEVBQXNCdkIsU0FBU0MsY0FBYyxVQUNuRHNCLEVBQW9CVCxhQUFhLFdBQVlqQixHQUM3QzBCLEVBQW9CVCxhQUFhLGNBQWVoQixHQUNoRHlCLEVBQW9CckIsVUFBVUMsSUFBSSxrQkFDbENvQixFQUFvQkMsVUFBVyxFQUMvQkQsRUFBb0JSLGlCQUFpQixTQUFTLEtBQzVDLElBQUtwQixFQUFTOEIsY0FBZSxDQUMzQixNQUFNQyxFQUFVQyxPQUFPSixFQUFvQkssUUFBUUMsS0FDN0NDLEVBQWFILE9BQU9KLEVBQW9CSyxRQUFRRyxRQUN0RHJDLEVBQWtCc0MsV0FBVyxDQUFDTixFQUFTSSxHQUN6QyxLQUVGdkMsRUFBYWUsWUFBWWlCLEVBQzNCLENBRUosRUFFSUQsRUFBeUJXLElBQzdCLE1BQU1DLEVBQTJCbEMsU0FBU21DLGNBQWMsbUJBQ2xEQyxFQUFlMUIsTUFBTUMsS0FDekJ1QixFQUF5QkcsaUJBQWlCLG9CQUU3QixXQUFYSixFQUNGRyxFQUFhRSxTQUFTQyxJQUNwQkEsRUFBWWYsVUFBVyxDQUFLLElBRVYsWUFBWFMsR0FDVEcsRUFBYUUsU0FBU0MsSUFDcEJBLEVBQVlmLFVBQVcsQ0FBSSxHQUUvQixFQWtCSVAsRUFBWUQsSUFDaEJBLEVBQU13QixnQkFBZ0IsRUF1RmxCdEIsRUFBc0JGLElBQzFCQSxFQUFNd0IsaUJBQ04sTUFBTTlDLEVBQW9CQyxFQUFTQyxhQUFhLEdBQzFDNkMsRUFBYXpCLEVBQU0wQixPQUN6QixHQUFJaEMsTUFBTUMsS0FBSzhCLEVBQVd2QyxXQUFXVSxTQUFTLHVCQUM1QyxPQUVGLE1BQU0rQixFQUFhM0IsRUFBTTRCLGFBQWFDLFFBQVEsU0FDeENDLEVBQWFDLEtBQUtDLE1BQU1MLEdBQzlCLElBeEYyQixFQUFDRixFQUFZSyxLQUN4QyxNQUFNRyxFQUFrQixDQUN0QnRCLE9BQU9jLEVBQVdiLFFBQVFDLEtBQzFCRixPQUFPYyxFQUFXYixRQUFRRyxTQUV0QlYsRUFBU00sT0FBT21CLEVBQVdJLFlBQ2pDLE9BQUlKLEVBQVdLLGFBRVh4RCxFQUFTQyxhQUFhLEdBQUd3RCw2QkFDdkJILEVBQ0E1QixFQUNBLFNBT0Z5QixFQUFXTyxXQUVYMUQsRUFBU0MsYUFBYSxHQUFHd0QsNkJBQ3ZCSCxFQUNBNUIsRUFDQSxhQUxOLENBV0EsRUEyREtpQyxDQUFxQmIsRUFBWUssR0FFcEMsT0FFRixNQUFNUyxFQTdEYSxFQUFDZCxFQUFZSyxLQUNoQyxNQUFNekIsRUFBU3lCLEVBQVdJLFdBQ3BCTSxFQUFnQjdCLE9BQU9jLEVBQVdiLFFBQVFDLEtBQzFDNEIsRUFBbUI5QixPQUFPYyxFQUFXYixRQUFRRyxRQUM3QzJCLEVBQW1CLENBQUMsQ0FBQ0YsRUFBZUMsSUFDMUNoQixFQUFXdkMsVUFBVUMsSUFBSSx1QkFDekJzQyxFQUFXdkMsVUFBVUMsSUFBSSxjQUN6QnNDLEVBQVd2QyxVQUFVQyxJQUFJLGNBQWNrQixLQUN2Q29CLEVBQVd2QyxVQUFVQyxJQUFJLGNBQWNrQixPQUNuQ3lCLEVBQVdLLFdBQ2JWLEVBQVd2QyxVQUFVQyxJQUFJLGNBQ2hCMkMsRUFBV08sVUFDcEJaLEVBQVd2QyxVQUFVQyxJQUFJLFlBRTNCLElBQUssSUFBSU4sRUFBSSxFQUFHQSxFQUFJd0IsRUFBUXhCLElBQUssQ0FDL0IsSUFBSThELEVBQ0FiLEVBQVdLLFlBQ2JRLEVBQWdCM0QsU0FBU21DLGNBQ3ZCLDRCQUE0QnFCLG9CQUMxQkMsRUFBbUI1RCxPQUd2QjhELEVBQWN6RCxVQUFVQyxJQUFJLGNBQzVCdUQsRUFBaUJFLEtBQUssQ0FBQ0osRUFBZUMsRUFBbUI1RCxLQUNoRGlELEVBQVdPLFdBQ3BCTSxFQUFnQjNELFNBQVNtQyxjQUN2Qiw0QkFDRXFCLEVBQWdCM0Qsb0JBQ0M0RCxPQUVyQkUsRUFBY3pELFVBQVVDLElBQUksWUFDNUJ1RCxFQUFpQkUsS0FBSyxDQUFDSixFQUFnQjNELEVBQUc0RCxLQUU1Q0UsRUFBY3pELFVBQVVDLElBQUksdUJBQzVCd0QsRUFBY3pELFVBQVVDLElBQUksY0FDNUJ3RCxFQUFjekQsVUFBVUMsSUFBSSxjQUFja0IsS0FDMUNzQyxFQUFjekQsVUFBVUMsSUFBSSxjQUFja0IsS0FBVXhCLEVBQUksSUFDMUQsQ0FDQSxPQUFPNkQsQ0FBZ0IsRUF1QkNHLENBQWFwQixFQUFZSyxHQUNqRHBELEVBQWtCb0UsbUJBQ2hCbkMsT0FBT21CLEVBQVdJLFlBQ2xCSyxHQXhCbUMsQ0FBQ1QsSUFDdEMsTUFBTWlCLEVBQUtqQixFQUFXa0IsVUFDaEJDLEVBQWVqRSxTQUFTbUMsY0FBYyxJQUFJNEIsS0FDMUNHLEVBQWdCRCxFQUFhRSxXQUFXaEMsY0FBYyxVQUM1RDhCLEVBQWFuRCxhQUFhLGFBQWEsR0FDdkNtRCxFQUFhL0QsVUFBVUMsSUFBSSxrQkFDM0IrRCxFQUFjMUMsVUFBVyxDQUFJLEVBb0I3QjRDLENBQStCdEIsR0FDL0JMLEVBQVc0QixvQkFBb0IsT0FBUW5ELEVBQW1CLEVBc0U1RCxNQUFPLENBQ0xvRCxtQkEvS3lCLEtBQ3pCLE1BQU1DLEVBQTBCdkUsU0FBU21DLGNBQWMsaUJBQ2pEcUMsRUFBdUJ4RSxTQUFTbUMsY0FBYyxtQkFDcEQ3QyxFQUFpQmlGLEdBQ2pCakYsRUFBaUJrRixFQUFxQixFQTRLdEN0RCxxQkFDQXVELGdCQXZFdUJDLElBQ3ZCLE1BQU1DLEVBQWVqRSxNQUFNQyxLQUFLK0QsRUFBTXhFLFdBQ2xDeUUsRUFBYS9ELFNBQVMsZUFDeEI4RCxFQUFNeEUsVUFBVTBFLE9BQU8sY0FDdkJGLEVBQU14RSxVQUFVQyxJQUFJLGFBQ1h3RSxFQUFhL0QsU0FBUyxjQUMvQjhELEVBQU14RSxVQUFVMEUsT0FBTyxZQUN2QkYsRUFBTXhFLFVBQVVDLElBQUksY0FDdEIsRUFnRUEwRSxtQkE3QzBCN0QsSUFDMUIsTUFDTThELEVBRGU5RCxFQUFNMEIsT0FDYXFDLFlBQ2xDQyxFQUFVaEYsU0FBU0MsY0FBYyxPQUN2QytFLEVBQVE5RSxVQUFVQyxJQUFJLGVBckJBLEVBQUM2RSxFQUFTRixLQUNoQyxNQUFNRyxFQUE0QnZFLE1BQU1DLEtBQUttRSxFQUFtQjVFLFdBQzVEK0UsRUFBMEJyRSxTQUFTLGNBQ3JDb0UsRUFBUTlFLFVBQVVDLElBQUksMEJBQ2I4RSxFQUEwQnJFLFNBQVMsY0FDNUNvRSxFQUFROUUsVUFBVUMsSUFBSSx3QkFDd0IsTUFBMUMyRSxFQUFtQmxELFFBQVFzQixXQUM3QjhCLEVBQVE5RSxVQUFVQyxJQUFJLDBCQUM2QixNQUExQzJFLEVBQW1CbEQsUUFBUXNCLFdBQ3BDOEIsRUFBUTlFLFVBQVVDLElBQUksMEJBQzZCLE1BQTFDMkUsRUFBbUJsRCxRQUFRc0IsV0FDcEM4QixFQUFROUUsVUFBVUMsSUFBSSwwQkFDNkIsTUFBMUMyRSxFQUFtQmxELFFBQVFzQixZQUNwQzhCLEVBQVE5RSxVQUFVQyxJQUFJLDBCQUUxQixFQU9BK0UsQ0FBZ0JGLEVBQVNGLEdBQ3pCRSxFQUFRMUUsWUFBWXdFLEdBQ3BCOUUsU0FBU21GLEtBQUs3RSxZQUFZMEUsR0FDMUJoRSxFQUFNNEIsYUFBYXdDLGFBQWFKLEVBQVMsRUFBRyxHQUM1Q0ssWUFBVyxLQUNUckYsU0FBU21GLEtBQUtHLFlBQVlOLEVBQVEsR0FDakMsRUFBRSxFQW1DTE8sZ0JBdE11QnZFLElBQ3ZCLE1BQU04QixFQUFhLENBQ2pCNEIsTUFBTzFELEVBQU0wQixPQUFPOEMsSUFDcEJ0QyxXQUFZbEMsRUFBTTBCLE9BQU9kLFFBQVFzQixXQUNqQ0MsWUFBWSxFQUNaRSxVQUFVLEVBQ1ZXLFVBQVdoRCxFQUFNMEIsT0FBTytDLGFBQWEsT0FFbkMvRSxNQUFNQyxLQUFLSyxFQUFNMEIsT0FBT3hDLFdBQVdVLFNBQVMsY0FDOUNrQyxFQUFXSyxZQUFhLEVBQ2Z6QyxNQUFNQyxLQUFLSyxFQUFNMEIsT0FBT3hDLFdBQVdVLFNBQVMsY0FDckRrQyxFQUFXTyxVQUFXLEdBRXhCLE1BQU1WLEVBQWFJLEtBQUsyQyxVQUFVNUMsR0FDbEM5QixFQUFNNEIsYUFBYStDLFFBQVEsUUFBU2hELEVBQVcsRUF5TC9DMUIsV0FDQTJFLG1CQW5DeUIsQ0FBQ0MsRUFBWUMsRUFBZUMsS0FDckQsTUFBTXJFLEVBQVVxRSxFQUFZLEdBQ3RCakUsRUFBYWlFLEVBQVksR0FFekJ0RCxFQURlekMsU0FBU21DLGNBQWMsSUFBSTBELFdBQ2hCMUQsY0FDOUIsY0FBY1Qsb0JBQTBCSSxPQUVwQ2tFLEVBQXVCaEcsU0FBU0MsY0FBYyxPQUNwRCtGLEVBQXFCOUYsVUFBVUMsSUFBSSxrQkFDbkNzQyxFQUFXbkMsWUFBWTBGLEdBQ0QsUUFBbEJGLEVBQ0ZFLEVBQXFCbEYsYUFBYSxNQUFPLHFCQUV6Q2tGLEVBQXFCbEYsYUFBYSxNQUFPLHVCQUUzQzJCLEVBQVdqQixVQUFXLENBQUksRUFxQjFCRix3QkFDQTJFLGNBcEJxQkMsSUFDckIsTUFBTUwsRUFBYUssRUFBY0MsYUFDTm5HLFNBQVNtQyxjQUFjLGlCQUMvQmpDLFVBQVUwRSxPQUFPLGtCQUNQNUUsU0FBU21DLGNBQWMsbUJBSTdCM0IsWUFIbEJxRixFQUdnQyw4QkFGQSwyQkFHckMsRUFhSCxFQTNScUIsR0NHaEJPLEVBQVVQLElBQ2QsTUFRTVEsRUFQZSxVQUFmUixJQUdlLGFBQWZBLFFBQUosR0FLSVMsRUNmVSxNQUNoQixNQVVNQyxFQVZjLE1BQ2xCLE1BQU1BLEVBQVEsR0FDZCxJQUFLLElBQUkxRyxFQUFJLEVBQUdBLEVBQUksR0FBSUEsSUFBSyxDQUMzQjBHLEVBQU0zQyxLQUFLLElBQ1gsSUFBSyxJQUFJOUQsRUFBSSxFQUFHQSxFQUFJLEdBQUlBLElBQ3RCeUcsRUFBTTFHLEdBQUcrRCxVQUFLNEMsRUFFbEIsQ0FDQSxPQUFPRCxDQUFLLEVBRUFFLEdBQ1JDLEVBQWMsR0FDZEMsRUFBc0IsR0FDdEJDLEVBQW1CLEdBQ25CQyxFQUFrQixHQUNsQkMsRUFBZSxHQUNyQixJQUFJQyxHQUFlLEVBQ25CLE1BQU1DLEVBQWtCakIsR0FBZ0JRLEVBQU1SLEVBQVksSUFBSUEsRUFBWSxJQW1DMUUsTUFBTyxDQUNMaUIsaUJBQ0E1RixlQXBDcUIsSUFBTXNGLEVBcUMzQk8sdUJBcEM2QixJQUFNTixFQXFDbkNPLG9CQXBDMEIsSUFBTU4sRUFxQ2hDTyxtQkFwQ3lCLElBQU1OLEVBcUMvQk8sZ0JBcENzQixJQUFNTixFQXFDNUJPLGVBcENxQixJQUFNTixFQXFDM0JPLFVBcENnQixDQUFDQyxFQUFNQyxLQUN2QixJQUFLLE1BQU16QixLQUFleUIsRUFDeEJqQixFQUFNUixFQUFZLElBQUlBLEVBQVksSUFBTXdCLEVBRTFDYixFQUFZOUMsS0FBSzJELEVBQUssRUFpQ3RCRSxjQTFCcUIxQixJQUNyQixNQUFNMkIsRUFBc0JWLEVBQWVqQixHQUMzQyxZQUE0QlMsSUFBeEJrQixHQUNGQSxFQUFvQkMsTUFQbEJqQixFQUFZa0IsT0FBT0wsR0FBU0EsRUFBS00sYUFDbkNkLEdBQWUsR0FRZkgsRUFBaUJoRCxLQUFLbUMsR0FDZixRQUVUWSxFQUFvQi9DLEtBQUttQyxHQUNsQixPQUFNLEVBa0JiK0Isa0JBaEJ5Qi9CLElBQ3pCYyxFQUFnQmpELEtBQUttQyxFQUFZLEVBZ0JqQ2dDLGVBZHNCaEMsSUFDdEJlLEVBQWFsRCxLQUFLbUMsRUFBWSxFQWMvQixFRGxEdUJpQyxHQUN4QixJQUFJQyxFQUNKLE1BQU05QixFQUFhLElBQU1FLEVBTW5CdkMsRUFBcUIsQ0FBQ1osRUFBWTZDLEtBQ3RDLE1BQU13QixFRnhCRyxDQUFDVyxJQUNaLE1BQU03RyxFQUFTNkcsRUFDZixJQUFJQyxFQUFPLEVBQ1BDLEdBQU8sRUFpQlgsTUFBTyxDQUNMQyxjQWpCb0IsSUFBTWhILEVBa0IxQmlILFlBakJrQixJQUFNSCxFQWtCeEJOLE9BakJhLElBQU1PLEVBa0JuQlQsSUFaVSxLQUNWLEdBQUtTLEVBSUgsTUFBTyxtQ0FIUEQsR0FBUSxFQU5OQSxJQUFTOUcsSUFDWCtHLEdBQU8sRUFTVCxFQU9ELEVFRGNHLENBQUtyRixHQUNsQm9ELEVBQWdCZ0IsVUFBVUMsRUFBTXhCLEVBQVksRUFFeEMvRCxFQUFjK0QsSUFDbEIsR0FDRXlDLEVBQTBCekMsS0FDekJwRyxFQUFTOEksZ0JBQ1Y5SSxFQUFTOEIsY0FFVCxPQUVGLE1BQU1pSCxFQUEwQlQsRUFBZTlHLGVBQ3pDMkUsRUFBZ0JtQyxFQUFlUixjQUFjMUIsR0FDbkQsR0FBc0IsUUFBbEJELEdBV0YsR0FWQVEsRUFBZ0J5QixlQUFlaEMsR0FDMUJJLElBTU1BLEtBQ1Q5RyxFQUFjdUcsbUJBQW1CLFNBQVVFLEVBQWVDLEdBTjFEMUcsRUFBY3VHLG1CQUNaLFdBQ0FFLEVBQ0FDLEdBS0EyQyxFQUF3QnJCLGlCQUUxQixZQURBMUgsRUFBU2dKLFFBQVFWLE9BR1EsU0FBbEJuQyxJQUNUUSxFQUFnQndCLGtCQUFrQi9CLEdBQzdCSSxJQU1NQSxLQUNUOUcsRUFBY3VHLG1CQUFtQixTQUFVRSxFQUFlQyxHQU4xRDFHLEVBQWN1RyxtQkFDWixXQUNBRSxFQUNBQyxJQU1Ga0MsRUFBZTlCLGVBQ2pCeEcsRUFBU2lKLGlCQUFnQixHQUN6QnZELFlBQVcsS0FDVDFGLEVBQVNpSixpQkFBZ0IsR0FDekJYLEVBQWVZLG9CQUFvQixHQUNsQyxHQUNMLEVBdUJJQyxFQUFtQzVGLElBQ3ZDLElBQUk2RixFQUFvQixHQUN4QixFQUFHLENBQ0RBLEVBQW9CLEdBQ3BCLE1BQU1DLEVBQXNCQyxJQUN0QkMsRUFBeUJDLEVBQzdCSCxFQUNBOUYsR0FFRjZGLEVBQWtCbkYsS0FBS29GLEdBQ3ZCRCxFQUFvQkEsRUFBa0JLLE9BQU9GLEVBQy9DLE9BQVNILEVBQWtCMUgsT0FBUzZCLEdBQ3BDLE9BQU82RixDQUFpQixFQUVwQkUsRUFBOEIsS0FDbEMsTUFBTUQsRUFBc0IsTUFBQ3hDLE9BQVdBLEdBQ3hDLEdBQ0V3QyxFQUFvQixHQUFLSyxJQUN6QkwsRUFBb0IsR0FBS0ssZUFDc0M3QyxJQUF4REYsRUFBZ0JVLGVBQWVnQyxJQUN4QyxPQUFPQSxDQUFtQixFQUV0QkcsRUFBaUMsQ0FBQ0gsRUFBcUI5RixLQUMzRCxNQUFNb0csRUFBc0IsR0FDNUIsR0FBSWxHLEVBQTZCNEYsRUFBcUI5RixFQUFZLE1BQU8sQ0FDdkUsTUFBTXFHLEVBQWdCLEdBQ3RCLElBQUssSUFBSTFKLEVBQUksRUFBR0EsRUFBSXFELEVBQVlyRCxJQUM5QjBKLEVBQWMzRixLQUFLLENBQ2pCb0YsRUFBb0IsR0FBS25KLEVBQ3pCbUosRUFBb0IsS0FHeEJNLEVBQW9CMUYsS0FBSzJGLEVBQzNCLENBQ0EsR0FDRW5HLEVBQTZCNEYsRUFBcUI5RixFQUFZLFNBQzlELENBQ0EsTUFBTXNHLEVBQW1CLEdBQ3pCLElBQUssSUFBSTNKLEVBQUksRUFBR0EsRUFBSXFELEVBQVlyRCxJQUM5QjJKLEVBQWlCNUYsS0FBSyxDQUNwQm9GLEVBQW9CLEdBQ3BCQSxFQUFvQixHQUFLbkosSUFHN0J5SixFQUFvQjFGLEtBQUs0RixFQUMzQixDQUNBLEdBQUlwRyxFQUE2QjRGLEVBQXFCOUYsRUFBWSxRQUFTLENBQ3pFLE1BQU11RyxFQUFrQixHQUN4QixJQUFLLElBQUk1SixFQUFJLEVBQUdBLEVBQUlxRCxFQUFZckQsSUFDOUI0SixFQUFnQjdGLEtBQUssQ0FDbkJvRixFQUFvQixHQUFLbkosRUFDekJtSixFQUFvQixLQUd4Qk0sRUFBb0IxRixLQUFLNkYsRUFDM0IsQ0FDQSxHQUFJckcsRUFBNkI0RixFQUFxQjlGLEVBQVksUUFBUyxDQUN6RSxNQUFNd0csRUFBa0IsR0FDeEIsSUFBSyxJQUFJN0osRUFBSSxFQUFHQSxFQUFJcUQsRUFBWXJELElBQzlCNkosRUFBZ0I5RixLQUFLLENBQ25Cb0YsRUFBb0IsR0FDcEJBLEVBQW9CLEdBQUtuSixJQUc3QnlKLEVBQW9CMUYsS0FBSzhGLEVBQzNCLENBQ0EsT0FBbUMsSUFBL0JKLEVBQW9CakksT0FDZmlJLEVBR0ZBLEVBRGFLLEtBQUtDLE1BQU1ELEtBQUtFLFNBQVdQLEVBQW9CakksUUFDNUIsRUFFbkNnSSxFQUEyQixJQUV4Qk0sS0FBS0MsTUFEWSxHQUNORCxLQUFLRSxVQUVuQnJCLEVBQTZCc0IsSUFDakMsSUFBSUMsR0FBcUIsRUFDekIsTUFBTXBELEVBQXNCc0IsRUFDekI5RyxlQUNBOEYseUJBQ0dMLEVBQW1CcUIsRUFDdEI5RyxlQUNBK0Ysc0JBV0gsT0FWQTZDLEVBQXFCcEQsRUFBb0JxRCxNQUN0Q0MsR0FDQ0EsRUFBSyxLQUFPSCxFQUFrQixJQUFNRyxFQUFLLEtBQU9ILEVBQWtCLEtBRWpFQyxJQUNIQSxFQUFxQm5ELEVBQWlCb0QsTUFDbkNDLEdBQ0NBLEVBQUssS0FBT0gsRUFBa0IsSUFBTUcsRUFBSyxLQUFPSCxFQUFrQixNQUdqRUMsQ0FBa0IsRUFVckIzRyxFQUErQixDQUNuQzRGLEVBQ0E5RixFQUNBZ0gsS0FFQSxPQUFRQSxHQUNOLElBQUssS0FDSCxHQUFJbEIsRUFBb0IsSUFBTTlGLEVBQWEsR0FBSyxFQUM5QyxPQUFPLEVBRVQsSUFBSyxJQUFJckQsRUFBSSxFQUFHQSxFQUFJcUQsRUFBWXJELElBQzlCLFFBSVMyRyxJQUhQRixFQUFnQlUsZUFBZSxDQUM3QmdDLEVBQW9CLEdBQUtuSixFQUN6Qm1KLEVBQW9CLEtBR3RCLE9BQU8sRUFHWCxPQUFPLEVBRVQsSUFBSyxRQUNILEdBQUlBLEVBQW9CLElBQU05RixFQUFhLEdBQUssRUFDOUMsT0FBTyxFQUVULElBQUssSUFBSXJELEVBQUksRUFBR0EsRUFBSXFELEVBQVlyRCxJQUM5QixRQUlTMkcsSUFIUEYsRUFBZ0JVLGVBQWUsQ0FDN0JnQyxFQUFvQixHQUNwQkEsRUFBb0IsR0FBS25KLElBRzNCLE9BQU8sRUFHWCxPQUFPLEVBRVQsSUFBSyxPQUNILEdBQUltSixFQUFvQixJQUFNOUYsRUFBYSxHQUFLLEVBQzlDLE9BQU8sRUFFVCxJQUFLLElBQUlyRCxFQUFJLEVBQUdBLEVBQUlxRCxFQUFZckQsSUFDOUIsUUFJUzJHLElBSFBGLEVBQWdCVSxlQUFlLENBQzdCZ0MsRUFBb0IsR0FBS25KLEVBQ3pCbUosRUFBb0IsS0FHdEIsT0FBTyxFQUdYLE9BQU8sRUFFVCxJQUFLLE9BQ0gsR0FBSUEsRUFBb0IsSUFBTTlGLEVBQWEsR0FBSyxFQUM5QyxPQUFPLEVBRVQsSUFBSyxJQUFJckQsRUFBSSxFQUFHQSxFQUFJcUQsRUFBWXJELElBQzlCLFFBSVMyRyxJQUhQRixFQUFnQlUsZUFBZSxDQUM3QmdDLEVBQW9CLEdBQ3BCQSxFQUFvQixHQUFLbkosSUFHM0IsT0FBTyxFQUdYLE9BQU8sRUFJWCxFQUVGLE1BQU8sQ0FDTHNHLGFBQ0FoRixhQS9QbUIsSUFBTW1GLEVBZ1F6QjZELGtCQS9Qd0IsSUFBTWxDLEVBZ1E5Qm1DLGtCQS9QeUJDLElBQ3pCcEMsRUFBaUJvQyxDQUFNLEVBK1B2QnZHLHFCQUNBOUIsYUFDQXNJLDRCQTlNa0MsS0FDbEMsSUFBS2pFLEVBQ0gsT0FFRixNQUFNa0UsRUFBaUIsQ0FBQyxFQUFHLEVBQUcsRUFBRyxFQUFHLEdBQ3BDLElBQUssTUFBTXJILEtBQWNxSCxFQUFnQixDQUN2QyxNQUFNaEgsRUFBa0J1RixFQUFnQzVGLEdBQ3hEWSxFQUFtQlosRUFBWUssRUFDakMsR0F1TUFzRixtQkFyTXlCLEtBQ3pCLElBQUt4QyxJQUFtQjFHLEVBQVM4SSxlQUMvQixPQUVGLE1BQU1xQixFQXVHMEIsTUFDaEMsTUFBTUEsRUFBb0IsTUFBQ3RELE9BQVdBLEdBQ3RDLEdBQ0VzRCxFQUFrQixHQUFLVCxJQUN2QlMsRUFBa0IsR0FBS1QsVUFDaEJiLEVBQTBCc0IsSUFDbkMsT0FBT0EsQ0FBaUIsRUE3R0VVLEdBQzFCeEksRUFBVzhILEVBQWtCLEVBaU03QnJDLGNBL0xxQjFCLEdBQ0NPLEVBQWdCbUIsY0FBYzFCLEdBK0xwRDNDLCtCQUNELEVFclJHekQsRUFBVyxNQUNmLE1BQU04SyxFQUFVLEdBQ2hCLElBQ0lDLEVBREFDLEdBQWEsRUFFYkMsR0FBWSxFQTZCaEIsTUFBTyxDQUNMaEwsV0E3QmlCLElBQU02SyxFQThCdkJoQyxhQTdCbUIsSUFBTWtDLEVBOEJ6QkUsVUE3QmdCLElBQU1ILEVBOEJ0QmpKLFlBN0JrQixJQUFNbUosRUE4QnhCaEMsZ0JBN0J1QmtDLElBQ2RGLElBQVRFLENBQWdELEVBNkJoREMsV0EzQmlCLEtBQ2pCLE1BQU1DLEVBQWM1RSxFQUFPLFNBQzNCcUUsRUFBUTdHLEtBQUtvSCxHQUNiLE1BQU0zRSxFQUFpQkQsRUFBTyxZQUM5QnFFLEVBQVE3RyxLQUFLeUMsR0FDYjJFLEVBQVlaLGtCQUFrQi9ELEdBQzlCQSxFQUFlK0Qsa0JBQWtCWSxHQUNqQzNFLEVBQWVpRSw2QkFBNkIsRUFxQjVDM0IsUUFuQmVzQyxJQUNmLE1BQU1DLEVBQWVELEVBQVlkLG9CQUNqQ1EsR0FBYSxFQUNiRCxFQUFTUSxFQUNUN0wsRUFBY2lDLHNCQUFzQixXQUNwQ2pDLEVBQWM0RyxjQUFjeUUsRUFBTyxFQWVuQ1MsVUFiZ0IsS0FDaEJWLEVBQVFwSixPQUFTLEVBQ2pCc0osR0FBYSxFQUNiRCxPQUFTbEUsQ0FBUyxFQVlyQixFQTNDZ0IsR0NIWDRFLEVBQzZCLEtBQ0RwTCxTQUFTcUMsaUJBQWlCLG1CQUNsQ0MsU0FBUytJLElBQzdCLE1BQU1wSCxFQUFlb0gsRUFBZ0JsSixjQUFjLE9BQzdCa0osRUFBZ0JsSixjQUFjLFVBQ3RDcEIsaUJBQWlCLFNBQVMsS0FDdEMxQixFQUFjb0YsZ0JBQWdCUixFQUFhLEdBQzNDLEdBQ0YsRUFUQW1ILEVBV3lCLEtBQ1IxSyxNQUFNQyxLQUFLWCxTQUFTcUMsaUJBQWlCLGdCQUM3Q0MsU0FBU2lGLElBQ2xCQSxFQUFLeEcsaUJBQWlCLGFBQWNDLElBQ2xDM0IsRUFBY2tHLGdCQUFnQnZFLEdBQzlCM0IsRUFBY3dGLG1CQUFtQjdELEVBQU0sR0FDdkMsR0FDRixFQ2hCTnJCLEVBQVNvTCxhQUVUMUwsRUFBY2lGLHFCQUVkOEcsSUFFQUEsRyIsInNvdXJjZXMiOlsid2VicGFjazovL29kaW4tYmF0dGxlc2hpcC8uL3NyYy9zaGlwLmpzIiwid2VicGFjazovL29kaW4tYmF0dGxlc2hpcC8uL3NyYy9ET01fY29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly9vZGluLWJhdHRsZXNoaXAvLi9zcmMvcGxheWVyLmpzIiwid2VicGFjazovL29kaW4tYmF0dGxlc2hpcC8uL3NyYy9nYW1lYm9hcmQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi1iYXR0bGVzaGlwLy4vc3JjL2dhbWVsb29wLmpzIiwid2VicGFjazovL29kaW4tYmF0dGxlc2hpcC8uL3NyYy9ldmVudF9saXN0ZW5lcl9jb250cm9sbGVyLmpzIiwid2VicGFjazovL29kaW4tYmF0dGxlc2hpcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBTaGlwID0gKGdpdmVuTGVuZ3RoKSA9PiB7XG4gIGNvbnN0IGxlbmd0aCA9IGdpdmVuTGVuZ3RoO1xuICBsZXQgaGl0cyA9IDA7XG4gIGxldCBzdW5rID0gZmFsc2U7XG4gIGNvbnN0IGdldFNoaXBMZW5ndGggPSAoKSA9PiBsZW5ndGg7XG4gIGNvbnN0IGdldFNoaXBIaXRzID0gKCkgPT4gaGl0cztcbiAgY29uc3QgaXNTdW5rID0gKCkgPT4gc3VuaztcbiAgY29uc3QgY2hlY2tJZlN1bmsgPSAoKSA9PiB7XG4gICAgaWYgKGhpdHMgPT09IGxlbmd0aCkge1xuICAgICAgc3VuayA9IHRydWU7XG4gICAgfVxuICB9O1xuICBjb25zdCBoaXQgPSAoKSA9PiB7XG4gICAgaWYgKCFzdW5rKSB7XG4gICAgICBoaXRzICs9IDE7XG4gICAgICBjaGVja0lmU3VuaygpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gXCJUaGF0IHNoaXAgaGFzIGFscmVhZHkgYmVlbiBzdW5rIVwiO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIHtcbiAgICBnZXRTaGlwTGVuZ3RoLFxuICAgIGdldFNoaXBIaXRzLFxuICAgIGlzU3VuayxcbiAgICBoaXQsXG4gIH07XG59O1xuXG5leHBvcnQgeyBTaGlwIH07XG4iLCJpbXBvcnQgeyBHYW1lTG9vcCB9IGZyb20gXCIuL2dhbWVsb29wXCI7XG5cbmNvbnN0IERPTUNvbnRyb2xsZXIgPSAoKCkgPT4ge1xuICBjb25zdCBjcmVhdGVCb2FyZENlbGxzID0gKGdhbWVib2FyZERPTSkgPT4ge1xuICAgIGNvbnN0IEJPQVJEQVhFU0xFTkdUSCA9IDEwO1xuICAgIGNvbnN0IGNvbHVtbkxhYmVscyA9IFtcIkFcIiwgXCJCXCIsIFwiQ1wiLCBcIkRcIiwgXCJFXCIsIFwiRlwiLCBcIkdcIiwgXCJIXCIsIFwiSVwiLCBcIkpcIl07XG4gICAgY29uc3Qgcm93TGFiZWxzID0gW1wiMVwiLCBcIjJcIiwgXCIzXCIsIFwiNFwiLCBcIjVcIiwgXCI2XCIsIFwiN1wiLCBcIjhcIiwgXCI5XCIsIFwiMTBcIl07XG4gICAgY29uc3QgaHVtYW5QbGF5ZXJPYmplY3QgPSBHYW1lTG9vcC5nZXRQbGF5ZXJzKClbMF07XG4gICAgZm9yIChsZXQgaSA9IC0xOyBpIDwgQk9BUkRBWEVTTEVOR1RIOyBpKyspIHtcbiAgICAgIGZvciAobGV0IGogPSAtMTsgaiA8IEJPQVJEQVhFU0xFTkdUSDsgaisrKSB7XG4gICAgICAgIGlmIChpID09PSAtMSkge1xuICAgICAgICAgIGlmIChqID09PSAtMSkge1xuICAgICAgICAgICAgY29uc3QgaW52aXNpYmxlUGxhY2Vob2xkZXJFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIGludmlzaWJsZVBsYWNlaG9sZGVyRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZ2FtZWJvYXJkLWxhYmVsXCIpO1xuICAgICAgICAgICAgaW52aXNpYmxlUGxhY2Vob2xkZXJFbGVtZW50LnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuICAgICAgICAgICAgZ2FtZWJvYXJkRE9NLmFwcGVuZENoaWxkKGludmlzaWJsZVBsYWNlaG9sZGVyRWxlbWVudCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbHVtbkxhYmVsRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBjb2x1bW5MYWJlbEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImNvbHVtbi1sYWJlbFwiKTtcbiAgICAgICAgICAgIGNvbHVtbkxhYmVsRWxlbWVudC50ZXh0Q29udGVudCA9IGNvbHVtbkxhYmVsc1tqXTtcbiAgICAgICAgICAgIGdhbWVib2FyZERPTS5hcHBlbmRDaGlsZChjb2x1bW5MYWJlbEVsZW1lbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChqID09PSAtMSkge1xuICAgICAgICAgIGNvbnN0IHJvd0xhYmVsRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgcm93TGFiZWxFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJyb3ctbGFiZWxcIik7XG4gICAgICAgICAgcm93TGFiZWxFbGVtZW50LnRleHRDb250ZW50ID0gcm93TGFiZWxzW2ldO1xuICAgICAgICAgIGdhbWVib2FyZERPTS5hcHBlbmRDaGlsZChyb3dMYWJlbEVsZW1lbnQpO1xuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIEFycmF5LmZyb20oZ2FtZWJvYXJkRE9NLmNsYXNzTGlzdCkuaW5jbHVkZXMoXCJwbGF5ZXItYm9hcmRcIilcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgcGxheWVyQ2VsbEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgIHBsYXllckNlbGxFbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtcm93XCIsIGkpO1xuICAgICAgICAgIHBsYXllckNlbGxFbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtY29sdW1uXCIsIGopO1xuICAgICAgICAgIHBsYXllckNlbGxFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJnYW1lYm9hcmQtY2VsbFwiKTtcbiAgICAgICAgICBwbGF5ZXJDZWxsRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ292ZXJcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBkcmFnT3ZlcihldmVudCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcGxheWVyQ2VsbEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyb3BcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpbnNlcnREcmFnZ2VkSW1hZ2UoZXZlbnQpO1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBodW1hblBsYXllck9iamVjdC5nZXRHYW1lYm9hcmQoKS5nZXRQbGFjZWRTaGlwcygpLmxlbmd0aCA9PT0gNVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIHRvZ2dsZUFiaWxpdHlUb0F0dGFjayhcImVuYWJsZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBnYW1lYm9hcmRET00uYXBwZW5kQ2hpbGQocGxheWVyQ2VsbEVsZW1lbnQpO1xuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIEFycmF5LmZyb20oZ2FtZWJvYXJkRE9NLmNsYXNzTGlzdCkuaW5jbHVkZXMoXCJjb21wdXRlci1ib2FyZFwiKVxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCBjb21wdXRlckNlbGxFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgICBjb21wdXRlckNlbGxFbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtcm93XCIsIGkpO1xuICAgICAgICAgIGNvbXB1dGVyQ2VsbEVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1jb2x1bW5cIiwgaik7XG4gICAgICAgICAgY29tcHV0ZXJDZWxsRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZ2FtZWJvYXJkLWNlbGxcIik7XG4gICAgICAgICAgY29tcHV0ZXJDZWxsRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgY29tcHV0ZXJDZWxsRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFHYW1lTG9vcC5pc01pZEF0dGFjaygpKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGNlbGxSb3cgPSBOdW1iZXIoY29tcHV0ZXJDZWxsRWxlbWVudC5kYXRhc2V0LnJvdyk7XG4gICAgICAgICAgICAgIGNvbnN0IGNlbGxDb2x1bW4gPSBOdW1iZXIoY29tcHV0ZXJDZWxsRWxlbWVudC5kYXRhc2V0LmNvbHVtbik7XG4gICAgICAgICAgICAgIGh1bWFuUGxheWVyT2JqZWN0LnNlbmRBdHRhY2soW2NlbGxSb3csIGNlbGxDb2x1bW5dKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBnYW1lYm9hcmRET00uYXBwZW5kQ2hpbGQoY29tcHV0ZXJDZWxsRWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGNvbnN0IHRvZ2dsZUFiaWxpdHlUb0F0dGFjayA9IChhY3Rpb24pID0+IHtcbiAgICBjb25zdCBjb21wdXRlckdhbWVib2FyZEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbXB1dGVyLWJvYXJkXCIpO1xuICAgIGNvbnN0IGNlbGxFbGVtZW50cyA9IEFycmF5LmZyb20oXG4gICAgICBjb21wdXRlckdhbWVib2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5nYW1lYm9hcmQtY2VsbFwiKVxuICAgICk7XG4gICAgaWYgKGFjdGlvbiA9PT0gXCJlbmFibGVcIikge1xuICAgICAgY2VsbEVsZW1lbnRzLmZvckVhY2goKGNlbGxFbGVtZW50KSA9PiB7XG4gICAgICAgIGNlbGxFbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gXCJkaXNhYmxlXCIpIHtcbiAgICAgIGNlbGxFbGVtZW50cy5mb3JFYWNoKChjZWxsRWxlbWVudCkgPT4ge1xuICAgICAgICBjZWxsRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGdldERyYWdnZWRJbWFnZSA9IChldmVudCkgPT4ge1xuICAgIGNvbnN0IGRhdGFPYmplY3QgPSB7XG4gICAgICBpbWFnZTogZXZlbnQudGFyZ2V0LnNyYyxcbiAgICAgIHNoaXBMZW5ndGg6IGV2ZW50LnRhcmdldC5kYXRhc2V0LnNoaXBMZW5ndGgsXG4gICAgICBob3Jpem9udGFsOiBmYWxzZSxcbiAgICAgIHZlcnRpY2FsOiBmYWxzZSxcbiAgICAgIGVsZW1lbnRJRDogZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZShcImlkXCIpLFxuICAgIH07XG4gICAgaWYgKEFycmF5LmZyb20oZXZlbnQudGFyZ2V0LmNsYXNzTGlzdCkuaW5jbHVkZXMoXCJob3Jpem9udGFsXCIpKSB7XG4gICAgICBkYXRhT2JqZWN0Lmhvcml6b250YWwgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAoQXJyYXkuZnJvbShldmVudC50YXJnZXQuY2xhc3NMaXN0KS5pbmNsdWRlcyhcInZlcnRpY2FsXCIpKSB7XG4gICAgICBkYXRhT2JqZWN0LnZlcnRpY2FsID0gdHJ1ZTtcbiAgICB9XG4gICAgY29uc3QgZGF0YVN0cmluZyA9IEpTT04uc3RyaW5naWZ5KGRhdGFPYmplY3QpO1xuICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKFwiaW1hZ2VcIiwgZGF0YVN0cmluZyk7XG4gIH07XG4gIGNvbnN0IGRyYWdPdmVyID0gKGV2ZW50KSA9PiB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgfTtcbiAgY29uc3QgaW5pdGlhbGl6ZUJvYXJkRE9NID0gKCkgPT4ge1xuICAgIGNvbnN0IGh1bWFuUGxheWVyR2FtZWJvYXJkRE9NID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wbGF5ZXItYm9hcmRcIik7XG4gICAgY29uc3QgY29tcHV0ZXJHYW1lYm9hcmRET00gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbXB1dGVyLWJvYXJkXCIpO1xuICAgIGNyZWF0ZUJvYXJkQ2VsbHMoaHVtYW5QbGF5ZXJHYW1lYm9hcmRET00pO1xuICAgIGNyZWF0ZUJvYXJkQ2VsbHMoY29tcHV0ZXJHYW1lYm9hcmRET00pO1xuICB9O1xuICBjb25zdCBpc1ZhbGlkR2FtZWJvYXJkQ2VsbCA9ICh0YXJnZXRDZWxsLCBkYXRhT2JqZWN0KSA9PiB7XG4gICAgY29uc3QgY2VsbENvb3JkaW5hdGVzID0gW1xuICAgICAgTnVtYmVyKHRhcmdldENlbGwuZGF0YXNldC5yb3cpLFxuICAgICAgTnVtYmVyKHRhcmdldENlbGwuZGF0YXNldC5jb2x1bW4pLFxuICAgIF07XG4gICAgY29uc3QgbGVuZ3RoID0gTnVtYmVyKGRhdGFPYmplY3Quc2hpcExlbmd0aCk7XG4gICAgaWYgKGRhdGFPYmplY3QuaG9yaXpvbnRhbCkge1xuICAgICAgaWYgKFxuICAgICAgICBHYW1lTG9vcC5nZXRQbGF5ZXJzKClbMF0uY2hlY2tJZlZhbGlkRW1wdHlDb29yZGluYXRlcyhcbiAgICAgICAgICBjZWxsQ29vcmRpbmF0ZXMsXG4gICAgICAgICAgbGVuZ3RoLFxuICAgICAgICAgIFwicmlnaHRcIlxuICAgICAgICApXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChkYXRhT2JqZWN0LnZlcnRpY2FsKSB7XG4gICAgICBpZiAoXG4gICAgICAgIEdhbWVMb29wLmdldFBsYXllcnMoKVswXS5jaGVja0lmVmFsaWRFbXB0eUNvb3JkaW5hdGVzKFxuICAgICAgICAgIGNlbGxDb29yZGluYXRlcyxcbiAgICAgICAgICBsZW5ndGgsXG4gICAgICAgICAgXCJkb3duXCJcbiAgICAgICAgKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgYWRkU2hpcFRvRE9NID0gKHRhcmdldENlbGwsIGRhdGFPYmplY3QpID0+IHtcbiAgICBjb25zdCBsZW5ndGggPSBkYXRhT2JqZWN0LnNoaXBMZW5ndGg7XG4gICAgY29uc3QgdGFyZ2V0Q2VsbFJvdyA9IE51bWJlcih0YXJnZXRDZWxsLmRhdGFzZXQucm93KTtcbiAgICBjb25zdCB0YXJnZXRDZWxsQ29sdW1uID0gTnVtYmVyKHRhcmdldENlbGwuZGF0YXNldC5jb2x1bW4pO1xuICAgIGNvbnN0IGNvb3JkaW5hdGVzQXJyYXkgPSBbW3RhcmdldENlbGxSb3csIHRhcmdldENlbGxDb2x1bW5dXTtcbiAgICB0YXJnZXRDZWxsLmNsYXNzTGlzdC5hZGQoXCJjb250YWlucy1zaGlwLWltYWdlXCIpO1xuICAgIHRhcmdldENlbGwuY2xhc3NMaXN0LmFkZChcInNoaXAtaW1hZ2VcIik7XG4gICAgdGFyZ2V0Q2VsbC5jbGFzc0xpc3QuYWRkKGBzaGlwLWltYWdlLSR7bGVuZ3RofWApO1xuICAgIHRhcmdldENlbGwuY2xhc3NMaXN0LmFkZChgc2hpcC1pbWFnZS0ke2xlbmd0aH0tMWApO1xuICAgIGlmIChkYXRhT2JqZWN0Lmhvcml6b250YWwpIHtcbiAgICAgIHRhcmdldENlbGwuY2xhc3NMaXN0LmFkZChcImhvcml6b250YWxcIik7XG4gICAgfSBlbHNlIGlmIChkYXRhT2JqZWN0LnZlcnRpY2FsKSB7XG4gICAgICB0YXJnZXRDZWxsLmNsYXNzTGlzdC5hZGQoXCJ2ZXJ0aWNhbFwiKTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgbGV0IHJlbWFpbmluZ0NlbGw7XG4gICAgICBpZiAoZGF0YU9iamVjdC5ob3Jpem9udGFsKSB7XG4gICAgICAgIHJlbWFpbmluZ0NlbGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgIGAucGxheWVyLWJvYXJkIFtkYXRhLXJvdz0nJHt0YXJnZXRDZWxsUm93fSddW2RhdGEtY29sdW1uPScke1xuICAgICAgICAgICAgdGFyZ2V0Q2VsbENvbHVtbiArIGlcbiAgICAgICAgICB9J11gXG4gICAgICAgICk7XG4gICAgICAgIHJlbWFpbmluZ0NlbGwuY2xhc3NMaXN0LmFkZChcImhvcml6b250YWxcIik7XG4gICAgICAgIGNvb3JkaW5hdGVzQXJyYXkucHVzaChbdGFyZ2V0Q2VsbFJvdywgdGFyZ2V0Q2VsbENvbHVtbiArIGldKTtcbiAgICAgIH0gZWxzZSBpZiAoZGF0YU9iamVjdC52ZXJ0aWNhbCkge1xuICAgICAgICByZW1haW5pbmdDZWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICBgLnBsYXllci1ib2FyZCBbZGF0YS1yb3c9JyR7XG4gICAgICAgICAgICB0YXJnZXRDZWxsUm93ICsgaVxuICAgICAgICAgIH0nXVtkYXRhLWNvbHVtbj0nJHt0YXJnZXRDZWxsQ29sdW1ufSddYFxuICAgICAgICApO1xuICAgICAgICByZW1haW5pbmdDZWxsLmNsYXNzTGlzdC5hZGQoXCJ2ZXJ0aWNhbFwiKTtcbiAgICAgICAgY29vcmRpbmF0ZXNBcnJheS5wdXNoKFt0YXJnZXRDZWxsUm93ICsgaSwgdGFyZ2V0Q2VsbENvbHVtbl0pO1xuICAgICAgfVxuICAgICAgcmVtYWluaW5nQ2VsbC5jbGFzc0xpc3QuYWRkKFwiY29udGFpbnMtc2hpcC1pbWFnZVwiKTtcbiAgICAgIHJlbWFpbmluZ0NlbGwuY2xhc3NMaXN0LmFkZChcInNoaXAtaW1hZ2VcIik7XG4gICAgICByZW1haW5pbmdDZWxsLmNsYXNzTGlzdC5hZGQoYHNoaXAtaW1hZ2UtJHtsZW5ndGh9YCk7XG4gICAgICByZW1haW5pbmdDZWxsLmNsYXNzTGlzdC5hZGQoYHNoaXAtaW1hZ2UtJHtsZW5ndGh9LSR7aSArIDF9YCk7XG4gICAgfVxuICAgIHJldHVybiBjb29yZGluYXRlc0FycmF5O1xuICB9O1xuICBjb25zdCBkaXNhYmxlSW1hZ2VCdXR0b25JbnRlcmFjdGlvbnMgPSAoZGF0YU9iamVjdCkgPT4ge1xuICAgIGNvbnN0IElEID0gZGF0YU9iamVjdC5lbGVtZW50SUQ7XG4gICAgY29uc3QgaW1hZ2VFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7SUR9YCk7XG4gICAgY29uc3QgYnV0dG9uRWxlbWVudCA9IGltYWdlRWxlbWVudC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoXCJidXR0b25cIik7XG4gICAgaW1hZ2VFbGVtZW50LnNldEF0dHJpYnV0ZShcImRyYWdnYWJsZVwiLCBmYWxzZSk7XG4gICAgaW1hZ2VFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZC1pbWFnZVwiKTtcbiAgICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgfTtcbiAgY29uc3QgaW5zZXJ0RHJhZ2dlZEltYWdlID0gKGV2ZW50KSA9PiB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBodW1hblBsYXllck9iamVjdCA9IEdhbWVMb29wLmdldFBsYXllcnMoKVswXTtcbiAgICBjb25zdCB0YXJnZXRDZWxsID0gZXZlbnQudGFyZ2V0O1xuICAgIGlmIChBcnJheS5mcm9tKHRhcmdldENlbGwuY2xhc3NMaXN0KS5pbmNsdWRlcyhcImNvbnRhaW5zLXNoaXAtaW1hZ2VcIikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZGF0YVN0cmluZyA9IGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKFwiaW1hZ2VcIik7XG4gICAgY29uc3QgZGF0YU9iamVjdCA9IEpTT04ucGFyc2UoZGF0YVN0cmluZyk7XG4gICAgaWYgKCFpc1ZhbGlkR2FtZWJvYXJkQ2VsbCh0YXJnZXRDZWxsLCBkYXRhT2JqZWN0KSkge1xuICAgICAgLy8gcHJvYmFibHkgbWFrZSBzb21lIERPTSBlcnJvciBtZXNzYWdlIGFwcGVhclxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBzaGlwQ29vcmRpbmF0ZXMgPSBhZGRTaGlwVG9ET00odGFyZ2V0Q2VsbCwgZGF0YU9iamVjdCk7XG4gICAgaHVtYW5QbGF5ZXJPYmplY3QuYWRkU2hpcFRvR2FtZWJvYXJkKFxuICAgICAgTnVtYmVyKGRhdGFPYmplY3Quc2hpcExlbmd0aCksXG4gICAgICBzaGlwQ29vcmRpbmF0ZXNcbiAgICApO1xuICAgIGRpc2FibGVJbWFnZUJ1dHRvbkludGVyYWN0aW9ucyhkYXRhT2JqZWN0KTtcbiAgICB0YXJnZXRDZWxsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkcm9wXCIsIGluc2VydERyYWdnZWRJbWFnZSk7XG4gIH07XG4gIGNvbnN0IHJvdGF0ZVNoaXBJbWFnZSA9IChpbWFnZSkgPT4ge1xuICAgIGNvbnN0IGltYWdlQ2xhc3NlcyA9IEFycmF5LmZyb20oaW1hZ2UuY2xhc3NMaXN0KTtcbiAgICBpZiAoaW1hZ2VDbGFzc2VzLmluY2x1ZGVzKFwiaG9yaXpvbnRhbFwiKSkge1xuICAgICAgaW1hZ2UuY2xhc3NMaXN0LnJlbW92ZShcImhvcml6b250YWxcIik7XG4gICAgICBpbWFnZS5jbGFzc0xpc3QuYWRkKFwidmVydGljYWxcIik7XG4gICAgfSBlbHNlIGlmIChpbWFnZUNsYXNzZXMuaW5jbHVkZXMoXCJ2ZXJ0aWNhbFwiKSkge1xuICAgICAgaW1hZ2UuY2xhc3NMaXN0LnJlbW92ZShcInZlcnRpY2FsXCIpO1xuICAgICAgaW1hZ2UuY2xhc3NMaXN0LmFkZChcImhvcml6b250YWxcIik7XG4gICAgfVxuICB9O1xuICBjb25zdCByb3RhdGVQZXJMZW5ndGggPSAodGVtcERpdiwgY2xvbmVkSW1hZ2VFbGVtZW50KSA9PiB7XG4gICAgY29uc3QgY2xvbmVkSW1hZ2VFbGVtZW50Q2xhc3NlcyA9IEFycmF5LmZyb20oY2xvbmVkSW1hZ2VFbGVtZW50LmNsYXNzTGlzdCk7XG4gICAgaWYgKGNsb25lZEltYWdlRWxlbWVudENsYXNzZXMuaW5jbHVkZXMoXCJob3Jpem9udGFsXCIpKSB7XG4gICAgICB0ZW1wRGl2LmNsYXNzTGlzdC5hZGQoXCJ0ZW1wLXJvdGF0ZS1ob3Jpem9udGFsXCIpO1xuICAgIH0gZWxzZSBpZiAoY2xvbmVkSW1hZ2VFbGVtZW50Q2xhc3Nlcy5pbmNsdWRlcyhcInZlcnRpY2FsXCIpKSB7XG4gICAgICB0ZW1wRGl2LmNsYXNzTGlzdC5hZGQoXCJ0ZW1wLXJvdGF0ZS12ZXJ0aWNhbFwiKTtcbiAgICAgIGlmIChjbG9uZWRJbWFnZUVsZW1lbnQuZGF0YXNldC5zaGlwTGVuZ3RoID09PSBcIjVcIikge1xuICAgICAgICB0ZW1wRGl2LmNsYXNzTGlzdC5hZGQoXCJ0ZW1wLXJvdGF0ZS12ZXJ0aWNhbC01XCIpO1xuICAgICAgfSBlbHNlIGlmIChjbG9uZWRJbWFnZUVsZW1lbnQuZGF0YXNldC5zaGlwTGVuZ3RoID09PSBcIjRcIikge1xuICAgICAgICB0ZW1wRGl2LmNsYXNzTGlzdC5hZGQoXCJ0ZW1wLXJvdGF0ZS12ZXJ0aWNhbC00XCIpO1xuICAgICAgfSBlbHNlIGlmIChjbG9uZWRJbWFnZUVsZW1lbnQuZGF0YXNldC5zaGlwTGVuZ3RoID09PSBcIjNcIikge1xuICAgICAgICB0ZW1wRGl2LmNsYXNzTGlzdC5hZGQoXCJ0ZW1wLXJvdGF0ZS12ZXJ0aWNhbC0zXCIpO1xuICAgICAgfSBlbHNlIGlmIChjbG9uZWRJbWFnZUVsZW1lbnQuZGF0YXNldC5zaGlwTGVuZ3RoID09PSBcIjJcIikge1xuICAgICAgICB0ZW1wRGl2LmNsYXNzTGlzdC5hZGQoXCJ0ZW1wLXJvdGF0ZS12ZXJ0aWNhbC0yXCIpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgY29uc3Qgcm90YXRlRHJhZ2dlZEltYWdlID0gKGV2ZW50KSA9PiB7XG4gICAgY29uc3QgaW1hZ2VFbGVtZW50ID0gZXZlbnQudGFyZ2V0O1xuICAgIGNvbnN0IGNsb25lZEltYWdlRWxlbWVudCA9IGltYWdlRWxlbWVudC5jbG9uZU5vZGUoKTtcbiAgICBjb25zdCB0ZW1wRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB0ZW1wRGl2LmNsYXNzTGlzdC5hZGQoXCJ0ZW1wLXJvdGF0ZVwiKTtcbiAgICByb3RhdGVQZXJMZW5ndGgodGVtcERpdiwgY2xvbmVkSW1hZ2VFbGVtZW50KTtcbiAgICB0ZW1wRGl2LmFwcGVuZENoaWxkKGNsb25lZEltYWdlRWxlbWVudCk7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0ZW1wRGl2KTtcbiAgICBldmVudC5kYXRhVHJhbnNmZXIuc2V0RHJhZ0ltYWdlKHRlbXBEaXYsIDAsIDApO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0ZW1wRGl2KTtcbiAgICB9LCAwKTtcbiAgfTtcbiAgY29uc3QgYWRkQXR0YWNrUmVzdWx0RE9NID0gKHBsYXllclR5cGUsIGF0dGFja1Jlc3VsdHMsIGNvb3JkaW5hdGVzKSA9PiB7XG4gICAgY29uc3QgY2VsbFJvdyA9IGNvb3JkaW5hdGVzWzBdO1xuICAgIGNvbnN0IGNlbGxDb2x1bW4gPSBjb29yZGluYXRlc1sxXTtcbiAgICBjb25zdCBnYW1lYm9hcmRET00gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtwbGF5ZXJUeXBlfS1ib2FyZGApO1xuICAgIGNvbnN0IHRhcmdldENlbGwgPSBnYW1lYm9hcmRET00ucXVlcnlTZWxlY3RvcihcbiAgICAgIGBbZGF0YS1yb3c9JyR7Y2VsbFJvd30nXVtkYXRhLWNvbHVtbj0nJHtjZWxsQ29sdW1ufSddYFxuICAgICk7XG4gICAgY29uc3QgYXR0YWNrUmVzdWx0c0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICAgIGF0dGFja1Jlc3VsdHNFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJhdHRhY2stcmVzdWx0c1wiKTtcbiAgICB0YXJnZXRDZWxsLmFwcGVuZENoaWxkKGF0dGFja1Jlc3VsdHNFbGVtZW50KTtcbiAgICBpZiAoYXR0YWNrUmVzdWx0cyA9PT0gXCJoaXRcIikge1xuICAgICAgYXR0YWNrUmVzdWx0c0VsZW1lbnQuc2V0QXR0cmlidXRlKFwic3JjXCIsIFwiLi4vZGlzdC9yZWRfWC5wbmdcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGF0dGFja1Jlc3VsdHNFbGVtZW50LnNldEF0dHJpYnV0ZShcInNyY1wiLCBcIi4uL2Rpc3Qvd2hpdGVfTy5wbmdcIik7XG4gICAgfVxuICAgIHRhcmdldENlbGwuZGlzYWJsZWQgPSB0cnVlO1xuICB9O1xuICBjb25zdCBkaXNwbGF5V2lubmVyID0gKHdpbm5pbmdQbGF5ZXIpID0+IHtcbiAgICBjb25zdCBwbGF5ZXJUeXBlID0gd2lubmluZ1BsYXllci5pc0NvbXB1dGVyKCk7XG4gICAgY29uc3QgZ2FtZVJlc3VsdHNFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5nYW1lLXJlc3VsdHNcIik7XG4gICAgZ2FtZVJlc3VsdHNFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJkZWZhdWx0LWhpZGRlblwiKTtcbiAgICBjb25zdCBkaXNwbGF5V2lubmVyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGlzcGxheS13aW5uZXJcIik7XG4gICAgaWYgKCFwbGF5ZXJUeXBlKSB7XG4gICAgICBkaXNwbGF5V2lubmVyRWxlbWVudC50ZXh0Q29udGVudCA9IFwiQ29uZ3JhdHVsYXRpb25zLCB5b3Ugd29uIVwiO1xuICAgIH0gZWxzZSB7XG4gICAgICBkaXNwbGF5V2lubmVyRWxlbWVudC50ZXh0Q29udGVudCA9IFwiT2ggbm8sIHlvdSBsb3N0ISBUcnkgYWdhaW4hXCI7XG4gICAgfVxuICB9O1xuICByZXR1cm4ge1xuICAgIGluaXRpYWxpemVCb2FyZERPTSxcbiAgICBpbnNlcnREcmFnZ2VkSW1hZ2UsXG4gICAgcm90YXRlU2hpcEltYWdlLFxuICAgIHJvdGF0ZURyYWdnZWRJbWFnZSxcbiAgICBnZXREcmFnZ2VkSW1hZ2UsXG4gICAgZHJhZ092ZXIsXG4gICAgYWRkQXR0YWNrUmVzdWx0RE9NLFxuICAgIHRvZ2dsZUFiaWxpdHlUb0F0dGFjayxcbiAgICBkaXNwbGF5V2lubmVyLFxuICB9O1xufSkoKTtcblxuZXhwb3J0IHsgRE9NQ29udHJvbGxlciB9O1xuIiwiaW1wb3J0IHsgU2hpcCB9IGZyb20gXCIuL3NoaXBcIjtcbmltcG9ydCB7IEdhbWVib2FyZCB9IGZyb20gXCIuL2dhbWVib2FyZFwiO1xuaW1wb3J0IHsgR2FtZUxvb3AgfSBmcm9tIFwiLi9nYW1lbG9vcFwiO1xuaW1wb3J0IHsgRE9NQ29udHJvbGxlciB9IGZyb20gXCIuL0RPTV9jb250cm9sbGVyXCI7XG5cbmNvbnN0IFBsYXllciA9IChwbGF5ZXJUeXBlKSA9PiB7XG4gIGNvbnN0IGRldGVybWluZVBsYXllclR5cGUgPSAoKSA9PiB7XG4gICAgaWYgKHBsYXllclR5cGUgPT09IFwiaHVtYW5cIikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAocGxheWVyVHlwZSA9PT0gXCJjb21wdXRlclwiKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGNvbXB1dGVyUGxheWVyID0gZGV0ZXJtaW5lUGxheWVyVHlwZSgpO1xuICBjb25zdCBwbGF5ZXJHYW1lYm9hcmQgPSBHYW1lYm9hcmQoKTtcbiAgbGV0IG9wcG9zaW5nUGxheWVyO1xuICBjb25zdCBpc0NvbXB1dGVyID0gKCkgPT4gY29tcHV0ZXJQbGF5ZXI7XG4gIGNvbnN0IGdldEdhbWVib2FyZCA9ICgpID0+IHBsYXllckdhbWVib2FyZDtcbiAgY29uc3QgZ2V0T3Bwb3NpbmdQbGF5ZXIgPSAoKSA9PiBvcHBvc2luZ1BsYXllcjtcbiAgY29uc3Qgc2V0T3Bwb3NpbmdQbGF5ZXIgPSAocGxheWVyKSA9PiB7XG4gICAgb3Bwb3NpbmdQbGF5ZXIgPSBwbGF5ZXI7XG4gIH07XG4gIGNvbnN0IGFkZFNoaXBUb0dhbWVib2FyZCA9IChzaGlwTGVuZ3RoLCBjb29yZGluYXRlcykgPT4ge1xuICAgIGNvbnN0IHNoaXAgPSBTaGlwKHNoaXBMZW5ndGgpO1xuICAgIHBsYXllckdhbWVib2FyZC5wbGFjZVNoaXAoc2hpcCwgY29vcmRpbmF0ZXMpO1xuICB9O1xuICBjb25zdCBzZW5kQXR0YWNrID0gKGNvb3JkaW5hdGVzKSA9PiB7XG4gICAgaWYgKFxuICAgICAgY2hlY2tJZlByZXZpb3VzbHlBdHRhY2tlZChjb29yZGluYXRlcykgfHxcbiAgICAgICFHYW1lTG9vcC5pc0luUHJvZ3Jlc3MoKSB8fFxuICAgICAgR2FtZUxvb3AuaXNNaWRBdHRhY2soKVxuICAgICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBvcHBvc2luZ1BsYXllckdhbWVib2FyZCA9IG9wcG9zaW5nUGxheWVyLmdldEdhbWVib2FyZCgpO1xuICAgIGNvbnN0IGF0dGFja1Jlc3VsdHMgPSBvcHBvc2luZ1BsYXllci5yZWNlaXZlQXR0YWNrKGNvb3JkaW5hdGVzKTtcbiAgICBpZiAoYXR0YWNrUmVzdWx0cyA9PT0gXCJoaXRcIikge1xuICAgICAgcGxheWVyR2FtZWJvYXJkLmFkZFNlbnRIaXRTaG90KGNvb3JkaW5hdGVzKTtcbiAgICAgIGlmICghaXNDb21wdXRlcigpKSB7XG4gICAgICAgIERPTUNvbnRyb2xsZXIuYWRkQXR0YWNrUmVzdWx0RE9NKFxuICAgICAgICAgIFwiY29tcHV0ZXJcIixcbiAgICAgICAgICBhdHRhY2tSZXN1bHRzLFxuICAgICAgICAgIGNvb3JkaW5hdGVzXG4gICAgICAgICk7XG4gICAgICB9IGVsc2UgaWYgKGlzQ29tcHV0ZXIoKSkge1xuICAgICAgICBET01Db250cm9sbGVyLmFkZEF0dGFja1Jlc3VsdERPTShcInBsYXllclwiLCBhdHRhY2tSZXN1bHRzLCBjb29yZGluYXRlcyk7XG4gICAgICB9XG4gICAgICBpZiAob3Bwb3NpbmdQbGF5ZXJHYW1lYm9hcmQuaXNBbGxTaGlwc1N1bmsoKSkge1xuICAgICAgICBHYW1lTG9vcC5lbmRHYW1lKG9wcG9zaW5nUGxheWVyKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoYXR0YWNrUmVzdWx0cyA9PT0gXCJtaXNzXCIpIHtcbiAgICAgIHBsYXllckdhbWVib2FyZC5hZGRTZW50TWlzc2VkU2hvdChjb29yZGluYXRlcyk7XG4gICAgICBpZiAoIWlzQ29tcHV0ZXIoKSkge1xuICAgICAgICBET01Db250cm9sbGVyLmFkZEF0dGFja1Jlc3VsdERPTShcbiAgICAgICAgICBcImNvbXB1dGVyXCIsXG4gICAgICAgICAgYXR0YWNrUmVzdWx0cyxcbiAgICAgICAgICBjb29yZGluYXRlc1xuICAgICAgICApO1xuICAgICAgfSBlbHNlIGlmIChpc0NvbXB1dGVyKCkpIHtcbiAgICAgICAgRE9NQ29udHJvbGxlci5hZGRBdHRhY2tSZXN1bHRET00oXCJwbGF5ZXJcIiwgYXR0YWNrUmVzdWx0cywgY29vcmRpbmF0ZXMpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAob3Bwb3NpbmdQbGF5ZXIuaXNDb21wdXRlcigpKSB7XG4gICAgICBHYW1lTG9vcC50b2dnbGVNaWRBdHRhY2sodHJ1ZSk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgR2FtZUxvb3AudG9nZ2xlTWlkQXR0YWNrKGZhbHNlKTtcbiAgICAgICAgb3Bwb3NpbmdQbGF5ZXIuc2VuZENvbXB1dGVyQXR0YWNrKCk7XG4gICAgICB9LCAwKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGluaXRpYWxpemVDb21wdXRlckdhbWVib2FyZCA9ICgpID0+IHtcbiAgICBpZiAoIWNvbXB1dGVyUGxheWVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGxlbmd0aHNPZlNoaXBzID0gWzUsIDQsIDMsIDMsIDJdO1xuICAgIGZvciAoY29uc3Qgc2hpcExlbmd0aCBvZiBsZW5ndGhzT2ZTaGlwcykge1xuICAgICAgY29uc3Qgc2hpcENvb3JkaW5hdGVzID0gZ2VuZXJhdGVDb21wdXRlclNoaXBDb29yZGluYXRlcyhzaGlwTGVuZ3RoKTtcbiAgICAgIGFkZFNoaXBUb0dhbWVib2FyZChzaGlwTGVuZ3RoLCBzaGlwQ29vcmRpbmF0ZXMpO1xuICAgIH1cbiAgfTtcbiAgY29uc3Qgc2VuZENvbXB1dGVyQXR0YWNrID0gKCkgPT4ge1xuICAgIGlmICghY29tcHV0ZXJQbGF5ZXIgfHwgIUdhbWVMb29wLmlzSW5Qcm9ncmVzcygpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGF0dGFja0Nvb3JkaW5hdGVzID0gZ2VuZXJhdGVBdHRhY2tDb29yZGluYXRlcygpO1xuICAgIHNlbmRBdHRhY2soYXR0YWNrQ29vcmRpbmF0ZXMpO1xuICB9O1xuICBjb25zdCByZWNlaXZlQXR0YWNrID0gKGNvb3JkaW5hdGVzKSA9PiB7XG4gICAgY29uc3QgYXR0YWNrUmVzdWx0cyA9IHBsYXllckdhbWVib2FyZC5yZWNlaXZlQXR0YWNrKGNvb3JkaW5hdGVzKTtcbiAgICByZXR1cm4gYXR0YWNrUmVzdWx0cztcbiAgfTtcbiAgY29uc3QgZ2VuZXJhdGVDb21wdXRlclNoaXBDb29yZGluYXRlcyA9IChzaGlwTGVuZ3RoKSA9PiB7XG4gICAgbGV0IGxpc3RPZkNvb3JkaW5hdGVzID0gW107XG4gICAgZG8ge1xuICAgICAgbGlzdE9mQ29vcmRpbmF0ZXMgPSBbXTtcbiAgICAgIGNvbnN0IHN0YXJ0aW5nQ29vcmRpbmF0ZXMgPSBnZW5lcmF0ZVN0YXJ0aW5nQ29vcmRpbmF0ZXMoKTtcbiAgICAgIGNvbnN0IG5vblN0YXJ0aW5nQ29vcmRpbmF0ZXMgPSBnZW5lcmF0ZU5vblN0YXJ0aW5nQ29vcmRpbmF0ZXMoXG4gICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXMsXG4gICAgICAgIHNoaXBMZW5ndGhcbiAgICAgICk7XG4gICAgICBsaXN0T2ZDb29yZGluYXRlcy5wdXNoKHN0YXJ0aW5nQ29vcmRpbmF0ZXMpO1xuICAgICAgbGlzdE9mQ29vcmRpbmF0ZXMgPSBsaXN0T2ZDb29yZGluYXRlcy5jb25jYXQobm9uU3RhcnRpbmdDb29yZGluYXRlcyk7XG4gICAgfSB3aGlsZSAobGlzdE9mQ29vcmRpbmF0ZXMubGVuZ3RoIDwgc2hpcExlbmd0aCk7XG4gICAgcmV0dXJuIGxpc3RPZkNvb3JkaW5hdGVzO1xuICB9O1xuICBjb25zdCBnZW5lcmF0ZVN0YXJ0aW5nQ29vcmRpbmF0ZXMgPSAoKSA9PiB7XG4gICAgY29uc3Qgc3RhcnRpbmdDb29yZGluYXRlcyA9IFt1bmRlZmluZWQsIHVuZGVmaW5lZF07XG4gICAgZG8ge1xuICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1swXSA9IGdlbmVyYXRlUmFuZG9tQ29vcmRpbmF0ZSgpO1xuICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1sxXSA9IGdlbmVyYXRlUmFuZG9tQ29vcmRpbmF0ZSgpO1xuICAgIH0gd2hpbGUgKHBsYXllckdhbWVib2FyZC5nZXRDb29yZGluYXRlcyhzdGFydGluZ0Nvb3JkaW5hdGVzKSAhPT0gdW5kZWZpbmVkKTtcbiAgICByZXR1cm4gc3RhcnRpbmdDb29yZGluYXRlcztcbiAgfTtcbiAgY29uc3QgZ2VuZXJhdGVOb25TdGFydGluZ0Nvb3JkaW5hdGVzID0gKHN0YXJ0aW5nQ29vcmRpbmF0ZXMsIHNoaXBMZW5ndGgpID0+IHtcbiAgICBjb25zdCBwb3NzaWJsZUNvb3JkaW5hdGVzID0gW107XG4gICAgaWYgKGNoZWNrSWZWYWxpZEVtcHR5Q29vcmRpbmF0ZXMoc3RhcnRpbmdDb29yZGluYXRlcywgc2hpcExlbmd0aCwgXCJ1cFwiKSkge1xuICAgICAgY29uc3QgdXBDb29yZGluYXRlcyA9IFtdO1xuICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBzaGlwTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdXBDb29yZGluYXRlcy5wdXNoKFtcbiAgICAgICAgICBzdGFydGluZ0Nvb3JkaW5hdGVzWzBdIC0gaSxcbiAgICAgICAgICBzdGFydGluZ0Nvb3JkaW5hdGVzWzFdLFxuICAgICAgICBdKTtcbiAgICAgIH1cbiAgICAgIHBvc3NpYmxlQ29vcmRpbmF0ZXMucHVzaCh1cENvb3JkaW5hdGVzKTtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgY2hlY2tJZlZhbGlkRW1wdHlDb29yZGluYXRlcyhzdGFydGluZ0Nvb3JkaW5hdGVzLCBzaGlwTGVuZ3RoLCBcInJpZ2h0XCIpXG4gICAgKSB7XG4gICAgICBjb25zdCByaWdodENvb3JkaW5hdGVzID0gW107XG4gICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHNoaXBMZW5ndGg7IGkrKykge1xuICAgICAgICByaWdodENvb3JkaW5hdGVzLnB1c2goW1xuICAgICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMF0sXG4gICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1sxXSArIGksXG4gICAgICAgIF0pO1xuICAgICAgfVxuICAgICAgcG9zc2libGVDb29yZGluYXRlcy5wdXNoKHJpZ2h0Q29vcmRpbmF0ZXMpO1xuICAgIH1cbiAgICBpZiAoY2hlY2tJZlZhbGlkRW1wdHlDb29yZGluYXRlcyhzdGFydGluZ0Nvb3JkaW5hdGVzLCBzaGlwTGVuZ3RoLCBcImRvd25cIikpIHtcbiAgICAgIGNvbnN0IGRvd25Db29yZGluYXRlcyA9IFtdO1xuICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBzaGlwTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZG93bkNvb3JkaW5hdGVzLnB1c2goW1xuICAgICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMF0gKyBpLFxuICAgICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMV0sXG4gICAgICAgIF0pO1xuICAgICAgfVxuICAgICAgcG9zc2libGVDb29yZGluYXRlcy5wdXNoKGRvd25Db29yZGluYXRlcyk7XG4gICAgfVxuICAgIGlmIChjaGVja0lmVmFsaWRFbXB0eUNvb3JkaW5hdGVzKHN0YXJ0aW5nQ29vcmRpbmF0ZXMsIHNoaXBMZW5ndGgsIFwibGVmdFwiKSkge1xuICAgICAgY29uc3QgbGVmdENvb3JkaW5hdGVzID0gW107XG4gICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHNoaXBMZW5ndGg7IGkrKykge1xuICAgICAgICBsZWZ0Q29vcmRpbmF0ZXMucHVzaChbXG4gICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1swXSxcbiAgICAgICAgICBzdGFydGluZ0Nvb3JkaW5hdGVzWzFdIC0gaSxcbiAgICAgICAgXSk7XG4gICAgICB9XG4gICAgICBwb3NzaWJsZUNvb3JkaW5hdGVzLnB1c2gobGVmdENvb3JkaW5hdGVzKTtcbiAgICB9XG4gICAgaWYgKHBvc3NpYmxlQ29vcmRpbmF0ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gcG9zc2libGVDb29yZGluYXRlcztcbiAgICB9XG4gICAgY29uc3QgcmFuZG9tSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwb3NzaWJsZUNvb3JkaW5hdGVzLmxlbmd0aCk7XG4gICAgcmV0dXJuIHBvc3NpYmxlQ29vcmRpbmF0ZXNbcmFuZG9tSW5kZXhdO1xuICB9O1xuICBjb25zdCBnZW5lcmF0ZVJhbmRvbUNvb3JkaW5hdGUgPSAoKSA9PiB7XG4gICAgY29uc3QgQk9BUkRBWEVTTEVOR1RIID0gMTA7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIEJPQVJEQVhFU0xFTkdUSCk7XG4gIH07XG4gIGNvbnN0IGNoZWNrSWZQcmV2aW91c2x5QXR0YWNrZWQgPSAoYXR0YWNrQ29vcmRpbmF0ZXMpID0+IHtcbiAgICBsZXQgcHJldmlvdXNseUF0dGFja2VkID0gZmFsc2U7XG4gICAgY29uc3QgcmVjZWl2ZWRNaXNzZWRTaG90cyA9IG9wcG9zaW5nUGxheWVyXG4gICAgICAuZ2V0R2FtZWJvYXJkKClcbiAgICAgIC5nZXRSZWNlaXZlZE1pc3NlZFNob3RzKCk7XG4gICAgY29uc3QgcmVjZWl2ZWRIaXRTaG90cyA9IG9wcG9zaW5nUGxheWVyXG4gICAgICAuZ2V0R2FtZWJvYXJkKClcbiAgICAgIC5nZXRSZWNlaXZlZEhpdFNob3RzKCk7XG4gICAgcHJldmlvdXNseUF0dGFja2VkID0gcmVjZWl2ZWRNaXNzZWRTaG90cy5zb21lKFxuICAgICAgKHNob3QpID0+XG4gICAgICAgIHNob3RbMF0gPT09IGF0dGFja0Nvb3JkaW5hdGVzWzBdICYmIHNob3RbMV0gPT09IGF0dGFja0Nvb3JkaW5hdGVzWzFdXG4gICAgKTtcbiAgICBpZiAoIXByZXZpb3VzbHlBdHRhY2tlZCkge1xuICAgICAgcHJldmlvdXNseUF0dGFja2VkID0gcmVjZWl2ZWRIaXRTaG90cy5zb21lKFxuICAgICAgICAoc2hvdCkgPT5cbiAgICAgICAgICBzaG90WzBdID09PSBhdHRhY2tDb29yZGluYXRlc1swXSAmJiBzaG90WzFdID09PSBhdHRhY2tDb29yZGluYXRlc1sxXVxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIHByZXZpb3VzbHlBdHRhY2tlZDtcbiAgfTtcbiAgY29uc3QgZ2VuZXJhdGVBdHRhY2tDb29yZGluYXRlcyA9ICgpID0+IHtcbiAgICBjb25zdCBhdHRhY2tDb29yZGluYXRlcyA9IFt1bmRlZmluZWQsIHVuZGVmaW5lZF07XG4gICAgZG8ge1xuICAgICAgYXR0YWNrQ29vcmRpbmF0ZXNbMF0gPSBnZW5lcmF0ZVJhbmRvbUNvb3JkaW5hdGUoKTtcbiAgICAgIGF0dGFja0Nvb3JkaW5hdGVzWzFdID0gZ2VuZXJhdGVSYW5kb21Db29yZGluYXRlKCk7XG4gICAgfSB3aGlsZSAoY2hlY2tJZlByZXZpb3VzbHlBdHRhY2tlZChhdHRhY2tDb29yZGluYXRlcykpO1xuICAgIHJldHVybiBhdHRhY2tDb29yZGluYXRlcztcbiAgfTtcbiAgY29uc3QgY2hlY2tJZlZhbGlkRW1wdHlDb29yZGluYXRlcyA9IChcbiAgICBzdGFydGluZ0Nvb3JkaW5hdGVzLFxuICAgIHNoaXBMZW5ndGgsXG4gICAgZGlyZWN0aW9uXG4gICkgPT4ge1xuICAgIHN3aXRjaCAoZGlyZWN0aW9uKSB7XG4gICAgICBjYXNlIFwidXBcIjpcbiAgICAgICAgaWYgKHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMF0gLSAoc2hpcExlbmd0aCAtIDEpIDwgMCkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHNoaXBMZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHBsYXllckdhbWVib2FyZC5nZXRDb29yZGluYXRlcyhbXG4gICAgICAgICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMF0gLSBpLFxuICAgICAgICAgICAgICBzdGFydGluZ0Nvb3JkaW5hdGVzWzFdLFxuICAgICAgICAgICAgXSkgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcblxuICAgICAgY2FzZSBcInJpZ2h0XCI6XG4gICAgICAgIGlmIChzdGFydGluZ0Nvb3JkaW5hdGVzWzFdICsgKHNoaXBMZW5ndGggLSAxKSA+IDkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBzaGlwTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBwbGF5ZXJHYW1lYm9hcmQuZ2V0Q29vcmRpbmF0ZXMoW1xuICAgICAgICAgICAgICBzdGFydGluZ0Nvb3JkaW5hdGVzWzBdLFxuICAgICAgICAgICAgICBzdGFydGluZ0Nvb3JkaW5hdGVzWzFdICsgaSxcbiAgICAgICAgICAgIF0pICE9PSB1bmRlZmluZWRcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICAgIGNhc2UgXCJkb3duXCI6XG4gICAgICAgIGlmIChzdGFydGluZ0Nvb3JkaW5hdGVzWzBdICsgKHNoaXBMZW5ndGggLSAxKSA+IDkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBzaGlwTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBwbGF5ZXJHYW1lYm9hcmQuZ2V0Q29vcmRpbmF0ZXMoW1xuICAgICAgICAgICAgICBzdGFydGluZ0Nvb3JkaW5hdGVzWzBdICsgaSxcbiAgICAgICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1sxXSxcbiAgICAgICAgICAgIF0pICE9PSB1bmRlZmluZWRcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICAgIGNhc2UgXCJsZWZ0XCI6XG4gICAgICAgIGlmIChzdGFydGluZ0Nvb3JkaW5hdGVzWzFdIC0gKHNoaXBMZW5ndGggLSAxKSA8IDApIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBzaGlwTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBwbGF5ZXJHYW1lYm9hcmQuZ2V0Q29vcmRpbmF0ZXMoW1xuICAgICAgICAgICAgICBzdGFydGluZ0Nvb3JkaW5hdGVzWzBdLFxuICAgICAgICAgICAgICBzdGFydGluZ0Nvb3JkaW5hdGVzWzFdIC0gaSxcbiAgICAgICAgICAgIF0pICE9PSB1bmRlZmluZWRcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIHtcbiAgICBpc0NvbXB1dGVyLFxuICAgIGdldEdhbWVib2FyZCxcbiAgICBnZXRPcHBvc2luZ1BsYXllcixcbiAgICBzZXRPcHBvc2luZ1BsYXllcixcbiAgICBhZGRTaGlwVG9HYW1lYm9hcmQsXG4gICAgc2VuZEF0dGFjayxcbiAgICBpbml0aWFsaXplQ29tcHV0ZXJHYW1lYm9hcmQsXG4gICAgc2VuZENvbXB1dGVyQXR0YWNrLFxuICAgIHJlY2VpdmVBdHRhY2ssXG4gICAgY2hlY2tJZlZhbGlkRW1wdHlDb29yZGluYXRlcyxcbiAgfTtcbn07XG5cbmV4cG9ydCB7IFBsYXllciB9O1xuIiwiY29uc3QgR2FtZWJvYXJkID0gKCkgPT4ge1xuICBjb25zdCBjcmVhdGVCb2FyZCA9ICgpID0+IHtcbiAgICBjb25zdCBib2FyZCA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkrKykge1xuICAgICAgYm9hcmQucHVzaChbXSk7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDEwOyBqKyspIHtcbiAgICAgICAgYm9hcmRbaV0ucHVzaCh1bmRlZmluZWQpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYm9hcmQ7XG4gIH07XG4gIGNvbnN0IGJvYXJkID0gY3JlYXRlQm9hcmQoKTtcbiAgY29uc3QgcGxhY2VkU2hpcHMgPSBbXTtcbiAgY29uc3QgcmVjZWl2ZWRNaXNzZWRTaG90cyA9IFtdO1xuICBjb25zdCByZWNlaXZlZEhpdFNob3RzID0gW107XG4gIGNvbnN0IHNlbnRNaXNzZWRTaG90cyA9IFtdO1xuICBjb25zdCBzZW50SGl0U2hvdHMgPSBbXTtcbiAgbGV0IGFsbFNoaXBzU3VuayA9IGZhbHNlO1xuICBjb25zdCBnZXRDb29yZGluYXRlcyA9IChjb29yZGluYXRlcykgPT4gYm9hcmRbY29vcmRpbmF0ZXNbMF1dW2Nvb3JkaW5hdGVzWzFdXTtcbiAgY29uc3QgZ2V0UGxhY2VkU2hpcHMgPSAoKSA9PiBwbGFjZWRTaGlwcztcbiAgY29uc3QgZ2V0UmVjZWl2ZWRNaXNzZWRTaG90cyA9ICgpID0+IHJlY2VpdmVkTWlzc2VkU2hvdHM7XG4gIGNvbnN0IGdldFJlY2VpdmVkSGl0U2hvdHMgPSAoKSA9PiByZWNlaXZlZEhpdFNob3RzO1xuICBjb25zdCBnZXRTZW50TWlzc2VkU2hvdHMgPSAoKSA9PiBzZW50TWlzc2VkU2hvdHM7XG4gIGNvbnN0IGdldFNlbnRIaXRTaG90cyA9ICgpID0+IHNlbnRIaXRTaG90cztcbiAgY29uc3QgaXNBbGxTaGlwc1N1bmsgPSAoKSA9PiBhbGxTaGlwc1N1bms7XG4gIGNvbnN0IHBsYWNlU2hpcCA9IChzaGlwLCBjb29yZGluYXRlc0xpc3QpID0+IHtcbiAgICBmb3IgKGNvbnN0IGNvb3JkaW5hdGVzIG9mIGNvb3JkaW5hdGVzTGlzdCkge1xuICAgICAgYm9hcmRbY29vcmRpbmF0ZXNbMF1dW2Nvb3JkaW5hdGVzWzFdXSA9IHNoaXA7XG4gICAgfVxuICAgIHBsYWNlZFNoaXBzLnB1c2goc2hpcCk7XG4gIH07XG4gIGNvbnN0IGNoZWNrQWxsU2hpcHNTdW5rID0gKCkgPT4ge1xuICAgIGlmIChwbGFjZWRTaGlwcy5ldmVyeSgoc2hpcCkgPT4gc2hpcC5pc1N1bmsoKSkpIHtcbiAgICAgIGFsbFNoaXBzU3VuayA9IHRydWU7XG4gICAgfVxuICB9O1xuICBjb25zdCByZWNlaXZlQXR0YWNrID0gKGNvb3JkaW5hdGVzKSA9PiB7XG4gICAgY29uc3QgZW50aXR5QXRDb29yZGluYXRlcyA9IGdldENvb3JkaW5hdGVzKGNvb3JkaW5hdGVzKTtcbiAgICBpZiAoZW50aXR5QXRDb29yZGluYXRlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBlbnRpdHlBdENvb3JkaW5hdGVzLmhpdCgpO1xuICAgICAgY2hlY2tBbGxTaGlwc1N1bmsoKTtcbiAgICAgIHJlY2VpdmVkSGl0U2hvdHMucHVzaChjb29yZGluYXRlcyk7XG4gICAgICByZXR1cm4gXCJoaXRcIjtcbiAgICB9XG4gICAgcmVjZWl2ZWRNaXNzZWRTaG90cy5wdXNoKGNvb3JkaW5hdGVzKTtcbiAgICByZXR1cm4gXCJtaXNzXCI7XG4gIH07XG4gIGNvbnN0IGFkZFNlbnRNaXNzZWRTaG90ID0gKGNvb3JkaW5hdGVzKSA9PiB7XG4gICAgc2VudE1pc3NlZFNob3RzLnB1c2goY29vcmRpbmF0ZXMpO1xuICB9O1xuICBjb25zdCBhZGRTZW50SGl0U2hvdCA9IChjb29yZGluYXRlcykgPT4ge1xuICAgIHNlbnRIaXRTaG90cy5wdXNoKGNvb3JkaW5hdGVzKTtcbiAgfTtcbiAgcmV0dXJuIHtcbiAgICBnZXRDb29yZGluYXRlcyxcbiAgICBnZXRQbGFjZWRTaGlwcyxcbiAgICBnZXRSZWNlaXZlZE1pc3NlZFNob3RzLFxuICAgIGdldFJlY2VpdmVkSGl0U2hvdHMsXG4gICAgZ2V0U2VudE1pc3NlZFNob3RzLFxuICAgIGdldFNlbnRIaXRTaG90cyxcbiAgICBpc0FsbFNoaXBzU3VuayxcbiAgICBwbGFjZVNoaXAsXG4gICAgcmVjZWl2ZUF0dGFjayxcbiAgICBhZGRTZW50TWlzc2VkU2hvdCxcbiAgICBhZGRTZW50SGl0U2hvdCxcbiAgfTtcbn07XG5cbmV4cG9ydCB7IEdhbWVib2FyZCB9O1xuIiwiaW1wb3J0IHsgU2hpcCB9IGZyb20gXCIuL3NoaXBcIjtcbmltcG9ydCB7IEdhbWVib2FyZCB9IGZyb20gXCIuL2dhbWVib2FyZFwiO1xuaW1wb3J0IHsgUGxheWVyIH0gZnJvbSBcIi4vcGxheWVyXCI7XG5pbXBvcnQgeyBET01Db250cm9sbGVyIH0gZnJvbSBcIi4vRE9NX2NvbnRyb2xsZXJcIjtcblxuY29uc3QgR2FtZUxvb3AgPSAoKCkgPT4ge1xuICBjb25zdCBwbGF5ZXJzID0gW107XG4gIGxldCBpblByb2dyZXNzID0gdHJ1ZTtcbiAgbGV0IHdpbm5lcjtcbiAgbGV0IG1pZEF0dGFjayA9IGZhbHNlO1xuICBjb25zdCBnZXRQbGF5ZXJzID0gKCkgPT4gcGxheWVycztcbiAgY29uc3QgaXNJblByb2dyZXNzID0gKCkgPT4gaW5Qcm9ncmVzcztcbiAgY29uc3QgZ2V0V2lubmVyID0gKCkgPT4gd2lubmVyO1xuICBjb25zdCBpc01pZEF0dGFjayA9ICgpID0+IG1pZEF0dGFjaztcbiAgY29uc3QgdG9nZ2xlTWlkQXR0YWNrID0gKHN0YXRlKSA9PiB7XG4gICAgc3RhdGUgPyAobWlkQXR0YWNrID0gdHJ1ZSkgOiAobWlkQXR0YWNrID0gZmFsc2UpO1xuICB9O1xuICBjb25zdCBjcmVhdGVHYW1lID0gKCkgPT4ge1xuICAgIGNvbnN0IGh1bWFuUGxheWVyID0gUGxheWVyKFwiaHVtYW5cIik7XG4gICAgcGxheWVycy5wdXNoKGh1bWFuUGxheWVyKTtcbiAgICBjb25zdCBjb21wdXRlclBsYXllciA9IFBsYXllcihcImNvbXB1dGVyXCIpO1xuICAgIHBsYXllcnMucHVzaChjb21wdXRlclBsYXllcik7XG4gICAgaHVtYW5QbGF5ZXIuc2V0T3Bwb3NpbmdQbGF5ZXIoY29tcHV0ZXJQbGF5ZXIpO1xuICAgIGNvbXB1dGVyUGxheWVyLnNldE9wcG9zaW5nUGxheWVyKGh1bWFuUGxheWVyKTtcbiAgICBjb21wdXRlclBsYXllci5pbml0aWFsaXplQ29tcHV0ZXJHYW1lYm9hcmQoKTtcbiAgfTtcbiAgY29uc3QgZW5kR2FtZSA9IChsb3NlclBsYXllcikgPT4ge1xuICAgIGNvbnN0IHdpbm5lclBsYXllciA9IGxvc2VyUGxheWVyLmdldE9wcG9zaW5nUGxheWVyKCk7XG4gICAgaW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgIHdpbm5lciA9IHdpbm5lclBsYXllcjtcbiAgICBET01Db250cm9sbGVyLnRvZ2dsZUFiaWxpdHlUb0F0dGFjayhcImRpc2FibGVcIik7XG4gICAgRE9NQ29udHJvbGxlci5kaXNwbGF5V2lubmVyKHdpbm5lcik7XG4gIH07XG4gIGNvbnN0IHJlc2V0R2FtZSA9ICgpID0+IHtcbiAgICBwbGF5ZXJzLmxlbmd0aCA9IDA7XG4gICAgaW5Qcm9ncmVzcyA9IHRydWU7XG4gICAgd2lubmVyID0gdW5kZWZpbmVkO1xuICB9O1xuICByZXR1cm4ge1xuICAgIGdldFBsYXllcnMsXG4gICAgaXNJblByb2dyZXNzLFxuICAgIGdldFdpbm5lcixcbiAgICBpc01pZEF0dGFjayxcbiAgICB0b2dnbGVNaWRBdHRhY2ssXG4gICAgY3JlYXRlR2FtZSxcbiAgICBlbmRHYW1lLFxuICAgIHJlc2V0R2FtZSxcbiAgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IEdhbWVMb29wIH07XG4iLCJpbXBvcnQgeyBET01Db250cm9sbGVyIH0gZnJvbSBcIi4vRE9NX2NvbnRyb2xsZXJcIjtcblxuY29uc3QgRXZlbnRMaXN0ZW5lckNvbnRyb2xsZXIgPSAoKCkgPT4ge1xuICBjb25zdCByb3RhdGVTaGlwSW1hZ2VMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgY29uc3Qgc2hpcFBsYWNlbWVudEVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zaGlwLXBsYWNlbWVudFwiKTtcbiAgICBzaGlwUGxhY2VtZW50RWxlbWVudHMuZm9yRWFjaCgoZ3JvdXBPZkVsZW1lbnRzKSA9PiB7XG4gICAgICBjb25zdCBpbWFnZUVsZW1lbnQgPSBncm91cE9mRWxlbWVudHMucXVlcnlTZWxlY3RvcihcImltZ1wiKTtcbiAgICAgIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBncm91cE9mRWxlbWVudHMucXVlcnlTZWxlY3RvcihcImJ1dHRvblwiKTtcbiAgICAgIGJ1dHRvbkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgRE9NQ29udHJvbGxlci5yb3RhdGVTaGlwSW1hZ2UoaW1hZ2VFbGVtZW50KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuICBjb25zdCBhZGRTaGlwUGxhY2VtZW50RHJhZyA9ICgpID0+IHtcbiAgICBjb25zdCBzaGlwSW1hZ2VzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNoaXAtcGllY2VcIikpO1xuICAgIHNoaXBJbWFnZXMuZm9yRWFjaCgoc2hpcCkgPT4ge1xuICAgICAgc2hpcC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ3N0YXJ0XCIsIChldmVudCkgPT4ge1xuICAgICAgICBET01Db250cm9sbGVyLmdldERyYWdnZWRJbWFnZShldmVudCk7XG4gICAgICAgIERPTUNvbnRyb2xsZXIucm90YXRlRHJhZ2dlZEltYWdlKGV2ZW50KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuICByZXR1cm4ge1xuICAgIHJvdGF0ZVNoaXBJbWFnZUxpc3RlbmVycyxcbiAgICBhZGRTaGlwUGxhY2VtZW50RHJhZyxcbiAgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IEV2ZW50TGlzdGVuZXJDb250cm9sbGVyIH07XG4iLCJpbXBvcnQgeyBHYW1lTG9vcCB9IGZyb20gXCIuL2dhbWVsb29wXCI7XG5pbXBvcnQgeyBET01Db250cm9sbGVyIH0gZnJvbSBcIi4vRE9NX2NvbnRyb2xsZXJcIjtcbmltcG9ydCB7IEV2ZW50TGlzdGVuZXJDb250cm9sbGVyIH0gZnJvbSBcIi4vZXZlbnRfbGlzdGVuZXJfY29udHJvbGxlclwiO1xuXG5HYW1lTG9vcC5jcmVhdGVHYW1lKCk7XG5cbkRPTUNvbnRyb2xsZXIuaW5pdGlhbGl6ZUJvYXJkRE9NKCk7XG5cbkV2ZW50TGlzdGVuZXJDb250cm9sbGVyLnJvdGF0ZVNoaXBJbWFnZUxpc3RlbmVycygpO1xuXG5FdmVudExpc3RlbmVyQ29udHJvbGxlci5hZGRTaGlwUGxhY2VtZW50RHJhZygpO1xuIl0sIm5hbWVzIjpbIkRPTUNvbnRyb2xsZXIiLCJjcmVhdGVCb2FyZENlbGxzIiwiZ2FtZWJvYXJkRE9NIiwiY29sdW1uTGFiZWxzIiwicm93TGFiZWxzIiwiaHVtYW5QbGF5ZXJPYmplY3QiLCJHYW1lTG9vcCIsImdldFBsYXllcnMiLCJpIiwiaiIsImludmlzaWJsZVBsYWNlaG9sZGVyRWxlbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInN0eWxlIiwidmlzaWJpbGl0eSIsImFwcGVuZENoaWxkIiwiY29sdW1uTGFiZWxFbGVtZW50IiwidGV4dENvbnRlbnQiLCJyb3dMYWJlbEVsZW1lbnQiLCJBcnJheSIsImZyb20iLCJpbmNsdWRlcyIsInBsYXllckNlbGxFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwiZHJhZ092ZXIiLCJpbnNlcnREcmFnZ2VkSW1hZ2UiLCJnZXRHYW1lYm9hcmQiLCJnZXRQbGFjZWRTaGlwcyIsImxlbmd0aCIsInRvZ2dsZUFiaWxpdHlUb0F0dGFjayIsImNvbXB1dGVyQ2VsbEVsZW1lbnQiLCJkaXNhYmxlZCIsImlzTWlkQXR0YWNrIiwiY2VsbFJvdyIsIk51bWJlciIsImRhdGFzZXQiLCJyb3ciLCJjZWxsQ29sdW1uIiwiY29sdW1uIiwic2VuZEF0dGFjayIsImFjdGlvbiIsImNvbXB1dGVyR2FtZWJvYXJkRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjZWxsRWxlbWVudHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImNlbGxFbGVtZW50IiwicHJldmVudERlZmF1bHQiLCJ0YXJnZXRDZWxsIiwidGFyZ2V0IiwiZGF0YVN0cmluZyIsImRhdGFUcmFuc2ZlciIsImdldERhdGEiLCJkYXRhT2JqZWN0IiwiSlNPTiIsInBhcnNlIiwiY2VsbENvb3JkaW5hdGVzIiwic2hpcExlbmd0aCIsImhvcml6b250YWwiLCJjaGVja0lmVmFsaWRFbXB0eUNvb3JkaW5hdGVzIiwidmVydGljYWwiLCJpc1ZhbGlkR2FtZWJvYXJkQ2VsbCIsInNoaXBDb29yZGluYXRlcyIsInRhcmdldENlbGxSb3ciLCJ0YXJnZXRDZWxsQ29sdW1uIiwiY29vcmRpbmF0ZXNBcnJheSIsInJlbWFpbmluZ0NlbGwiLCJwdXNoIiwiYWRkU2hpcFRvRE9NIiwiYWRkU2hpcFRvR2FtZWJvYXJkIiwiSUQiLCJlbGVtZW50SUQiLCJpbWFnZUVsZW1lbnQiLCJidXR0b25FbGVtZW50IiwicGFyZW50Tm9kZSIsImRpc2FibGVJbWFnZUJ1dHRvbkludGVyYWN0aW9ucyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJpbml0aWFsaXplQm9hcmRET00iLCJodW1hblBsYXllckdhbWVib2FyZERPTSIsImNvbXB1dGVyR2FtZWJvYXJkRE9NIiwicm90YXRlU2hpcEltYWdlIiwiaW1hZ2UiLCJpbWFnZUNsYXNzZXMiLCJyZW1vdmUiLCJyb3RhdGVEcmFnZ2VkSW1hZ2UiLCJjbG9uZWRJbWFnZUVsZW1lbnQiLCJjbG9uZU5vZGUiLCJ0ZW1wRGl2IiwiY2xvbmVkSW1hZ2VFbGVtZW50Q2xhc3NlcyIsInJvdGF0ZVBlckxlbmd0aCIsImJvZHkiLCJzZXREcmFnSW1hZ2UiLCJzZXRUaW1lb3V0IiwicmVtb3ZlQ2hpbGQiLCJnZXREcmFnZ2VkSW1hZ2UiLCJzcmMiLCJnZXRBdHRyaWJ1dGUiLCJzdHJpbmdpZnkiLCJzZXREYXRhIiwiYWRkQXR0YWNrUmVzdWx0RE9NIiwicGxheWVyVHlwZSIsImF0dGFja1Jlc3VsdHMiLCJjb29yZGluYXRlcyIsImF0dGFja1Jlc3VsdHNFbGVtZW50IiwiZGlzcGxheVdpbm5lciIsIndpbm5pbmdQbGF5ZXIiLCJpc0NvbXB1dGVyIiwiUGxheWVyIiwiY29tcHV0ZXJQbGF5ZXIiLCJwbGF5ZXJHYW1lYm9hcmQiLCJib2FyZCIsInVuZGVmaW5lZCIsImNyZWF0ZUJvYXJkIiwicGxhY2VkU2hpcHMiLCJyZWNlaXZlZE1pc3NlZFNob3RzIiwicmVjZWl2ZWRIaXRTaG90cyIsInNlbnRNaXNzZWRTaG90cyIsInNlbnRIaXRTaG90cyIsImFsbFNoaXBzU3VuayIsImdldENvb3JkaW5hdGVzIiwiZ2V0UmVjZWl2ZWRNaXNzZWRTaG90cyIsImdldFJlY2VpdmVkSGl0U2hvdHMiLCJnZXRTZW50TWlzc2VkU2hvdHMiLCJnZXRTZW50SGl0U2hvdHMiLCJpc0FsbFNoaXBzU3VuayIsInBsYWNlU2hpcCIsInNoaXAiLCJjb29yZGluYXRlc0xpc3QiLCJyZWNlaXZlQXR0YWNrIiwiZW50aXR5QXRDb29yZGluYXRlcyIsImhpdCIsImV2ZXJ5IiwiaXNTdW5rIiwiYWRkU2VudE1pc3NlZFNob3QiLCJhZGRTZW50SGl0U2hvdCIsIkdhbWVib2FyZCIsIm9wcG9zaW5nUGxheWVyIiwiZ2l2ZW5MZW5ndGgiLCJoaXRzIiwic3VuayIsImdldFNoaXBMZW5ndGgiLCJnZXRTaGlwSGl0cyIsIlNoaXAiLCJjaGVja0lmUHJldmlvdXNseUF0dGFja2VkIiwiaXNJblByb2dyZXNzIiwib3Bwb3NpbmdQbGF5ZXJHYW1lYm9hcmQiLCJlbmRHYW1lIiwidG9nZ2xlTWlkQXR0YWNrIiwic2VuZENvbXB1dGVyQXR0YWNrIiwiZ2VuZXJhdGVDb21wdXRlclNoaXBDb29yZGluYXRlcyIsImxpc3RPZkNvb3JkaW5hdGVzIiwic3RhcnRpbmdDb29yZGluYXRlcyIsImdlbmVyYXRlU3RhcnRpbmdDb29yZGluYXRlcyIsIm5vblN0YXJ0aW5nQ29vcmRpbmF0ZXMiLCJnZW5lcmF0ZU5vblN0YXJ0aW5nQ29vcmRpbmF0ZXMiLCJjb25jYXQiLCJnZW5lcmF0ZVJhbmRvbUNvb3JkaW5hdGUiLCJwb3NzaWJsZUNvb3JkaW5hdGVzIiwidXBDb29yZGluYXRlcyIsInJpZ2h0Q29vcmRpbmF0ZXMiLCJkb3duQ29vcmRpbmF0ZXMiLCJsZWZ0Q29vcmRpbmF0ZXMiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJhdHRhY2tDb29yZGluYXRlcyIsInByZXZpb3VzbHlBdHRhY2tlZCIsInNvbWUiLCJzaG90IiwiZGlyZWN0aW9uIiwiZ2V0T3Bwb3NpbmdQbGF5ZXIiLCJzZXRPcHBvc2luZ1BsYXllciIsInBsYXllciIsImluaXRpYWxpemVDb21wdXRlckdhbWVib2FyZCIsImxlbmd0aHNPZlNoaXBzIiwiZ2VuZXJhdGVBdHRhY2tDb29yZGluYXRlcyIsInBsYXllcnMiLCJ3aW5uZXIiLCJpblByb2dyZXNzIiwibWlkQXR0YWNrIiwiZ2V0V2lubmVyIiwic3RhdGUiLCJjcmVhdGVHYW1lIiwiaHVtYW5QbGF5ZXIiLCJsb3NlclBsYXllciIsIndpbm5lclBsYXllciIsInJlc2V0R2FtZSIsIkV2ZW50TGlzdGVuZXJDb250cm9sbGVyIiwiZ3JvdXBPZkVsZW1lbnRzIl0sInNvdXJjZVJvb3QiOiIifQ==