(()=>{"use strict";const e=(()=>{const e=e=>{const o=["A","B","C","D","E","F","G","H","I","J"],i=["1","2","3","4","5","6","7","8","9","10"];for(let d=-1;d<10;d++)for(let n=-1;n<10;n++)if(-1===d)if(-1===n){const t=document.createElement("div");t.classList.add("gameboard-label"),t.style.visibility="hidden",e.appendChild(t)}else{const t=document.createElement("div");t.classList.add("column-label"),t.textContent=o[n],e.appendChild(t)}else if(-1===n){const t=document.createElement("div");t.classList.add("row-label"),t.textContent=i[d],e.appendChild(t)}else if(Array.from(e.classList).includes("player-board")){const o=document.createElement("div");o.setAttribute("data-row",d),o.setAttribute("data-column",n),o.classList.add("gameboard-cell"),o.addEventListener("dragover",(e=>{s(e)})),o.addEventListener("drop",(e=>{r(e),5===a.getPlayers()[0].getGameboard().getPlacedShips().length&&t()})),e.appendChild(o)}else if(Array.from(e.classList).includes("opponent-board")){const t=document.createElement("button");t.setAttribute("data-row",d),t.setAttribute("data-column",n),t.classList.add("gameboard-cell"),t.disabled=!0,t.addEventListener("click",(e=>{console.log(t);const s=Number(t.dataset.row),r=Number(t.dataset.column);a.getPlayers()[0].sendAttack([s,r])})),e.appendChild(t)}},t=()=>{const e=document.querySelector(".opponent-board");Array.from(e.querySelectorAll(".gameboard-cell")).forEach((e=>{e.disabled=!1}))},s=()=>{event.preventDefault()},r=e=>{e.preventDefault();const t=e.target;if(Array.from(t.classList).includes("contains-ship-image"))return;const s=e.dataTransfer.getData("image"),o=JSON.parse(s);if(!((e,t)=>{const s=[Number(e.dataset.row),Number(e.dataset.column)],r=Number(t.shipLength);return t.horizontal?a.getPlayers()[0].checkIfValidEmptyCoordinates(s,r,"right")?(console.log("fits"),!0):(console.log("nope"),!1):t.vertical?a.getPlayers()[0].checkIfValidEmptyCoordinates(s,r,"down")?(console.log("fits"),!0):(console.log("nope"),!1):void 0})(t,o))return;const i=((e,t)=>{const a=t.shipLength,s=Number(e.dataset.row),r=Number(e.dataset.column),o=[[s,r]];e.classList.add("contains-ship-image"),e.classList.add("ship-image"),e.classList.add(`ship-image-${a}`),e.classList.add(`ship-image-${a}-1`),t.horizontal?e.classList.add("horizontal"):t.vertical&&e.classList.add("vertical");for(let e=1;e<a;e++){let i;t.horizontal?(i=document.querySelector(`.player-board [data-row='${s}'][data-column='${r+e}']`),i.classList.add("horizontal"),o.push([s,r+e])):t.vertical&&(i=document.querySelector(`.player-board [data-row='${s+e}'][data-column='${r}']`),i.classList.add("vertical"),o.push([s+e,r])),i.classList.add("contains-ship-image"),i.classList.add("ship-image"),i.classList.add(`ship-image-${a}`),i.classList.add(`ship-image-${a}-${e+1}`)}return o})(t,o);a.getPlayers()[0].addShipToGameboard(Number(o.shipLength),i),(e=>{const t=e.elementID,a=document.querySelector(`#${t}`),s=a.parentNode.querySelector("button");a.setAttribute("draggable",!1),a.classList.add("disabled-image"),s.disabled=!0})(o),t.removeEventListener("drop",r)};return{initializeBoardDOM:()=>{const t=document.querySelector(".player-board"),a=document.querySelector(".opponent-board");e(t),e(a)},insertDraggedImage:r,rotateShipImage:e=>{const t=Array.from(e.classList);t.includes("horizontal")?(e.classList.remove("horizontal"),e.classList.add("vertical")):t.includes("vertical")&&(e.classList.remove("vertical"),e.classList.add("horizontal"))},rotateDraggedImage:e=>{const t=e.target.cloneNode(),a=document.createElement("div");a.classList.add("temp-rotate"),((e,t)=>{const a=Array.from(t.classList);a.includes("horizontal")?e.classList.add("temp-rotate-horizontal"):a.includes("vertical")&&(e.classList.add("temp-rotate-vertical"),"5"===t.dataset.shipLength?e.classList.add("temp-rotate-vertical-5"):"4"===t.dataset.shipLength?e.classList.add("temp-rotate-vertical-4"):"3"===t.dataset.shipLength?e.classList.add("temp-rotate-vertical-3"):"2"===t.dataset.shipLength&&e.classList.add("temp-rotate-vertical-2"))})(a,t),a.appendChild(t),document.body.appendChild(a),e.dataTransfer.setDragImage(a,0,0),setTimeout((()=>{document.body.removeChild(a)}),0)},getDraggedImage:e=>{const t={image:e.target.src,shipLength:e.target.dataset.shipLength,horizontal:!1,vertical:!1,elementID:e.target.getAttribute("id")};Array.from(e.target.classList).includes("horizontal")?t.horizontal=!0:Array.from(e.target.classList).includes("vertical")&&(t.vertical=!0),console.log(t);const a=JSON.stringify(t);e.dataTransfer.setData("image",a)},dragOver:s,addAttackResultDOM:(e,t,a)=>{const s=a[0],r=a[1];console.log(e);const o=document.querySelector(`.${e}-board`).querySelector(`[data-row='${s}'][data-column='${r}']`),i=document.createElement("img");i.classList.add("attack-results"),o.appendChild(i),"hit"===t?i.setAttribute("src","../dist/red_X.png"):i.setAttribute("src","../dist/white_O.png"),o.disabled=!0}}})(),t=t=>{const s="human"!==t&&("computer"===t||void 0),r=(()=>{const e=(()=>{const e=[];for(let t=0;t<10;t++){e.push([]);for(let a=0;a<10;a++)e[t].push(void 0)}return e})(),t=[],a=[],s=[],r=[],o=[];let i=!1;const d=t=>e[t[0]][t[1]];return{getCoordinates:d,getPlacedShips:()=>t,getReceivedMissedShots:()=>a,getReceivedHitShots:()=>s,getSentMissedShots:()=>r,getSentHitShots:()=>o,isAllShipsSunk:()=>i,placeShip:(a,s)=>{for(const t of s)e[t[0]][t[1]]=a;t.push(a)},receiveAttack:e=>{const r=d(e);return void 0!==r?(r.hit(),t.every((e=>e.isSunk()))&&(i=!0),s.push(e),"hit"):(a.push(e),"miss")},addSentMissedShot:e=>{r.push(e)},addSentHitShot:e=>{o.push(e)}}})();let o;const i=()=>s,d=(e,t)=>{const a=(e=>{const t=e;let a=0,s=!1;return{getShipLength:()=>t,getShipHits:()=>a,isSunk:()=>s,hit:()=>{if(s)return"That ship has already been sunk!";a+=1,a===t&&(s=!0)}}})(e);r.placeShip(a,t)},n=t=>{const s=o.getGameboard();if(o.getGameboard().getReceivedMissedShots(),o.getGameboard().getReceivedHitShots(),m(t)||m(t))return;const d=o.receiveAttack(t);if("hit"===d){if(r.addSentHitShot(t),i()?i()&&e.addAttackResultDOM("player",d,t):e.addAttackResultDOM("opponent",d,t),s.isAllShipsSunk())return void a.endGame(o)}else"miss"===d&&(r.addSentMissedShot(t),i()?i()&&e.addAttackResultDOM("player",d,t):e.addAttackResultDOM("opponent",d,t));o.isComputer()&&o.sendComputerAttack()},l=e=>{let t=[];do{t=[];const a=c(),s=u(a,e);t.push(a),t=t.concat(s)}while(t.length<e);return t},c=()=>{const e=[void 0,void 0];do{e[0]=h(),e[1]=h()}while(void 0!==r.getCoordinates(e));return e},u=(e,t)=>{const a=[];if(p(e,t,"up")){const s=[];for(let a=1;a<t;a++)s.push([e[0]-a,e[1]]);a.push(s)}if(p(e,t,"right")){const s=[];for(let a=1;a<t;a++)s.push([e[0],e[1]+a]);a.push(s)}if(p(e,t,"down")){const s=[];for(let a=1;a<t;a++)s.push([e[0]+a,e[1]]);a.push(s)}if(p(e,t,"left")){const s=[];for(let a=1;a<t;a++)s.push([e[0],e[1]-a]);a.push(s)}return 0===a.length?a:a[Math.floor(Math.random()*a.length)]},h=()=>Math.floor(10*Math.random()),m=e=>{let t=!1;const a=o.getGameboard().getReceivedMissedShots(),s=o.getGameboard().getReceivedHitShots();return t=a.some((t=>t[0]===e[0]&&t[1]===e[1])),t||(t=s.some((t=>t[0]===e[0]&&t[1]===e[1]))),t},p=(e,t,a)=>{switch(a){case"up":if(e[0]-(t-1)<0)return!1;for(let a=1;a<t;a++)if(void 0!==r.getCoordinates([e[0]-a,e[1]]))return!1;return!0;case"right":if(e[1]+(t-1)>9)return!1;for(let a=1;a<t;a++)if(void 0!==r.getCoordinates([e[0],e[1]+a]))return!1;return!0;case"down":if(e[0]+(t-1)>9)return!1;for(let a=1;a<t;a++)if(void 0!==r.getCoordinates([e[0]+a,e[1]]))return!1;return!0;case"left":if(e[1]-(t-1)<0)return!1;for(let a=1;a<t;a++)if(void 0!==r.getCoordinates([e[0],e[1]-a]))return!1;return!0}};return{isComputer:i,getGameboard:()=>r,getOpposingPlayer:()=>o,setOpposingPlayer:e=>{o=e},addShipToGameboard:d,sendAttack:n,initializeComputerGameboard:()=>{if(!s)return;const e=[5,4,3,3,2];for(const t of e){const e=l(t);d(t,e)}},sendComputerAttack:()=>{if(!s)return;const e=(()=>{o.getGameboard().getReceivedMissedShots(),o.getGameboard().getReceivedHitShots();const e=[void 0,void 0];do{e[0]=h(),e[1]=h()}while(m(e)||m(e));return e})();n(e)},receiveAttack:e=>r.receiveAttack(e),checkIfValidEmptyCoordinates:p}},a=(()=>{const e=[];let a,s=!0;return{getPlayers:()=>e,isInProgress:()=>s,getWinner:()=>a,createGame:()=>{const a=t("human");e.push(a);const s=t("computer");e.push(s),a.setOpposingPlayer(s),s.setOpposingPlayer(a),s.initializeComputerGameboard()},endGame:e=>{s=!1,(e=>{const t=e.getOpposingPlayer();a=t})(e)},resetGame:()=>{e.length=0,s=!0,a=void 0}}})(),s=()=>{document.querySelectorAll(".ship-placement").forEach((t=>{const a=t.children[0];t.children[2].addEventListener("click",(()=>{e.rotateShipImage(a)}))}))},r=()=>{Array.from(document.querySelectorAll(".ship-piece")).forEach((t=>{t.addEventListener("dragstart",(t=>{e.getDraggedImage(t),e.rotateDraggedImage(t)}))}))};a.createGame(),e.initializeBoardDOM(),s(),r()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoibUJBQUEsTUNFTUEsRUFBZ0IsTUFDcEIsTUFBTUMsRUFBb0JDLElBQ3hCLE1BQ01DLEVBQWUsQ0FBQyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxLQUM3REMsRUFBWSxDQUFDLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLE1BQ2hFLElBQUssSUFBSUMsR0FBSyxFQUFHQSxFQUhPLEdBR2NBLElBQ3BDLElBQUssSUFBSUMsR0FBSyxFQUFHQSxFQUpLLEdBSWdCQSxJQUNwQyxJQUFXLElBQVBELEVBQ0YsSUFBVyxJQUFQQyxFQUFVLENBQ1osTUFBTUMsRUFBOEJDLFNBQVNDLGNBQWMsT0FDM0RGLEVBQTRCRyxVQUFVQyxJQUFJLG1CQUMxQ0osRUFBNEJLLE1BQU1DLFdBQWEsU0FDL0NYLEVBQWFZLFlBQVlQLEVBQzNCLEtBQU8sQ0FDTCxNQUFNUSxFQUFxQlAsU0FBU0MsY0FBYyxPQUNsRE0sRUFBbUJMLFVBQVVDLElBQUksZ0JBQ2pDSSxFQUFtQkMsWUFBY2IsRUFBYUcsR0FDOUNKLEVBQWFZLFlBQVlDLEVBQzNCLE1BQ0ssSUFBVyxJQUFQVCxFQUFVLENBQ25CLE1BQU1XLEVBQWtCVCxTQUFTQyxjQUFjLE9BQy9DUSxFQUFnQlAsVUFBVUMsSUFBSSxhQUM5Qk0sRUFBZ0JELFlBQWNaLEVBQVVDLEdBQ3hDSCxFQUFhWSxZQUFZRyxFQUMzQixNQVdFLEdBQUlDLE1BQU1DLEtBQUtqQixFQUFhUSxXQUFXVSxTQUFTLGdCQUFpQixDQUMvRCxNQUFNQyxFQUFjYixTQUFTQyxjQUFjLE9BQzNDWSxFQUFZQyxhQUFhLFdBQVlqQixHQUNyQ2dCLEVBQVlDLGFBQWEsY0FBZWhCLEdBQ3hDZSxFQUFZWCxVQUFVQyxJQUFJLGtCQUMxQlUsRUFBWUUsaUJBQWlCLFlBQWFDLElBQ3hDQyxFQUFTRCxFQUFNLElBRWpCSCxFQUFZRSxpQkFBaUIsUUFBU0MsSUFDcENFLEVBQW1CRixHQUdILElBRGRHLEVBQVNDLGFBQWEsR0FBR0MsZUFBZUMsaUJBQ3JDQyxRQUVIQyxHQUNGLElBRUY5QixFQUFhWSxZQUFZTyxFQUMzQixNQUFPLEdBQ0xILE1BQU1DLEtBQUtqQixFQUFhUSxXQUFXVSxTQUFTLGtCQUM1QyxDQUNBLE1BQU1DLEVBQWNiLFNBQVNDLGNBQWMsVUFDM0NZLEVBQVlDLGFBQWEsV0FBWWpCLEdBQ3JDZ0IsRUFBWUMsYUFBYSxjQUFlaEIsR0FDeENlLEVBQVlYLFVBQVVDLElBQUksa0JBQzFCVSxFQUFZWSxVQUFXLEVBQ3ZCWixFQUFZRSxpQkFBaUIsU0FBVUMsSUFDckNVLFFBQVFDLElBQUlkLEdBQ1osTUFBTWUsRUFBVUMsT0FBT2hCLEVBQVlpQixRQUFRQyxLQUNyQ0MsRUFBYUgsT0FBT2hCLEVBQVlpQixRQUFRRyxRQUM5Q2QsRUFBU0MsYUFBYSxHQUFHYyxXQUFXLENBQUNOLEVBQVNJLEdBQVksSUFFNUR0QyxFQUFhWSxZQUFZTyxFQUMzQixDQUtOLEVBRUlXLEVBQTBCLEtBQzlCLE1BQU1XLEVBQTJCbkMsU0FBU29DLGNBQWMsbUJBQ25DMUIsTUFBTUMsS0FDekJ3QixFQUF5QkUsaUJBQWlCLG9CQUUvQkMsU0FBU3pCLElBQ3BCQSxFQUFZWSxVQUFXLENBQUssR0FDNUIsRUFtQkVSLEVBQVcsS0FDZkQsTUFBTXVCLGdCQUFnQixFQTJGbEJyQixFQUFzQkYsSUFDMUJBLEVBQU11QixpQkFDTixNQUFNQyxFQUFheEIsRUFBTXlCLE9BQ3pCLEdBQUkvQixNQUFNQyxLQUFLNkIsRUFBV3RDLFdBQVdVLFNBQVMsdUJBQzVDLE9BRUYsTUFBTThCLEVBQWExQixFQUFNMkIsYUFBYUMsUUFBUSxTQUN4Q0MsRUFBYUMsS0FBS0MsTUFBTUwsR0FDOUIsSUEzRjJCLEVBQUNGLEVBQVlLLEtBQ3hDLE1BQU1HLEVBQWtCLENBQ3RCbkIsT0FBT1csRUFBV1YsUUFBUUMsS0FDMUJGLE9BQU9XLEVBQVdWLFFBQVFHLFNBRXRCVixFQUFTTSxPQUFPZ0IsRUFBV0ksWUFDakMsT0FBSUosRUFBV0ssV0FFWC9CLEVBQVNDLGFBQWEsR0FBRytCLDZCQUN2QkgsRUFDQXpCLEVBQ0EsVUFHRkcsUUFBUUMsSUFBSSxTQUNMLElBRVRELFFBQVFDLElBQUksU0FDTCxHQUVMa0IsRUFBV08sU0FFWGpDLEVBQVNDLGFBQWEsR0FBRytCLDZCQUN2QkgsRUFDQXpCLEVBQ0EsU0FHRkcsUUFBUUMsSUFBSSxTQUNMLElBRVRELFFBQVFDLElBQUksU0FDTCxRQVpULENBYUEsRUEwREswQixDQUFxQmIsRUFBWUssR0FFcEMsT0FFRixNQUFNUyxFQTVEYSxFQUFDZCxFQUFZSyxLQUNoQyxNQUFNdEIsRUFBU3NCLEVBQVdJLFdBQ3BCTSxFQUFnQjFCLE9BQU9XLEVBQVdWLFFBQVFDLEtBQzFDeUIsRUFBbUIzQixPQUFPVyxFQUFXVixRQUFRRyxRQUM3Q3dCLEVBQW1CLENBQUMsQ0FBQ0YsRUFBZUMsSUFDMUNoQixFQUFXdEMsVUFBVUMsSUFBSSx1QkFDekJxQyxFQUFXdEMsVUFBVUMsSUFBSSxjQUN6QnFDLEVBQVd0QyxVQUFVQyxJQUFJLGNBQWNvQixLQUN2Q2lCLEVBQVd0QyxVQUFVQyxJQUFJLGNBQWNvQixPQUNuQ3NCLEVBQVdLLFdBQ2JWLEVBQVd0QyxVQUFVQyxJQUFJLGNBQ2hCMEMsRUFBV08sVUFDcEJaLEVBQVd0QyxVQUFVQyxJQUFJLFlBRTNCLElBQUssSUFBSU4sRUFBSSxFQUFHQSxFQUFJMEIsRUFBUTFCLElBQUssQ0FDL0IsSUFBSTZELEVBQ0FiLEVBQVdLLFlBQ2JRLEVBQWdCMUQsU0FBU29DLGNBQ3ZCLDRCQUE0Qm1CLG9CQUMxQkMsRUFBbUIzRCxPQUd2QjZELEVBQWN4RCxVQUFVQyxJQUFJLGNBQzVCc0QsRUFBaUJFLEtBQUssQ0FBQ0osRUFBZUMsRUFBbUIzRCxLQUNoRGdELEVBQVdPLFdBQ3BCTSxFQUFnQjFELFNBQVNvQyxjQUN2Qiw0QkFDRW1CLEVBQWdCMUQsb0JBQ0MyRCxPQUVyQkUsRUFBY3hELFVBQVVDLElBQUksWUFDNUJzRCxFQUFpQkUsS0FBSyxDQUFDSixFQUFnQjFELEVBQUcyRCxLQUU1Q0UsRUFBY3hELFVBQVVDLElBQUksdUJBQzVCdUQsRUFBY3hELFVBQVVDLElBQUksY0FDNUJ1RCxFQUFjeEQsVUFBVUMsSUFBSSxjQUFjb0IsS0FDMUNtQyxFQUFjeEQsVUFBVUMsSUFBSSxjQUFjb0IsS0FBVTFCLEVBQUksSUFDMUQsQ0FDQSxPQUFPNEQsQ0FBZ0IsRUFzQkNHLENBQWFwQixFQUFZSyxHQUNqRDFCLEVBQVNDLGFBQWEsR0FBR3lDLG1CQUN2QmhDLE9BQU9nQixFQUFXSSxZQUNsQkssR0F2Qm1DLENBQUNULElBQ3RDLE1BQU1pQixFQUFLakIsRUFBV2tCLFVBQ2hCQyxFQUFlaEUsU0FBU29DLGNBQWMsSUFBSTBCLEtBQzFDRyxFQUFnQkQsRUFBYUUsV0FBVzlCLGNBQWMsVUFDNUQ0QixFQUFhbEQsYUFBYSxhQUFhLEdBQ3ZDa0QsRUFBYTlELFVBQVVDLElBQUksa0JBQzNCOEQsRUFBY3hDLFVBQVcsQ0FBSSxFQW1CN0IwQyxDQUErQnRCLEdBQy9CTCxFQUFXNEIsb0JBQW9CLE9BQVFsRCxFQUFtQixFQTRENUQsTUFBTyxDQUNMbUQsbUJBeEt5QixLQUN6QixNQUFNQyxFQUEwQnRFLFNBQVNvQyxjQUFjLGlCQUNqRG1DLEVBQXVCdkUsU0FBU29DLGNBQWMsbUJBQ3BEM0MsRUFBaUI2RSxHQUNqQjdFLEVBQWlCOEUsRUFBcUIsRUFxS3RDckQscUJBQ0FzRCxnQkE3RHVCQyxJQUN2QixNQUFNQyxFQUFlaEUsTUFBTUMsS0FBSzhELEVBQU12RSxXQUNsQ3dFLEVBQWE5RCxTQUFTLGVBQ3hCNkQsRUFBTXZFLFVBQVV5RSxPQUFPLGNBQ3ZCRixFQUFNdkUsVUFBVUMsSUFBSSxhQUNYdUUsRUFBYTlELFNBQVMsY0FDL0I2RCxFQUFNdkUsVUFBVXlFLE9BQU8sWUFDdkJGLEVBQU12RSxVQUFVQyxJQUFJLGNBQ3RCLEVBc0RBeUUsbUJBbkMwQjVELElBQzFCLE1BQ002RCxFQURlN0QsRUFBTXlCLE9BQ2FxQyxZQUNsQ0MsRUFBVS9FLFNBQVNDLGNBQWMsT0FDdkM4RSxFQUFRN0UsVUFBVUMsSUFBSSxlQXJCQSxFQUFDNEUsRUFBU0YsS0FDaEMsTUFBTUcsRUFBNEJ0RSxNQUFNQyxLQUFLa0UsRUFBbUIzRSxXQUM1RDhFLEVBQTBCcEUsU0FBUyxjQUNyQ21FLEVBQVE3RSxVQUFVQyxJQUFJLDBCQUNiNkUsRUFBMEJwRSxTQUFTLGNBQzVDbUUsRUFBUTdFLFVBQVVDLElBQUksd0JBQ3dCLE1BQTFDMEUsRUFBbUIvQyxRQUFRbUIsV0FDN0I4QixFQUFRN0UsVUFBVUMsSUFBSSwwQkFDNkIsTUFBMUMwRSxFQUFtQi9DLFFBQVFtQixXQUNwQzhCLEVBQVE3RSxVQUFVQyxJQUFJLDBCQUM2QixNQUExQzBFLEVBQW1CL0MsUUFBUW1CLFdBQ3BDOEIsRUFBUTdFLFVBQVVDLElBQUksMEJBQzZCLE1BQTFDMEUsRUFBbUIvQyxRQUFRbUIsWUFDcEM4QixFQUFRN0UsVUFBVUMsSUFBSSwwQkFFMUIsRUFPQThFLENBQWdCRixFQUFTRixHQUN6QkUsRUFBUXpFLFlBQVl1RSxHQUNwQjdFLFNBQVNrRixLQUFLNUUsWUFBWXlFLEdBQzFCL0QsRUFBTTJCLGFBQWF3QyxhQUFhSixFQUFTLEVBQUcsR0FDNUNLLFlBQVcsS0FDVHBGLFNBQVNrRixLQUFLRyxZQUFZTixFQUFRLEdBQ2pDLEVBQUUsRUF5QkxPLGdCQWhNdUJ0RSxJQUN2QixNQUFNNkIsRUFBYSxDQUNqQjRCLE1BQU96RCxFQUFNeUIsT0FBTzhDLElBQ3BCdEMsV0FBWWpDLEVBQU15QixPQUFPWCxRQUFRbUIsV0FDakNDLFlBQVksRUFDWkUsVUFBVSxFQUNWVyxVQUFXL0MsRUFBTXlCLE9BQU8rQyxhQUFhLE9BRW5DOUUsTUFBTUMsS0FBS0ssRUFBTXlCLE9BQU92QyxXQUFXVSxTQUFTLGNBQzlDaUMsRUFBV0ssWUFBYSxFQUNmeEMsTUFBTUMsS0FBS0ssRUFBTXlCLE9BQU92QyxXQUFXVSxTQUFTLGNBQ3JEaUMsRUFBV08sVUFBVyxHQUV4QjFCLFFBQVFDLElBQUlrQixHQUNaLE1BQU1ILEVBQWFJLEtBQUsyQyxVQUFVNUMsR0FDbEM3QixFQUFNMkIsYUFBYStDLFFBQVEsUUFBU2hELEVBQVcsRUFrTC9DekIsV0FDQTBFLG1CQXpCeUIsQ0FBQ0MsRUFBWUMsRUFBZUMsS0FDckQsTUFBTWxFLEVBQVVrRSxFQUFZLEdBQ3RCOUQsRUFBYThELEVBQVksR0FDL0JwRSxRQUFRQyxJQUFJaUUsR0FDWixNQUNNcEQsRUFEZXhDLFNBQVNvQyxjQUFjLElBQUl3RCxXQUNoQnhELGNBQzlCLGNBQWNSLG9CQUEwQkksT0FFcEMrRCxFQUF1Qi9GLFNBQVNDLGNBQWMsT0FDcEQ4RixFQUFxQjdGLFVBQVVDLElBQUksa0JBQ25DcUMsRUFBV2xDLFlBQVl5RixHQUNELFFBQWxCRixFQUNGRSxFQUFxQmpGLGFBQWEsTUFBTyxxQkFFekNpRixFQUFxQmpGLGFBQWEsTUFBTyx1QkFFM0MwQixFQUFXZixVQUFXLENBQUksRUFXN0IsRUF4UnFCLEdDR2hCdUUsRUFBVUosSUFDZCxNQVFNSyxFQVBlLFVBQWZMLElBR2UsYUFBZkEsUUFBSixHQUtJTSxFQ2ZVLE1BQ2hCLE1BVU1DLEVBVmMsTUFDbEIsTUFBTUEsRUFBUSxHQUNkLElBQUssSUFBSXRHLEVBQUksRUFBR0EsRUFBSSxHQUFJQSxJQUFLLENBQzNCc0csRUFBTXhDLEtBQUssSUFDWCxJQUFLLElBQUk3RCxFQUFJLEVBQUdBLEVBQUksR0FBSUEsSUFDdEJxRyxFQUFNdEcsR0FBRzhELFVBQUt5QyxFQUVsQixDQUNBLE9BQU9ELENBQUssRUFFQUUsR0FDUkMsRUFBYyxHQUNkQyxFQUFzQixHQUN0QkMsRUFBbUIsR0FDbkJDLEVBQWtCLEdBQ2xCQyxFQUFlLEdBQ3JCLElBQUlDLEdBQWUsRUFDbkIsTUFBTUMsRUFBa0JkLEdBQWdCSyxFQUFNTCxFQUFZLElBQUlBLEVBQVksSUFtQzFFLE1BQU8sQ0FDTGMsaUJBQ0F0RixlQXBDcUIsSUFBTWdGLEVBcUMzQk8sdUJBcEM2QixJQUFNTixFQXFDbkNPLG9CQXBDMEIsSUFBTU4sRUFxQ2hDTyxtQkFwQ3lCLElBQU1OLEVBcUMvQk8sZ0JBcENzQixJQUFNTixFQXFDNUJPLGVBcENxQixJQUFNTixFQXFDM0JPLFVBcENnQixDQUFDQyxFQUFNQyxLQUN2QixJQUFLLE1BQU10QixLQUFlc0IsRUFDeEJqQixFQUFNTCxFQUFZLElBQUlBLEVBQVksSUFBTXFCLEVBRTFDYixFQUFZM0MsS0FBS3dELEVBQUssRUFpQ3RCRSxjQTFCcUJ2QixJQUNyQixNQUFNd0IsRUFBc0JWLEVBQWVkLEdBQzNDLFlBQTRCTSxJQUF4QmtCLEdBQ0ZBLEVBQW9CQyxNQVBsQmpCLEVBQVlrQixPQUFPTCxHQUFTQSxFQUFLTSxhQUNuQ2QsR0FBZSxHQVFmSCxFQUFpQjdDLEtBQUttQyxHQUNmLFFBRVRTLEVBQW9CNUMsS0FBS21DLEdBQ2xCLE9BQU0sRUFrQmI0QixrQkFoQnlCNUIsSUFDekJXLEVBQWdCOUMsS0FBS21DLEVBQVksRUFnQmpDNkIsZUFkc0I3QixJQUN0QlksRUFBYS9DLEtBQUttQyxFQUFZLEVBYy9CLEVEbER1QjhCLEdBQ3hCLElBQUlDLEVBQ0osTUFBTUMsRUFBYSxJQUFNN0IsRUFNbkJwQyxFQUFxQixDQUFDWixFQUFZNkMsS0FDdEMsTUFBTXFCLEVGeEJHLENBQUNZLElBQ1osTUFBTXhHLEVBQVN3RyxFQUNmLElBQUlDLEVBQU8sRUFDUEMsR0FBTyxFQWlCWCxNQUFPLENBQ0xDLGNBakJvQixJQUFNM0csRUFrQjFCNEcsWUFqQmtCLElBQU1ILEVBa0J4QlAsT0FqQmEsSUFBTVEsRUFrQm5CVixJQVpVLEtBQ1YsR0FBS1UsRUFJSCxNQUFPLG1DQUhQRCxHQUFRLEVBTk5BLElBQVN6RyxJQUNYMEcsR0FBTyxFQVNULEVBT0QsRUVEY0csQ0FBS25GLEdBQ2xCaUQsRUFBZ0JnQixVQUFVQyxFQUFNckIsRUFBWSxFQUV4QzVELEVBQWM0RCxJQUNsQixNQUFNdUMsRUFBMEJSLEVBQWV4RyxlQU8vQyxHQU40QndHLEVBQ3pCeEcsZUFDQXdGLHlCQUNzQmdCLEVBQ3RCeEcsZUFDQXlGLHNCQUVEd0IsRUFBc0R4QyxJQUN0RHdDLEVBQW1EeEMsR0FFbkQsT0FFRixNQUFNRCxFQUFnQmdDLEVBQWVSLGNBQWN2QixHQUNuRCxHQUFzQixRQUFsQkQsR0FXRixHQVZBSyxFQUFnQnlCLGVBQWU3QixHQUMxQmdDLElBTU1BLEtBQ1R0SSxFQUFjbUcsbUJBQW1CLFNBQVVFLEVBQWVDLEdBTjFEdEcsRUFBY21HLG1CQUNaLFdBQ0FFLEVBQ0FDLEdBS0F1QyxFQUF3QnBCLGlCQUUxQixZQURBOUYsRUFBU29ILFFBQVFWLE9BR1EsU0FBbEJoQyxJQUNUSyxFQUFnQndCLGtCQUFrQjVCLEdBQzdCZ0MsSUFNTUEsS0FDVHRJLEVBQWNtRyxtQkFBbUIsU0FBVUUsRUFBZUMsR0FOMUR0RyxFQUFjbUcsbUJBQ1osV0FDQUUsRUFDQUMsSUFNRitCLEVBQWVDLGNBQ2pCRCxFQUFlVyxvQkFDakIsRUF1QklDLEVBQW1DeEYsSUFDdkMsSUFBSXlGLEVBQW9CLEdBQ3hCLEVBQUcsQ0FDREEsRUFBb0IsR0FDcEIsTUFBTUMsRUFBc0JDLElBQ3RCQyxFQUF5QkMsRUFDN0JILEVBQ0ExRixHQUVGeUYsRUFBa0IvRSxLQUFLZ0YsR0FDdkJELEVBQW9CQSxFQUFrQkssT0FBT0YsRUFDL0MsT0FBU0gsRUFBa0JuSCxPQUFTMEIsR0FDcEMsT0FBT3lGLENBQWlCLEVBRXBCRSxFQUE4QixLQUNsQyxNQUFNRCxFQUFzQixNQUFDdkMsT0FBV0EsR0FDeEMsR0FDRXVDLEVBQW9CLEdBQUtLLElBQ3pCTCxFQUFvQixHQUFLSyxlQUNzQzVDLElBQXhERixFQUFnQlUsZUFBZStCLElBQ3hDLE9BQU9BLENBQW1CLEVBRXRCRyxFQUFpQyxDQUFDSCxFQUFxQjFGLEtBQzNELE1BQU1nRyxFQUFzQixHQUM1QixHQUFJOUYsRUFBNkJ3RixFQUFxQjFGLEVBQVksTUFBTyxDQUN2RSxNQUFNaUcsRUFBZ0IsR0FDdEIsSUFBSyxJQUFJckosRUFBSSxFQUFHQSxFQUFJb0QsRUFBWXBELElBQzlCcUosRUFBY3ZGLEtBQUssQ0FDakJnRixFQUFvQixHQUFLOUksRUFDekI4SSxFQUFvQixLQUd4Qk0sRUFBb0J0RixLQUFLdUYsRUFDM0IsQ0FDQSxHQUNFL0YsRUFBNkJ3RixFQUFxQjFGLEVBQVksU0FDOUQsQ0FDQSxNQUFNa0csRUFBbUIsR0FDekIsSUFBSyxJQUFJdEosRUFBSSxFQUFHQSxFQUFJb0QsRUFBWXBELElBQzlCc0osRUFBaUJ4RixLQUFLLENBQ3BCZ0YsRUFBb0IsR0FDcEJBLEVBQW9CLEdBQUs5SSxJQUc3Qm9KLEVBQW9CdEYsS0FBS3dGLEVBQzNCLENBQ0EsR0FBSWhHLEVBQTZCd0YsRUFBcUIxRixFQUFZLFFBQVMsQ0FDekUsTUFBTW1HLEVBQWtCLEdBQ3hCLElBQUssSUFBSXZKLEVBQUksRUFBR0EsRUFBSW9ELEVBQVlwRCxJQUM5QnVKLEVBQWdCekYsS0FBSyxDQUNuQmdGLEVBQW9CLEdBQUs5SSxFQUN6QjhJLEVBQW9CLEtBR3hCTSxFQUFvQnRGLEtBQUt5RixFQUMzQixDQUNBLEdBQUlqRyxFQUE2QndGLEVBQXFCMUYsRUFBWSxRQUFTLENBQ3pFLE1BQU1vRyxFQUFrQixHQUN4QixJQUFLLElBQUl4SixFQUFJLEVBQUdBLEVBQUlvRCxFQUFZcEQsSUFDOUJ3SixFQUFnQjFGLEtBQUssQ0FDbkJnRixFQUFvQixHQUNwQkEsRUFBb0IsR0FBSzlJLElBRzdCb0osRUFBb0J0RixLQUFLMEYsRUFDM0IsQ0FDQSxPQUFtQyxJQUEvQkosRUFBb0IxSCxPQUNmMEgsRUFHRkEsRUFEYUssS0FBS0MsTUFBTUQsS0FBS0UsU0FBV1AsRUFBb0IxSCxRQUM1QixFQUVuQ3lILEVBQTJCLElBRXhCTSxLQUFLQyxNQURZLEdBQ05ELEtBQUtFLFVBRW5CbEIsRUFHSm1CLElBUUUsSUFBSUMsR0FBcUIsRUFDekIsTUFBTW5ELEVBQXNCc0IsRUFDekJ4RyxlQUNBd0YseUJBQ0dMLEVBQW1CcUIsRUFDdEJ4RyxlQUNBeUYsc0JBV0gsT0FWQTRDLEVBQXFCbkQsRUFBb0JvRCxNQUN0Q0MsR0FDQ0EsRUFBSyxLQUFPSCxFQUFrQixJQUFNRyxFQUFLLEtBQU9ILEVBQWtCLEtBRWpFQyxJQUNIQSxFQUFxQmxELEVBQWlCbUQsTUFDbkNDLEdBQ0NBLEVBQUssS0FBT0gsRUFBa0IsSUFBTUcsRUFBSyxLQUFPSCxFQUFrQixNQUdqRUMsQ0FBa0IsRUFtQnZCdkcsRUFBK0IsQ0FDbkN3RixFQUNBMUYsRUFDQTRHLEtBRUEsT0FBUUEsR0FDTixJQUFLLEtBQ0gsR0FBSWxCLEVBQW9CLElBQU0xRixFQUFhLEdBQUssRUFDOUMsT0FBTyxFQUVULElBQUssSUFBSXBELEVBQUksRUFBR0EsRUFBSW9ELEVBQVlwRCxJQUM5QixRQUlTdUcsSUFIUEYsRUFBZ0JVLGVBQWUsQ0FDN0IrQixFQUFvQixHQUFLOUksRUFDekI4SSxFQUFvQixLQUd0QixPQUFPLEVBR1gsT0FBTyxFQUVULElBQUssUUFDSCxHQUFJQSxFQUFvQixJQUFNMUYsRUFBYSxHQUFLLEVBQzlDLE9BQU8sRUFFVCxJQUFLLElBQUlwRCxFQUFJLEVBQUdBLEVBQUlvRCxFQUFZcEQsSUFDOUIsUUFJU3VHLElBSFBGLEVBQWdCVSxlQUFlLENBQzdCK0IsRUFBb0IsR0FDcEJBLEVBQW9CLEdBQUs5SSxJQUczQixPQUFPLEVBR1gsT0FBTyxFQUVULElBQUssT0FDSCxHQUFJOEksRUFBb0IsSUFBTTFGLEVBQWEsR0FBSyxFQUM5QyxPQUFPLEVBRVQsSUFBSyxJQUFJcEQsRUFBSSxFQUFHQSxFQUFJb0QsRUFBWXBELElBQzlCLFFBSVN1RyxJQUhQRixFQUFnQlUsZUFBZSxDQUM3QitCLEVBQW9CLEdBQUs5SSxFQUN6QjhJLEVBQW9CLEtBR3RCLE9BQU8sRUFHWCxPQUFPLEVBRVQsSUFBSyxPQUNILEdBQUlBLEVBQW9CLElBQU0xRixFQUFhLEdBQUssRUFDOUMsT0FBTyxFQUVULElBQUssSUFBSXBELEVBQUksRUFBR0EsRUFBSW9ELEVBQVlwRCxJQUM5QixRQUlTdUcsSUFIUEYsRUFBZ0JVLGVBQWUsQ0FDN0IrQixFQUFvQixHQUNwQkEsRUFBb0IsR0FBSzlJLElBRzNCLE9BQU8sRUFHWCxPQUFPLEVBSVgsRUFFRixNQUFPLENBQ0xpSSxhQUNBekcsYUFuUm1CLElBQU02RSxFQW9SekI0RCxrQkFuUndCLElBQU1qQyxFQW9SOUJrQyxrQkFuUnlCQyxJQUN6Qm5DLEVBQWlCbUMsQ0FBTSxFQW1SdkJuRyxxQkFDQTNCLGFBQ0ErSCw0QkFqT2tDLEtBQ2xDLElBQUtoRSxFQUNILE9BRUYsTUFBTWlFLEVBQWlCLENBQUMsRUFBRyxFQUFHLEVBQUcsRUFBRyxHQUNwQyxJQUFLLE1BQU1qSCxLQUFjaUgsRUFBZ0IsQ0FDdkMsTUFBTTVHLEVBQWtCbUYsRUFBZ0N4RixHQUN4RFksRUFBbUJaLEVBQVlLLEVBQ2pDLEdBME5Ba0YsbUJBeE55QixLQUN6QixJQUFLdkMsRUFDSCxPQUVGLE1BQU13RCxFQWlIMEIsTUFDSjVCLEVBQ3pCeEcsZUFDQXdGLHlCQUNzQmdCLEVBQ3RCeEcsZUFDQXlGLHNCQUxILE1BTU0yQyxFQUFvQixNQUFDckQsT0FBV0EsR0FDdEMsR0FDRXFELEVBQWtCLEdBQUtULElBQ3ZCUyxFQUFrQixHQUFLVCxVQUV2QlYsRUFBcURtQixJQUNyRG5CLEVBQW1EbUIsSUFFckQsT0FBT0EsQ0FBaUIsRUFoSUVVLEdBQzFCakksRUFBV3VILEVBQWtCLEVBb043QnBDLGNBbE5xQnZCLEdBQ0NJLEVBQWdCbUIsY0FBY3ZCLEdBa05wRDNDLCtCQUNELEVFMVNHaEMsRUFBVyxNQUNmLE1BQU1pSixFQUFVLEdBQ2hCLElBQ0lDLEVBREFDLEdBQWEsRUEyQmpCLE1BQU8sQ0FDTGxKLFdBMUJpQixJQUFNZ0osRUEyQnZCRyxhQTFCbUIsSUFBTUQsRUEyQnpCRSxVQTFCZ0IsSUFBTUgsRUEyQnRCSSxXQXRCaUIsS0FDakIsTUFBTUMsRUFBYzFFLEVBQU8sU0FDM0JvRSxFQUFRekcsS0FBSytHLEdBQ2IsTUFBTXpFLEVBQWlCRCxFQUFPLFlBQzlCb0UsRUFBUXpHLEtBQUtzQyxHQUNieUUsRUFBWVgsa0JBQWtCOUQsR0FDOUJBLEVBQWU4RCxrQkFBa0JXLEdBQ2pDekUsRUFBZWdFLDZCQUE2QixFQWdCNUMxQixRQWRlb0MsSUFDZkwsR0FBYSxFQWRHLENBQUNLLElBQ2pCLE1BQU1DLEVBQWVELEVBQVliLG9CQUNqQ08sRUFBU08sQ0FBWSxFQWFyQkMsQ0FBVUYsRUFBWSxFQWF0QkcsVUFYZ0IsS0FDaEJWLEVBQVE3SSxPQUFTLEVBQ2pCK0ksR0FBYSxFQUNiRCxPQUFTakUsQ0FBUyxFQVVyQixFQXJDZ0IsR0NGWDJFLEVBQzZCLEtBQ0QvSyxTQUFTcUMsaUJBQWlCLG1CQUNsQ0MsU0FBUzBJLElBQzdCLE1BQU1DLEVBQU1ELEVBQU1FLFNBQVMsR0FDZkYsRUFBTUUsU0FBUyxHQUN2Qm5LLGlCQUFpQixTQUFTLEtBQzVCdkIsRUFBY2dGLGdCQUFnQnlHLEVBQUksR0FDbEMsR0FDRixFQVRBRixFQVd5QixLQUNSckssTUFBTUMsS0FBS1gsU0FBU3FDLGlCQUFpQixnQkFDN0NDLFNBQVM2RSxJQUNsQkEsRUFBS3BHLGlCQUFpQixhQUFjQyxJQUNsQ3hCLEVBQWM4RixnQkFBZ0J0RSxHQUM5QnhCLEVBQWNvRixtQkFBbUI1RCxFQUFNLEdBQ3ZDLEdBQ0YsRUNoQk5HLEVBQVNzSixhQUVUakwsRUFBYzZFLHFCQUVkMEcsSUFFQUEsRyIsInNvdXJjZXMiOlsid2VicGFjazovL29kaW4tYmF0dGxlc2hpcC8uL3NyYy9zaGlwLmpzIiwid2VicGFjazovL29kaW4tYmF0dGxlc2hpcC8uL3NyYy9ET01fY29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly9vZGluLWJhdHRsZXNoaXAvLi9zcmMvcGxheWVyLmpzIiwid2VicGFjazovL29kaW4tYmF0dGxlc2hpcC8uL3NyYy9nYW1lYm9hcmQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi1iYXR0bGVzaGlwLy4vc3JjL2dhbWVsb29wLmpzIiwid2VicGFjazovL29kaW4tYmF0dGxlc2hpcC8uL3NyYy9ldmVudF9saXN0ZW5lcl9jb250cm9sbGVyLmpzIiwid2VicGFjazovL29kaW4tYmF0dGxlc2hpcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBTaGlwID0gKGdpdmVuTGVuZ3RoKSA9PiB7XG4gIGNvbnN0IGxlbmd0aCA9IGdpdmVuTGVuZ3RoO1xuICBsZXQgaGl0cyA9IDA7XG4gIGxldCBzdW5rID0gZmFsc2U7XG4gIGNvbnN0IGdldFNoaXBMZW5ndGggPSAoKSA9PiBsZW5ndGg7XG4gIGNvbnN0IGdldFNoaXBIaXRzID0gKCkgPT4gaGl0cztcbiAgY29uc3QgaXNTdW5rID0gKCkgPT4gc3VuaztcbiAgY29uc3QgY2hlY2tJZlN1bmsgPSAoKSA9PiB7XG4gICAgaWYgKGhpdHMgPT09IGxlbmd0aCkge1xuICAgICAgc3VuayA9IHRydWU7XG4gICAgfVxuICB9O1xuICBjb25zdCBoaXQgPSAoKSA9PiB7XG4gICAgaWYgKCFzdW5rKSB7XG4gICAgICBoaXRzICs9IDE7XG4gICAgICBjaGVja0lmU3VuaygpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gXCJUaGF0IHNoaXAgaGFzIGFscmVhZHkgYmVlbiBzdW5rIVwiO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIHtcbiAgICBnZXRTaGlwTGVuZ3RoLFxuICAgIGdldFNoaXBIaXRzLFxuICAgIGlzU3VuayxcbiAgICBoaXQsXG4gIH07XG59O1xuXG5leHBvcnQgeyBTaGlwIH07XG4iLCJpbXBvcnQgeyBHYW1lTG9vcCB9IGZyb20gXCIuL2dhbWVsb29wXCI7XG5cbmNvbnN0IERPTUNvbnRyb2xsZXIgPSAoKCkgPT4ge1xuICBjb25zdCBjcmVhdGVCb2FyZENlbGxzID0gKGdhbWVib2FyZERPTSkgPT4ge1xuICAgIGNvbnN0IEJPQVJEQVhFU0xFTkdUSCA9IDEwO1xuICAgIGNvbnN0IGNvbHVtbkxhYmVscyA9IFtcIkFcIiwgXCJCXCIsIFwiQ1wiLCBcIkRcIiwgXCJFXCIsIFwiRlwiLCBcIkdcIiwgXCJIXCIsIFwiSVwiLCBcIkpcIl07XG4gICAgY29uc3Qgcm93TGFiZWxzID0gW1wiMVwiLCBcIjJcIiwgXCIzXCIsIFwiNFwiLCBcIjVcIiwgXCI2XCIsIFwiN1wiLCBcIjhcIiwgXCI5XCIsIFwiMTBcIl07XG4gICAgZm9yIChsZXQgaSA9IC0xOyBpIDwgQk9BUkRBWEVTTEVOR1RIOyBpKyspIHtcbiAgICAgIGZvciAobGV0IGogPSAtMTsgaiA8IEJPQVJEQVhFU0xFTkdUSDsgaisrKSB7XG4gICAgICAgIGlmIChpID09PSAtMSkge1xuICAgICAgICAgIGlmIChqID09PSAtMSkge1xuICAgICAgICAgICAgY29uc3QgaW52aXNpYmxlUGxhY2Vob2xkZXJFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIGludmlzaWJsZVBsYWNlaG9sZGVyRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZ2FtZWJvYXJkLWxhYmVsXCIpO1xuICAgICAgICAgICAgaW52aXNpYmxlUGxhY2Vob2xkZXJFbGVtZW50LnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuICAgICAgICAgICAgZ2FtZWJvYXJkRE9NLmFwcGVuZENoaWxkKGludmlzaWJsZVBsYWNlaG9sZGVyRWxlbWVudCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbHVtbkxhYmVsRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBjb2x1bW5MYWJlbEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImNvbHVtbi1sYWJlbFwiKTtcbiAgICAgICAgICAgIGNvbHVtbkxhYmVsRWxlbWVudC50ZXh0Q29udGVudCA9IGNvbHVtbkxhYmVsc1tqXTtcbiAgICAgICAgICAgIGdhbWVib2FyZERPTS5hcHBlbmRDaGlsZChjb2x1bW5MYWJlbEVsZW1lbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChqID09PSAtMSkge1xuICAgICAgICAgIGNvbnN0IHJvd0xhYmVsRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgcm93TGFiZWxFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJyb3ctbGFiZWxcIik7XG4gICAgICAgICAgcm93TGFiZWxFbGVtZW50LnRleHRDb250ZW50ID0gcm93TGFiZWxzW2ldO1xuICAgICAgICAgIGdhbWVib2FyZERPTS5hcHBlbmRDaGlsZChyb3dMYWJlbEVsZW1lbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIGNvbnN0IGNlbGxFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAvLyBjZWxsRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXJvd1wiLCBpKTtcbiAgICAgICAgICAvLyBjZWxsRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLWNvbHVtblwiLCBqKTtcbiAgICAgICAgICAvLyBjZWxsRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZ2FtZWJvYXJkLWNlbGxcIik7XG4gICAgICAgICAgLy8gY2VsbEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdvdmVyXCIsIChldmVudCkgPT4ge1xuICAgICAgICAgIC8vICAgZHJhZ092ZXIoZXZlbnQpO1xuICAgICAgICAgIC8vIH0pO1xuICAgICAgICAgIC8vIGNlbGxFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkcm9wXCIsIChldmVudCkgPT4ge1xuICAgICAgICAgIC8vICAgaW5zZXJ0RHJhZ2dlZEltYWdlKGV2ZW50KTtcbiAgICAgICAgICAvLyB9KTtcbiAgICAgICAgICBpZiAoQXJyYXkuZnJvbShnYW1lYm9hcmRET00uY2xhc3NMaXN0KS5pbmNsdWRlcyhcInBsYXllci1ib2FyZFwiKSkge1xuICAgICAgICAgICAgY29uc3QgY2VsbEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgY2VsbEVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1yb3dcIiwgaSk7XG4gICAgICAgICAgICBjZWxsRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLWNvbHVtblwiLCBqKTtcbiAgICAgICAgICAgIGNlbGxFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJnYW1lYm9hcmQtY2VsbFwiKTtcbiAgICAgICAgICAgIGNlbGxFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnb3ZlclwiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgZHJhZ092ZXIoZXZlbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjZWxsRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiZHJvcFwiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgaW5zZXJ0RHJhZ2dlZEltYWdlKGV2ZW50KTtcbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIEdhbWVMb29wLmdldFBsYXllcnMoKVswXS5nZXRHYW1lYm9hcmQoKS5nZXRQbGFjZWRTaGlwcygpXG4gICAgICAgICAgICAgICAgICAubGVuZ3RoID09PSA1XG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGVuYWJsZUNvbXB1dGVyR2FtZWJvYXJkKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZ2FtZWJvYXJkRE9NLmFwcGVuZENoaWxkKGNlbGxFbGVtZW50KTtcbiAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgQXJyYXkuZnJvbShnYW1lYm9hcmRET00uY2xhc3NMaXN0KS5pbmNsdWRlcyhcIm9wcG9uZW50LWJvYXJkXCIpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBjb25zdCBjZWxsRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgICAgICBjZWxsRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXJvd1wiLCBpKTtcbiAgICAgICAgICAgIGNlbGxFbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtY29sdW1uXCIsIGopO1xuICAgICAgICAgICAgY2VsbEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImdhbWVib2FyZC1jZWxsXCIpO1xuICAgICAgICAgICAgY2VsbEVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgY2VsbEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjZWxsRWxlbWVudCk7XG4gICAgICAgICAgICAgIGNvbnN0IGNlbGxSb3cgPSBOdW1iZXIoY2VsbEVsZW1lbnQuZGF0YXNldC5yb3cpO1xuICAgICAgICAgICAgICBjb25zdCBjZWxsQ29sdW1uID0gTnVtYmVyKGNlbGxFbGVtZW50LmRhdGFzZXQuY29sdW1uKTtcbiAgICAgICAgICAgICAgR2FtZUxvb3AuZ2V0UGxheWVycygpWzBdLnNlbmRBdHRhY2soW2NlbGxSb3csIGNlbGxDb2x1bW5dKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZ2FtZWJvYXJkRE9NLmFwcGVuZENoaWxkKGNlbGxFbGVtZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gc29tZSBjbGljayBldmVudCBsaXN0ZW5lciB3aGVyZSBhdHRhY2sgaXMgbWFkZSBPUiBwcmlvciB0byB0aGF0LCBwbGFjaW5nIHNoaXAgb24gdGhhdCBjZWxsXG4gICAgICAgICAgLy8gZ2FtZWJvYXJkRE9NLmFwcGVuZENoaWxkKGNlbGxFbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgY29uc3QgZW5hYmxlQ29tcHV0ZXJHYW1lYm9hcmQgPSAoKSA9PiB7XG4gICAgY29uc3QgY29tcHV0ZXJHYW1lYm9hcmRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5vcHBvbmVudC1ib2FyZFwiKTtcbiAgICBjb25zdCBjZWxsRWxlbWVudHMgPSBBcnJheS5mcm9tKFxuICAgICAgY29tcHV0ZXJHYW1lYm9hcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZ2FtZWJvYXJkLWNlbGxcIilcbiAgICApO1xuICAgIGNlbGxFbGVtZW50cy5mb3JFYWNoKChjZWxsRWxlbWVudCkgPT4ge1xuICAgICAgY2VsbEVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9KTtcbiAgfTtcbiAgY29uc3QgZ2V0RHJhZ2dlZEltYWdlID0gKGV2ZW50KSA9PiB7XG4gICAgY29uc3QgZGF0YU9iamVjdCA9IHtcbiAgICAgIGltYWdlOiBldmVudC50YXJnZXQuc3JjLFxuICAgICAgc2hpcExlbmd0aDogZXZlbnQudGFyZ2V0LmRhdGFzZXQuc2hpcExlbmd0aCxcbiAgICAgIGhvcml6b250YWw6IGZhbHNlLFxuICAgICAgdmVydGljYWw6IGZhbHNlLFxuICAgICAgZWxlbWVudElEOiBldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKFwiaWRcIiksXG4gICAgfTtcbiAgICBpZiAoQXJyYXkuZnJvbShldmVudC50YXJnZXQuY2xhc3NMaXN0KS5pbmNsdWRlcyhcImhvcml6b250YWxcIikpIHtcbiAgICAgIGRhdGFPYmplY3QuaG9yaXpvbnRhbCA9IHRydWU7XG4gICAgfSBlbHNlIGlmIChBcnJheS5mcm9tKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QpLmluY2x1ZGVzKFwidmVydGljYWxcIikpIHtcbiAgICAgIGRhdGFPYmplY3QudmVydGljYWwgPSB0cnVlO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZyhkYXRhT2JqZWN0KTtcbiAgICBjb25zdCBkYXRhU3RyaW5nID0gSlNPTi5zdHJpbmdpZnkoZGF0YU9iamVjdCk7XG4gICAgZXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoXCJpbWFnZVwiLCBkYXRhU3RyaW5nKTtcbiAgfTtcbiAgY29uc3QgZHJhZ092ZXIgPSAoKSA9PiB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgfTtcbiAgY29uc3QgaW5pdGlhbGl6ZUJvYXJkRE9NID0gKCkgPT4ge1xuICAgIGNvbnN0IGh1bWFuUGxheWVyR2FtZWJvYXJkRE9NID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wbGF5ZXItYm9hcmRcIik7XG4gICAgY29uc3Qgb3Bwb25lbnRHYW1lYm9hcmRET00gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm9wcG9uZW50LWJvYXJkXCIpO1xuICAgIGNyZWF0ZUJvYXJkQ2VsbHMoaHVtYW5QbGF5ZXJHYW1lYm9hcmRET00pO1xuICAgIGNyZWF0ZUJvYXJkQ2VsbHMob3Bwb25lbnRHYW1lYm9hcmRET00pO1xuICB9O1xuICBjb25zdCBpc1ZhbGlkR2FtZWJvYXJkQ2VsbCA9ICh0YXJnZXRDZWxsLCBkYXRhT2JqZWN0KSA9PiB7XG4gICAgY29uc3QgY2VsbENvb3JkaW5hdGVzID0gW1xuICAgICAgTnVtYmVyKHRhcmdldENlbGwuZGF0YXNldC5yb3cpLFxuICAgICAgTnVtYmVyKHRhcmdldENlbGwuZGF0YXNldC5jb2x1bW4pLFxuICAgIF07XG4gICAgY29uc3QgbGVuZ3RoID0gTnVtYmVyKGRhdGFPYmplY3Quc2hpcExlbmd0aCk7XG4gICAgaWYgKGRhdGFPYmplY3QuaG9yaXpvbnRhbCkge1xuICAgICAgaWYgKFxuICAgICAgICBHYW1lTG9vcC5nZXRQbGF5ZXJzKClbMF0uY2hlY2tJZlZhbGlkRW1wdHlDb29yZGluYXRlcyhcbiAgICAgICAgICBjZWxsQ29vcmRpbmF0ZXMsXG4gICAgICAgICAgbGVuZ3RoLFxuICAgICAgICAgIFwicmlnaHRcIlxuICAgICAgICApXG4gICAgICApIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJmaXRzXCIpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKFwibm9wZVwiKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGRhdGFPYmplY3QudmVydGljYWwpIHtcbiAgICAgIGlmIChcbiAgICAgICAgR2FtZUxvb3AuZ2V0UGxheWVycygpWzBdLmNoZWNrSWZWYWxpZEVtcHR5Q29vcmRpbmF0ZXMoXG4gICAgICAgICAgY2VsbENvb3JkaW5hdGVzLFxuICAgICAgICAgIGxlbmd0aCxcbiAgICAgICAgICBcImRvd25cIlxuICAgICAgICApXG4gICAgICApIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJmaXRzXCIpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKFwibm9wZVwiKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGFkZFNoaXBUb0RPTSA9ICh0YXJnZXRDZWxsLCBkYXRhT2JqZWN0KSA9PiB7XG4gICAgY29uc3QgbGVuZ3RoID0gZGF0YU9iamVjdC5zaGlwTGVuZ3RoO1xuICAgIGNvbnN0IHRhcmdldENlbGxSb3cgPSBOdW1iZXIodGFyZ2V0Q2VsbC5kYXRhc2V0LnJvdyk7XG4gICAgY29uc3QgdGFyZ2V0Q2VsbENvbHVtbiA9IE51bWJlcih0YXJnZXRDZWxsLmRhdGFzZXQuY29sdW1uKTtcbiAgICBjb25zdCBjb29yZGluYXRlc0FycmF5ID0gW1t0YXJnZXRDZWxsUm93LCB0YXJnZXRDZWxsQ29sdW1uXV07XG4gICAgdGFyZ2V0Q2VsbC5jbGFzc0xpc3QuYWRkKFwiY29udGFpbnMtc2hpcC1pbWFnZVwiKTtcbiAgICB0YXJnZXRDZWxsLmNsYXNzTGlzdC5hZGQoXCJzaGlwLWltYWdlXCIpO1xuICAgIHRhcmdldENlbGwuY2xhc3NMaXN0LmFkZChgc2hpcC1pbWFnZS0ke2xlbmd0aH1gKTtcbiAgICB0YXJnZXRDZWxsLmNsYXNzTGlzdC5hZGQoYHNoaXAtaW1hZ2UtJHtsZW5ndGh9LTFgKTtcbiAgICBpZiAoZGF0YU9iamVjdC5ob3Jpem9udGFsKSB7XG4gICAgICB0YXJnZXRDZWxsLmNsYXNzTGlzdC5hZGQoXCJob3Jpem9udGFsXCIpO1xuICAgIH0gZWxzZSBpZiAoZGF0YU9iamVjdC52ZXJ0aWNhbCkge1xuICAgICAgdGFyZ2V0Q2VsbC5jbGFzc0xpc3QuYWRkKFwidmVydGljYWxcIik7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCByZW1haW5pbmdDZWxsO1xuICAgICAgaWYgKGRhdGFPYmplY3QuaG9yaXpvbnRhbCkge1xuICAgICAgICByZW1haW5pbmdDZWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICBgLnBsYXllci1ib2FyZCBbZGF0YS1yb3c9JyR7dGFyZ2V0Q2VsbFJvd30nXVtkYXRhLWNvbHVtbj0nJHtcbiAgICAgICAgICAgIHRhcmdldENlbGxDb2x1bW4gKyBpXG4gICAgICAgICAgfSddYFxuICAgICAgICApO1xuICAgICAgICByZW1haW5pbmdDZWxsLmNsYXNzTGlzdC5hZGQoXCJob3Jpem9udGFsXCIpO1xuICAgICAgICBjb29yZGluYXRlc0FycmF5LnB1c2goW3RhcmdldENlbGxSb3csIHRhcmdldENlbGxDb2x1bW4gKyBpXSk7XG4gICAgICB9IGVsc2UgaWYgKGRhdGFPYmplY3QudmVydGljYWwpIHtcbiAgICAgICAgcmVtYWluaW5nQ2VsbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgYC5wbGF5ZXItYm9hcmQgW2RhdGEtcm93PScke1xuICAgICAgICAgICAgdGFyZ2V0Q2VsbFJvdyArIGlcbiAgICAgICAgICB9J11bZGF0YS1jb2x1bW49JyR7dGFyZ2V0Q2VsbENvbHVtbn0nXWBcbiAgICAgICAgKTtcbiAgICAgICAgcmVtYWluaW5nQ2VsbC5jbGFzc0xpc3QuYWRkKFwidmVydGljYWxcIik7XG4gICAgICAgIGNvb3JkaW5hdGVzQXJyYXkucHVzaChbdGFyZ2V0Q2VsbFJvdyArIGksIHRhcmdldENlbGxDb2x1bW5dKTtcbiAgICAgIH1cbiAgICAgIHJlbWFpbmluZ0NlbGwuY2xhc3NMaXN0LmFkZChcImNvbnRhaW5zLXNoaXAtaW1hZ2VcIik7XG4gICAgICByZW1haW5pbmdDZWxsLmNsYXNzTGlzdC5hZGQoXCJzaGlwLWltYWdlXCIpO1xuICAgICAgcmVtYWluaW5nQ2VsbC5jbGFzc0xpc3QuYWRkKGBzaGlwLWltYWdlLSR7bGVuZ3RofWApO1xuICAgICAgcmVtYWluaW5nQ2VsbC5jbGFzc0xpc3QuYWRkKGBzaGlwLWltYWdlLSR7bGVuZ3RofS0ke2kgKyAxfWApO1xuICAgIH1cbiAgICByZXR1cm4gY29vcmRpbmF0ZXNBcnJheTtcbiAgfTtcbiAgY29uc3QgZGlzYWJsZUltYWdlQnV0dG9uSW50ZXJhY3Rpb25zID0gKGRhdGFPYmplY3QpID0+IHtcbiAgICBjb25zdCBJRCA9IGRhdGFPYmplY3QuZWxlbWVudElEO1xuICAgIGNvbnN0IGltYWdlRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke0lEfWApO1xuICAgIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBpbWFnZUVsZW1lbnQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKFwiYnV0dG9uXCIpO1xuICAgIGltYWdlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkcmFnZ2FibGVcIiwgZmFsc2UpO1xuICAgIGltYWdlRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWQtaW1hZ2VcIik7XG4gICAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gIH07XG4gIGNvbnN0IGluc2VydERyYWdnZWRJbWFnZSA9IChldmVudCkgPT4ge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgdGFyZ2V0Q2VsbCA9IGV2ZW50LnRhcmdldDtcbiAgICBpZiAoQXJyYXkuZnJvbSh0YXJnZXRDZWxsLmNsYXNzTGlzdCkuaW5jbHVkZXMoXCJjb250YWlucy1zaGlwLWltYWdlXCIpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGRhdGFTdHJpbmcgPSBldmVudC5kYXRhVHJhbnNmZXIuZ2V0RGF0YShcImltYWdlXCIpO1xuICAgIGNvbnN0IGRhdGFPYmplY3QgPSBKU09OLnBhcnNlKGRhdGFTdHJpbmcpO1xuICAgIGlmICghaXNWYWxpZEdhbWVib2FyZENlbGwodGFyZ2V0Q2VsbCwgZGF0YU9iamVjdCkpIHtcbiAgICAgIC8vIHByb2JhYmx5IG1ha2Ugc29tZSBET00gZXJyb3IgbWVzc2FnZSBhcHBlYXJcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgc2hpcENvb3JkaW5hdGVzID0gYWRkU2hpcFRvRE9NKHRhcmdldENlbGwsIGRhdGFPYmplY3QpO1xuICAgIEdhbWVMb29wLmdldFBsYXllcnMoKVswXS5hZGRTaGlwVG9HYW1lYm9hcmQoXG4gICAgICBOdW1iZXIoZGF0YU9iamVjdC5zaGlwTGVuZ3RoKSxcbiAgICAgIHNoaXBDb29yZGluYXRlc1xuICAgICk7XG4gICAgZGlzYWJsZUltYWdlQnV0dG9uSW50ZXJhY3Rpb25zKGRhdGFPYmplY3QpO1xuICAgIHRhcmdldENlbGwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRyb3BcIiwgaW5zZXJ0RHJhZ2dlZEltYWdlKTtcbiAgfTtcbiAgY29uc3Qgcm90YXRlU2hpcEltYWdlID0gKGltYWdlKSA9PiB7XG4gICAgY29uc3QgaW1hZ2VDbGFzc2VzID0gQXJyYXkuZnJvbShpbWFnZS5jbGFzc0xpc3QpO1xuICAgIGlmIChpbWFnZUNsYXNzZXMuaW5jbHVkZXMoXCJob3Jpem9udGFsXCIpKSB7XG4gICAgICBpbWFnZS5jbGFzc0xpc3QucmVtb3ZlKFwiaG9yaXpvbnRhbFwiKTtcbiAgICAgIGltYWdlLmNsYXNzTGlzdC5hZGQoXCJ2ZXJ0aWNhbFwiKTtcbiAgICB9IGVsc2UgaWYgKGltYWdlQ2xhc3Nlcy5pbmNsdWRlcyhcInZlcnRpY2FsXCIpKSB7XG4gICAgICBpbWFnZS5jbGFzc0xpc3QucmVtb3ZlKFwidmVydGljYWxcIik7XG4gICAgICBpbWFnZS5jbGFzc0xpc3QuYWRkKFwiaG9yaXpvbnRhbFwiKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHJvdGF0ZVBlckxlbmd0aCA9ICh0ZW1wRGl2LCBjbG9uZWRJbWFnZUVsZW1lbnQpID0+IHtcbiAgICBjb25zdCBjbG9uZWRJbWFnZUVsZW1lbnRDbGFzc2VzID0gQXJyYXkuZnJvbShjbG9uZWRJbWFnZUVsZW1lbnQuY2xhc3NMaXN0KTtcbiAgICBpZiAoY2xvbmVkSW1hZ2VFbGVtZW50Q2xhc3Nlcy5pbmNsdWRlcyhcImhvcml6b250YWxcIikpIHtcbiAgICAgIHRlbXBEaXYuY2xhc3NMaXN0LmFkZChcInRlbXAtcm90YXRlLWhvcml6b250YWxcIik7XG4gICAgfSBlbHNlIGlmIChjbG9uZWRJbWFnZUVsZW1lbnRDbGFzc2VzLmluY2x1ZGVzKFwidmVydGljYWxcIikpIHtcbiAgICAgIHRlbXBEaXYuY2xhc3NMaXN0LmFkZChcInRlbXAtcm90YXRlLXZlcnRpY2FsXCIpO1xuICAgICAgaWYgKGNsb25lZEltYWdlRWxlbWVudC5kYXRhc2V0LnNoaXBMZW5ndGggPT09IFwiNVwiKSB7XG4gICAgICAgIHRlbXBEaXYuY2xhc3NMaXN0LmFkZChcInRlbXAtcm90YXRlLXZlcnRpY2FsLTVcIik7XG4gICAgICB9IGVsc2UgaWYgKGNsb25lZEltYWdlRWxlbWVudC5kYXRhc2V0LnNoaXBMZW5ndGggPT09IFwiNFwiKSB7XG4gICAgICAgIHRlbXBEaXYuY2xhc3NMaXN0LmFkZChcInRlbXAtcm90YXRlLXZlcnRpY2FsLTRcIik7XG4gICAgICB9IGVsc2UgaWYgKGNsb25lZEltYWdlRWxlbWVudC5kYXRhc2V0LnNoaXBMZW5ndGggPT09IFwiM1wiKSB7XG4gICAgICAgIHRlbXBEaXYuY2xhc3NMaXN0LmFkZChcInRlbXAtcm90YXRlLXZlcnRpY2FsLTNcIik7XG4gICAgICB9IGVsc2UgaWYgKGNsb25lZEltYWdlRWxlbWVudC5kYXRhc2V0LnNoaXBMZW5ndGggPT09IFwiMlwiKSB7XG4gICAgICAgIHRlbXBEaXYuY2xhc3NMaXN0LmFkZChcInRlbXAtcm90YXRlLXZlcnRpY2FsLTJcIik7XG4gICAgICB9XG4gICAgfVxuICB9O1xuICBjb25zdCByb3RhdGVEcmFnZ2VkSW1hZ2UgPSAoZXZlbnQpID0+IHtcbiAgICBjb25zdCBpbWFnZUVsZW1lbnQgPSBldmVudC50YXJnZXQ7XG4gICAgY29uc3QgY2xvbmVkSW1hZ2VFbGVtZW50ID0gaW1hZ2VFbGVtZW50LmNsb25lTm9kZSgpO1xuICAgIGNvbnN0IHRlbXBEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHRlbXBEaXYuY2xhc3NMaXN0LmFkZChcInRlbXAtcm90YXRlXCIpO1xuICAgIHJvdGF0ZVBlckxlbmd0aCh0ZW1wRGl2LCBjbG9uZWRJbWFnZUVsZW1lbnQpO1xuICAgIHRlbXBEaXYuYXBwZW5kQ2hpbGQoY2xvbmVkSW1hZ2VFbGVtZW50KTtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRlbXBEaXYpO1xuICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREcmFnSW1hZ2UodGVtcERpdiwgMCwgMCk7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRlbXBEaXYpO1xuICAgIH0sIDApO1xuICB9O1xuICBjb25zdCBhZGRBdHRhY2tSZXN1bHRET00gPSAocGxheWVyVHlwZSwgYXR0YWNrUmVzdWx0cywgY29vcmRpbmF0ZXMpID0+IHtcbiAgICBjb25zdCBjZWxsUm93ID0gY29vcmRpbmF0ZXNbMF07XG4gICAgY29uc3QgY2VsbENvbHVtbiA9IGNvb3JkaW5hdGVzWzFdO1xuICAgIGNvbnNvbGUubG9nKHBsYXllclR5cGUpO1xuICAgIGNvbnN0IGdhbWVib2FyZERPTSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke3BsYXllclR5cGV9LWJvYXJkYCk7XG4gICAgY29uc3QgdGFyZ2V0Q2VsbCA9IGdhbWVib2FyZERPTS5xdWVyeVNlbGVjdG9yKFxuICAgICAgYFtkYXRhLXJvdz0nJHtjZWxsUm93fSddW2RhdGEtY29sdW1uPScke2NlbGxDb2x1bW59J11gXG4gICAgKTtcbiAgICBjb25zdCBhdHRhY2tSZXN1bHRzRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gICAgYXR0YWNrUmVzdWx0c0VsZW1lbnQuY2xhc3NMaXN0LmFkZChcImF0dGFjay1yZXN1bHRzXCIpO1xuICAgIHRhcmdldENlbGwuYXBwZW5kQ2hpbGQoYXR0YWNrUmVzdWx0c0VsZW1lbnQpO1xuICAgIGlmIChhdHRhY2tSZXN1bHRzID09PSBcImhpdFwiKSB7XG4gICAgICBhdHRhY2tSZXN1bHRzRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgXCIuLi9kaXN0L3JlZF9YLnBuZ1wiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXR0YWNrUmVzdWx0c0VsZW1lbnQuc2V0QXR0cmlidXRlKFwic3JjXCIsIFwiLi4vZGlzdC93aGl0ZV9PLnBuZ1wiKTtcbiAgICB9XG4gICAgdGFyZ2V0Q2VsbC5kaXNhYmxlZCA9IHRydWU7XG4gIH07XG4gIHJldHVybiB7XG4gICAgaW5pdGlhbGl6ZUJvYXJkRE9NLFxuICAgIGluc2VydERyYWdnZWRJbWFnZSxcbiAgICByb3RhdGVTaGlwSW1hZ2UsXG4gICAgcm90YXRlRHJhZ2dlZEltYWdlLFxuICAgIGdldERyYWdnZWRJbWFnZSxcbiAgICBkcmFnT3ZlcixcbiAgICBhZGRBdHRhY2tSZXN1bHRET00sXG4gIH07XG59KSgpO1xuXG5leHBvcnQgeyBET01Db250cm9sbGVyIH07XG4iLCJpbXBvcnQgeyBTaGlwIH0gZnJvbSBcIi4vc2hpcFwiO1xuaW1wb3J0IHsgR2FtZWJvYXJkIH0gZnJvbSBcIi4vZ2FtZWJvYXJkXCI7XG5pbXBvcnQgeyBHYW1lTG9vcCB9IGZyb20gXCIuL2dhbWVsb29wXCI7XG5pbXBvcnQgeyBET01Db250cm9sbGVyIH0gZnJvbSBcIi4vRE9NX2NvbnRyb2xsZXJcIjtcblxuY29uc3QgUGxheWVyID0gKHBsYXllclR5cGUpID0+IHtcbiAgY29uc3QgZGV0ZXJtaW5lUGxheWVyVHlwZSA9ICgpID0+IHtcbiAgICBpZiAocGxheWVyVHlwZSA9PT0gXCJodW1hblwiKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChwbGF5ZXJUeXBlID09PSBcImNvbXB1dGVyXCIpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgY29tcHV0ZXJQbGF5ZXIgPSBkZXRlcm1pbmVQbGF5ZXJUeXBlKCk7XG4gIGNvbnN0IHBsYXllckdhbWVib2FyZCA9IEdhbWVib2FyZCgpO1xuICBsZXQgb3Bwb3NpbmdQbGF5ZXI7XG4gIGNvbnN0IGlzQ29tcHV0ZXIgPSAoKSA9PiBjb21wdXRlclBsYXllcjtcbiAgY29uc3QgZ2V0R2FtZWJvYXJkID0gKCkgPT4gcGxheWVyR2FtZWJvYXJkO1xuICBjb25zdCBnZXRPcHBvc2luZ1BsYXllciA9ICgpID0+IG9wcG9zaW5nUGxheWVyO1xuICBjb25zdCBzZXRPcHBvc2luZ1BsYXllciA9IChwbGF5ZXIpID0+IHtcbiAgICBvcHBvc2luZ1BsYXllciA9IHBsYXllcjtcbiAgfTtcbiAgY29uc3QgYWRkU2hpcFRvR2FtZWJvYXJkID0gKHNoaXBMZW5ndGgsIGNvb3JkaW5hdGVzKSA9PiB7XG4gICAgY29uc3Qgc2hpcCA9IFNoaXAoc2hpcExlbmd0aCk7XG4gICAgcGxheWVyR2FtZWJvYXJkLnBsYWNlU2hpcChzaGlwLCBjb29yZGluYXRlcyk7XG4gIH07XG4gIGNvbnN0IHNlbmRBdHRhY2sgPSAoY29vcmRpbmF0ZXMpID0+IHtcbiAgICBjb25zdCBvcHBvc2luZ1BsYXllckdhbWVib2FyZCA9IG9wcG9zaW5nUGxheWVyLmdldEdhbWVib2FyZCgpO1xuICAgIGNvbnN0IHJlY2VpdmVkTWlzc2VkU2hvdHMgPSBvcHBvc2luZ1BsYXllclxuICAgICAgLmdldEdhbWVib2FyZCgpXG4gICAgICAuZ2V0UmVjZWl2ZWRNaXNzZWRTaG90cygpO1xuICAgIGNvbnN0IHJlY2VpdmVkSGl0U2hvdHMgPSBvcHBvc2luZ1BsYXllclxuICAgICAgLmdldEdhbWVib2FyZCgpXG4gICAgICAuZ2V0UmVjZWl2ZWRIaXRTaG90cygpO1xuICAgIGlmIChcbiAgICAgIGNoZWNrSWZQcmV2aW91c2x5QXR0YWNrZWQoLyogcmVjZWl2ZWRNaXNzZWRTaG90cywgICovIGNvb3JkaW5hdGVzKSB8fFxuICAgICAgY2hlY2tJZlByZXZpb3VzbHlBdHRhY2tlZCgvKiByZWNlaXZlZEhpdFNob3RzLCAgKi8gY29vcmRpbmF0ZXMpXG4gICAgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGF0dGFja1Jlc3VsdHMgPSBvcHBvc2luZ1BsYXllci5yZWNlaXZlQXR0YWNrKGNvb3JkaW5hdGVzKTtcbiAgICBpZiAoYXR0YWNrUmVzdWx0cyA9PT0gXCJoaXRcIikge1xuICAgICAgcGxheWVyR2FtZWJvYXJkLmFkZFNlbnRIaXRTaG90KGNvb3JkaW5hdGVzKTtcbiAgICAgIGlmICghaXNDb21wdXRlcigpKSB7XG4gICAgICAgIERPTUNvbnRyb2xsZXIuYWRkQXR0YWNrUmVzdWx0RE9NKFxuICAgICAgICAgIFwib3Bwb25lbnRcIixcbiAgICAgICAgICBhdHRhY2tSZXN1bHRzLFxuICAgICAgICAgIGNvb3JkaW5hdGVzXG4gICAgICAgICk7XG4gICAgICB9IGVsc2UgaWYgKGlzQ29tcHV0ZXIoKSkge1xuICAgICAgICBET01Db250cm9sbGVyLmFkZEF0dGFja1Jlc3VsdERPTShcInBsYXllclwiLCBhdHRhY2tSZXN1bHRzLCBjb29yZGluYXRlcyk7XG4gICAgICB9XG4gICAgICBpZiAob3Bwb3NpbmdQbGF5ZXJHYW1lYm9hcmQuaXNBbGxTaGlwc1N1bmsoKSkge1xuICAgICAgICBHYW1lTG9vcC5lbmRHYW1lKG9wcG9zaW5nUGxheWVyKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoYXR0YWNrUmVzdWx0cyA9PT0gXCJtaXNzXCIpIHtcbiAgICAgIHBsYXllckdhbWVib2FyZC5hZGRTZW50TWlzc2VkU2hvdChjb29yZGluYXRlcyk7XG4gICAgICBpZiAoIWlzQ29tcHV0ZXIoKSkge1xuICAgICAgICBET01Db250cm9sbGVyLmFkZEF0dGFja1Jlc3VsdERPTShcbiAgICAgICAgICBcIm9wcG9uZW50XCIsXG4gICAgICAgICAgYXR0YWNrUmVzdWx0cyxcbiAgICAgICAgICBjb29yZGluYXRlc1xuICAgICAgICApO1xuICAgICAgfSBlbHNlIGlmIChpc0NvbXB1dGVyKCkpIHtcbiAgICAgICAgRE9NQ29udHJvbGxlci5hZGRBdHRhY2tSZXN1bHRET00oXCJwbGF5ZXJcIiwgYXR0YWNrUmVzdWx0cywgY29vcmRpbmF0ZXMpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAob3Bwb3NpbmdQbGF5ZXIuaXNDb21wdXRlcigpKSB7XG4gICAgICBvcHBvc2luZ1BsYXllci5zZW5kQ29tcHV0ZXJBdHRhY2soKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGluaXRpYWxpemVDb21wdXRlckdhbWVib2FyZCA9ICgpID0+IHtcbiAgICBpZiAoIWNvbXB1dGVyUGxheWVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGxlbmd0aHNPZlNoaXBzID0gWzUsIDQsIDMsIDMsIDJdO1xuICAgIGZvciAoY29uc3Qgc2hpcExlbmd0aCBvZiBsZW5ndGhzT2ZTaGlwcykge1xuICAgICAgY29uc3Qgc2hpcENvb3JkaW5hdGVzID0gZ2VuZXJhdGVDb21wdXRlclNoaXBDb29yZGluYXRlcyhzaGlwTGVuZ3RoKTtcbiAgICAgIGFkZFNoaXBUb0dhbWVib2FyZChzaGlwTGVuZ3RoLCBzaGlwQ29vcmRpbmF0ZXMpO1xuICAgIH1cbiAgfTtcbiAgY29uc3Qgc2VuZENvbXB1dGVyQXR0YWNrID0gKCkgPT4ge1xuICAgIGlmICghY29tcHV0ZXJQbGF5ZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgYXR0YWNrQ29vcmRpbmF0ZXMgPSBnZW5lcmF0ZUF0dGFja0Nvb3JkaW5hdGVzKCk7XG4gICAgc2VuZEF0dGFjayhhdHRhY2tDb29yZGluYXRlcyk7XG4gIH07XG4gIGNvbnN0IHJlY2VpdmVBdHRhY2sgPSAoY29vcmRpbmF0ZXMpID0+IHtcbiAgICBjb25zdCBhdHRhY2tSZXN1bHRzID0gcGxheWVyR2FtZWJvYXJkLnJlY2VpdmVBdHRhY2soY29vcmRpbmF0ZXMpO1xuICAgIHJldHVybiBhdHRhY2tSZXN1bHRzO1xuICB9O1xuICBjb25zdCBnZW5lcmF0ZUNvbXB1dGVyU2hpcENvb3JkaW5hdGVzID0gKHNoaXBMZW5ndGgpID0+IHtcbiAgICBsZXQgbGlzdE9mQ29vcmRpbmF0ZXMgPSBbXTtcbiAgICBkbyB7XG4gICAgICBsaXN0T2ZDb29yZGluYXRlcyA9IFtdO1xuICAgICAgY29uc3Qgc3RhcnRpbmdDb29yZGluYXRlcyA9IGdlbmVyYXRlU3RhcnRpbmdDb29yZGluYXRlcygpO1xuICAgICAgY29uc3Qgbm9uU3RhcnRpbmdDb29yZGluYXRlcyA9IGdlbmVyYXRlTm9uU3RhcnRpbmdDb29yZGluYXRlcyhcbiAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlcyxcbiAgICAgICAgc2hpcExlbmd0aFxuICAgICAgKTtcbiAgICAgIGxpc3RPZkNvb3JkaW5hdGVzLnB1c2goc3RhcnRpbmdDb29yZGluYXRlcyk7XG4gICAgICBsaXN0T2ZDb29yZGluYXRlcyA9IGxpc3RPZkNvb3JkaW5hdGVzLmNvbmNhdChub25TdGFydGluZ0Nvb3JkaW5hdGVzKTtcbiAgICB9IHdoaWxlIChsaXN0T2ZDb29yZGluYXRlcy5sZW5ndGggPCBzaGlwTGVuZ3RoKTtcbiAgICByZXR1cm4gbGlzdE9mQ29vcmRpbmF0ZXM7XG4gIH07XG4gIGNvbnN0IGdlbmVyYXRlU3RhcnRpbmdDb29yZGluYXRlcyA9ICgpID0+IHtcbiAgICBjb25zdCBzdGFydGluZ0Nvb3JkaW5hdGVzID0gW3VuZGVmaW5lZCwgdW5kZWZpbmVkXTtcbiAgICBkbyB7XG4gICAgICBzdGFydGluZ0Nvb3JkaW5hdGVzWzBdID0gZ2VuZXJhdGVSYW5kb21Db29yZGluYXRlKCk7XG4gICAgICBzdGFydGluZ0Nvb3JkaW5hdGVzWzFdID0gZ2VuZXJhdGVSYW5kb21Db29yZGluYXRlKCk7XG4gICAgfSB3aGlsZSAocGxheWVyR2FtZWJvYXJkLmdldENvb3JkaW5hdGVzKHN0YXJ0aW5nQ29vcmRpbmF0ZXMpICE9PSB1bmRlZmluZWQpO1xuICAgIHJldHVybiBzdGFydGluZ0Nvb3JkaW5hdGVzO1xuICB9O1xuICBjb25zdCBnZW5lcmF0ZU5vblN0YXJ0aW5nQ29vcmRpbmF0ZXMgPSAoc3RhcnRpbmdDb29yZGluYXRlcywgc2hpcExlbmd0aCkgPT4ge1xuICAgIGNvbnN0IHBvc3NpYmxlQ29vcmRpbmF0ZXMgPSBbXTtcbiAgICBpZiAoY2hlY2tJZlZhbGlkRW1wdHlDb29yZGluYXRlcyhzdGFydGluZ0Nvb3JkaW5hdGVzLCBzaGlwTGVuZ3RoLCBcInVwXCIpKSB7XG4gICAgICBjb25zdCB1cENvb3JkaW5hdGVzID0gW107XG4gICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHNoaXBMZW5ndGg7IGkrKykge1xuICAgICAgICB1cENvb3JkaW5hdGVzLnB1c2goW1xuICAgICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMF0gLSBpLFxuICAgICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMV0sXG4gICAgICAgIF0pO1xuICAgICAgfVxuICAgICAgcG9zc2libGVDb29yZGluYXRlcy5wdXNoKHVwQ29vcmRpbmF0ZXMpO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICBjaGVja0lmVmFsaWRFbXB0eUNvb3JkaW5hdGVzKHN0YXJ0aW5nQ29vcmRpbmF0ZXMsIHNoaXBMZW5ndGgsIFwicmlnaHRcIilcbiAgICApIHtcbiAgICAgIGNvbnN0IHJpZ2h0Q29vcmRpbmF0ZXMgPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgc2hpcExlbmd0aDsgaSsrKSB7XG4gICAgICAgIHJpZ2h0Q29vcmRpbmF0ZXMucHVzaChbXG4gICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1swXSxcbiAgICAgICAgICBzdGFydGluZ0Nvb3JkaW5hdGVzWzFdICsgaSxcbiAgICAgICAgXSk7XG4gICAgICB9XG4gICAgICBwb3NzaWJsZUNvb3JkaW5hdGVzLnB1c2gocmlnaHRDb29yZGluYXRlcyk7XG4gICAgfVxuICAgIGlmIChjaGVja0lmVmFsaWRFbXB0eUNvb3JkaW5hdGVzKHN0YXJ0aW5nQ29vcmRpbmF0ZXMsIHNoaXBMZW5ndGgsIFwiZG93blwiKSkge1xuICAgICAgY29uc3QgZG93bkNvb3JkaW5hdGVzID0gW107XG4gICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHNoaXBMZW5ndGg7IGkrKykge1xuICAgICAgICBkb3duQ29vcmRpbmF0ZXMucHVzaChbXG4gICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1swXSArIGksXG4gICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1sxXSxcbiAgICAgICAgXSk7XG4gICAgICB9XG4gICAgICBwb3NzaWJsZUNvb3JkaW5hdGVzLnB1c2goZG93bkNvb3JkaW5hdGVzKTtcbiAgICB9XG4gICAgaWYgKGNoZWNrSWZWYWxpZEVtcHR5Q29vcmRpbmF0ZXMoc3RhcnRpbmdDb29yZGluYXRlcywgc2hpcExlbmd0aCwgXCJsZWZ0XCIpKSB7XG4gICAgICBjb25zdCBsZWZ0Q29vcmRpbmF0ZXMgPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgc2hpcExlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxlZnRDb29yZGluYXRlcy5wdXNoKFtcbiAgICAgICAgICBzdGFydGluZ0Nvb3JkaW5hdGVzWzBdLFxuICAgICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMV0gLSBpLFxuICAgICAgICBdKTtcbiAgICAgIH1cbiAgICAgIHBvc3NpYmxlQ29vcmRpbmF0ZXMucHVzaChsZWZ0Q29vcmRpbmF0ZXMpO1xuICAgIH1cbiAgICBpZiAocG9zc2libGVDb29yZGluYXRlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBwb3NzaWJsZUNvb3JkaW5hdGVzO1xuICAgIH1cbiAgICBjb25zdCByYW5kb21JbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvc3NpYmxlQ29vcmRpbmF0ZXMubGVuZ3RoKTtcbiAgICByZXR1cm4gcG9zc2libGVDb29yZGluYXRlc1tyYW5kb21JbmRleF07XG4gIH07XG4gIGNvbnN0IGdlbmVyYXRlUmFuZG9tQ29vcmRpbmF0ZSA9ICgpID0+IHtcbiAgICBjb25zdCBCT0FSREFYRVNMRU5HVEggPSAxMDtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogQk9BUkRBWEVTTEVOR1RIKTtcbiAgfTtcbiAgY29uc3QgY2hlY2tJZlByZXZpb3VzbHlBdHRhY2tlZCA9IChcbiAgICAvKiBvcHBvc2luZ1BsYXllclJlY2VpdmVkU2hvdHMsICovXG4gICAgLy8gb3Bwb3NpbmdQbGF5ZXIsXG4gICAgYXR0YWNrQ29vcmRpbmF0ZXNcbiAgKSA9PlxuICAgIC8vIG9wcG9zaW5nUGxheWVyUmVjZWl2ZWRTaG90cy5zb21lKFxuICAgIC8vICAgKHJlY2VpdmVkU2hvdCkgPT5cbiAgICAvLyAgICAgcmVjZWl2ZWRTaG90WzBdID09PSBhdHRhY2tDb29yZGluYXRlc1swXSAmJlxuICAgIC8vICAgICByZWNlaXZlZFNob3RbMV0gPT09IGF0dGFja0Nvb3JkaW5hdGVzWzFdXG4gICAgLy8gKTtcbiAgICB7XG4gICAgICBsZXQgcHJldmlvdXNseUF0dGFja2VkID0gZmFsc2U7XG4gICAgICBjb25zdCByZWNlaXZlZE1pc3NlZFNob3RzID0gb3Bwb3NpbmdQbGF5ZXJcbiAgICAgICAgLmdldEdhbWVib2FyZCgpXG4gICAgICAgIC5nZXRSZWNlaXZlZE1pc3NlZFNob3RzKCk7XG4gICAgICBjb25zdCByZWNlaXZlZEhpdFNob3RzID0gb3Bwb3NpbmdQbGF5ZXJcbiAgICAgICAgLmdldEdhbWVib2FyZCgpXG4gICAgICAgIC5nZXRSZWNlaXZlZEhpdFNob3RzKCk7XG4gICAgICBwcmV2aW91c2x5QXR0YWNrZWQgPSByZWNlaXZlZE1pc3NlZFNob3RzLnNvbWUoXG4gICAgICAgIChzaG90KSA9PlxuICAgICAgICAgIHNob3RbMF0gPT09IGF0dGFja0Nvb3JkaW5hdGVzWzBdICYmIHNob3RbMV0gPT09IGF0dGFja0Nvb3JkaW5hdGVzWzFdXG4gICAgICApO1xuICAgICAgaWYgKCFwcmV2aW91c2x5QXR0YWNrZWQpIHtcbiAgICAgICAgcHJldmlvdXNseUF0dGFja2VkID0gcmVjZWl2ZWRIaXRTaG90cy5zb21lKFxuICAgICAgICAgIChzaG90KSA9PlxuICAgICAgICAgICAgc2hvdFswXSA9PT0gYXR0YWNrQ29vcmRpbmF0ZXNbMF0gJiYgc2hvdFsxXSA9PT0gYXR0YWNrQ29vcmRpbmF0ZXNbMV1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwcmV2aW91c2x5QXR0YWNrZWQ7XG4gICAgfTtcbiAgY29uc3QgZ2VuZXJhdGVBdHRhY2tDb29yZGluYXRlcyA9ICgpID0+IHtcbiAgICBjb25zdCByZWNlaXZlZE1pc3NlZFNob3RzID0gb3Bwb3NpbmdQbGF5ZXJcbiAgICAgIC5nZXRHYW1lYm9hcmQoKVxuICAgICAgLmdldFJlY2VpdmVkTWlzc2VkU2hvdHMoKTtcbiAgICBjb25zdCByZWNlaXZlZEhpdFNob3RzID0gb3Bwb3NpbmdQbGF5ZXJcbiAgICAgIC5nZXRHYW1lYm9hcmQoKVxuICAgICAgLmdldFJlY2VpdmVkSGl0U2hvdHMoKTtcbiAgICBjb25zdCBhdHRhY2tDb29yZGluYXRlcyA9IFt1bmRlZmluZWQsIHVuZGVmaW5lZF07XG4gICAgZG8ge1xuICAgICAgYXR0YWNrQ29vcmRpbmF0ZXNbMF0gPSBnZW5lcmF0ZVJhbmRvbUNvb3JkaW5hdGUoKTtcbiAgICAgIGF0dGFja0Nvb3JkaW5hdGVzWzFdID0gZ2VuZXJhdGVSYW5kb21Db29yZGluYXRlKCk7XG4gICAgfSB3aGlsZSAoXG4gICAgICBjaGVja0lmUHJldmlvdXNseUF0dGFja2VkKC8qIHJlY2VpdmVkTWlzc2VkU2hvdHMsICovIGF0dGFja0Nvb3JkaW5hdGVzKSB8fFxuICAgICAgY2hlY2tJZlByZXZpb3VzbHlBdHRhY2tlZCgvKiByZWNlaXZlZEhpdFNob3RzLCAgKi8gYXR0YWNrQ29vcmRpbmF0ZXMpXG4gICAgKTtcbiAgICByZXR1cm4gYXR0YWNrQ29vcmRpbmF0ZXM7XG4gIH07XG4gIGNvbnN0IGNoZWNrSWZWYWxpZEVtcHR5Q29vcmRpbmF0ZXMgPSAoXG4gICAgc3RhcnRpbmdDb29yZGluYXRlcyxcbiAgICBzaGlwTGVuZ3RoLFxuICAgIGRpcmVjdGlvblxuICApID0+IHtcbiAgICBzd2l0Y2ggKGRpcmVjdGlvbikge1xuICAgICAgY2FzZSBcInVwXCI6XG4gICAgICAgIGlmIChzdGFydGluZ0Nvb3JkaW5hdGVzWzBdIC0gKHNoaXBMZW5ndGggLSAxKSA8IDApIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBzaGlwTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBwbGF5ZXJHYW1lYm9hcmQuZ2V0Q29vcmRpbmF0ZXMoW1xuICAgICAgICAgICAgICBzdGFydGluZ0Nvb3JkaW5hdGVzWzBdIC0gaSxcbiAgICAgICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1sxXSxcbiAgICAgICAgICAgIF0pICE9PSB1bmRlZmluZWRcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICAgIGNhc2UgXCJyaWdodFwiOlxuICAgICAgICBpZiAoc3RhcnRpbmdDb29yZGluYXRlc1sxXSArIChzaGlwTGVuZ3RoIC0gMSkgPiA5KSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgc2hpcExlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgcGxheWVyR2FtZWJvYXJkLmdldENvb3JkaW5hdGVzKFtcbiAgICAgICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1swXSxcbiAgICAgICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1sxXSArIGksXG4gICAgICAgICAgICBdKSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICBjYXNlIFwiZG93blwiOlxuICAgICAgICBpZiAoc3RhcnRpbmdDb29yZGluYXRlc1swXSArIChzaGlwTGVuZ3RoIC0gMSkgPiA5KSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgc2hpcExlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgcGxheWVyR2FtZWJvYXJkLmdldENvb3JkaW5hdGVzKFtcbiAgICAgICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1swXSArIGksXG4gICAgICAgICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMV0sXG4gICAgICAgICAgICBdKSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICBjYXNlIFwibGVmdFwiOlxuICAgICAgICBpZiAoc3RhcnRpbmdDb29yZGluYXRlc1sxXSAtIChzaGlwTGVuZ3RoIC0gMSkgPCAwKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgc2hpcExlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgcGxheWVyR2FtZWJvYXJkLmdldENvb3JkaW5hdGVzKFtcbiAgICAgICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1swXSxcbiAgICAgICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1sxXSAtIGksXG4gICAgICAgICAgICBdKSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVhaztcbiAgICB9XG4gIH07XG4gIHJldHVybiB7XG4gICAgaXNDb21wdXRlcixcbiAgICBnZXRHYW1lYm9hcmQsXG4gICAgZ2V0T3Bwb3NpbmdQbGF5ZXIsXG4gICAgc2V0T3Bwb3NpbmdQbGF5ZXIsXG4gICAgYWRkU2hpcFRvR2FtZWJvYXJkLFxuICAgIHNlbmRBdHRhY2ssXG4gICAgaW5pdGlhbGl6ZUNvbXB1dGVyR2FtZWJvYXJkLFxuICAgIHNlbmRDb21wdXRlckF0dGFjayxcbiAgICByZWNlaXZlQXR0YWNrLFxuICAgIGNoZWNrSWZWYWxpZEVtcHR5Q29vcmRpbmF0ZXMsXG4gIH07XG59O1xuXG5leHBvcnQgeyBQbGF5ZXIgfTtcbiIsImNvbnN0IEdhbWVib2FyZCA9ICgpID0+IHtcbiAgY29uc3QgY3JlYXRlQm9hcmQgPSAoKSA9PiB7XG4gICAgY29uc3QgYm9hcmQgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpKyspIHtcbiAgICAgIGJvYXJkLnB1c2goW10pO1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAxMDsgaisrKSB7XG4gICAgICAgIGJvYXJkW2ldLnB1c2godW5kZWZpbmVkKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGJvYXJkO1xuICB9O1xuICBjb25zdCBib2FyZCA9IGNyZWF0ZUJvYXJkKCk7XG4gIGNvbnN0IHBsYWNlZFNoaXBzID0gW107XG4gIGNvbnN0IHJlY2VpdmVkTWlzc2VkU2hvdHMgPSBbXTtcbiAgY29uc3QgcmVjZWl2ZWRIaXRTaG90cyA9IFtdO1xuICBjb25zdCBzZW50TWlzc2VkU2hvdHMgPSBbXTtcbiAgY29uc3Qgc2VudEhpdFNob3RzID0gW107XG4gIGxldCBhbGxTaGlwc1N1bmsgPSBmYWxzZTtcbiAgY29uc3QgZ2V0Q29vcmRpbmF0ZXMgPSAoY29vcmRpbmF0ZXMpID0+IGJvYXJkW2Nvb3JkaW5hdGVzWzBdXVtjb29yZGluYXRlc1sxXV07XG4gIGNvbnN0IGdldFBsYWNlZFNoaXBzID0gKCkgPT4gcGxhY2VkU2hpcHM7XG4gIGNvbnN0IGdldFJlY2VpdmVkTWlzc2VkU2hvdHMgPSAoKSA9PiByZWNlaXZlZE1pc3NlZFNob3RzO1xuICBjb25zdCBnZXRSZWNlaXZlZEhpdFNob3RzID0gKCkgPT4gcmVjZWl2ZWRIaXRTaG90cztcbiAgY29uc3QgZ2V0U2VudE1pc3NlZFNob3RzID0gKCkgPT4gc2VudE1pc3NlZFNob3RzO1xuICBjb25zdCBnZXRTZW50SGl0U2hvdHMgPSAoKSA9PiBzZW50SGl0U2hvdHM7XG4gIGNvbnN0IGlzQWxsU2hpcHNTdW5rID0gKCkgPT4gYWxsU2hpcHNTdW5rO1xuICBjb25zdCBwbGFjZVNoaXAgPSAoc2hpcCwgY29vcmRpbmF0ZXNMaXN0KSA9PiB7XG4gICAgZm9yIChjb25zdCBjb29yZGluYXRlcyBvZiBjb29yZGluYXRlc0xpc3QpIHtcbiAgICAgIGJvYXJkW2Nvb3JkaW5hdGVzWzBdXVtjb29yZGluYXRlc1sxXV0gPSBzaGlwO1xuICAgIH1cbiAgICBwbGFjZWRTaGlwcy5wdXNoKHNoaXApO1xuICB9O1xuICBjb25zdCBjaGVja0FsbFNoaXBzU3VuayA9ICgpID0+IHtcbiAgICBpZiAocGxhY2VkU2hpcHMuZXZlcnkoKHNoaXApID0+IHNoaXAuaXNTdW5rKCkpKSB7XG4gICAgICBhbGxTaGlwc1N1bmsgPSB0cnVlO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgcmVjZWl2ZUF0dGFjayA9IChjb29yZGluYXRlcykgPT4ge1xuICAgIGNvbnN0IGVudGl0eUF0Q29vcmRpbmF0ZXMgPSBnZXRDb29yZGluYXRlcyhjb29yZGluYXRlcyk7XG4gICAgaWYgKGVudGl0eUF0Q29vcmRpbmF0ZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgZW50aXR5QXRDb29yZGluYXRlcy5oaXQoKTtcbiAgICAgIGNoZWNrQWxsU2hpcHNTdW5rKCk7XG4gICAgICByZWNlaXZlZEhpdFNob3RzLnB1c2goY29vcmRpbmF0ZXMpO1xuICAgICAgcmV0dXJuIFwiaGl0XCI7XG4gICAgfVxuICAgIHJlY2VpdmVkTWlzc2VkU2hvdHMucHVzaChjb29yZGluYXRlcyk7XG4gICAgcmV0dXJuIFwibWlzc1wiO1xuICB9O1xuICBjb25zdCBhZGRTZW50TWlzc2VkU2hvdCA9IChjb29yZGluYXRlcykgPT4ge1xuICAgIHNlbnRNaXNzZWRTaG90cy5wdXNoKGNvb3JkaW5hdGVzKTtcbiAgfTtcbiAgY29uc3QgYWRkU2VudEhpdFNob3QgPSAoY29vcmRpbmF0ZXMpID0+IHtcbiAgICBzZW50SGl0U2hvdHMucHVzaChjb29yZGluYXRlcyk7XG4gIH07XG4gIHJldHVybiB7XG4gICAgZ2V0Q29vcmRpbmF0ZXMsXG4gICAgZ2V0UGxhY2VkU2hpcHMsXG4gICAgZ2V0UmVjZWl2ZWRNaXNzZWRTaG90cyxcbiAgICBnZXRSZWNlaXZlZEhpdFNob3RzLFxuICAgIGdldFNlbnRNaXNzZWRTaG90cyxcbiAgICBnZXRTZW50SGl0U2hvdHMsXG4gICAgaXNBbGxTaGlwc1N1bmssXG4gICAgcGxhY2VTaGlwLFxuICAgIHJlY2VpdmVBdHRhY2ssXG4gICAgYWRkU2VudE1pc3NlZFNob3QsXG4gICAgYWRkU2VudEhpdFNob3QsXG4gIH07XG59O1xuXG5leHBvcnQgeyBHYW1lYm9hcmQgfTtcbiIsImltcG9ydCB7IFNoaXAgfSBmcm9tIFwiLi9zaGlwXCI7XG5pbXBvcnQgeyBHYW1lYm9hcmQgfSBmcm9tIFwiLi9nYW1lYm9hcmRcIjtcbmltcG9ydCB7IFBsYXllciB9IGZyb20gXCIuL3BsYXllclwiO1xuXG5jb25zdCBHYW1lTG9vcCA9ICgoKSA9PiB7XG4gIGNvbnN0IHBsYXllcnMgPSBbXTtcbiAgbGV0IGluUHJvZ3Jlc3MgPSB0cnVlO1xuICBsZXQgd2lubmVyO1xuICBjb25zdCBnZXRQbGF5ZXJzID0gKCkgPT4gcGxheWVycztcbiAgY29uc3QgaXNJblByb2dyZXNzID0gKCkgPT4gaW5Qcm9ncmVzcztcbiAgY29uc3QgZ2V0V2lubmVyID0gKCkgPT4gd2lubmVyO1xuICBjb25zdCBzZXRXaW5uZXIgPSAobG9zZXJQbGF5ZXIpID0+IHtcbiAgICBjb25zdCB3aW5uZXJQbGF5ZXIgPSBsb3NlclBsYXllci5nZXRPcHBvc2luZ1BsYXllcigpO1xuICAgIHdpbm5lciA9IHdpbm5lclBsYXllcjtcbiAgfTtcbiAgY29uc3QgY3JlYXRlR2FtZSA9ICgpID0+IHtcbiAgICBjb25zdCBodW1hblBsYXllciA9IFBsYXllcihcImh1bWFuXCIpO1xuICAgIHBsYXllcnMucHVzaChodW1hblBsYXllcik7XG4gICAgY29uc3QgY29tcHV0ZXJQbGF5ZXIgPSBQbGF5ZXIoXCJjb21wdXRlclwiKTtcbiAgICBwbGF5ZXJzLnB1c2goY29tcHV0ZXJQbGF5ZXIpO1xuICAgIGh1bWFuUGxheWVyLnNldE9wcG9zaW5nUGxheWVyKGNvbXB1dGVyUGxheWVyKTtcbiAgICBjb21wdXRlclBsYXllci5zZXRPcHBvc2luZ1BsYXllcihodW1hblBsYXllcik7XG4gICAgY29tcHV0ZXJQbGF5ZXIuaW5pdGlhbGl6ZUNvbXB1dGVyR2FtZWJvYXJkKCk7XG4gIH07XG4gIGNvbnN0IGVuZEdhbWUgPSAobG9zZXJQbGF5ZXIpID0+IHtcbiAgICBpblByb2dyZXNzID0gZmFsc2U7XG4gICAgc2V0V2lubmVyKGxvc2VyUGxheWVyKTtcbiAgfTtcbiAgY29uc3QgcmVzZXRHYW1lID0gKCkgPT4ge1xuICAgIHBsYXllcnMubGVuZ3RoID0gMDtcbiAgICBpblByb2dyZXNzID0gdHJ1ZTtcbiAgICB3aW5uZXIgPSB1bmRlZmluZWQ7XG4gIH07XG4gIHJldHVybiB7XG4gICAgZ2V0UGxheWVycyxcbiAgICBpc0luUHJvZ3Jlc3MsXG4gICAgZ2V0V2lubmVyLFxuICAgIGNyZWF0ZUdhbWUsXG4gICAgZW5kR2FtZSxcbiAgICByZXNldEdhbWUsXG4gIH07XG59KSgpO1xuXG5leHBvcnQgeyBHYW1lTG9vcCB9O1xuIiwiaW1wb3J0IHsgRE9NQ29udHJvbGxlciB9IGZyb20gXCIuL0RPTV9jb250cm9sbGVyXCI7XG5cbmNvbnN0IEV2ZW50TGlzdGVuZXJDb250cm9sbGVyID0gKCgpID0+IHtcbiAgY29uc3Qgcm90YXRlU2hpcEltYWdlTGlzdGVuZXJzID0gKCkgPT4ge1xuICAgIGNvbnN0IHNoaXBQbGFjZW1lbnRFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2hpcC1wbGFjZW1lbnRcIik7XG4gICAgc2hpcFBsYWNlbWVudEVsZW1lbnRzLmZvckVhY2goKGdyb3VwKSA9PiB7XG4gICAgICBjb25zdCBpbWcgPSBncm91cC5jaGlsZHJlblswXTtcbiAgICAgIGNvbnN0IGJ0biA9IGdyb3VwLmNoaWxkcmVuWzJdO1xuICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIERPTUNvbnRyb2xsZXIucm90YXRlU2hpcEltYWdlKGltZyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcbiAgY29uc3QgYWRkU2hpcFBsYWNlbWVudERyYWcgPSAoKSA9PiB7XG4gICAgY29uc3Qgc2hpcEltYWdlcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zaGlwLXBpZWNlXCIpKTtcbiAgICBzaGlwSW1hZ2VzLmZvckVhY2goKHNoaXApID0+IHtcbiAgICAgIHNoaXAuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdzdGFydFwiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgRE9NQ29udHJvbGxlci5nZXREcmFnZ2VkSW1hZ2UoZXZlbnQpO1xuICAgICAgICBET01Db250cm9sbGVyLnJvdGF0ZURyYWdnZWRJbWFnZShldmVudCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcbiAgcmV0dXJuIHtcbiAgICByb3RhdGVTaGlwSW1hZ2VMaXN0ZW5lcnMsXG4gICAgYWRkU2hpcFBsYWNlbWVudERyYWcsXG4gIH07XG59KSgpO1xuXG5leHBvcnQgeyBFdmVudExpc3RlbmVyQ29udHJvbGxlciB9O1xuIiwiaW1wb3J0IHsgR2FtZUxvb3AgfSBmcm9tIFwiLi9nYW1lbG9vcFwiO1xuaW1wb3J0IHsgRE9NQ29udHJvbGxlciB9IGZyb20gXCIuL0RPTV9jb250cm9sbGVyXCI7XG5pbXBvcnQgeyBFdmVudExpc3RlbmVyQ29udHJvbGxlciB9IGZyb20gXCIuL2V2ZW50X2xpc3RlbmVyX2NvbnRyb2xsZXJcIjtcblxuR2FtZUxvb3AuY3JlYXRlR2FtZSgpO1xuXG5ET01Db250cm9sbGVyLmluaXRpYWxpemVCb2FyZERPTSgpO1xuXG5FdmVudExpc3RlbmVyQ29udHJvbGxlci5yb3RhdGVTaGlwSW1hZ2VMaXN0ZW5lcnMoKTtcblxuRXZlbnRMaXN0ZW5lckNvbnRyb2xsZXIuYWRkU2hpcFBsYWNlbWVudERyYWcoKTtcbiJdLCJuYW1lcyI6WyJET01Db250cm9sbGVyIiwiY3JlYXRlQm9hcmRDZWxscyIsImdhbWVib2FyZERPTSIsImNvbHVtbkxhYmVscyIsInJvd0xhYmVscyIsImkiLCJqIiwiaW52aXNpYmxlUGxhY2Vob2xkZXJFbGVtZW50IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwic3R5bGUiLCJ2aXNpYmlsaXR5IiwiYXBwZW5kQ2hpbGQiLCJjb2x1bW5MYWJlbEVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsInJvd0xhYmVsRWxlbWVudCIsIkFycmF5IiwiZnJvbSIsImluY2x1ZGVzIiwiY2VsbEVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJkcmFnT3ZlciIsImluc2VydERyYWdnZWRJbWFnZSIsIkdhbWVMb29wIiwiZ2V0UGxheWVycyIsImdldEdhbWVib2FyZCIsImdldFBsYWNlZFNoaXBzIiwibGVuZ3RoIiwiZW5hYmxlQ29tcHV0ZXJHYW1lYm9hcmQiLCJkaXNhYmxlZCIsImNvbnNvbGUiLCJsb2ciLCJjZWxsUm93IiwiTnVtYmVyIiwiZGF0YXNldCIsInJvdyIsImNlbGxDb2x1bW4iLCJjb2x1bW4iLCJzZW5kQXR0YWNrIiwiY29tcHV0ZXJHYW1lYm9hcmRFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwicHJldmVudERlZmF1bHQiLCJ0YXJnZXRDZWxsIiwidGFyZ2V0IiwiZGF0YVN0cmluZyIsImRhdGFUcmFuc2ZlciIsImdldERhdGEiLCJkYXRhT2JqZWN0IiwiSlNPTiIsInBhcnNlIiwiY2VsbENvb3JkaW5hdGVzIiwic2hpcExlbmd0aCIsImhvcml6b250YWwiLCJjaGVja0lmVmFsaWRFbXB0eUNvb3JkaW5hdGVzIiwidmVydGljYWwiLCJpc1ZhbGlkR2FtZWJvYXJkQ2VsbCIsInNoaXBDb29yZGluYXRlcyIsInRhcmdldENlbGxSb3ciLCJ0YXJnZXRDZWxsQ29sdW1uIiwiY29vcmRpbmF0ZXNBcnJheSIsInJlbWFpbmluZ0NlbGwiLCJwdXNoIiwiYWRkU2hpcFRvRE9NIiwiYWRkU2hpcFRvR2FtZWJvYXJkIiwiSUQiLCJlbGVtZW50SUQiLCJpbWFnZUVsZW1lbnQiLCJidXR0b25FbGVtZW50IiwicGFyZW50Tm9kZSIsImRpc2FibGVJbWFnZUJ1dHRvbkludGVyYWN0aW9ucyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJpbml0aWFsaXplQm9hcmRET00iLCJodW1hblBsYXllckdhbWVib2FyZERPTSIsIm9wcG9uZW50R2FtZWJvYXJkRE9NIiwicm90YXRlU2hpcEltYWdlIiwiaW1hZ2UiLCJpbWFnZUNsYXNzZXMiLCJyZW1vdmUiLCJyb3RhdGVEcmFnZ2VkSW1hZ2UiLCJjbG9uZWRJbWFnZUVsZW1lbnQiLCJjbG9uZU5vZGUiLCJ0ZW1wRGl2IiwiY2xvbmVkSW1hZ2VFbGVtZW50Q2xhc3NlcyIsInJvdGF0ZVBlckxlbmd0aCIsImJvZHkiLCJzZXREcmFnSW1hZ2UiLCJzZXRUaW1lb3V0IiwicmVtb3ZlQ2hpbGQiLCJnZXREcmFnZ2VkSW1hZ2UiLCJzcmMiLCJnZXRBdHRyaWJ1dGUiLCJzdHJpbmdpZnkiLCJzZXREYXRhIiwiYWRkQXR0YWNrUmVzdWx0RE9NIiwicGxheWVyVHlwZSIsImF0dGFja1Jlc3VsdHMiLCJjb29yZGluYXRlcyIsImF0dGFja1Jlc3VsdHNFbGVtZW50IiwiUGxheWVyIiwiY29tcHV0ZXJQbGF5ZXIiLCJwbGF5ZXJHYW1lYm9hcmQiLCJib2FyZCIsInVuZGVmaW5lZCIsImNyZWF0ZUJvYXJkIiwicGxhY2VkU2hpcHMiLCJyZWNlaXZlZE1pc3NlZFNob3RzIiwicmVjZWl2ZWRIaXRTaG90cyIsInNlbnRNaXNzZWRTaG90cyIsInNlbnRIaXRTaG90cyIsImFsbFNoaXBzU3VuayIsImdldENvb3JkaW5hdGVzIiwiZ2V0UmVjZWl2ZWRNaXNzZWRTaG90cyIsImdldFJlY2VpdmVkSGl0U2hvdHMiLCJnZXRTZW50TWlzc2VkU2hvdHMiLCJnZXRTZW50SGl0U2hvdHMiLCJpc0FsbFNoaXBzU3VuayIsInBsYWNlU2hpcCIsInNoaXAiLCJjb29yZGluYXRlc0xpc3QiLCJyZWNlaXZlQXR0YWNrIiwiZW50aXR5QXRDb29yZGluYXRlcyIsImhpdCIsImV2ZXJ5IiwiaXNTdW5rIiwiYWRkU2VudE1pc3NlZFNob3QiLCJhZGRTZW50SGl0U2hvdCIsIkdhbWVib2FyZCIsIm9wcG9zaW5nUGxheWVyIiwiaXNDb21wdXRlciIsImdpdmVuTGVuZ3RoIiwiaGl0cyIsInN1bmsiLCJnZXRTaGlwTGVuZ3RoIiwiZ2V0U2hpcEhpdHMiLCJTaGlwIiwib3Bwb3NpbmdQbGF5ZXJHYW1lYm9hcmQiLCJjaGVja0lmUHJldmlvdXNseUF0dGFja2VkIiwiZW5kR2FtZSIsInNlbmRDb21wdXRlckF0dGFjayIsImdlbmVyYXRlQ29tcHV0ZXJTaGlwQ29vcmRpbmF0ZXMiLCJsaXN0T2ZDb29yZGluYXRlcyIsInN0YXJ0aW5nQ29vcmRpbmF0ZXMiLCJnZW5lcmF0ZVN0YXJ0aW5nQ29vcmRpbmF0ZXMiLCJub25TdGFydGluZ0Nvb3JkaW5hdGVzIiwiZ2VuZXJhdGVOb25TdGFydGluZ0Nvb3JkaW5hdGVzIiwiY29uY2F0IiwiZ2VuZXJhdGVSYW5kb21Db29yZGluYXRlIiwicG9zc2libGVDb29yZGluYXRlcyIsInVwQ29vcmRpbmF0ZXMiLCJyaWdodENvb3JkaW5hdGVzIiwiZG93bkNvb3JkaW5hdGVzIiwibGVmdENvb3JkaW5hdGVzIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiYXR0YWNrQ29vcmRpbmF0ZXMiLCJwcmV2aW91c2x5QXR0YWNrZWQiLCJzb21lIiwic2hvdCIsImRpcmVjdGlvbiIsImdldE9wcG9zaW5nUGxheWVyIiwic2V0T3Bwb3NpbmdQbGF5ZXIiLCJwbGF5ZXIiLCJpbml0aWFsaXplQ29tcHV0ZXJHYW1lYm9hcmQiLCJsZW5ndGhzT2ZTaGlwcyIsImdlbmVyYXRlQXR0YWNrQ29vcmRpbmF0ZXMiLCJwbGF5ZXJzIiwid2lubmVyIiwiaW5Qcm9ncmVzcyIsImlzSW5Qcm9ncmVzcyIsImdldFdpbm5lciIsImNyZWF0ZUdhbWUiLCJodW1hblBsYXllciIsImxvc2VyUGxheWVyIiwid2lubmVyUGxheWVyIiwic2V0V2lubmVyIiwicmVzZXRHYW1lIiwiRXZlbnRMaXN0ZW5lckNvbnRyb2xsZXIiLCJncm91cCIsImltZyIsImNoaWxkcmVuIl0sInNvdXJjZVJvb3QiOiIifQ==