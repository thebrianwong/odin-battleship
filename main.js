(()=>{"use strict";const e=(()=>{const e=t=>{t.preventDefault();const a=t.dataTransfer.getData("image"),s=JSON.parse(a),r=s.image;s.shipLength,""!==r&&(t.target.classList.add("ship-image-5"),t.target.classList.add("ship-image-5-3"),t.target.removeEventListener("drop",e))};return{getDraggedImage:e=>{const t={image:e.target.src,shipLength:e.target.dataset.shipLength},a=JSON.stringify(t);e.dataTransfer.setData("image",a)},dragOver:()=>{event.preventDefault()},insertDraggedImage:e,rotateShipImage:e=>{const t=Array.from(e.classList);t.includes("horizontal")?(e.classList.remove("horizontal"),e.classList.add("vertical")):t.includes("vertical")&&(e.classList.remove("vertical"),e.classList.add("horizontal"))},rotateDraggedImage:e=>{const t=e.target.cloneNode(),a=document.createElement("div");a.classList.add("temp-rotate"),((e,t)=>{const a=Array.from(t.classList);a.includes("horizontal")?e.classList.add("temp-rotate-horizontal"):a.includes("vertical")&&(e.classList.add("temp-rotate-vertical"),"5"===t.dataset.shipLength?e.classList.add("temp-rotate-vertical-5"):"4"===t.dataset.shipLength?e.classList.add("temp-rotate-vertical-4"):"3"===t.dataset.shipLength?e.classList.add("temp-rotate-vertical-3"):"2"===t.dataset.shipLength&&e.classList.add("temp-rotate-vertical-2"))})(a,t),a.appendChild(t),document.body.appendChild(a),e.dataTransfer.setDragImage(a,0,0),setTimeout((()=>{document.body.removeChild(a)}),0)}}})(),t=(()=>{const t=t=>{const a=["A","B","C","D","E","F","G","H","I","J"],s=["1","2","3","4","5","6","7","8","9","10"];for(let r=-1;r<10;r++)for(let d=-1;d<10;d++)if(-1===r)if(-1===d){const e=document.createElement("div");e.classList.add("gameboard-label"),e.style.visibility="hidden",t.appendChild(e)}else{const e=document.createElement("div");e.classList.add("column-label"),e.textContent=a[d],t.appendChild(e)}else if(-1===d){const e=document.createElement("div");e.classList.add("row-label"),e.textContent=s[r],t.appendChild(e)}else{const a=document.createElement("div");a.setAttribute("dataRow",r),a.setAttribute("dataColumn",d),a.classList.add("gameboard-cell"),a.addEventListener("dragover",e.dragOver.bind(event)),a.addEventListener("drop",e.insertDraggedImage.bind(event)),t.appendChild(a)}};return{initializeBoardDOM:()=>{const e=document.querySelector(".player-board"),a=document.querySelector(".opponent-board");t(e),t(a)},rotateShipImageListeners:()=>{document.querySelectorAll(".ship-placement").forEach((t=>{const a=t.children[0];t.children[2].addEventListener("click",e.rotateShipImage.bind(event,a))}))},addShipPlacementDrag:()=>{Array.from(document.querySelectorAll(".ship-piece")).forEach((t=>{t.addEventListener("dragstart",(t=>{e.getDraggedImage(t),e.rotateDraggedImage(t)}))}))}}})();t.initializeBoardDOM(),t.rotateShipImageListeners(),t.addShipPlacementDrag()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cyI6WyJ3ZWJwYWNrOi8vb2Rpbi1iYXR0bGVzaGlwLy4vc3JjL2V2ZW50X2xpc3RlbmVyX2NvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vb2Rpbi1iYXR0bGVzaGlwLy4vc3JjL0RPTV9jb250cm9sbGVyLmpzIiwid2VicGFjazovL29kaW4tYmF0dGxlc2hpcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBFdmVudExpc3RlbmVyQ29udHJvbGxlciA9ICgoKSA9PiB7XG4gIGNvbnN0IGdldERyYWdnZWRJbWFnZSA9IChldmVudCkgPT4ge1xuICAgIGNvbnN0IGRhdGFPYmplY3QgPSB7XG4gICAgICBpbWFnZTogZXZlbnQudGFyZ2V0LnNyYyxcbiAgICAgIHNoaXBMZW5ndGg6IGV2ZW50LnRhcmdldC5kYXRhc2V0LnNoaXBMZW5ndGgsXG4gICAgfTtcbiAgICBjb25zdCBkYXRhU3RyaW5nID0gSlNPTi5zdHJpbmdpZnkoZGF0YU9iamVjdCk7XG4gICAgZXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoXCJpbWFnZVwiLCBkYXRhU3RyaW5nKTtcbiAgfTtcbiAgY29uc3QgZHJhZ092ZXIgPSAoKSA9PiB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgfTtcbiAgLy8gY29uc3QgZGV0ZXJtaW5lXG4gIGNvbnN0IGluc2VydERyYWdnZWRJbWFnZSA9IChldmVudCkgPT4ge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgZGF0YVN0cmluZyA9IGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKFwiaW1hZ2VcIik7XG4gICAgY29uc3QgZGF0YU9iamVjdCA9IEpTT04ucGFyc2UoZGF0YVN0cmluZyk7XG4gICAgY29uc3QgZHJhZ2dlZEltYWdlID0gZGF0YU9iamVjdC5pbWFnZTtcbiAgICBjb25zdCBsZW5ndGggPSBkYXRhT2JqZWN0LnNoaXBMZW5ndGg7XG4gICAgaWYgKGRyYWdnZWRJbWFnZSA9PT0gXCJcIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LmFkZChcInNoaXAtaW1hZ2UtNVwiKTtcbiAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LmFkZChcInNoaXAtaW1hZ2UtNS0zXCIpO1xuICAgIGV2ZW50LnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZHJvcFwiLCBpbnNlcnREcmFnZ2VkSW1hZ2UpO1xuICB9O1xuICBjb25zdCByb3RhdGVTaGlwSW1hZ2UgPSAoaW1hZ2UpID0+IHtcbiAgICBjb25zdCBpbWFnZUNsYXNzZXMgPSBBcnJheS5mcm9tKGltYWdlLmNsYXNzTGlzdCk7XG4gICAgaWYgKGltYWdlQ2xhc3Nlcy5pbmNsdWRlcyhcImhvcml6b250YWxcIikpIHtcbiAgICAgIGltYWdlLmNsYXNzTGlzdC5yZW1vdmUoXCJob3Jpem9udGFsXCIpO1xuICAgICAgaW1hZ2UuY2xhc3NMaXN0LmFkZChcInZlcnRpY2FsXCIpO1xuICAgIH0gZWxzZSBpZiAoaW1hZ2VDbGFzc2VzLmluY2x1ZGVzKFwidmVydGljYWxcIikpIHtcbiAgICAgIGltYWdlLmNsYXNzTGlzdC5yZW1vdmUoXCJ2ZXJ0aWNhbFwiKTtcbiAgICAgIGltYWdlLmNsYXNzTGlzdC5hZGQoXCJob3Jpem9udGFsXCIpO1xuICAgIH1cbiAgfTtcbiAgY29uc3Qgcm90YXRlUGVyTGVuZ3RoID0gKHRlbXBEaXYsIGNsb25lZEltYWdlRWxlbWVudCkgPT4ge1xuICAgIGNvbnN0IGNsb25lZEltYWdlRWxlbWVudENsYXNzZXMgPSBBcnJheS5mcm9tKGNsb25lZEltYWdlRWxlbWVudC5jbGFzc0xpc3QpO1xuICAgIGlmIChjbG9uZWRJbWFnZUVsZW1lbnRDbGFzc2VzLmluY2x1ZGVzKFwiaG9yaXpvbnRhbFwiKSkge1xuICAgICAgdGVtcERpdi5jbGFzc0xpc3QuYWRkKFwidGVtcC1yb3RhdGUtaG9yaXpvbnRhbFwiKTtcbiAgICB9IGVsc2UgaWYgKGNsb25lZEltYWdlRWxlbWVudENsYXNzZXMuaW5jbHVkZXMoXCJ2ZXJ0aWNhbFwiKSkge1xuICAgICAgdGVtcERpdi5jbGFzc0xpc3QuYWRkKFwidGVtcC1yb3RhdGUtdmVydGljYWxcIik7XG4gICAgICBpZiAoY2xvbmVkSW1hZ2VFbGVtZW50LmRhdGFzZXQuc2hpcExlbmd0aCA9PT0gXCI1XCIpIHtcbiAgICAgICAgdGVtcERpdi5jbGFzc0xpc3QuYWRkKFwidGVtcC1yb3RhdGUtdmVydGljYWwtNVwiKTtcbiAgICAgIH0gZWxzZSBpZiAoY2xvbmVkSW1hZ2VFbGVtZW50LmRhdGFzZXQuc2hpcExlbmd0aCA9PT0gXCI0XCIpIHtcbiAgICAgICAgdGVtcERpdi5jbGFzc0xpc3QuYWRkKFwidGVtcC1yb3RhdGUtdmVydGljYWwtNFwiKTtcbiAgICAgIH0gZWxzZSBpZiAoY2xvbmVkSW1hZ2VFbGVtZW50LmRhdGFzZXQuc2hpcExlbmd0aCA9PT0gXCIzXCIpIHtcbiAgICAgICAgdGVtcERpdi5jbGFzc0xpc3QuYWRkKFwidGVtcC1yb3RhdGUtdmVydGljYWwtM1wiKTtcbiAgICAgIH0gZWxzZSBpZiAoY2xvbmVkSW1hZ2VFbGVtZW50LmRhdGFzZXQuc2hpcExlbmd0aCA9PT0gXCIyXCIpIHtcbiAgICAgICAgdGVtcERpdi5jbGFzc0xpc3QuYWRkKFwidGVtcC1yb3RhdGUtdmVydGljYWwtMlwiKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGNvbnN0IHJvdGF0ZURyYWdnZWRJbWFnZSA9IChldmVudCkgPT4ge1xuICAgIGNvbnN0IGltYWdlRWxlbWVudCA9IGV2ZW50LnRhcmdldDtcbiAgICBjb25zdCBjbG9uZWRJbWFnZUVsZW1lbnQgPSBpbWFnZUVsZW1lbnQuY2xvbmVOb2RlKCk7XG4gICAgY29uc3QgdGVtcERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGVtcERpdi5jbGFzc0xpc3QuYWRkKFwidGVtcC1yb3RhdGVcIik7XG4gICAgcm90YXRlUGVyTGVuZ3RoKHRlbXBEaXYsIGNsb25lZEltYWdlRWxlbWVudCk7XG4gICAgdGVtcERpdi5hcHBlbmRDaGlsZChjbG9uZWRJbWFnZUVsZW1lbnQpO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGVtcERpdik7XG4gICAgZXZlbnQuZGF0YVRyYW5zZmVyLnNldERyYWdJbWFnZSh0ZW1wRGl2LCAwLCAwKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGVtcERpdik7XG4gICAgfSwgMCk7XG4gIH07XG4gIHJldHVybiB7XG4gICAgZ2V0RHJhZ2dlZEltYWdlLFxuICAgIGRyYWdPdmVyLFxuICAgIGluc2VydERyYWdnZWRJbWFnZSxcbiAgICByb3RhdGVTaGlwSW1hZ2UsXG4gICAgcm90YXRlRHJhZ2dlZEltYWdlLFxuICB9O1xufSkoKTtcblxuZXhwb3J0IHsgRXZlbnRMaXN0ZW5lckNvbnRyb2xsZXIgfTtcbiIsImltcG9ydCB7IEV2ZW50TGlzdGVuZXJDb250cm9sbGVyIH0gZnJvbSBcIi4vZXZlbnRfbGlzdGVuZXJfY29udHJvbGxlclwiO1xuXG5jb25zdCBET01Db250cm9sbGVyID0gKCgpID0+IHtcbiAgY29uc3QgY3JlYXRlQm9hcmRDZWxscyA9IChnYW1lYm9hcmRET00pID0+IHtcbiAgICBjb25zdCBCT0FSREFYRVNMRU5HVEggPSAxMDtcbiAgICBjb25zdCBjb2x1bW5MYWJlbHMgPSBbXCJBXCIsIFwiQlwiLCBcIkNcIiwgXCJEXCIsIFwiRVwiLCBcIkZcIiwgXCJHXCIsIFwiSFwiLCBcIklcIiwgXCJKXCJdO1xuICAgIGNvbnN0IHJvd0xhYmVscyA9IFtcIjFcIiwgXCIyXCIsIFwiM1wiLCBcIjRcIiwgXCI1XCIsIFwiNlwiLCBcIjdcIiwgXCI4XCIsIFwiOVwiLCBcIjEwXCJdO1xuICAgIGZvciAobGV0IGkgPSAtMTsgaSA8IEJPQVJEQVhFU0xFTkdUSDsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gLTE7IGogPCBCT0FSREFYRVNMRU5HVEg7IGorKykge1xuICAgICAgICBpZiAoaSA9PT0gLTEpIHtcbiAgICAgICAgICBpZiAoaiA9PT0gLTEpIHtcbiAgICAgICAgICAgIGNvbnN0IGludmlzaWJsZVBsYWNlaG9sZGVyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBpbnZpc2libGVQbGFjZWhvbGRlckVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImdhbWVib2FyZC1sYWJlbFwiKTtcbiAgICAgICAgICAgIGludmlzaWJsZVBsYWNlaG9sZGVyRWxlbWVudC5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcbiAgICAgICAgICAgIGdhbWVib2FyZERPTS5hcHBlbmRDaGlsZChpbnZpc2libGVQbGFjZWhvbGRlckVsZW1lbnQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBjb2x1bW5MYWJlbEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgY29sdW1uTGFiZWxFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJjb2x1bW4tbGFiZWxcIik7XG4gICAgICAgICAgICBjb2x1bW5MYWJlbEVsZW1lbnQudGV4dENvbnRlbnQgPSBjb2x1bW5MYWJlbHNbal07XG4gICAgICAgICAgICBnYW1lYm9hcmRET00uYXBwZW5kQ2hpbGQoY29sdW1uTGFiZWxFbGVtZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoaiA9PT0gLTEpIHtcbiAgICAgICAgICBjb25zdCByb3dMYWJlbEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgIHJvd0xhYmVsRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicm93LWxhYmVsXCIpO1xuICAgICAgICAgIHJvd0xhYmVsRWxlbWVudC50ZXh0Q29udGVudCA9IHJvd0xhYmVsc1tpXTtcbiAgICAgICAgICBnYW1lYm9hcmRET00uYXBwZW5kQ2hpbGQocm93TGFiZWxFbGVtZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBjZWxsRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgY2VsbEVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YVJvd1wiLCBpKTtcbiAgICAgICAgICBjZWxsRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhQ29sdW1uXCIsIGopO1xuICAgICAgICAgIGNlbGxFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJnYW1lYm9hcmQtY2VsbFwiKTtcbiAgICAgICAgICBjZWxsRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgXCJkcmFnb3ZlclwiLFxuICAgICAgICAgICAgRXZlbnRMaXN0ZW5lckNvbnRyb2xsZXIuZHJhZ092ZXIuYmluZChldmVudClcbiAgICAgICAgICApO1xuICAgICAgICAgIGNlbGxFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICBcImRyb3BcIixcbiAgICAgICAgICAgIEV2ZW50TGlzdGVuZXJDb250cm9sbGVyLmluc2VydERyYWdnZWRJbWFnZS5iaW5kKGV2ZW50KVxuICAgICAgICAgICk7XG4gICAgICAgICAgLy8gc29tZSBjbGljayBldmVudCBsaXN0ZW5lciB3aGVyZSBhdHRhY2sgaXMgbWFkZSBPUiBwcmlvciB0byB0aGF0LCBwbGFjaW5nIHNoaXAgb24gdGhhdCBjZWxsXG4gICAgICAgICAgZ2FtZWJvYXJkRE9NLmFwcGVuZENoaWxkKGNlbGxFbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgY29uc3QgaW5pdGlhbGl6ZUJvYXJkRE9NID0gKCkgPT4ge1xuICAgIGNvbnN0IGh1bWFuUGxheWVyR2FtZWJvYXJkRE9NID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wbGF5ZXItYm9hcmRcIik7XG4gICAgY29uc3Qgb3Bwb25lbnRHYW1lYm9hcmRET00gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm9wcG9uZW50LWJvYXJkXCIpO1xuICAgIGNyZWF0ZUJvYXJkQ2VsbHMoaHVtYW5QbGF5ZXJHYW1lYm9hcmRET00pO1xuICAgIGNyZWF0ZUJvYXJkQ2VsbHMob3Bwb25lbnRHYW1lYm9hcmRET00pO1xuICB9O1xuICBjb25zdCByb3RhdGVTaGlwSW1hZ2VMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgY29uc3Qgc2hpcFBsYWNlbWVudEVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zaGlwLXBsYWNlbWVudFwiKTtcbiAgICBzaGlwUGxhY2VtZW50RWxlbWVudHMuZm9yRWFjaCgocGFpcikgPT4ge1xuICAgICAgY29uc3QgaW1nID0gcGFpci5jaGlsZHJlblswXTtcbiAgICAgIGNvbnN0IGJ0biA9IHBhaXIuY2hpbGRyZW5bMl07XG4gICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgXCJjbGlja1wiLFxuICAgICAgICBFdmVudExpc3RlbmVyQ29udHJvbGxlci5yb3RhdGVTaGlwSW1hZ2UuYmluZChldmVudCwgaW1nKVxuICAgICAgKTtcbiAgICB9KTtcbiAgfTtcbiAgY29uc3QgYWRkU2hpcFBsYWNlbWVudERyYWcgPSAoKSA9PiB7XG4gICAgY29uc3Qgc2hpcEltYWdlcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zaGlwLXBpZWNlXCIpKTtcbiAgICBzaGlwSW1hZ2VzLmZvckVhY2goKHNoaXApID0+IHtcbiAgICAgIHNoaXAuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdzdGFydFwiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgRXZlbnRMaXN0ZW5lckNvbnRyb2xsZXIuZ2V0RHJhZ2dlZEltYWdlKGV2ZW50KTtcbiAgICAgICAgRXZlbnRMaXN0ZW5lckNvbnRyb2xsZXIucm90YXRlRHJhZ2dlZEltYWdlKGV2ZW50KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuICByZXR1cm4ge1xuICAgIGluaXRpYWxpemVCb2FyZERPTSxcbiAgICByb3RhdGVTaGlwSW1hZ2VMaXN0ZW5lcnMsXG4gICAgYWRkU2hpcFBsYWNlbWVudERyYWcsXG4gIH07XG59KSgpO1xuXG5leHBvcnQgeyBET01Db250cm9sbGVyIH07XG4iLCJpbXBvcnQgeyBET01Db250cm9sbGVyIH0gZnJvbSBcIi4vRE9NX2NvbnRyb2xsZXJcIjtcblxuRE9NQ29udHJvbGxlci5pbml0aWFsaXplQm9hcmRET00oKTtcblxuRE9NQ29udHJvbGxlci5yb3RhdGVTaGlwSW1hZ2VMaXN0ZW5lcnMoKTtcblxuRE9NQ29udHJvbGxlci5hZGRTaGlwUGxhY2VtZW50RHJhZygpO1xuIl0sIm5hbWVzIjpbIkV2ZW50TGlzdGVuZXJDb250cm9sbGVyIiwiaW5zZXJ0RHJhZ2dlZEltYWdlIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsImRhdGFTdHJpbmciLCJkYXRhVHJhbnNmZXIiLCJnZXREYXRhIiwiZGF0YU9iamVjdCIsIkpTT04iLCJwYXJzZSIsImRyYWdnZWRJbWFnZSIsImltYWdlIiwic2hpcExlbmd0aCIsInRhcmdldCIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJnZXREcmFnZ2VkSW1hZ2UiLCJzcmMiLCJkYXRhc2V0Iiwic3RyaW5naWZ5Iiwic2V0RGF0YSIsImRyYWdPdmVyIiwicm90YXRlU2hpcEltYWdlIiwiaW1hZ2VDbGFzc2VzIiwiQXJyYXkiLCJmcm9tIiwiaW5jbHVkZXMiLCJyZW1vdmUiLCJyb3RhdGVEcmFnZ2VkSW1hZ2UiLCJjbG9uZWRJbWFnZUVsZW1lbnQiLCJjbG9uZU5vZGUiLCJ0ZW1wRGl2IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xvbmVkSW1hZ2VFbGVtZW50Q2xhc3NlcyIsInJvdGF0ZVBlckxlbmd0aCIsImFwcGVuZENoaWxkIiwiYm9keSIsInNldERyYWdJbWFnZSIsInNldFRpbWVvdXQiLCJyZW1vdmVDaGlsZCIsIkRPTUNvbnRyb2xsZXIiLCJjcmVhdGVCb2FyZENlbGxzIiwiZ2FtZWJvYXJkRE9NIiwiY29sdW1uTGFiZWxzIiwicm93TGFiZWxzIiwiaSIsImoiLCJpbnZpc2libGVQbGFjZWhvbGRlckVsZW1lbnQiLCJzdHlsZSIsInZpc2liaWxpdHkiLCJjb2x1bW5MYWJlbEVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsInJvd0xhYmVsRWxlbWVudCIsImNlbGxFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImJpbmQiLCJpbml0aWFsaXplQm9hcmRET00iLCJodW1hblBsYXllckdhbWVib2FyZERPTSIsInF1ZXJ5U2VsZWN0b3IiLCJvcHBvbmVudEdhbWVib2FyZERPTSIsInJvdGF0ZVNoaXBJbWFnZUxpc3RlbmVycyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwicGFpciIsImltZyIsImNoaWxkcmVuIiwiYWRkU2hpcFBsYWNlbWVudERyYWciLCJzaGlwIl0sInNvdXJjZVJvb3QiOiIifQ==