(()=>{"use strict";const e=e=>{const a="human"!==e&&("computer"===e||void 0),s=(()=>{const e=(()=>{const e=[];for(let t=0;t<10;t++){e.push([]);for(let a=0;a<10;a++)e[t].push(void 0)}return e})(),t=[],a=[],s=[],r=[],o=[];let i=!1;const n=t=>e[t[0]][t[1]];return{getCoordinates:n,getPlacedShips:()=>t,getReceivedMissedShots:()=>a,getReceivedHitShots:()=>s,getSentMissedShots:()=>r,getSentHitShots:()=>o,isAllShipsSunk:()=>i,placeShip:(a,s)=>{for(const t of s)e[t[0]][t[1]]=a;t.push(a)},receiveAttack:e=>{const r=n(e);return void 0!==r?(r.hit(),t.every((e=>e.isSunk()))&&(i=!0),s.push(e),"hit"):(a.push(e),"miss")},addSentMissedShot:e=>{r.push(e)},addSentHitShot:e=>{o.push(e)}}})();let r;const o=(e,t)=>{const a=(e=>{const t=e;let a=0,s=!1;return{getShipLength:()=>t,getShipHits:()=>a,isSunk:()=>s,hit:()=>{if(s)return"That ship has already been sunk!";a+=1,a===t&&(s=!0)}}})(e);s.placeShip(a,t)},i=e=>{const a=r.getGameboard(),o=r.receiveAttack(e);if("hit"===o){if(s.addSentHitShot(e),a.isAllShipsSunk())return void t.endGame(r)}else"miss"===o&&s.addSentMissedShot(e);r.isComputer()&&r.sendComputerAttack()},n=e=>{let t=[];do{t=[];const a=d(),s=c(a,e);t.push(a),t=t.concat(s)}while(t.length<e);return t},d=()=>{const e=[void 0,void 0];do{e[0]=l(),e[1]=l()}while(void 0!==s.getCoordinates(e));return e},c=(e,t)=>{const a=[];if(p(e,t,"up")){const s=[];for(let a=1;a<t;a++)s.push([e[0]-a,e[1]]);a.push(s)}if(p(e,t,"right")){const s=[];for(let a=1;a<t;a++)s.push([e[0],e[1]+a]);a.push(s)}if(p(e,t,"down")){const s=[];for(let a=1;a<t;a++)s.push([e[0]+a,e[1]]);a.push(s)}if(p(e,t,"left")){const s=[];for(let a=1;a<t;a++)s.push([e[0],e[1]-a]);a.push(s)}return 0===a.length?a:a[Math.floor(Math.random()*a.length)]},l=()=>Math.floor(10*Math.random()),h=(e,t)=>e.some((e=>e[0]===t[0]&&e[1]===t[1])),p=(e,t,a)=>{switch(a){case"up":if(e[0]-(t-1)<0)return!1;for(let a=1;a<t;a++)if(void 0!==s.getCoordinates([e[0]-a,e[1]]))return!1;return!0;case"right":if(e[1]+(t-1)>9)return!1;for(let a=1;a<t;a++)if(void 0!==s.getCoordinates([e[0],e[1]+a]))return!1;return!0;case"down":if(e[0]+(t-1)>9)return!1;for(let a=1;a<t;a++)if(void 0!==s.getCoordinates([e[0]+a,e[1]]))return!1;return!0;case"left":if(e[1]-(t-1)<0)return!1;for(let a=1;a<t;a++)if(void 0!==s.getCoordinates([e[0],e[1]-a]))return!1;return!0}};return{isComputer:()=>a,getGameboard:()=>s,getOpposingPlayer:()=>r,setOpposingPlayer:e=>{r=e},addShipToGameboard:o,sendAttack:i,initializeComputerGameboard:()=>{if(!a)return;const e=[5,4,3,3,2];for(const t of e){const e=n(t);o(t,e)}},sendComputerAttack:()=>{if(!a)return;const e=(()=>{const e=r.getGameboard().getReceivedMissedShots(),t=r.getGameboard().getReceivedHitShots(),a=[void 0,void 0];do{a[0]=l(),a[1]=l()}while(h(e,a)||h(t,a));return a})();i(e)},receiveAttack:e=>s.receiveAttack(e),checkIfValidEmptyCoordinates:p}},t=(()=>{const t=[];let a,s=!0;return{getPlayers:()=>t,isInProgress:()=>s,getWinner:()=>a,createGame:()=>{const a=e("human");t.push(a);const s=e("computer");t.push(s),a.setOpposingPlayer(s),s.setOpposingPlayer(a),s.initializeComputerGameboard()},endGame:e=>{s=!1,(e=>{const t=e.getOpposingPlayer();a=t})(e)},resetGame:()=>{t.length=0,s=!0,a=void 0}}})(),a=(()=>{const e=a=>{a.preventDefault();const s=a.target;if(Array.from(s.classList).includes("contains-ship-image"))return;const r=a.dataTransfer.getData("image");((e,a)=>{const s=[Number(e.dataset.row),Number(e.dataset.column)],r=Number(a.shipLength);return a.horizontal?t.getPlayers()[0].checkIfValidEmptyCoordinates(s,r,"right")?(console.log("fits"),!0):(console.log("nope"),!1):a.vertical?t.getPlayers()[0].checkIfValidEmptyCoordinates(s,r,"down")?(console.log("fits"),!0):(console.log("nope"),!1):void 0})(s,JSON.parse(r))&&(s.classList.add("contains-ship-image"),s.classList.add("ship-image-5"),s.classList.add("ship-image-5-3"),s.removeEventListener("drop",e))};return{getDraggedImage:e=>{const t={image:e.target.src,shipLength:e.target.dataset.shipLength,horizontal:!1,vertical:!1};Array.from(e.target.classList).includes("horizontal")?t.horizontal=!0:Array.from(e.target.classList).includes("vertical")&&(t.vertical=!0),console.log(t);const a=JSON.stringify(t);e.dataTransfer.setData("image",a)},dragOver:()=>{event.preventDefault()},insertDraggedImage:e,rotateShipImage:e=>{const t=Array.from(e.classList);t.includes("horizontal")?(e.classList.remove("horizontal"),e.classList.add("vertical")):t.includes("vertical")&&(e.classList.remove("vertical"),e.classList.add("horizontal"))},rotateDraggedImage:e=>{const t=e.target.cloneNode(),a=document.createElement("div");a.classList.add("temp-rotate"),((e,t)=>{const a=Array.from(t.classList);a.includes("horizontal")?e.classList.add("temp-rotate-horizontal"):a.includes("vertical")&&(e.classList.add("temp-rotate-vertical"),"5"===t.dataset.shipLength?e.classList.add("temp-rotate-vertical-5"):"4"===t.dataset.shipLength?e.classList.add("temp-rotate-vertical-4"):"3"===t.dataset.shipLength?e.classList.add("temp-rotate-vertical-3"):"2"===t.dataset.shipLength&&e.classList.add("temp-rotate-vertical-2"))})(a,t),a.appendChild(t),document.body.appendChild(a),e.dataTransfer.setDragImage(a,0,0),setTimeout((()=>{document.body.removeChild(a)}),0)}}})(),s=(()=>{const e=e=>{const t=["A","B","C","D","E","F","G","H","I","J"],s=["1","2","3","4","5","6","7","8","9","10"];for(let r=-1;r<10;r++)for(let o=-1;o<10;o++)if(-1===r)if(-1===o){const t=document.createElement("div");t.classList.add("gameboard-label"),t.style.visibility="hidden",e.appendChild(t)}else{const a=document.createElement("div");a.classList.add("column-label"),a.textContent=t[o],e.appendChild(a)}else if(-1===o){const t=document.createElement("div");t.classList.add("row-label"),t.textContent=s[r],e.appendChild(t)}else{const t=document.createElement("div");t.setAttribute("data-row",r),t.setAttribute("data-column",o),t.classList.add("gameboard-cell"),t.addEventListener("dragover",a.dragOver.bind(event)),t.addEventListener("drop",a.insertDraggedImage.bind(event)),e.appendChild(t)}};return{initializeBoardDOM:()=>{const t=document.querySelector(".player-board"),a=document.querySelector(".opponent-board");e(t),e(a)},rotateShipImageListeners:()=>{document.querySelectorAll(".ship-placement").forEach((e=>{const t=e.children[0];e.children[2].addEventListener("click",a.rotateShipImage.bind(event,t))}))},addShipPlacementDrag:()=>{Array.from(document.querySelectorAll(".ship-piece")).forEach((e=>{e.addEventListener("dragstart",(e=>{a.getDraggedImage(e),a.rotateDraggedImage(e)}))}))}}})();t.createGame(),s.initializeBoardDOM(),s.rotateShipImageListeners(),s.addShipPlacementDrag()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFZZSxFQUMzQixLQUFPLENBQ0wsTUFBTUMsRUFBY3BCLFNBQVNDLGNBQWMsT0FDM0NtQixFQUFZQyxhQUFhLFdBQVl4SixHQUNyQ3VKLEVBQVlDLGFBQWEsY0FBZXRKLEdBQ3hDcUosRUFBWXJELFVBQVVrQixJQUFJLGtCQUMxQm1DLEVBQVlFLGlCQUNWLFdBQ0EvRCxFQUF3QmlDLFNBQVMrQixLQUFLOUQsUUFFeEMyRCxFQUFZRSxpQkFDVixPQUNBL0QsRUFBd0JDLG1CQUFtQitELEtBQUs5RCxRQUdsRGtELEVBQWFQLFlBQVlnQixFQUMzQixDQUVKLEVBNEJGLE1BQU8sQ0FDTEksbUJBM0J5QixLQUN6QixNQUFNQyxFQUEwQnpCLFNBQVMwQixjQUFjLGlCQUNqREMsRUFBdUIzQixTQUFTMEIsY0FBYyxtQkFDcERoQixFQUFpQmUsR0FDakJmLEVBQWlCaUIsRUFBcUIsRUF3QnRDQyx5QkF0QitCLEtBQ0Q1QixTQUFTNkIsaUJBQWlCLG1CQUNsQ0MsU0FBU0MsSUFDN0IsTUFBTUMsRUFBTUQsRUFBS0UsU0FBUyxHQUNkRixFQUFLRSxTQUFTLEdBQ3RCWCxpQkFDRixRQUNBL0QsRUFBd0JrQyxnQkFBZ0I4QixLQUFLOUQsTUFBT3VFLEdBQ3JELEdBQ0QsRUFjRkUscUJBWjJCLEtBQ1JyRSxNQUFNQyxLQUFLa0MsU0FBUzZCLGlCQUFpQixnQkFDN0NDLFNBQVM3SSxJQUNsQkEsRUFBS3FJLGlCQUFpQixhQUFjN0QsSUFDbENGLEVBQXdCNEIsZ0JBQWdCMUIsR0FDeENGLEVBQXdCcUMsbUJBQW1CbkMsRUFBTSxHQUNqRCxHQUNGLEVBT0wsRUExRXFCLEdDQ3RCaEQsRUFBU3dDLGFBRVR3RCxFQUFjZSxxQkFFZGYsRUFBY21CLDJCQUVkbkIsRUFBY3lCLHNCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb2Rpbi1iYXR0bGVzaGlwLy4vc3JjL3NoaXAuanMiLCJ3ZWJwYWNrOi8vb2Rpbi1iYXR0bGVzaGlwLy4vc3JjL3BsYXllci5qcyIsIndlYnBhY2s6Ly9vZGluLWJhdHRsZXNoaXAvLi9zcmMvZ2FtZWJvYXJkLmpzIiwid2VicGFjazovL29kaW4tYmF0dGxlc2hpcC8uL3NyYy9nYW1lbG9vcC5qcyIsIndlYnBhY2s6Ly9vZGluLWJhdHRsZXNoaXAvLi9zcmMvZXZlbnRfbGlzdGVuZXJfY29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly9vZGluLWJhdHRsZXNoaXAvLi9zcmMvRE9NX2NvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vb2Rpbi1iYXR0bGVzaGlwLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFNoaXAgPSAoZ2l2ZW5MZW5ndGgpID0+IHtcbiAgY29uc3QgbGVuZ3RoID0gZ2l2ZW5MZW5ndGg7XG4gIGxldCBoaXRzID0gMDtcbiAgbGV0IHN1bmsgPSBmYWxzZTtcbiAgY29uc3QgZ2V0U2hpcExlbmd0aCA9ICgpID0+IGxlbmd0aDtcbiAgY29uc3QgZ2V0U2hpcEhpdHMgPSAoKSA9PiBoaXRzO1xuICBjb25zdCBpc1N1bmsgPSAoKSA9PiBzdW5rO1xuICBjb25zdCBjaGVja0lmU3VuayA9ICgpID0+IHtcbiAgICBpZiAoaGl0cyA9PT0gbGVuZ3RoKSB7XG4gICAgICBzdW5rID0gdHJ1ZTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGhpdCA9ICgpID0+IHtcbiAgICBpZiAoIXN1bmspIHtcbiAgICAgIGhpdHMgKz0gMTtcbiAgICAgIGNoZWNrSWZTdW5rKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBcIlRoYXQgc2hpcCBoYXMgYWxyZWFkeSBiZWVuIHN1bmshXCI7XG4gICAgfVxuICB9O1xuICByZXR1cm4ge1xuICAgIGdldFNoaXBMZW5ndGgsXG4gICAgZ2V0U2hpcEhpdHMsXG4gICAgaXNTdW5rLFxuICAgIGhpdCxcbiAgfTtcbn07XG5cbmV4cG9ydCB7IFNoaXAgfTtcbiIsImltcG9ydCB7IFNoaXAgfSBmcm9tIFwiLi9zaGlwXCI7XG5pbXBvcnQgeyBHYW1lYm9hcmQgfSBmcm9tIFwiLi9nYW1lYm9hcmRcIjtcbmltcG9ydCB7IEdhbWVMb29wIH0gZnJvbSBcIi4vZ2FtZWxvb3BcIjtcblxuY29uc3QgUGxheWVyID0gKHBsYXllclR5cGUpID0+IHtcbiAgY29uc3QgZGV0ZXJtaW5lUGxheWVyVHlwZSA9ICgpID0+IHtcbiAgICBpZiAocGxheWVyVHlwZSA9PT0gXCJodW1hblwiKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChwbGF5ZXJUeXBlID09PSBcImNvbXB1dGVyXCIpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgY29tcHV0ZXJQbGF5ZXIgPSBkZXRlcm1pbmVQbGF5ZXJUeXBlKCk7XG4gIGNvbnN0IHBsYXllckdhbWVib2FyZCA9IEdhbWVib2FyZCgpO1xuICBsZXQgb3Bwb3NpbmdQbGF5ZXI7XG4gIGNvbnN0IGlzQ29tcHV0ZXIgPSAoKSA9PiBjb21wdXRlclBsYXllcjtcbiAgY29uc3QgZ2V0R2FtZWJvYXJkID0gKCkgPT4gcGxheWVyR2FtZWJvYXJkO1xuICBjb25zdCBnZXRPcHBvc2luZ1BsYXllciA9ICgpID0+IG9wcG9zaW5nUGxheWVyO1xuICBjb25zdCBzZXRPcHBvc2luZ1BsYXllciA9IChwbGF5ZXIpID0+IHtcbiAgICBvcHBvc2luZ1BsYXllciA9IHBsYXllcjtcbiAgfTtcbiAgY29uc3QgYWRkU2hpcFRvR2FtZWJvYXJkID0gKHNoaXBMZW5ndGgsIGNvb3JkaW5hdGVzKSA9PiB7XG4gICAgY29uc3Qgc2hpcCA9IFNoaXAoc2hpcExlbmd0aCk7XG4gICAgcGxheWVyR2FtZWJvYXJkLnBsYWNlU2hpcChzaGlwLCBjb29yZGluYXRlcyk7XG4gIH07XG4gIGNvbnN0IHNlbmRBdHRhY2sgPSAoY29vcmRpbmF0ZXMpID0+IHtcbiAgICBjb25zdCBvcHBvc2luZ1BsYXllckdhbWVib2FyZCA9IG9wcG9zaW5nUGxheWVyLmdldEdhbWVib2FyZCgpO1xuICAgIGNvbnN0IGF0dGFja1Jlc3VsdHMgPSBvcHBvc2luZ1BsYXllci5yZWNlaXZlQXR0YWNrKGNvb3JkaW5hdGVzKTtcbiAgICBpZiAoYXR0YWNrUmVzdWx0cyA9PT0gXCJoaXRcIikge1xuICAgICAgcGxheWVyR2FtZWJvYXJkLmFkZFNlbnRIaXRTaG90KGNvb3JkaW5hdGVzKTtcbiAgICAgIGlmIChvcHBvc2luZ1BsYXllckdhbWVib2FyZC5pc0FsbFNoaXBzU3VuaygpKSB7XG4gICAgICAgIEdhbWVMb29wLmVuZEdhbWUob3Bwb3NpbmdQbGF5ZXIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChhdHRhY2tSZXN1bHRzID09PSBcIm1pc3NcIikge1xuICAgICAgcGxheWVyR2FtZWJvYXJkLmFkZFNlbnRNaXNzZWRTaG90KGNvb3JkaW5hdGVzKTtcbiAgICB9XG4gICAgaWYgKG9wcG9zaW5nUGxheWVyLmlzQ29tcHV0ZXIoKSkge1xuICAgICAgb3Bwb3NpbmdQbGF5ZXIuc2VuZENvbXB1dGVyQXR0YWNrKCk7XG4gICAgfVxuICB9O1xuICBjb25zdCBpbml0aWFsaXplQ29tcHV0ZXJHYW1lYm9hcmQgPSAoKSA9PiB7XG4gICAgaWYgKCFjb21wdXRlclBsYXllcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBsZW5ndGhzT2ZTaGlwcyA9IFs1LCA0LCAzLCAzLCAyXTtcbiAgICBmb3IgKGNvbnN0IHNoaXBMZW5ndGggb2YgbGVuZ3Roc09mU2hpcHMpIHtcbiAgICAgIGNvbnN0IHNoaXBDb29yZGluYXRlcyA9IGdlbmVyYXRlQ29tcHV0ZXJTaGlwQ29vcmRpbmF0ZXMoc2hpcExlbmd0aCk7XG4gICAgICBhZGRTaGlwVG9HYW1lYm9hcmQoc2hpcExlbmd0aCwgc2hpcENvb3JkaW5hdGVzKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHNlbmRDb21wdXRlckF0dGFjayA9ICgpID0+IHtcbiAgICBpZiAoIWNvbXB1dGVyUGxheWVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGF0dGFja0Nvb3JkaW5hdGVzID0gZ2VuZXJhdGVBdHRhY2tDb29yZGluYXRlcygpO1xuICAgIHNlbmRBdHRhY2soYXR0YWNrQ29vcmRpbmF0ZXMpO1xuICB9O1xuICBjb25zdCByZWNlaXZlQXR0YWNrID0gKGNvb3JkaW5hdGVzKSA9PiB7XG4gICAgY29uc3QgYXR0YWNrUmVzdWx0cyA9IHBsYXllckdhbWVib2FyZC5yZWNlaXZlQXR0YWNrKGNvb3JkaW5hdGVzKTtcbiAgICByZXR1cm4gYXR0YWNrUmVzdWx0cztcbiAgfTtcbiAgY29uc3QgZ2VuZXJhdGVDb21wdXRlclNoaXBDb29yZGluYXRlcyA9IChzaGlwTGVuZ3RoKSA9PiB7XG4gICAgbGV0IGxpc3RPZkNvb3JkaW5hdGVzID0gW107XG4gICAgZG8ge1xuICAgICAgbGlzdE9mQ29vcmRpbmF0ZXMgPSBbXTtcbiAgICAgIGNvbnN0IHN0YXJ0aW5nQ29vcmRpbmF0ZXMgPSBnZW5lcmF0ZVN0YXJ0aW5nQ29vcmRpbmF0ZXMoKTtcbiAgICAgIGNvbnN0IG5vblN0YXJ0aW5nQ29vcmRpbmF0ZXMgPSBnZW5lcmF0ZU5vblN0YXJ0aW5nQ29vcmRpbmF0ZXMoXG4gICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXMsXG4gICAgICAgIHNoaXBMZW5ndGhcbiAgICAgICk7XG4gICAgICBsaXN0T2ZDb29yZGluYXRlcy5wdXNoKHN0YXJ0aW5nQ29vcmRpbmF0ZXMpO1xuICAgICAgbGlzdE9mQ29vcmRpbmF0ZXMgPSBsaXN0T2ZDb29yZGluYXRlcy5jb25jYXQobm9uU3RhcnRpbmdDb29yZGluYXRlcyk7XG4gICAgfSB3aGlsZSAobGlzdE9mQ29vcmRpbmF0ZXMubGVuZ3RoIDwgc2hpcExlbmd0aCk7XG4gICAgcmV0dXJuIGxpc3RPZkNvb3JkaW5hdGVzO1xuICB9O1xuICBjb25zdCBnZW5lcmF0ZVN0YXJ0aW5nQ29vcmRpbmF0ZXMgPSAoKSA9PiB7XG4gICAgY29uc3Qgc3RhcnRpbmdDb29yZGluYXRlcyA9IFt1bmRlZmluZWQsIHVuZGVmaW5lZF07XG4gICAgZG8ge1xuICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1swXSA9IGdlbmVyYXRlUmFuZG9tQ29vcmRpbmF0ZSgpO1xuICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1sxXSA9IGdlbmVyYXRlUmFuZG9tQ29vcmRpbmF0ZSgpO1xuICAgIH0gd2hpbGUgKHBsYXllckdhbWVib2FyZC5nZXRDb29yZGluYXRlcyhzdGFydGluZ0Nvb3JkaW5hdGVzKSAhPT0gdW5kZWZpbmVkKTtcbiAgICByZXR1cm4gc3RhcnRpbmdDb29yZGluYXRlcztcbiAgfTtcbiAgY29uc3QgZ2VuZXJhdGVOb25TdGFydGluZ0Nvb3JkaW5hdGVzID0gKHN0YXJ0aW5nQ29vcmRpbmF0ZXMsIHNoaXBMZW5ndGgpID0+IHtcbiAgICBjb25zdCBwb3NzaWJsZUNvb3JkaW5hdGVzID0gW107XG4gICAgaWYgKGNoZWNrSWZWYWxpZEVtcHR5Q29vcmRpbmF0ZXMoc3RhcnRpbmdDb29yZGluYXRlcywgc2hpcExlbmd0aCwgXCJ1cFwiKSkge1xuICAgICAgY29uc3QgdXBDb29yZGluYXRlcyA9IFtdO1xuICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBzaGlwTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdXBDb29yZGluYXRlcy5wdXNoKFtcbiAgICAgICAgICBzdGFydGluZ0Nvb3JkaW5hdGVzWzBdIC0gaSxcbiAgICAgICAgICBzdGFydGluZ0Nvb3JkaW5hdGVzWzFdLFxuICAgICAgICBdKTtcbiAgICAgIH1cbiAgICAgIHBvc3NpYmxlQ29vcmRpbmF0ZXMucHVzaCh1cENvb3JkaW5hdGVzKTtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgY2hlY2tJZlZhbGlkRW1wdHlDb29yZGluYXRlcyhzdGFydGluZ0Nvb3JkaW5hdGVzLCBzaGlwTGVuZ3RoLCBcInJpZ2h0XCIpXG4gICAgKSB7XG4gICAgICBjb25zdCByaWdodENvb3JkaW5hdGVzID0gW107XG4gICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHNoaXBMZW5ndGg7IGkrKykge1xuICAgICAgICByaWdodENvb3JkaW5hdGVzLnB1c2goW1xuICAgICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMF0sXG4gICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1sxXSArIGksXG4gICAgICAgIF0pO1xuICAgICAgfVxuICAgICAgcG9zc2libGVDb29yZGluYXRlcy5wdXNoKHJpZ2h0Q29vcmRpbmF0ZXMpO1xuICAgIH1cbiAgICBpZiAoY2hlY2tJZlZhbGlkRW1wdHlDb29yZGluYXRlcyhzdGFydGluZ0Nvb3JkaW5hdGVzLCBzaGlwTGVuZ3RoLCBcImRvd25cIikpIHtcbiAgICAgIGNvbnN0IGRvd25Db29yZGluYXRlcyA9IFtdO1xuICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBzaGlwTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZG93bkNvb3JkaW5hdGVzLnB1c2goW1xuICAgICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMF0gKyBpLFxuICAgICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMV0sXG4gICAgICAgIF0pO1xuICAgICAgfVxuICAgICAgcG9zc2libGVDb29yZGluYXRlcy5wdXNoKGRvd25Db29yZGluYXRlcyk7XG4gICAgfVxuICAgIGlmIChjaGVja0lmVmFsaWRFbXB0eUNvb3JkaW5hdGVzKHN0YXJ0aW5nQ29vcmRpbmF0ZXMsIHNoaXBMZW5ndGgsIFwibGVmdFwiKSkge1xuICAgICAgY29uc3QgbGVmdENvb3JkaW5hdGVzID0gW107XG4gICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHNoaXBMZW5ndGg7IGkrKykge1xuICAgICAgICBsZWZ0Q29vcmRpbmF0ZXMucHVzaChbXG4gICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1swXSxcbiAgICAgICAgICBzdGFydGluZ0Nvb3JkaW5hdGVzWzFdIC0gaSxcbiAgICAgICAgXSk7XG4gICAgICB9XG4gICAgICBwb3NzaWJsZUNvb3JkaW5hdGVzLnB1c2gobGVmdENvb3JkaW5hdGVzKTtcbiAgICB9XG4gICAgaWYgKHBvc3NpYmxlQ29vcmRpbmF0ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gcG9zc2libGVDb29yZGluYXRlcztcbiAgICB9XG4gICAgY29uc3QgcmFuZG9tSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwb3NzaWJsZUNvb3JkaW5hdGVzLmxlbmd0aCk7XG4gICAgcmV0dXJuIHBvc3NpYmxlQ29vcmRpbmF0ZXNbcmFuZG9tSW5kZXhdO1xuICB9O1xuICBjb25zdCBnZW5lcmF0ZVJhbmRvbUNvb3JkaW5hdGUgPSAoKSA9PiB7XG4gICAgY29uc3QgQk9BUkRBWEVTTEVOR1RIID0gMTA7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIEJPQVJEQVhFU0xFTkdUSCk7XG4gIH07XG4gIGNvbnN0IGNoZWNrSWZQcmV2aW91c2x5QXR0YWNrZWQgPSAoXG4gICAgb3Bwb3NpbmdQbGF5ZXJSZWNlaXZlZFNob3RzLFxuICAgIGF0dGFja0Nvb3JkaW5hdGVzXG4gICkgPT5cbiAgICBvcHBvc2luZ1BsYXllclJlY2VpdmVkU2hvdHMuc29tZShcbiAgICAgIChyZWNlaXZlZFNob3QpID0+XG4gICAgICAgIHJlY2VpdmVkU2hvdFswXSA9PT0gYXR0YWNrQ29vcmRpbmF0ZXNbMF0gJiZcbiAgICAgICAgcmVjZWl2ZWRTaG90WzFdID09PSBhdHRhY2tDb29yZGluYXRlc1sxXVxuICAgICk7XG4gIGNvbnN0IGdlbmVyYXRlQXR0YWNrQ29vcmRpbmF0ZXMgPSAoKSA9PiB7XG4gICAgY29uc3QgcmVjZWl2ZWRNaXNzZWRTaG90cyA9IG9wcG9zaW5nUGxheWVyXG4gICAgICAuZ2V0R2FtZWJvYXJkKClcbiAgICAgIC5nZXRSZWNlaXZlZE1pc3NlZFNob3RzKCk7XG4gICAgY29uc3QgcmVjZWl2ZWRIaXRTaG90cyA9IG9wcG9zaW5nUGxheWVyXG4gICAgICAuZ2V0R2FtZWJvYXJkKClcbiAgICAgIC5nZXRSZWNlaXZlZEhpdFNob3RzKCk7XG4gICAgY29uc3QgYXR0YWNrQ29vcmRpbmF0ZXMgPSBbdW5kZWZpbmVkLCB1bmRlZmluZWRdO1xuICAgIGRvIHtcbiAgICAgIGF0dGFja0Nvb3JkaW5hdGVzWzBdID0gZ2VuZXJhdGVSYW5kb21Db29yZGluYXRlKCk7XG4gICAgICBhdHRhY2tDb29yZGluYXRlc1sxXSA9IGdlbmVyYXRlUmFuZG9tQ29vcmRpbmF0ZSgpO1xuICAgIH0gd2hpbGUgKFxuICAgICAgY2hlY2tJZlByZXZpb3VzbHlBdHRhY2tlZChyZWNlaXZlZE1pc3NlZFNob3RzLCBhdHRhY2tDb29yZGluYXRlcykgfHxcbiAgICAgIGNoZWNrSWZQcmV2aW91c2x5QXR0YWNrZWQocmVjZWl2ZWRIaXRTaG90cywgYXR0YWNrQ29vcmRpbmF0ZXMpXG4gICAgKTtcbiAgICByZXR1cm4gYXR0YWNrQ29vcmRpbmF0ZXM7XG4gIH07XG4gIGNvbnN0IGNoZWNrSWZWYWxpZEVtcHR5Q29vcmRpbmF0ZXMgPSAoXG4gICAgc3RhcnRpbmdDb29yZGluYXRlcyxcbiAgICBzaGlwTGVuZ3RoLFxuICAgIGRpcmVjdGlvblxuICApID0+IHtcbiAgICBzd2l0Y2ggKGRpcmVjdGlvbikge1xuICAgICAgY2FzZSBcInVwXCI6XG4gICAgICAgIGlmIChzdGFydGluZ0Nvb3JkaW5hdGVzWzBdIC0gKHNoaXBMZW5ndGggLSAxKSA8IDApIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBzaGlwTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBwbGF5ZXJHYW1lYm9hcmQuZ2V0Q29vcmRpbmF0ZXMoW1xuICAgICAgICAgICAgICBzdGFydGluZ0Nvb3JkaW5hdGVzWzBdIC0gaSxcbiAgICAgICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1sxXSxcbiAgICAgICAgICAgIF0pICE9PSB1bmRlZmluZWRcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICAgIGNhc2UgXCJyaWdodFwiOlxuICAgICAgICBpZiAoc3RhcnRpbmdDb29yZGluYXRlc1sxXSArIChzaGlwTGVuZ3RoIC0gMSkgPiA5KSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgc2hpcExlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgcGxheWVyR2FtZWJvYXJkLmdldENvb3JkaW5hdGVzKFtcbiAgICAgICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1swXSxcbiAgICAgICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1sxXSArIGksXG4gICAgICAgICAgICBdKSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICBjYXNlIFwiZG93blwiOlxuICAgICAgICBpZiAoc3RhcnRpbmdDb29yZGluYXRlc1swXSArIChzaGlwTGVuZ3RoIC0gMSkgPiA5KSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgc2hpcExlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgcGxheWVyR2FtZWJvYXJkLmdldENvb3JkaW5hdGVzKFtcbiAgICAgICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1swXSArIGksXG4gICAgICAgICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMV0sXG4gICAgICAgICAgICBdKSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICBjYXNlIFwibGVmdFwiOlxuICAgICAgICBpZiAoc3RhcnRpbmdDb29yZGluYXRlc1sxXSAtIChzaGlwTGVuZ3RoIC0gMSkgPCAwKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgc2hpcExlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgcGxheWVyR2FtZWJvYXJkLmdldENvb3JkaW5hdGVzKFtcbiAgICAgICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1swXSxcbiAgICAgICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1sxXSAtIGksXG4gICAgICAgICAgICBdKSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVhaztcbiAgICB9XG4gIH07XG4gIHJldHVybiB7XG4gICAgaXNDb21wdXRlcixcbiAgICBnZXRHYW1lYm9hcmQsXG4gICAgZ2V0T3Bwb3NpbmdQbGF5ZXIsXG4gICAgc2V0T3Bwb3NpbmdQbGF5ZXIsXG4gICAgYWRkU2hpcFRvR2FtZWJvYXJkLFxuICAgIHNlbmRBdHRhY2ssXG4gICAgaW5pdGlhbGl6ZUNvbXB1dGVyR2FtZWJvYXJkLFxuICAgIHNlbmRDb21wdXRlckF0dGFjayxcbiAgICByZWNlaXZlQXR0YWNrLFxuICAgIGNoZWNrSWZWYWxpZEVtcHR5Q29vcmRpbmF0ZXMsXG4gIH07XG59O1xuXG5leHBvcnQgeyBQbGF5ZXIgfTtcbiIsImNvbnN0IEdhbWVib2FyZCA9ICgpID0+IHtcbiAgY29uc3QgY3JlYXRlQm9hcmQgPSAoKSA9PiB7XG4gICAgY29uc3QgYm9hcmQgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpKyspIHtcbiAgICAgIGJvYXJkLnB1c2goW10pO1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAxMDsgaisrKSB7XG4gICAgICAgIGJvYXJkW2ldLnB1c2godW5kZWZpbmVkKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGJvYXJkO1xuICB9O1xuICBjb25zdCBib2FyZCA9IGNyZWF0ZUJvYXJkKCk7XG4gIGNvbnN0IHBsYWNlZFNoaXBzID0gW107XG4gIGNvbnN0IHJlY2VpdmVkTWlzc2VkU2hvdHMgPSBbXTtcbiAgY29uc3QgcmVjZWl2ZWRIaXRTaG90cyA9IFtdO1xuICBjb25zdCBzZW50TWlzc2VkU2hvdHMgPSBbXTtcbiAgY29uc3Qgc2VudEhpdFNob3RzID0gW107XG4gIGxldCBhbGxTaGlwc1N1bmsgPSBmYWxzZTtcbiAgY29uc3QgZ2V0Q29vcmRpbmF0ZXMgPSAoY29vcmRpbmF0ZXMpID0+IGJvYXJkW2Nvb3JkaW5hdGVzWzBdXVtjb29yZGluYXRlc1sxXV07XG4gIGNvbnN0IGdldFBsYWNlZFNoaXBzID0gKCkgPT4gcGxhY2VkU2hpcHM7XG4gIGNvbnN0IGdldFJlY2VpdmVkTWlzc2VkU2hvdHMgPSAoKSA9PiByZWNlaXZlZE1pc3NlZFNob3RzO1xuICBjb25zdCBnZXRSZWNlaXZlZEhpdFNob3RzID0gKCkgPT4gcmVjZWl2ZWRIaXRTaG90cztcbiAgY29uc3QgZ2V0U2VudE1pc3NlZFNob3RzID0gKCkgPT4gc2VudE1pc3NlZFNob3RzO1xuICBjb25zdCBnZXRTZW50SGl0U2hvdHMgPSAoKSA9PiBzZW50SGl0U2hvdHM7XG4gIGNvbnN0IGlzQWxsU2hpcHNTdW5rID0gKCkgPT4gYWxsU2hpcHNTdW5rO1xuICBjb25zdCBwbGFjZVNoaXAgPSAoc2hpcCwgY29vcmRpbmF0ZXNMaXN0KSA9PiB7XG4gICAgZm9yIChjb25zdCBjb29yZGluYXRlcyBvZiBjb29yZGluYXRlc0xpc3QpIHtcbiAgICAgIGJvYXJkW2Nvb3JkaW5hdGVzWzBdXVtjb29yZGluYXRlc1sxXV0gPSBzaGlwO1xuICAgIH1cbiAgICBwbGFjZWRTaGlwcy5wdXNoKHNoaXApO1xuICB9O1xuICBjb25zdCBjaGVja0FsbFNoaXBzU3VuayA9ICgpID0+IHtcbiAgICBpZiAocGxhY2VkU2hpcHMuZXZlcnkoKHNoaXApID0+IHNoaXAuaXNTdW5rKCkpKSB7XG4gICAgICBhbGxTaGlwc1N1bmsgPSB0cnVlO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgcmVjZWl2ZUF0dGFjayA9IChjb29yZGluYXRlcykgPT4ge1xuICAgIGNvbnN0IGVudGl0eUF0Q29vcmRpbmF0ZXMgPSBnZXRDb29yZGluYXRlcyhjb29yZGluYXRlcyk7XG4gICAgaWYgKGVudGl0eUF0Q29vcmRpbmF0ZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgZW50aXR5QXRDb29yZGluYXRlcy5oaXQoKTtcbiAgICAgIGNoZWNrQWxsU2hpcHNTdW5rKCk7XG4gICAgICByZWNlaXZlZEhpdFNob3RzLnB1c2goY29vcmRpbmF0ZXMpO1xuICAgICAgcmV0dXJuIFwiaGl0XCI7XG4gICAgfVxuICAgIHJlY2VpdmVkTWlzc2VkU2hvdHMucHVzaChjb29yZGluYXRlcyk7XG4gICAgcmV0dXJuIFwibWlzc1wiO1xuICB9O1xuICBjb25zdCBhZGRTZW50TWlzc2VkU2hvdCA9IChjb29yZGluYXRlcykgPT4ge1xuICAgIHNlbnRNaXNzZWRTaG90cy5wdXNoKGNvb3JkaW5hdGVzKTtcbiAgfTtcbiAgY29uc3QgYWRkU2VudEhpdFNob3QgPSAoY29vcmRpbmF0ZXMpID0+IHtcbiAgICBzZW50SGl0U2hvdHMucHVzaChjb29yZGluYXRlcyk7XG4gIH07XG4gIHJldHVybiB7XG4gICAgZ2V0Q29vcmRpbmF0ZXMsXG4gICAgZ2V0UGxhY2VkU2hpcHMsXG4gICAgZ2V0UmVjZWl2ZWRNaXNzZWRTaG90cyxcbiAgICBnZXRSZWNlaXZlZEhpdFNob3RzLFxuICAgIGdldFNlbnRNaXNzZWRTaG90cyxcbiAgICBnZXRTZW50SGl0U2hvdHMsXG4gICAgaXNBbGxTaGlwc1N1bmssXG4gICAgcGxhY2VTaGlwLFxuICAgIHJlY2VpdmVBdHRhY2ssXG4gICAgYWRkU2VudE1pc3NlZFNob3QsXG4gICAgYWRkU2VudEhpdFNob3QsXG4gIH07XG59O1xuXG5leHBvcnQgeyBHYW1lYm9hcmQgfTtcbiIsImltcG9ydCB7IFNoaXAgfSBmcm9tIFwiLi9zaGlwXCI7XG5pbXBvcnQgeyBHYW1lYm9hcmQgfSBmcm9tIFwiLi9nYW1lYm9hcmRcIjtcbmltcG9ydCB7IFBsYXllciB9IGZyb20gXCIuL3BsYXllclwiO1xuXG5jb25zdCBHYW1lTG9vcCA9ICgoKSA9PiB7XG4gIGNvbnN0IHBsYXllcnMgPSBbXTtcbiAgbGV0IGluUHJvZ3Jlc3MgPSB0cnVlO1xuICBsZXQgd2lubmVyO1xuICBjb25zdCBnZXRQbGF5ZXJzID0gKCkgPT4gcGxheWVycztcbiAgY29uc3QgaXNJblByb2dyZXNzID0gKCkgPT4gaW5Qcm9ncmVzcztcbiAgY29uc3QgZ2V0V2lubmVyID0gKCkgPT4gd2lubmVyO1xuICBjb25zdCBzZXRXaW5uZXIgPSAobG9zZXJQbGF5ZXIpID0+IHtcbiAgICBjb25zdCB3aW5uZXJQbGF5ZXIgPSBsb3NlclBsYXllci5nZXRPcHBvc2luZ1BsYXllcigpO1xuICAgIHdpbm5lciA9IHdpbm5lclBsYXllcjtcbiAgfTtcbiAgY29uc3QgY3JlYXRlR2FtZSA9ICgpID0+IHtcbiAgICBjb25zdCBodW1hblBsYXllciA9IFBsYXllcihcImh1bWFuXCIpO1xuICAgIHBsYXllcnMucHVzaChodW1hblBsYXllcik7XG4gICAgY29uc3QgY29tcHV0ZXJQbGF5ZXIgPSBQbGF5ZXIoXCJjb21wdXRlclwiKTtcbiAgICBwbGF5ZXJzLnB1c2goY29tcHV0ZXJQbGF5ZXIpO1xuICAgIGh1bWFuUGxheWVyLnNldE9wcG9zaW5nUGxheWVyKGNvbXB1dGVyUGxheWVyKTtcbiAgICBjb21wdXRlclBsYXllci5zZXRPcHBvc2luZ1BsYXllcihodW1hblBsYXllcik7XG4gICAgY29tcHV0ZXJQbGF5ZXIuaW5pdGlhbGl6ZUNvbXB1dGVyR2FtZWJvYXJkKCk7XG4gIH07XG4gIGNvbnN0IGVuZEdhbWUgPSAobG9zZXJQbGF5ZXIpID0+IHtcbiAgICBpblByb2dyZXNzID0gZmFsc2U7XG4gICAgc2V0V2lubmVyKGxvc2VyUGxheWVyKTtcbiAgfTtcbiAgY29uc3QgcmVzZXRHYW1lID0gKCkgPT4ge1xuICAgIHBsYXllcnMubGVuZ3RoID0gMDtcbiAgICBpblByb2dyZXNzID0gdHJ1ZTtcbiAgICB3aW5uZXIgPSB1bmRlZmluZWQ7XG4gIH07XG4gIHJldHVybiB7XG4gICAgZ2V0UGxheWVycyxcbiAgICBpc0luUHJvZ3Jlc3MsXG4gICAgZ2V0V2lubmVyLFxuICAgIGNyZWF0ZUdhbWUsXG4gICAgZW5kR2FtZSxcbiAgICByZXNldEdhbWUsXG4gIH07XG59KSgpO1xuXG5leHBvcnQgeyBHYW1lTG9vcCB9O1xuIiwiaW1wb3J0IHsgR2FtZUxvb3AgfSBmcm9tIFwiLi9nYW1lbG9vcFwiO1xuXG5jb25zdCBFdmVudExpc3RlbmVyQ29udHJvbGxlciA9ICgoKSA9PiB7XG4gIGNvbnN0IGdldERyYWdnZWRJbWFnZSA9IChldmVudCkgPT4ge1xuICAgIGNvbnN0IGRhdGFPYmplY3QgPSB7XG4gICAgICBpbWFnZTogZXZlbnQudGFyZ2V0LnNyYyxcbiAgICAgIHNoaXBMZW5ndGg6IGV2ZW50LnRhcmdldC5kYXRhc2V0LnNoaXBMZW5ndGgsXG4gICAgICBob3Jpem9udGFsOiBmYWxzZSxcbiAgICAgIHZlcnRpY2FsOiBmYWxzZSxcbiAgICB9O1xuICAgIGlmIChBcnJheS5mcm9tKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QpLmluY2x1ZGVzKFwiaG9yaXpvbnRhbFwiKSkge1xuICAgICAgZGF0YU9iamVjdC5ob3Jpem9udGFsID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKEFycmF5LmZyb20oZXZlbnQudGFyZ2V0LmNsYXNzTGlzdCkuaW5jbHVkZXMoXCJ2ZXJ0aWNhbFwiKSkge1xuICAgICAgZGF0YU9iamVjdC52ZXJ0aWNhbCA9IHRydWU7XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKGRhdGFPYmplY3QpO1xuICAgIGNvbnN0IGRhdGFTdHJpbmcgPSBKU09OLnN0cmluZ2lmeShkYXRhT2JqZWN0KTtcbiAgICBldmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YShcImltYWdlXCIsIGRhdGFTdHJpbmcpO1xuICB9O1xuICBjb25zdCBkcmFnT3ZlciA9ICgpID0+IHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICB9O1xuICBjb25zdCBpc1ZhbGlkR2FtZWJvYXJkQ2VsbCA9ICh0YXJnZXRDZWxsLCBkYXRhT2JqZWN0KSA9PiB7XG4gICAgY29uc3QgY2VsbENvb3JkaW5hdGVzID0gW1xuICAgICAgTnVtYmVyKHRhcmdldENlbGwuZGF0YXNldC5yb3cpLFxuICAgICAgTnVtYmVyKHRhcmdldENlbGwuZGF0YXNldC5jb2x1bW4pLFxuICAgIF07XG4gICAgY29uc3QgbGVuZ3RoID0gTnVtYmVyKGRhdGFPYmplY3Quc2hpcExlbmd0aCk7XG4gICAgaWYgKGRhdGFPYmplY3QuaG9yaXpvbnRhbCkge1xuICAgICAgaWYgKFxuICAgICAgICBHYW1lTG9vcC5nZXRQbGF5ZXJzKClbMF0uY2hlY2tJZlZhbGlkRW1wdHlDb29yZGluYXRlcyhcbiAgICAgICAgICBjZWxsQ29vcmRpbmF0ZXMsXG4gICAgICAgICAgbGVuZ3RoLFxuICAgICAgICAgIFwicmlnaHRcIlxuICAgICAgICApXG4gICAgICApIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJmaXRzXCIpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKFwibm9wZVwiKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGRhdGFPYmplY3QudmVydGljYWwpIHtcbiAgICAgIGlmIChcbiAgICAgICAgR2FtZUxvb3AuZ2V0UGxheWVycygpWzBdLmNoZWNrSWZWYWxpZEVtcHR5Q29vcmRpbmF0ZXMoXG4gICAgICAgICAgY2VsbENvb3JkaW5hdGVzLFxuICAgICAgICAgIGxlbmd0aCxcbiAgICAgICAgICBcImRvd25cIlxuICAgICAgICApXG4gICAgICApIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJmaXRzXCIpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKFwibm9wZVwiKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGluc2VydERyYWdnZWRJbWFnZSA9IChldmVudCkgPT4ge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgdGFyZ2V0Q2VsbCA9IGV2ZW50LnRhcmdldDtcbiAgICBpZiAoQXJyYXkuZnJvbSh0YXJnZXRDZWxsLmNsYXNzTGlzdCkuaW5jbHVkZXMoXCJjb250YWlucy1zaGlwLWltYWdlXCIpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGRhdGFTdHJpbmcgPSBldmVudC5kYXRhVHJhbnNmZXIuZ2V0RGF0YShcImltYWdlXCIpO1xuICAgIGNvbnN0IGRhdGFPYmplY3QgPSBKU09OLnBhcnNlKGRhdGFTdHJpbmcpO1xuICAgIGlmICghaXNWYWxpZEdhbWVib2FyZENlbGwodGFyZ2V0Q2VsbCwgZGF0YU9iamVjdCkpIHtcbiAgICAgIC8vIHByb2JhYmx5IG1ha2Ugc29tZSBET00gZXJyb3IgbWVzc2FnZSBhcHBlYXJcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGFyZ2V0Q2VsbC5jbGFzc0xpc3QuYWRkKFwiY29udGFpbnMtc2hpcC1pbWFnZVwiKTtcbiAgICB0YXJnZXRDZWxsLmNsYXNzTGlzdC5hZGQoXCJzaGlwLWltYWdlLTVcIik7XG4gICAgdGFyZ2V0Q2VsbC5jbGFzc0xpc3QuYWRkKFwic2hpcC1pbWFnZS01LTNcIik7XG4gICAgdGFyZ2V0Q2VsbC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZHJvcFwiLCBpbnNlcnREcmFnZ2VkSW1hZ2UpO1xuICB9O1xuICBjb25zdCByb3RhdGVTaGlwSW1hZ2UgPSAoaW1hZ2UpID0+IHtcbiAgICBjb25zdCBpbWFnZUNsYXNzZXMgPSBBcnJheS5mcm9tKGltYWdlLmNsYXNzTGlzdCk7XG4gICAgaWYgKGltYWdlQ2xhc3Nlcy5pbmNsdWRlcyhcImhvcml6b250YWxcIikpIHtcbiAgICAgIGltYWdlLmNsYXNzTGlzdC5yZW1vdmUoXCJob3Jpem9udGFsXCIpO1xuICAgICAgaW1hZ2UuY2xhc3NMaXN0LmFkZChcInZlcnRpY2FsXCIpO1xuICAgIH0gZWxzZSBpZiAoaW1hZ2VDbGFzc2VzLmluY2x1ZGVzKFwidmVydGljYWxcIikpIHtcbiAgICAgIGltYWdlLmNsYXNzTGlzdC5yZW1vdmUoXCJ2ZXJ0aWNhbFwiKTtcbiAgICAgIGltYWdlLmNsYXNzTGlzdC5hZGQoXCJob3Jpem9udGFsXCIpO1xuICAgIH1cbiAgfTtcbiAgY29uc3Qgcm90YXRlUGVyTGVuZ3RoID0gKHRlbXBEaXYsIGNsb25lZEltYWdlRWxlbWVudCkgPT4ge1xuICAgIGNvbnN0IGNsb25lZEltYWdlRWxlbWVudENsYXNzZXMgPSBBcnJheS5mcm9tKGNsb25lZEltYWdlRWxlbWVudC5jbGFzc0xpc3QpO1xuICAgIGlmIChjbG9uZWRJbWFnZUVsZW1lbnRDbGFzc2VzLmluY2x1ZGVzKFwiaG9yaXpvbnRhbFwiKSkge1xuICAgICAgdGVtcERpdi5jbGFzc0xpc3QuYWRkKFwidGVtcC1yb3RhdGUtaG9yaXpvbnRhbFwiKTtcbiAgICB9IGVsc2UgaWYgKGNsb25lZEltYWdlRWxlbWVudENsYXNzZXMuaW5jbHVkZXMoXCJ2ZXJ0aWNhbFwiKSkge1xuICAgICAgdGVtcERpdi5jbGFzc0xpc3QuYWRkKFwidGVtcC1yb3RhdGUtdmVydGljYWxcIik7XG4gICAgICBpZiAoY2xvbmVkSW1hZ2VFbGVtZW50LmRhdGFzZXQuc2hpcExlbmd0aCA9PT0gXCI1XCIpIHtcbiAgICAgICAgdGVtcERpdi5jbGFzc0xpc3QuYWRkKFwidGVtcC1yb3RhdGUtdmVydGljYWwtNVwiKTtcbiAgICAgIH0gZWxzZSBpZiAoY2xvbmVkSW1hZ2VFbGVtZW50LmRhdGFzZXQuc2hpcExlbmd0aCA9PT0gXCI0XCIpIHtcbiAgICAgICAgdGVtcERpdi5jbGFzc0xpc3QuYWRkKFwidGVtcC1yb3RhdGUtdmVydGljYWwtNFwiKTtcbiAgICAgIH0gZWxzZSBpZiAoY2xvbmVkSW1hZ2VFbGVtZW50LmRhdGFzZXQuc2hpcExlbmd0aCA9PT0gXCIzXCIpIHtcbiAgICAgICAgdGVtcERpdi5jbGFzc0xpc3QuYWRkKFwidGVtcC1yb3RhdGUtdmVydGljYWwtM1wiKTtcbiAgICAgIH0gZWxzZSBpZiAoY2xvbmVkSW1hZ2VFbGVtZW50LmRhdGFzZXQuc2hpcExlbmd0aCA9PT0gXCIyXCIpIHtcbiAgICAgICAgdGVtcERpdi5jbGFzc0xpc3QuYWRkKFwidGVtcC1yb3RhdGUtdmVydGljYWwtMlwiKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGNvbnN0IHJvdGF0ZURyYWdnZWRJbWFnZSA9IChldmVudCkgPT4ge1xuICAgIGNvbnN0IGltYWdlRWxlbWVudCA9IGV2ZW50LnRhcmdldDtcbiAgICBjb25zdCBjbG9uZWRJbWFnZUVsZW1lbnQgPSBpbWFnZUVsZW1lbnQuY2xvbmVOb2RlKCk7XG4gICAgY29uc3QgdGVtcERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGVtcERpdi5jbGFzc0xpc3QuYWRkKFwidGVtcC1yb3RhdGVcIik7XG4gICAgcm90YXRlUGVyTGVuZ3RoKHRlbXBEaXYsIGNsb25lZEltYWdlRWxlbWVudCk7XG4gICAgdGVtcERpdi5hcHBlbmRDaGlsZChjbG9uZWRJbWFnZUVsZW1lbnQpO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGVtcERpdik7XG4gICAgZXZlbnQuZGF0YVRyYW5zZmVyLnNldERyYWdJbWFnZSh0ZW1wRGl2LCAwLCAwKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGVtcERpdik7XG4gICAgfSwgMCk7XG4gIH07XG4gIHJldHVybiB7XG4gICAgZ2V0RHJhZ2dlZEltYWdlLFxuICAgIGRyYWdPdmVyLFxuICAgIGluc2VydERyYWdnZWRJbWFnZSxcbiAgICByb3RhdGVTaGlwSW1hZ2UsXG4gICAgcm90YXRlRHJhZ2dlZEltYWdlLFxuICB9O1xufSkoKTtcblxuZXhwb3J0IHsgRXZlbnRMaXN0ZW5lckNvbnRyb2xsZXIgfTtcbiIsImltcG9ydCB7IEV2ZW50TGlzdGVuZXJDb250cm9sbGVyIH0gZnJvbSBcIi4vZXZlbnRfbGlzdGVuZXJfY29udHJvbGxlclwiO1xuXG5jb25zdCBET01Db250cm9sbGVyID0gKCgpID0+IHtcbiAgY29uc3QgY3JlYXRlQm9hcmRDZWxscyA9IChnYW1lYm9hcmRET00pID0+IHtcbiAgICBjb25zdCBCT0FSREFYRVNMRU5HVEggPSAxMDtcbiAgICBjb25zdCBjb2x1bW5MYWJlbHMgPSBbXCJBXCIsIFwiQlwiLCBcIkNcIiwgXCJEXCIsIFwiRVwiLCBcIkZcIiwgXCJHXCIsIFwiSFwiLCBcIklcIiwgXCJKXCJdO1xuICAgIGNvbnN0IHJvd0xhYmVscyA9IFtcIjFcIiwgXCIyXCIsIFwiM1wiLCBcIjRcIiwgXCI1XCIsIFwiNlwiLCBcIjdcIiwgXCI4XCIsIFwiOVwiLCBcIjEwXCJdO1xuICAgIGZvciAobGV0IGkgPSAtMTsgaSA8IEJPQVJEQVhFU0xFTkdUSDsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gLTE7IGogPCBCT0FSREFYRVNMRU5HVEg7IGorKykge1xuICAgICAgICBpZiAoaSA9PT0gLTEpIHtcbiAgICAgICAgICBpZiAoaiA9PT0gLTEpIHtcbiAgICAgICAgICAgIGNvbnN0IGludmlzaWJsZVBsYWNlaG9sZGVyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBpbnZpc2libGVQbGFjZWhvbGRlckVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImdhbWVib2FyZC1sYWJlbFwiKTtcbiAgICAgICAgICAgIGludmlzaWJsZVBsYWNlaG9sZGVyRWxlbWVudC5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcbiAgICAgICAgICAgIGdhbWVib2FyZERPTS5hcHBlbmRDaGlsZChpbnZpc2libGVQbGFjZWhvbGRlckVsZW1lbnQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBjb2x1bW5MYWJlbEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgY29sdW1uTGFiZWxFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJjb2x1bW4tbGFiZWxcIik7XG4gICAgICAgICAgICBjb2x1bW5MYWJlbEVsZW1lbnQudGV4dENvbnRlbnQgPSBjb2x1bW5MYWJlbHNbal07XG4gICAgICAgICAgICBnYW1lYm9hcmRET00uYXBwZW5kQ2hpbGQoY29sdW1uTGFiZWxFbGVtZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoaiA9PT0gLTEpIHtcbiAgICAgICAgICBjb25zdCByb3dMYWJlbEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgIHJvd0xhYmVsRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicm93LWxhYmVsXCIpO1xuICAgICAgICAgIHJvd0xhYmVsRWxlbWVudC50ZXh0Q29udGVudCA9IHJvd0xhYmVsc1tpXTtcbiAgICAgICAgICBnYW1lYm9hcmRET00uYXBwZW5kQ2hpbGQocm93TGFiZWxFbGVtZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBjZWxsRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgY2VsbEVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1yb3dcIiwgaSk7XG4gICAgICAgICAgY2VsbEVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1jb2x1bW5cIiwgaik7XG4gICAgICAgICAgY2VsbEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImdhbWVib2FyZC1jZWxsXCIpO1xuICAgICAgICAgIGNlbGxFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICBcImRyYWdvdmVyXCIsXG4gICAgICAgICAgICBFdmVudExpc3RlbmVyQ29udHJvbGxlci5kcmFnT3Zlci5iaW5kKGV2ZW50KVxuICAgICAgICAgICk7XG4gICAgICAgICAgY2VsbEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAgIFwiZHJvcFwiLFxuICAgICAgICAgICAgRXZlbnRMaXN0ZW5lckNvbnRyb2xsZXIuaW5zZXJ0RHJhZ2dlZEltYWdlLmJpbmQoZXZlbnQpXG4gICAgICAgICAgKTtcbiAgICAgICAgICAvLyBzb21lIGNsaWNrIGV2ZW50IGxpc3RlbmVyIHdoZXJlIGF0dGFjayBpcyBtYWRlIE9SIHByaW9yIHRvIHRoYXQsIHBsYWNpbmcgc2hpcCBvbiB0aGF0IGNlbGxcbiAgICAgICAgICBnYW1lYm9hcmRET00uYXBwZW5kQ2hpbGQoY2VsbEVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuICBjb25zdCBpbml0aWFsaXplQm9hcmRET00gPSAoKSA9PiB7XG4gICAgY29uc3QgaHVtYW5QbGF5ZXJHYW1lYm9hcmRET00gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBsYXllci1ib2FyZFwiKTtcbiAgICBjb25zdCBvcHBvbmVudEdhbWVib2FyZERPTSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIub3Bwb25lbnQtYm9hcmRcIik7XG4gICAgY3JlYXRlQm9hcmRDZWxscyhodW1hblBsYXllckdhbWVib2FyZERPTSk7XG4gICAgY3JlYXRlQm9hcmRDZWxscyhvcHBvbmVudEdhbWVib2FyZERPTSk7XG4gIH07XG4gIGNvbnN0IHJvdGF0ZVNoaXBJbWFnZUxpc3RlbmVycyA9ICgpID0+IHtcbiAgICBjb25zdCBzaGlwUGxhY2VtZW50RWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNoaXAtcGxhY2VtZW50XCIpO1xuICAgIHNoaXBQbGFjZW1lbnRFbGVtZW50cy5mb3JFYWNoKChwYWlyKSA9PiB7XG4gICAgICBjb25zdCBpbWcgPSBwYWlyLmNoaWxkcmVuWzBdO1xuICAgICAgY29uc3QgYnRuID0gcGFpci5jaGlsZHJlblsyXTtcbiAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICBcImNsaWNrXCIsXG4gICAgICAgIEV2ZW50TGlzdGVuZXJDb250cm9sbGVyLnJvdGF0ZVNoaXBJbWFnZS5iaW5kKGV2ZW50LCBpbWcpXG4gICAgICApO1xuICAgIH0pO1xuICB9O1xuICBjb25zdCBhZGRTaGlwUGxhY2VtZW50RHJhZyA9ICgpID0+IHtcbiAgICBjb25zdCBzaGlwSW1hZ2VzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNoaXAtcGllY2VcIikpO1xuICAgIHNoaXBJbWFnZXMuZm9yRWFjaCgoc2hpcCkgPT4ge1xuICAgICAgc2hpcC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ3N0YXJ0XCIsIChldmVudCkgPT4ge1xuICAgICAgICBFdmVudExpc3RlbmVyQ29udHJvbGxlci5nZXREcmFnZ2VkSW1hZ2UoZXZlbnQpO1xuICAgICAgICBFdmVudExpc3RlbmVyQ29udHJvbGxlci5yb3RhdGVEcmFnZ2VkSW1hZ2UoZXZlbnQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG4gIHJldHVybiB7XG4gICAgaW5pdGlhbGl6ZUJvYXJkRE9NLFxuICAgIHJvdGF0ZVNoaXBJbWFnZUxpc3RlbmVycyxcbiAgICBhZGRTaGlwUGxhY2VtZW50RHJhZyxcbiAgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IERPTUNvbnRyb2xsZXIgfTtcbiIsImltcG9ydCB7IEdhbWVMb29wIH0gZnJvbSBcIi4vZ2FtZWxvb3BcIjtcbmltcG9ydCB7IERPTUNvbnRyb2xsZXIgfSBmcm9tIFwiLi9ET01fY29udHJvbGxlclwiO1xuXG5HYW1lTG9vcC5jcmVhdGVHYW1lKCk7XG5cbkRPTUNvbnRyb2xsZXIuaW5pdGlhbGl6ZUJvYXJkRE9NKCk7XG5cbkRPTUNvbnRyb2xsZXIucm90YXRlU2hpcEltYWdlTGlzdGVuZXJzKCk7XG5cbkRPTUNvbnRyb2xsZXIuYWRkU2hpcFBsYWNlbWVudERyYWcoKTtcbiJdLCJuYW1lcyI6WyJQbGF5ZXIiLCJwbGF5ZXJUeXBlIiwiY29tcHV0ZXJQbGF5ZXIiLCJwbGF5ZXJHYW1lYm9hcmQiLCJib2FyZCIsImkiLCJwdXNoIiwiaiIsInVuZGVmaW5lZCIsImNyZWF0ZUJvYXJkIiwicGxhY2VkU2hpcHMiLCJyZWNlaXZlZE1pc3NlZFNob3RzIiwicmVjZWl2ZWRIaXRTaG90cyIsInNlbnRNaXNzZWRTaG90cyIsInNlbnRIaXRTaG90cyIsImFsbFNoaXBzU3VuayIsImdldENvb3JkaW5hdGVzIiwiY29vcmRpbmF0ZXMiLCJnZXRQbGFjZWRTaGlwcyIsImdldFJlY2VpdmVkTWlzc2VkU2hvdHMiLCJnZXRSZWNlaXZlZEhpdFNob3RzIiwiZ2V0U2VudE1pc3NlZFNob3RzIiwiZ2V0U2VudEhpdFNob3RzIiwiaXNBbGxTaGlwc1N1bmsiLCJwbGFjZVNoaXAiLCJzaGlwIiwiY29vcmRpbmF0ZXNMaXN0IiwicmVjZWl2ZUF0dGFjayIsImVudGl0eUF0Q29vcmRpbmF0ZXMiLCJoaXQiLCJldmVyeSIsImlzU3VuayIsImFkZFNlbnRNaXNzZWRTaG90IiwiYWRkU2VudEhpdFNob3QiLCJHYW1lYm9hcmQiLCJvcHBvc2luZ1BsYXllciIsImFkZFNoaXBUb0dhbWVib2FyZCIsInNoaXBMZW5ndGgiLCJnaXZlbkxlbmd0aCIsImxlbmd0aCIsImhpdHMiLCJzdW5rIiwiZ2V0U2hpcExlbmd0aCIsImdldFNoaXBIaXRzIiwiU2hpcCIsInNlbmRBdHRhY2siLCJvcHBvc2luZ1BsYXllckdhbWVib2FyZCIsImdldEdhbWVib2FyZCIsImF0dGFja1Jlc3VsdHMiLCJHYW1lTG9vcCIsImVuZEdhbWUiLCJpc0NvbXB1dGVyIiwic2VuZENvbXB1dGVyQXR0YWNrIiwiZ2VuZXJhdGVDb21wdXRlclNoaXBDb29yZGluYXRlcyIsImxpc3RPZkNvb3JkaW5hdGVzIiwic3RhcnRpbmdDb29yZGluYXRlcyIsImdlbmVyYXRlU3RhcnRpbmdDb29yZGluYXRlcyIsIm5vblN0YXJ0aW5nQ29vcmRpbmF0ZXMiLCJnZW5lcmF0ZU5vblN0YXJ0aW5nQ29vcmRpbmF0ZXMiLCJjb25jYXQiLCJnZW5lcmF0ZVJhbmRvbUNvb3JkaW5hdGUiLCJwb3NzaWJsZUNvb3JkaW5hdGVzIiwiY2hlY2tJZlZhbGlkRW1wdHlDb29yZGluYXRlcyIsInVwQ29vcmRpbmF0ZXMiLCJyaWdodENvb3JkaW5hdGVzIiwiZG93bkNvb3JkaW5hdGVzIiwibGVmdENvb3JkaW5hdGVzIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiY2hlY2tJZlByZXZpb3VzbHlBdHRhY2tlZCIsIm9wcG9zaW5nUGxheWVyUmVjZWl2ZWRTaG90cyIsImF0dGFja0Nvb3JkaW5hdGVzIiwic29tZSIsInJlY2VpdmVkU2hvdCIsImRpcmVjdGlvbiIsImdldE9wcG9zaW5nUGxheWVyIiwic2V0T3Bwb3NpbmdQbGF5ZXIiLCJwbGF5ZXIiLCJpbml0aWFsaXplQ29tcHV0ZXJHYW1lYm9hcmQiLCJsZW5ndGhzT2ZTaGlwcyIsInNoaXBDb29yZGluYXRlcyIsImdlbmVyYXRlQXR0YWNrQ29vcmRpbmF0ZXMiLCJwbGF5ZXJzIiwid2lubmVyIiwiaW5Qcm9ncmVzcyIsImdldFBsYXllcnMiLCJpc0luUHJvZ3Jlc3MiLCJnZXRXaW5uZXIiLCJjcmVhdGVHYW1lIiwiaHVtYW5QbGF5ZXIiLCJsb3NlclBsYXllciIsIndpbm5lclBsYXllciIsInNldFdpbm5lciIsInJlc2V0R2FtZSIsIkV2ZW50TGlzdGVuZXJDb250cm9sbGVyIiwiaW5zZXJ0RHJhZ2dlZEltYWdlIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInRhcmdldENlbGwiLCJ0YXJnZXQiLCJBcnJheSIsImZyb20iLCJjbGFzc0xpc3QiLCJpbmNsdWRlcyIsImRhdGFTdHJpbmciLCJkYXRhVHJhbnNmZXIiLCJnZXREYXRhIiwiZGF0YU9iamVjdCIsImNlbGxDb29yZGluYXRlcyIsIk51bWJlciIsImRhdGFzZXQiLCJyb3ciLCJjb2x1bW4iLCJob3Jpem9udGFsIiwiY29uc29sZSIsImxvZyIsInZlcnRpY2FsIiwiaXNWYWxpZEdhbWVib2FyZENlbGwiLCJKU09OIiwicGFyc2UiLCJhZGQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZ2V0RHJhZ2dlZEltYWdlIiwiaW1hZ2UiLCJzcmMiLCJzdHJpbmdpZnkiLCJzZXREYXRhIiwiZHJhZ092ZXIiLCJyb3RhdGVTaGlwSW1hZ2UiLCJpbWFnZUNsYXNzZXMiLCJyZW1vdmUiLCJyb3RhdGVEcmFnZ2VkSW1hZ2UiLCJjbG9uZWRJbWFnZUVsZW1lbnQiLCJjbG9uZU5vZGUiLCJ0ZW1wRGl2IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xvbmVkSW1hZ2VFbGVtZW50Q2xhc3NlcyIsInJvdGF0ZVBlckxlbmd0aCIsImFwcGVuZENoaWxkIiwiYm9keSIsInNldERyYWdJbWFnZSIsInNldFRpbWVvdXQiLCJyZW1vdmVDaGlsZCIsIkRPTUNvbnRyb2xsZXIiLCJjcmVhdGVCb2FyZENlbGxzIiwiZ2FtZWJvYXJkRE9NIiwiY29sdW1uTGFiZWxzIiwicm93TGFiZWxzIiwiaW52aXNpYmxlUGxhY2Vob2xkZXJFbGVtZW50Iiwic3R5bGUiLCJ2aXNpYmlsaXR5IiwiY29sdW1uTGFiZWxFbGVtZW50IiwidGV4dENvbnRlbnQiLCJyb3dMYWJlbEVsZW1lbnQiLCJjZWxsRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJiaW5kIiwiaW5pdGlhbGl6ZUJvYXJkRE9NIiwiaHVtYW5QbGF5ZXJHYW1lYm9hcmRET00iLCJxdWVyeVNlbGVjdG9yIiwib3Bwb25lbnRHYW1lYm9hcmRET00iLCJyb3RhdGVTaGlwSW1hZ2VMaXN0ZW5lcnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsInBhaXIiLCJpbWciLCJjaGlsZHJlbiIsImFkZFNoaXBQbGFjZW1lbnREcmFnIl0sInNvdXJjZVJvb3QiOiIifQ==