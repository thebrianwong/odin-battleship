(()=>{"use strict";const e=e=>{const s="human"!==e&&("computer"===e||void 0),a=(()=>{const e=(()=>{const e=[];for(let t=0;t<10;t++){e.push([]);for(let s=0;s<10;s++)e[t].push(void 0)}return e})(),t=[],s=[],a=[],r=[],o=[];let i=!1;const n=t=>e[t[0]][t[1]];return{getCoordinates:n,getPlacedShips:()=>t,getReceivedMissedShots:()=>s,getReceivedHitShots:()=>a,getSentMissedShots:()=>r,getSentHitShots:()=>o,isAllShipsSunk:()=>i,placeShip:(s,a)=>{for(const t of a)e[t[0]][t[1]]=s;t.push(s)},receiveAttack:e=>{const r=n(e);return void 0!==r?(r.hit(),t.every((e=>e.isSunk()))&&(i=!0),a.push(e),"hit"):(s.push(e),"miss")},addSentMissedShot:e=>{r.push(e)},addSentHitShot:e=>{o.push(e)}}})();let r;const o=(e,t)=>{const s=(e=>{const t=e;let s=0,a=!1;return{getShipLength:()=>t,getShipHits:()=>s,isSunk:()=>a,hit:()=>{if(a)return"That ship has already been sunk!";s+=1,s===t&&(a=!0)}}})(e);a.placeShip(s,t)},i=e=>{const s=r.getGameboard(),o=r.receiveAttack(e);if("hit"===o){if(a.addSentHitShot(e),s.isAllShipsSunk())return void t.endGame(r)}else"miss"===o&&a.addSentMissedShot(e);r.isComputer()&&r.sendComputerAttack()},n=e=>{let t=[];do{t=[];const s=d(),a=c(s,e);t.push(s),t=t.concat(a)}while(t.length<e);return t},d=()=>{const e=[void 0,void 0];do{e[0]=l(),e[1]=l()}while(void 0!==a.getCoordinates(e));return e},c=(e,t)=>{const s=[];if(p(e,t,"up")){const a=[];for(let s=1;s<t;s++)a.push([e[0]-s,e[1]]);s.push(a)}if(p(e,t,"right")){const a=[];for(let s=1;s<t;s++)a.push([e[0],e[1]+s]);s.push(a)}if(p(e,t,"down")){const a=[];for(let s=1;s<t;s++)a.push([e[0]+s,e[1]]);s.push(a)}if(p(e,t,"left")){const a=[];for(let s=1;s<t;s++)a.push([e[0],e[1]-s]);s.push(a)}return 0===s.length?s:s[Math.floor(Math.random()*s.length)]},l=()=>Math.floor(10*Math.random()),h=(e,t)=>e.some((e=>e[0]===t[0]&&e[1]===t[1])),p=(e,t,s)=>{switch(s){case"up":if(e[0]-(t-1)<0)return!1;for(let s=1;s<t;s++)if(void 0!==a.getCoordinates([e[0]-s,e[1]]))return!1;return!0;case"right":if(e[1]+(t-1)>9)return!1;for(let s=1;s<t;s++)if(void 0!==a.getCoordinates([e[0],e[1]+s]))return!1;return!0;case"down":if(e[0]+(t-1)>9)return!1;for(let s=1;s<t;s++)if(void 0!==a.getCoordinates([e[0]+s,e[1]]))return!1;return!0;case"left":if(e[1]-(t-1)<0)return!1;for(let s=1;s<t;s++)if(void 0!==a.getCoordinates([e[0],e[1]-s]))return!1;return!0}};return{isComputer:()=>s,getGameboard:()=>a,getOpposingPlayer:()=>r,setOpposingPlayer:e=>{r=e},addShipToGameboard:o,sendAttack:i,initializeComputerGameboard:()=>{if(!s)return;const e=[5,4,3,3,2];for(const t of e){const e=n(t);o(t,e)}},sendComputerAttack:()=>{if(!s)return;const e=(()=>{const e=r.getGameboard().getReceivedMissedShots(),t=r.getGameboard().getReceivedHitShots(),s=[void 0,void 0];do{s[0]=l(),s[1]=l()}while(h(e,s)||h(t,s));return s})();i(e)},receiveAttack:e=>a.receiveAttack(e),checkIfValidEmptyCoordinates:p}},t=(()=>{const t=[];let s,a=!0;return{getPlayers:()=>t,isInProgress:()=>a,getWinner:()=>s,createGame:()=>{const s=e("human");t.push(s);const a=e("computer");t.push(a),s.setOpposingPlayer(a),a.setOpposingPlayer(s),a.initializeComputerGameboard()},endGame:e=>{a=!1,(e=>{const t=e.getOpposingPlayer();s=t})(e)},resetGame:()=>{t.length=0,a=!0,s=void 0}}})(),s=(()=>{const e=e=>{const t=["A","B","C","D","E","F","G","H","I","J"],r=["1","2","3","4","5","6","7","8","9","10"];for(let o=-1;o<10;o++)for(let i=-1;i<10;i++)if(-1===o)if(-1===i){const t=document.createElement("div");t.classList.add("gameboard-label"),t.style.visibility="hidden",e.appendChild(t)}else{const s=document.createElement("div");s.classList.add("column-label"),s.textContent=t[i],e.appendChild(s)}else if(-1===i){const t=document.createElement("div");t.classList.add("row-label"),t.textContent=r[o],e.appendChild(t)}else{const t=document.createElement("div");t.setAttribute("data-row",o),t.setAttribute("data-column",i),t.classList.add("gameboard-cell"),t.addEventListener("dragover",(e=>{s(e)})),t.addEventListener("drop",(e=>{a(e)})),e.appendChild(t)}},s=()=>{event.preventDefault()},a=e=>{e.preventDefault();const s=e.target;if(Array.from(s.classList).includes("contains-ship-image"))return;const r=e.dataTransfer.getData("image");((e,s)=>{const a=[Number(e.dataset.row),Number(e.dataset.column)],r=Number(s.shipLength);return s.horizontal?t.getPlayers()[0].checkIfValidEmptyCoordinates(a,r,"right")?(console.log("fits"),!0):(console.log("nope"),!1):s.vertical?t.getPlayers()[0].checkIfValidEmptyCoordinates(a,r,"down")?(console.log("fits"),!0):(console.log("nope"),!1):void 0})(s,JSON.parse(r))&&(s.classList.add("contains-ship-image"),s.classList.add("ship-image"),s.classList.add("ship-image-5"),s.classList.add("ship-image-5-2"),s.removeEventListener("drop",a))};return{initializeBoardDOM:()=>{const t=document.querySelector(".player-board"),s=document.querySelector(".opponent-board");e(t),e(s)},insertDraggedImage:a,rotateShipImage:e=>{const t=Array.from(e.classList);t.includes("horizontal")?(e.classList.remove("horizontal"),e.classList.add("vertical")):t.includes("vertical")&&(e.classList.remove("vertical"),e.classList.add("horizontal"))},rotateDraggedImage:e=>{const t=e.target.cloneNode(),s=document.createElement("div");s.classList.add("temp-rotate"),((e,t)=>{const s=Array.from(t.classList);s.includes("horizontal")?e.classList.add("temp-rotate-horizontal"):s.includes("vertical")&&(e.classList.add("temp-rotate-vertical"),"5"===t.dataset.shipLength?e.classList.add("temp-rotate-vertical-5"):"4"===t.dataset.shipLength?e.classList.add("temp-rotate-vertical-4"):"3"===t.dataset.shipLength?e.classList.add("temp-rotate-vertical-3"):"2"===t.dataset.shipLength&&e.classList.add("temp-rotate-vertical-2"))})(s,t),s.appendChild(t),document.body.appendChild(s),e.dataTransfer.setDragImage(s,0,0),setTimeout((()=>{document.body.removeChild(s)}),0)},getDraggedImage:e=>{const t={image:e.target.src,shipLength:e.target.dataset.shipLength,horizontal:!1,vertical:!1};Array.from(e.target.classList).includes("horizontal")?t.horizontal=!0:Array.from(e.target.classList).includes("vertical")&&(t.vertical=!0),console.log(t);const s=JSON.stringify(t);e.dataTransfer.setData("image",s)},dragOver:s}})(),a=()=>{document.querySelectorAll(".ship-placement").forEach((e=>{const t=e.children[0];e.children[2].addEventListener("click",(()=>{s.rotateShipImage(t)}))}))},r=()=>{Array.from(document.querySelectorAll(".ship-piece")).forEach((e=>{e.addEventListener("dragstart",(e=>{s.getDraggedImage(e),s.rotateDraggedImage(e)}))}))};t.createGame(),s.initializeBoardDOM(),a(),r()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0FDakMsRUFBRSxFQU9MTyxnQkEzSHVCNUMsSUFDdkIsTUFBTVksRUFBYSxDQUNqQm1CLE1BQU8vQixFQUFNSyxPQUFPd0MsSUFDcEIxSCxXQUFZNkUsRUFBTUssT0FBT1UsUUFBUTVGLFdBQ2pDK0YsWUFBWSxFQUNaRyxVQUFVLEdBRVJmLE1BQU1DLEtBQUtQLEVBQU1LLE9BQU9oQixXQUFXbUIsU0FBUyxjQUM5Q0ksRUFBV00sWUFBYSxFQUNmWixNQUFNQyxLQUFLUCxFQUFNSyxPQUFPaEIsV0FBV21CLFNBQVMsY0FDckRJLEVBQVdTLFVBQVcsR0FFeEJGLFFBQVFDLElBQUlSLEdBQ1osTUFBTUgsRUFBYWMsS0FBS3VCLFVBQVVsQyxHQUNsQ1osRUFBTVUsYUFBYXFDLFFBQVEsUUFBU3RDLEVBQVcsRUE4Ry9DUixXQUVILEVBdktxQixHQ0FoQitDLEVBQzZCLEtBQ0Q3RCxTQUFTOEQsaUJBQWlCLG1CQUNsQ0MsU0FBU0MsSUFDN0IsTUFBTUMsRUFBTUQsRUFBTUUsU0FBUyxHQUNmRixFQUFNRSxTQUFTLEdBQ3ZCdEQsaUJBQWlCLFNBQVMsS0FDNUJsQixFQUFjaUQsZ0JBQWdCc0IsRUFBSSxHQUNsQyxHQUNGLEVBVEFKLEVBV3lCLEtBQ1IxQyxNQUFNQyxLQUFLcEIsU0FBUzhELGlCQUFpQixnQkFDN0NDLFNBQVMzSSxJQUNsQkEsRUFBS3dGLGlCQUFpQixhQUFjQyxJQUNsQ25CLEVBQWMrRCxnQkFBZ0I1QyxHQUM5Qm5CLEVBQWNxRCxtQkFBbUJsQyxFQUFNLEdBQ3ZDLEdBQ0YsRUNoQk5qRSxFQUFTd0MsYUFFVE0sRUFBYzZDLHFCQUVkc0IsSUFFQUEsRyIsInNvdXJjZXMiOlsid2VicGFjazovL29kaW4tYmF0dGxlc2hpcC8uL3NyYy9zaGlwLmpzIiwid2VicGFjazovL29kaW4tYmF0dGxlc2hpcC8uL3NyYy9wbGF5ZXIuanMiLCJ3ZWJwYWNrOi8vb2Rpbi1iYXR0bGVzaGlwLy4vc3JjL2dhbWVib2FyZC5qcyIsIndlYnBhY2s6Ly9vZGluLWJhdHRsZXNoaXAvLi9zcmMvZ2FtZWxvb3AuanMiLCJ3ZWJwYWNrOi8vb2Rpbi1iYXR0bGVzaGlwLy4vc3JjL0RPTV9jb250cm9sbGVyLmpzIiwid2VicGFjazovL29kaW4tYmF0dGxlc2hpcC8uL3NyYy9ldmVudF9saXN0ZW5lcl9jb250cm9sbGVyLmpzIiwid2VicGFjazovL29kaW4tYmF0dGxlc2hpcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBTaGlwID0gKGdpdmVuTGVuZ3RoKSA9PiB7XG4gIGNvbnN0IGxlbmd0aCA9IGdpdmVuTGVuZ3RoO1xuICBsZXQgaGl0cyA9IDA7XG4gIGxldCBzdW5rID0gZmFsc2U7XG4gIGNvbnN0IGdldFNoaXBMZW5ndGggPSAoKSA9PiBsZW5ndGg7XG4gIGNvbnN0IGdldFNoaXBIaXRzID0gKCkgPT4gaGl0cztcbiAgY29uc3QgaXNTdW5rID0gKCkgPT4gc3VuaztcbiAgY29uc3QgY2hlY2tJZlN1bmsgPSAoKSA9PiB7XG4gICAgaWYgKGhpdHMgPT09IGxlbmd0aCkge1xuICAgICAgc3VuayA9IHRydWU7XG4gICAgfVxuICB9O1xuICBjb25zdCBoaXQgPSAoKSA9PiB7XG4gICAgaWYgKCFzdW5rKSB7XG4gICAgICBoaXRzICs9IDE7XG4gICAgICBjaGVja0lmU3VuaygpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gXCJUaGF0IHNoaXAgaGFzIGFscmVhZHkgYmVlbiBzdW5rIVwiO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIHtcbiAgICBnZXRTaGlwTGVuZ3RoLFxuICAgIGdldFNoaXBIaXRzLFxuICAgIGlzU3VuayxcbiAgICBoaXQsXG4gIH07XG59O1xuXG5leHBvcnQgeyBTaGlwIH07XG4iLCJpbXBvcnQgeyBTaGlwIH0gZnJvbSBcIi4vc2hpcFwiO1xuaW1wb3J0IHsgR2FtZWJvYXJkIH0gZnJvbSBcIi4vZ2FtZWJvYXJkXCI7XG5pbXBvcnQgeyBHYW1lTG9vcCB9IGZyb20gXCIuL2dhbWVsb29wXCI7XG5cbmNvbnN0IFBsYXllciA9IChwbGF5ZXJUeXBlKSA9PiB7XG4gIGNvbnN0IGRldGVybWluZVBsYXllclR5cGUgPSAoKSA9PiB7XG4gICAgaWYgKHBsYXllclR5cGUgPT09IFwiaHVtYW5cIikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAocGxheWVyVHlwZSA9PT0gXCJjb21wdXRlclwiKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGNvbXB1dGVyUGxheWVyID0gZGV0ZXJtaW5lUGxheWVyVHlwZSgpO1xuICBjb25zdCBwbGF5ZXJHYW1lYm9hcmQgPSBHYW1lYm9hcmQoKTtcbiAgbGV0IG9wcG9zaW5nUGxheWVyO1xuICBjb25zdCBpc0NvbXB1dGVyID0gKCkgPT4gY29tcHV0ZXJQbGF5ZXI7XG4gIGNvbnN0IGdldEdhbWVib2FyZCA9ICgpID0+IHBsYXllckdhbWVib2FyZDtcbiAgY29uc3QgZ2V0T3Bwb3NpbmdQbGF5ZXIgPSAoKSA9PiBvcHBvc2luZ1BsYXllcjtcbiAgY29uc3Qgc2V0T3Bwb3NpbmdQbGF5ZXIgPSAocGxheWVyKSA9PiB7XG4gICAgb3Bwb3NpbmdQbGF5ZXIgPSBwbGF5ZXI7XG4gIH07XG4gIGNvbnN0IGFkZFNoaXBUb0dhbWVib2FyZCA9IChzaGlwTGVuZ3RoLCBjb29yZGluYXRlcykgPT4ge1xuICAgIGNvbnN0IHNoaXAgPSBTaGlwKHNoaXBMZW5ndGgpO1xuICAgIHBsYXllckdhbWVib2FyZC5wbGFjZVNoaXAoc2hpcCwgY29vcmRpbmF0ZXMpO1xuICB9O1xuICBjb25zdCBzZW5kQXR0YWNrID0gKGNvb3JkaW5hdGVzKSA9PiB7XG4gICAgY29uc3Qgb3Bwb3NpbmdQbGF5ZXJHYW1lYm9hcmQgPSBvcHBvc2luZ1BsYXllci5nZXRHYW1lYm9hcmQoKTtcbiAgICBjb25zdCBhdHRhY2tSZXN1bHRzID0gb3Bwb3NpbmdQbGF5ZXIucmVjZWl2ZUF0dGFjayhjb29yZGluYXRlcyk7XG4gICAgaWYgKGF0dGFja1Jlc3VsdHMgPT09IFwiaGl0XCIpIHtcbiAgICAgIHBsYXllckdhbWVib2FyZC5hZGRTZW50SGl0U2hvdChjb29yZGluYXRlcyk7XG4gICAgICBpZiAob3Bwb3NpbmdQbGF5ZXJHYW1lYm9hcmQuaXNBbGxTaGlwc1N1bmsoKSkge1xuICAgICAgICBHYW1lTG9vcC5lbmRHYW1lKG9wcG9zaW5nUGxheWVyKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoYXR0YWNrUmVzdWx0cyA9PT0gXCJtaXNzXCIpIHtcbiAgICAgIHBsYXllckdhbWVib2FyZC5hZGRTZW50TWlzc2VkU2hvdChjb29yZGluYXRlcyk7XG4gICAgfVxuICAgIGlmIChvcHBvc2luZ1BsYXllci5pc0NvbXB1dGVyKCkpIHtcbiAgICAgIG9wcG9zaW5nUGxheWVyLnNlbmRDb21wdXRlckF0dGFjaygpO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgaW5pdGlhbGl6ZUNvbXB1dGVyR2FtZWJvYXJkID0gKCkgPT4ge1xuICAgIGlmICghY29tcHV0ZXJQbGF5ZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgbGVuZ3Roc09mU2hpcHMgPSBbNSwgNCwgMywgMywgMl07XG4gICAgZm9yIChjb25zdCBzaGlwTGVuZ3RoIG9mIGxlbmd0aHNPZlNoaXBzKSB7XG4gICAgICBjb25zdCBzaGlwQ29vcmRpbmF0ZXMgPSBnZW5lcmF0ZUNvbXB1dGVyU2hpcENvb3JkaW5hdGVzKHNoaXBMZW5ndGgpO1xuICAgICAgYWRkU2hpcFRvR2FtZWJvYXJkKHNoaXBMZW5ndGgsIHNoaXBDb29yZGluYXRlcyk7XG4gICAgfVxuICB9O1xuICBjb25zdCBzZW5kQ29tcHV0ZXJBdHRhY2sgPSAoKSA9PiB7XG4gICAgaWYgKCFjb21wdXRlclBsYXllcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBhdHRhY2tDb29yZGluYXRlcyA9IGdlbmVyYXRlQXR0YWNrQ29vcmRpbmF0ZXMoKTtcbiAgICBzZW5kQXR0YWNrKGF0dGFja0Nvb3JkaW5hdGVzKTtcbiAgfTtcbiAgY29uc3QgcmVjZWl2ZUF0dGFjayA9IChjb29yZGluYXRlcykgPT4ge1xuICAgIGNvbnN0IGF0dGFja1Jlc3VsdHMgPSBwbGF5ZXJHYW1lYm9hcmQucmVjZWl2ZUF0dGFjayhjb29yZGluYXRlcyk7XG4gICAgcmV0dXJuIGF0dGFja1Jlc3VsdHM7XG4gIH07XG4gIGNvbnN0IGdlbmVyYXRlQ29tcHV0ZXJTaGlwQ29vcmRpbmF0ZXMgPSAoc2hpcExlbmd0aCkgPT4ge1xuICAgIGxldCBsaXN0T2ZDb29yZGluYXRlcyA9IFtdO1xuICAgIGRvIHtcbiAgICAgIGxpc3RPZkNvb3JkaW5hdGVzID0gW107XG4gICAgICBjb25zdCBzdGFydGluZ0Nvb3JkaW5hdGVzID0gZ2VuZXJhdGVTdGFydGluZ0Nvb3JkaW5hdGVzKCk7XG4gICAgICBjb25zdCBub25TdGFydGluZ0Nvb3JkaW5hdGVzID0gZ2VuZXJhdGVOb25TdGFydGluZ0Nvb3JkaW5hdGVzKFxuICAgICAgICBzdGFydGluZ0Nvb3JkaW5hdGVzLFxuICAgICAgICBzaGlwTGVuZ3RoXG4gICAgICApO1xuICAgICAgbGlzdE9mQ29vcmRpbmF0ZXMucHVzaChzdGFydGluZ0Nvb3JkaW5hdGVzKTtcbiAgICAgIGxpc3RPZkNvb3JkaW5hdGVzID0gbGlzdE9mQ29vcmRpbmF0ZXMuY29uY2F0KG5vblN0YXJ0aW5nQ29vcmRpbmF0ZXMpO1xuICAgIH0gd2hpbGUgKGxpc3RPZkNvb3JkaW5hdGVzLmxlbmd0aCA8IHNoaXBMZW5ndGgpO1xuICAgIHJldHVybiBsaXN0T2ZDb29yZGluYXRlcztcbiAgfTtcbiAgY29uc3QgZ2VuZXJhdGVTdGFydGluZ0Nvb3JkaW5hdGVzID0gKCkgPT4ge1xuICAgIGNvbnN0IHN0YXJ0aW5nQ29vcmRpbmF0ZXMgPSBbdW5kZWZpbmVkLCB1bmRlZmluZWRdO1xuICAgIGRvIHtcbiAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMF0gPSBnZW5lcmF0ZVJhbmRvbUNvb3JkaW5hdGUoKTtcbiAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMV0gPSBnZW5lcmF0ZVJhbmRvbUNvb3JkaW5hdGUoKTtcbiAgICB9IHdoaWxlIChwbGF5ZXJHYW1lYm9hcmQuZ2V0Q29vcmRpbmF0ZXMoc3RhcnRpbmdDb29yZGluYXRlcykgIT09IHVuZGVmaW5lZCk7XG4gICAgcmV0dXJuIHN0YXJ0aW5nQ29vcmRpbmF0ZXM7XG4gIH07XG4gIGNvbnN0IGdlbmVyYXRlTm9uU3RhcnRpbmdDb29yZGluYXRlcyA9IChzdGFydGluZ0Nvb3JkaW5hdGVzLCBzaGlwTGVuZ3RoKSA9PiB7XG4gICAgY29uc3QgcG9zc2libGVDb29yZGluYXRlcyA9IFtdO1xuICAgIGlmIChjaGVja0lmVmFsaWRFbXB0eUNvb3JkaW5hdGVzKHN0YXJ0aW5nQ29vcmRpbmF0ZXMsIHNoaXBMZW5ndGgsIFwidXBcIikpIHtcbiAgICAgIGNvbnN0IHVwQ29vcmRpbmF0ZXMgPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgc2hpcExlbmd0aDsgaSsrKSB7XG4gICAgICAgIHVwQ29vcmRpbmF0ZXMucHVzaChbXG4gICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1swXSAtIGksXG4gICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1sxXSxcbiAgICAgICAgXSk7XG4gICAgICB9XG4gICAgICBwb3NzaWJsZUNvb3JkaW5hdGVzLnB1c2godXBDb29yZGluYXRlcyk7XG4gICAgfVxuICAgIGlmIChcbiAgICAgIGNoZWNrSWZWYWxpZEVtcHR5Q29vcmRpbmF0ZXMoc3RhcnRpbmdDb29yZGluYXRlcywgc2hpcExlbmd0aCwgXCJyaWdodFwiKVxuICAgICkge1xuICAgICAgY29uc3QgcmlnaHRDb29yZGluYXRlcyA9IFtdO1xuICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBzaGlwTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcmlnaHRDb29yZGluYXRlcy5wdXNoKFtcbiAgICAgICAgICBzdGFydGluZ0Nvb3JkaW5hdGVzWzBdLFxuICAgICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMV0gKyBpLFxuICAgICAgICBdKTtcbiAgICAgIH1cbiAgICAgIHBvc3NpYmxlQ29vcmRpbmF0ZXMucHVzaChyaWdodENvb3JkaW5hdGVzKTtcbiAgICB9XG4gICAgaWYgKGNoZWNrSWZWYWxpZEVtcHR5Q29vcmRpbmF0ZXMoc3RhcnRpbmdDb29yZGluYXRlcywgc2hpcExlbmd0aCwgXCJkb3duXCIpKSB7XG4gICAgICBjb25zdCBkb3duQ29vcmRpbmF0ZXMgPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgc2hpcExlbmd0aDsgaSsrKSB7XG4gICAgICAgIGRvd25Db29yZGluYXRlcy5wdXNoKFtcbiAgICAgICAgICBzdGFydGluZ0Nvb3JkaW5hdGVzWzBdICsgaSxcbiAgICAgICAgICBzdGFydGluZ0Nvb3JkaW5hdGVzWzFdLFxuICAgICAgICBdKTtcbiAgICAgIH1cbiAgICAgIHBvc3NpYmxlQ29vcmRpbmF0ZXMucHVzaChkb3duQ29vcmRpbmF0ZXMpO1xuICAgIH1cbiAgICBpZiAoY2hlY2tJZlZhbGlkRW1wdHlDb29yZGluYXRlcyhzdGFydGluZ0Nvb3JkaW5hdGVzLCBzaGlwTGVuZ3RoLCBcImxlZnRcIikpIHtcbiAgICAgIGNvbnN0IGxlZnRDb29yZGluYXRlcyA9IFtdO1xuICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBzaGlwTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGVmdENvb3JkaW5hdGVzLnB1c2goW1xuICAgICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMF0sXG4gICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1sxXSAtIGksXG4gICAgICAgIF0pO1xuICAgICAgfVxuICAgICAgcG9zc2libGVDb29yZGluYXRlcy5wdXNoKGxlZnRDb29yZGluYXRlcyk7XG4gICAgfVxuICAgIGlmIChwb3NzaWJsZUNvb3JkaW5hdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHBvc3NpYmxlQ29vcmRpbmF0ZXM7XG4gICAgfVxuICAgIGNvbnN0IHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogcG9zc2libGVDb29yZGluYXRlcy5sZW5ndGgpO1xuICAgIHJldHVybiBwb3NzaWJsZUNvb3JkaW5hdGVzW3JhbmRvbUluZGV4XTtcbiAgfTtcbiAgY29uc3QgZ2VuZXJhdGVSYW5kb21Db29yZGluYXRlID0gKCkgPT4ge1xuICAgIGNvbnN0IEJPQVJEQVhFU0xFTkdUSCA9IDEwO1xuICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBCT0FSREFYRVNMRU5HVEgpO1xuICB9O1xuICBjb25zdCBjaGVja0lmUHJldmlvdXNseUF0dGFja2VkID0gKFxuICAgIG9wcG9zaW5nUGxheWVyUmVjZWl2ZWRTaG90cyxcbiAgICBhdHRhY2tDb29yZGluYXRlc1xuICApID0+XG4gICAgb3Bwb3NpbmdQbGF5ZXJSZWNlaXZlZFNob3RzLnNvbWUoXG4gICAgICAocmVjZWl2ZWRTaG90KSA9PlxuICAgICAgICByZWNlaXZlZFNob3RbMF0gPT09IGF0dGFja0Nvb3JkaW5hdGVzWzBdICYmXG4gICAgICAgIHJlY2VpdmVkU2hvdFsxXSA9PT0gYXR0YWNrQ29vcmRpbmF0ZXNbMV1cbiAgICApO1xuICBjb25zdCBnZW5lcmF0ZUF0dGFja0Nvb3JkaW5hdGVzID0gKCkgPT4ge1xuICAgIGNvbnN0IHJlY2VpdmVkTWlzc2VkU2hvdHMgPSBvcHBvc2luZ1BsYXllclxuICAgICAgLmdldEdhbWVib2FyZCgpXG4gICAgICAuZ2V0UmVjZWl2ZWRNaXNzZWRTaG90cygpO1xuICAgIGNvbnN0IHJlY2VpdmVkSGl0U2hvdHMgPSBvcHBvc2luZ1BsYXllclxuICAgICAgLmdldEdhbWVib2FyZCgpXG4gICAgICAuZ2V0UmVjZWl2ZWRIaXRTaG90cygpO1xuICAgIGNvbnN0IGF0dGFja0Nvb3JkaW5hdGVzID0gW3VuZGVmaW5lZCwgdW5kZWZpbmVkXTtcbiAgICBkbyB7XG4gICAgICBhdHRhY2tDb29yZGluYXRlc1swXSA9IGdlbmVyYXRlUmFuZG9tQ29vcmRpbmF0ZSgpO1xuICAgICAgYXR0YWNrQ29vcmRpbmF0ZXNbMV0gPSBnZW5lcmF0ZVJhbmRvbUNvb3JkaW5hdGUoKTtcbiAgICB9IHdoaWxlIChcbiAgICAgIGNoZWNrSWZQcmV2aW91c2x5QXR0YWNrZWQocmVjZWl2ZWRNaXNzZWRTaG90cywgYXR0YWNrQ29vcmRpbmF0ZXMpIHx8XG4gICAgICBjaGVja0lmUHJldmlvdXNseUF0dGFja2VkKHJlY2VpdmVkSGl0U2hvdHMsIGF0dGFja0Nvb3JkaW5hdGVzKVxuICAgICk7XG4gICAgcmV0dXJuIGF0dGFja0Nvb3JkaW5hdGVzO1xuICB9O1xuICBjb25zdCBjaGVja0lmVmFsaWRFbXB0eUNvb3JkaW5hdGVzID0gKFxuICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXMsXG4gICAgc2hpcExlbmd0aCxcbiAgICBkaXJlY3Rpb25cbiAgKSA9PiB7XG4gICAgc3dpdGNoIChkaXJlY3Rpb24pIHtcbiAgICAgIGNhc2UgXCJ1cFwiOlxuICAgICAgICBpZiAoc3RhcnRpbmdDb29yZGluYXRlc1swXSAtIChzaGlwTGVuZ3RoIC0gMSkgPCAwKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgc2hpcExlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgcGxheWVyR2FtZWJvYXJkLmdldENvb3JkaW5hdGVzKFtcbiAgICAgICAgICAgICAgc3RhcnRpbmdDb29yZGluYXRlc1swXSAtIGksXG4gICAgICAgICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMV0sXG4gICAgICAgICAgICBdKSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICBjYXNlIFwicmlnaHRcIjpcbiAgICAgICAgaWYgKHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMV0gKyAoc2hpcExlbmd0aCAtIDEpID4gOSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHNoaXBMZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHBsYXllckdhbWVib2FyZC5nZXRDb29yZGluYXRlcyhbXG4gICAgICAgICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMF0sXG4gICAgICAgICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMV0gKyBpLFxuICAgICAgICAgICAgXSkgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcblxuICAgICAgY2FzZSBcImRvd25cIjpcbiAgICAgICAgaWYgKHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMF0gKyAoc2hpcExlbmd0aCAtIDEpID4gOSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHNoaXBMZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHBsYXllckdhbWVib2FyZC5nZXRDb29yZGluYXRlcyhbXG4gICAgICAgICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMF0gKyBpLFxuICAgICAgICAgICAgICBzdGFydGluZ0Nvb3JkaW5hdGVzWzFdLFxuICAgICAgICAgICAgXSkgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcblxuICAgICAgY2FzZSBcImxlZnRcIjpcbiAgICAgICAgaWYgKHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMV0gLSAoc2hpcExlbmd0aCAtIDEpIDwgMCkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHNoaXBMZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHBsYXllckdhbWVib2FyZC5nZXRDb29yZGluYXRlcyhbXG4gICAgICAgICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMF0sXG4gICAgICAgICAgICAgIHN0YXJ0aW5nQ29vcmRpbmF0ZXNbMV0gLSBpLFxuICAgICAgICAgICAgXSkgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9O1xuICByZXR1cm4ge1xuICAgIGlzQ29tcHV0ZXIsXG4gICAgZ2V0R2FtZWJvYXJkLFxuICAgIGdldE9wcG9zaW5nUGxheWVyLFxuICAgIHNldE9wcG9zaW5nUGxheWVyLFxuICAgIGFkZFNoaXBUb0dhbWVib2FyZCxcbiAgICBzZW5kQXR0YWNrLFxuICAgIGluaXRpYWxpemVDb21wdXRlckdhbWVib2FyZCxcbiAgICBzZW5kQ29tcHV0ZXJBdHRhY2ssXG4gICAgcmVjZWl2ZUF0dGFjayxcbiAgICBjaGVja0lmVmFsaWRFbXB0eUNvb3JkaW5hdGVzLFxuICB9O1xufTtcblxuZXhwb3J0IHsgUGxheWVyIH07XG4iLCJjb25zdCBHYW1lYm9hcmQgPSAoKSA9PiB7XG4gIGNvbnN0IGNyZWF0ZUJvYXJkID0gKCkgPT4ge1xuICAgIGNvbnN0IGJvYXJkID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XG4gICAgICBib2FyZC5wdXNoKFtdKTtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMTA7IGorKykge1xuICAgICAgICBib2FyZFtpXS5wdXNoKHVuZGVmaW5lZCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBib2FyZDtcbiAgfTtcbiAgY29uc3QgYm9hcmQgPSBjcmVhdGVCb2FyZCgpO1xuICBjb25zdCBwbGFjZWRTaGlwcyA9IFtdO1xuICBjb25zdCByZWNlaXZlZE1pc3NlZFNob3RzID0gW107XG4gIGNvbnN0IHJlY2VpdmVkSGl0U2hvdHMgPSBbXTtcbiAgY29uc3Qgc2VudE1pc3NlZFNob3RzID0gW107XG4gIGNvbnN0IHNlbnRIaXRTaG90cyA9IFtdO1xuICBsZXQgYWxsU2hpcHNTdW5rID0gZmFsc2U7XG4gIGNvbnN0IGdldENvb3JkaW5hdGVzID0gKGNvb3JkaW5hdGVzKSA9PiBib2FyZFtjb29yZGluYXRlc1swXV1bY29vcmRpbmF0ZXNbMV1dO1xuICBjb25zdCBnZXRQbGFjZWRTaGlwcyA9ICgpID0+IHBsYWNlZFNoaXBzO1xuICBjb25zdCBnZXRSZWNlaXZlZE1pc3NlZFNob3RzID0gKCkgPT4gcmVjZWl2ZWRNaXNzZWRTaG90cztcbiAgY29uc3QgZ2V0UmVjZWl2ZWRIaXRTaG90cyA9ICgpID0+IHJlY2VpdmVkSGl0U2hvdHM7XG4gIGNvbnN0IGdldFNlbnRNaXNzZWRTaG90cyA9ICgpID0+IHNlbnRNaXNzZWRTaG90cztcbiAgY29uc3QgZ2V0U2VudEhpdFNob3RzID0gKCkgPT4gc2VudEhpdFNob3RzO1xuICBjb25zdCBpc0FsbFNoaXBzU3VuayA9ICgpID0+IGFsbFNoaXBzU3VuaztcbiAgY29uc3QgcGxhY2VTaGlwID0gKHNoaXAsIGNvb3JkaW5hdGVzTGlzdCkgPT4ge1xuICAgIGZvciAoY29uc3QgY29vcmRpbmF0ZXMgb2YgY29vcmRpbmF0ZXNMaXN0KSB7XG4gICAgICBib2FyZFtjb29yZGluYXRlc1swXV1bY29vcmRpbmF0ZXNbMV1dID0gc2hpcDtcbiAgICB9XG4gICAgcGxhY2VkU2hpcHMucHVzaChzaGlwKTtcbiAgfTtcbiAgY29uc3QgY2hlY2tBbGxTaGlwc1N1bmsgPSAoKSA9PiB7XG4gICAgaWYgKHBsYWNlZFNoaXBzLmV2ZXJ5KChzaGlwKSA9PiBzaGlwLmlzU3VuaygpKSkge1xuICAgICAgYWxsU2hpcHNTdW5rID0gdHJ1ZTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHJlY2VpdmVBdHRhY2sgPSAoY29vcmRpbmF0ZXMpID0+IHtcbiAgICBjb25zdCBlbnRpdHlBdENvb3JkaW5hdGVzID0gZ2V0Q29vcmRpbmF0ZXMoY29vcmRpbmF0ZXMpO1xuICAgIGlmIChlbnRpdHlBdENvb3JkaW5hdGVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGVudGl0eUF0Q29vcmRpbmF0ZXMuaGl0KCk7XG4gICAgICBjaGVja0FsbFNoaXBzU3VuaygpO1xuICAgICAgcmVjZWl2ZWRIaXRTaG90cy5wdXNoKGNvb3JkaW5hdGVzKTtcbiAgICAgIHJldHVybiBcImhpdFwiO1xuICAgIH1cbiAgICByZWNlaXZlZE1pc3NlZFNob3RzLnB1c2goY29vcmRpbmF0ZXMpO1xuICAgIHJldHVybiBcIm1pc3NcIjtcbiAgfTtcbiAgY29uc3QgYWRkU2VudE1pc3NlZFNob3QgPSAoY29vcmRpbmF0ZXMpID0+IHtcbiAgICBzZW50TWlzc2VkU2hvdHMucHVzaChjb29yZGluYXRlcyk7XG4gIH07XG4gIGNvbnN0IGFkZFNlbnRIaXRTaG90ID0gKGNvb3JkaW5hdGVzKSA9PiB7XG4gICAgc2VudEhpdFNob3RzLnB1c2goY29vcmRpbmF0ZXMpO1xuICB9O1xuICByZXR1cm4ge1xuICAgIGdldENvb3JkaW5hdGVzLFxuICAgIGdldFBsYWNlZFNoaXBzLFxuICAgIGdldFJlY2VpdmVkTWlzc2VkU2hvdHMsXG4gICAgZ2V0UmVjZWl2ZWRIaXRTaG90cyxcbiAgICBnZXRTZW50TWlzc2VkU2hvdHMsXG4gICAgZ2V0U2VudEhpdFNob3RzLFxuICAgIGlzQWxsU2hpcHNTdW5rLFxuICAgIHBsYWNlU2hpcCxcbiAgICByZWNlaXZlQXR0YWNrLFxuICAgIGFkZFNlbnRNaXNzZWRTaG90LFxuICAgIGFkZFNlbnRIaXRTaG90LFxuICB9O1xufTtcblxuZXhwb3J0IHsgR2FtZWJvYXJkIH07XG4iLCJpbXBvcnQgeyBTaGlwIH0gZnJvbSBcIi4vc2hpcFwiO1xuaW1wb3J0IHsgR2FtZWJvYXJkIH0gZnJvbSBcIi4vZ2FtZWJvYXJkXCI7XG5pbXBvcnQgeyBQbGF5ZXIgfSBmcm9tIFwiLi9wbGF5ZXJcIjtcblxuY29uc3QgR2FtZUxvb3AgPSAoKCkgPT4ge1xuICBjb25zdCBwbGF5ZXJzID0gW107XG4gIGxldCBpblByb2dyZXNzID0gdHJ1ZTtcbiAgbGV0IHdpbm5lcjtcbiAgY29uc3QgZ2V0UGxheWVycyA9ICgpID0+IHBsYXllcnM7XG4gIGNvbnN0IGlzSW5Qcm9ncmVzcyA9ICgpID0+IGluUHJvZ3Jlc3M7XG4gIGNvbnN0IGdldFdpbm5lciA9ICgpID0+IHdpbm5lcjtcbiAgY29uc3Qgc2V0V2lubmVyID0gKGxvc2VyUGxheWVyKSA9PiB7XG4gICAgY29uc3Qgd2lubmVyUGxheWVyID0gbG9zZXJQbGF5ZXIuZ2V0T3Bwb3NpbmdQbGF5ZXIoKTtcbiAgICB3aW5uZXIgPSB3aW5uZXJQbGF5ZXI7XG4gIH07XG4gIGNvbnN0IGNyZWF0ZUdhbWUgPSAoKSA9PiB7XG4gICAgY29uc3QgaHVtYW5QbGF5ZXIgPSBQbGF5ZXIoXCJodW1hblwiKTtcbiAgICBwbGF5ZXJzLnB1c2goaHVtYW5QbGF5ZXIpO1xuICAgIGNvbnN0IGNvbXB1dGVyUGxheWVyID0gUGxheWVyKFwiY29tcHV0ZXJcIik7XG4gICAgcGxheWVycy5wdXNoKGNvbXB1dGVyUGxheWVyKTtcbiAgICBodW1hblBsYXllci5zZXRPcHBvc2luZ1BsYXllcihjb21wdXRlclBsYXllcik7XG4gICAgY29tcHV0ZXJQbGF5ZXIuc2V0T3Bwb3NpbmdQbGF5ZXIoaHVtYW5QbGF5ZXIpO1xuICAgIGNvbXB1dGVyUGxheWVyLmluaXRpYWxpemVDb21wdXRlckdhbWVib2FyZCgpO1xuICB9O1xuICBjb25zdCBlbmRHYW1lID0gKGxvc2VyUGxheWVyKSA9PiB7XG4gICAgaW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgIHNldFdpbm5lcihsb3NlclBsYXllcik7XG4gIH07XG4gIGNvbnN0IHJlc2V0R2FtZSA9ICgpID0+IHtcbiAgICBwbGF5ZXJzLmxlbmd0aCA9IDA7XG4gICAgaW5Qcm9ncmVzcyA9IHRydWU7XG4gICAgd2lubmVyID0gdW5kZWZpbmVkO1xuICB9O1xuICByZXR1cm4ge1xuICAgIGdldFBsYXllcnMsXG4gICAgaXNJblByb2dyZXNzLFxuICAgIGdldFdpbm5lcixcbiAgICBjcmVhdGVHYW1lLFxuICAgIGVuZEdhbWUsXG4gICAgcmVzZXRHYW1lLFxuICB9O1xufSkoKTtcblxuZXhwb3J0IHsgR2FtZUxvb3AgfTtcbiIsImltcG9ydCB7IEdhbWVMb29wIH0gZnJvbSBcIi4vZ2FtZWxvb3BcIjtcblxuY29uc3QgRE9NQ29udHJvbGxlciA9ICgoKSA9PiB7XG4gIGNvbnN0IGNyZWF0ZUJvYXJkQ2VsbHMgPSAoZ2FtZWJvYXJkRE9NKSA9PiB7XG4gICAgY29uc3QgQk9BUkRBWEVTTEVOR1RIID0gMTA7XG4gICAgY29uc3QgY29sdW1uTGFiZWxzID0gW1wiQVwiLCBcIkJcIiwgXCJDXCIsIFwiRFwiLCBcIkVcIiwgXCJGXCIsIFwiR1wiLCBcIkhcIiwgXCJJXCIsIFwiSlwiXTtcbiAgICBjb25zdCByb3dMYWJlbHMgPSBbXCIxXCIsIFwiMlwiLCBcIjNcIiwgXCI0XCIsIFwiNVwiLCBcIjZcIiwgXCI3XCIsIFwiOFwiLCBcIjlcIiwgXCIxMFwiXTtcbiAgICBmb3IgKGxldCBpID0gLTE7IGkgPCBCT0FSREFYRVNMRU5HVEg7IGkrKykge1xuICAgICAgZm9yIChsZXQgaiA9IC0xOyBqIDwgQk9BUkRBWEVTTEVOR1RIOyBqKyspIHtcbiAgICAgICAgaWYgKGkgPT09IC0xKSB7XG4gICAgICAgICAgaWYgKGogPT09IC0xKSB7XG4gICAgICAgICAgICBjb25zdCBpbnZpc2libGVQbGFjZWhvbGRlckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgaW52aXNpYmxlUGxhY2Vob2xkZXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJnYW1lYm9hcmQtbGFiZWxcIik7XG4gICAgICAgICAgICBpbnZpc2libGVQbGFjZWhvbGRlckVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG4gICAgICAgICAgICBnYW1lYm9hcmRET00uYXBwZW5kQ2hpbGQoaW52aXNpYmxlUGxhY2Vob2xkZXJFbGVtZW50KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgY29sdW1uTGFiZWxFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIGNvbHVtbkxhYmVsRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiY29sdW1uLWxhYmVsXCIpO1xuICAgICAgICAgICAgY29sdW1uTGFiZWxFbGVtZW50LnRleHRDb250ZW50ID0gY29sdW1uTGFiZWxzW2pdO1xuICAgICAgICAgICAgZ2FtZWJvYXJkRE9NLmFwcGVuZENoaWxkKGNvbHVtbkxhYmVsRWxlbWVudCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGogPT09IC0xKSB7XG4gICAgICAgICAgY29uc3Qgcm93TGFiZWxFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICByb3dMYWJlbEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInJvdy1sYWJlbFwiKTtcbiAgICAgICAgICByb3dMYWJlbEVsZW1lbnQudGV4dENvbnRlbnQgPSByb3dMYWJlbHNbaV07XG4gICAgICAgICAgZ2FtZWJvYXJkRE9NLmFwcGVuZENoaWxkKHJvd0xhYmVsRWxlbWVudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgY2VsbEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgIGNlbGxFbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtcm93XCIsIGkpO1xuICAgICAgICAgIGNlbGxFbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtY29sdW1uXCIsIGopO1xuICAgICAgICAgIGNlbGxFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJnYW1lYm9hcmQtY2VsbFwiKTtcbiAgICAgICAgICBjZWxsRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ292ZXJcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBkcmFnT3ZlcihldmVudCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY2VsbEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyb3BcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpbnNlcnREcmFnZ2VkSW1hZ2UoZXZlbnQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8vIHNvbWUgY2xpY2sgZXZlbnQgbGlzdGVuZXIgd2hlcmUgYXR0YWNrIGlzIG1hZGUgT1IgcHJpb3IgdG8gdGhhdCwgcGxhY2luZyBzaGlwIG9uIHRoYXQgY2VsbFxuICAgICAgICAgIGdhbWVib2FyZERPTS5hcHBlbmRDaGlsZChjZWxsRWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGNvbnN0IGdldERyYWdnZWRJbWFnZSA9IChldmVudCkgPT4ge1xuICAgIGNvbnN0IGRhdGFPYmplY3QgPSB7XG4gICAgICBpbWFnZTogZXZlbnQudGFyZ2V0LnNyYyxcbiAgICAgIHNoaXBMZW5ndGg6IGV2ZW50LnRhcmdldC5kYXRhc2V0LnNoaXBMZW5ndGgsXG4gICAgICBob3Jpem9udGFsOiBmYWxzZSxcbiAgICAgIHZlcnRpY2FsOiBmYWxzZSxcbiAgICB9O1xuICAgIGlmIChBcnJheS5mcm9tKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QpLmluY2x1ZGVzKFwiaG9yaXpvbnRhbFwiKSkge1xuICAgICAgZGF0YU9iamVjdC5ob3Jpem9udGFsID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKEFycmF5LmZyb20oZXZlbnQudGFyZ2V0LmNsYXNzTGlzdCkuaW5jbHVkZXMoXCJ2ZXJ0aWNhbFwiKSkge1xuICAgICAgZGF0YU9iamVjdC52ZXJ0aWNhbCA9IHRydWU7XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKGRhdGFPYmplY3QpO1xuICAgIGNvbnN0IGRhdGFTdHJpbmcgPSBKU09OLnN0cmluZ2lmeShkYXRhT2JqZWN0KTtcbiAgICBldmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YShcImltYWdlXCIsIGRhdGFTdHJpbmcpO1xuICB9O1xuICBjb25zdCBkcmFnT3ZlciA9ICgpID0+IHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICB9O1xuICBjb25zdCBpbml0aWFsaXplQm9hcmRET00gPSAoKSA9PiB7XG4gICAgY29uc3QgaHVtYW5QbGF5ZXJHYW1lYm9hcmRET00gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBsYXllci1ib2FyZFwiKTtcbiAgICBjb25zdCBvcHBvbmVudEdhbWVib2FyZERPTSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIub3Bwb25lbnQtYm9hcmRcIik7XG4gICAgY3JlYXRlQm9hcmRDZWxscyhodW1hblBsYXllckdhbWVib2FyZERPTSk7XG4gICAgY3JlYXRlQm9hcmRDZWxscyhvcHBvbmVudEdhbWVib2FyZERPTSk7XG4gIH07XG4gIGNvbnN0IGlzVmFsaWRHYW1lYm9hcmRDZWxsID0gKHRhcmdldENlbGwsIGRhdGFPYmplY3QpID0+IHtcbiAgICBjb25zdCBjZWxsQ29vcmRpbmF0ZXMgPSBbXG4gICAgICBOdW1iZXIodGFyZ2V0Q2VsbC5kYXRhc2V0LnJvdyksXG4gICAgICBOdW1iZXIodGFyZ2V0Q2VsbC5kYXRhc2V0LmNvbHVtbiksXG4gICAgXTtcbiAgICBjb25zdCBsZW5ndGggPSBOdW1iZXIoZGF0YU9iamVjdC5zaGlwTGVuZ3RoKTtcbiAgICBpZiAoZGF0YU9iamVjdC5ob3Jpem9udGFsKSB7XG4gICAgICBpZiAoXG4gICAgICAgIEdhbWVMb29wLmdldFBsYXllcnMoKVswXS5jaGVja0lmVmFsaWRFbXB0eUNvb3JkaW5hdGVzKFxuICAgICAgICAgIGNlbGxDb29yZGluYXRlcyxcbiAgICAgICAgICBsZW5ndGgsXG4gICAgICAgICAgXCJyaWdodFwiXG4gICAgICAgIClcbiAgICAgICkge1xuICAgICAgICBjb25zb2xlLmxvZyhcImZpdHNcIik7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coXCJub3BlXCIpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoZGF0YU9iamVjdC52ZXJ0aWNhbCkge1xuICAgICAgaWYgKFxuICAgICAgICBHYW1lTG9vcC5nZXRQbGF5ZXJzKClbMF0uY2hlY2tJZlZhbGlkRW1wdHlDb29yZGluYXRlcyhcbiAgICAgICAgICBjZWxsQ29vcmRpbmF0ZXMsXG4gICAgICAgICAgbGVuZ3RoLFxuICAgICAgICAgIFwiZG93blwiXG4gICAgICAgIClcbiAgICAgICkge1xuICAgICAgICBjb25zb2xlLmxvZyhcImZpdHNcIik7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coXCJub3BlXCIpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgaW5zZXJ0RHJhZ2dlZEltYWdlID0gKGV2ZW50KSA9PiB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCB0YXJnZXRDZWxsID0gZXZlbnQudGFyZ2V0O1xuICAgIGlmIChBcnJheS5mcm9tKHRhcmdldENlbGwuY2xhc3NMaXN0KS5pbmNsdWRlcyhcImNvbnRhaW5zLXNoaXAtaW1hZ2VcIikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZGF0YVN0cmluZyA9IGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKFwiaW1hZ2VcIik7XG4gICAgY29uc3QgZGF0YU9iamVjdCA9IEpTT04ucGFyc2UoZGF0YVN0cmluZyk7XG4gICAgaWYgKCFpc1ZhbGlkR2FtZWJvYXJkQ2VsbCh0YXJnZXRDZWxsLCBkYXRhT2JqZWN0KSkge1xuICAgICAgLy8gcHJvYmFibHkgbWFrZSBzb21lIERPTSBlcnJvciBtZXNzYWdlIGFwcGVhclxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0YXJnZXRDZWxsLmNsYXNzTGlzdC5hZGQoXCJjb250YWlucy1zaGlwLWltYWdlXCIpO1xuICAgIHRhcmdldENlbGwuY2xhc3NMaXN0LmFkZChcInNoaXAtaW1hZ2VcIik7XG4gICAgdGFyZ2V0Q2VsbC5jbGFzc0xpc3QuYWRkKFwic2hpcC1pbWFnZS01XCIpO1xuICAgIHRhcmdldENlbGwuY2xhc3NMaXN0LmFkZChcInNoaXAtaW1hZ2UtNS0yXCIpO1xuICAgIHRhcmdldENlbGwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRyb3BcIiwgaW5zZXJ0RHJhZ2dlZEltYWdlKTtcbiAgfTtcbiAgY29uc3Qgcm90YXRlU2hpcEltYWdlID0gKGltYWdlKSA9PiB7XG4gICAgY29uc3QgaW1hZ2VDbGFzc2VzID0gQXJyYXkuZnJvbShpbWFnZS5jbGFzc0xpc3QpO1xuICAgIGlmIChpbWFnZUNsYXNzZXMuaW5jbHVkZXMoXCJob3Jpem9udGFsXCIpKSB7XG4gICAgICBpbWFnZS5jbGFzc0xpc3QucmVtb3ZlKFwiaG9yaXpvbnRhbFwiKTtcbiAgICAgIGltYWdlLmNsYXNzTGlzdC5hZGQoXCJ2ZXJ0aWNhbFwiKTtcbiAgICB9IGVsc2UgaWYgKGltYWdlQ2xhc3Nlcy5pbmNsdWRlcyhcInZlcnRpY2FsXCIpKSB7XG4gICAgICBpbWFnZS5jbGFzc0xpc3QucmVtb3ZlKFwidmVydGljYWxcIik7XG4gICAgICBpbWFnZS5jbGFzc0xpc3QuYWRkKFwiaG9yaXpvbnRhbFwiKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHJvdGF0ZVBlckxlbmd0aCA9ICh0ZW1wRGl2LCBjbG9uZWRJbWFnZUVsZW1lbnQpID0+IHtcbiAgICBjb25zdCBjbG9uZWRJbWFnZUVsZW1lbnRDbGFzc2VzID0gQXJyYXkuZnJvbShjbG9uZWRJbWFnZUVsZW1lbnQuY2xhc3NMaXN0KTtcbiAgICBpZiAoY2xvbmVkSW1hZ2VFbGVtZW50Q2xhc3Nlcy5pbmNsdWRlcyhcImhvcml6b250YWxcIikpIHtcbiAgICAgIHRlbXBEaXYuY2xhc3NMaXN0LmFkZChcInRlbXAtcm90YXRlLWhvcml6b250YWxcIik7XG4gICAgfSBlbHNlIGlmIChjbG9uZWRJbWFnZUVsZW1lbnRDbGFzc2VzLmluY2x1ZGVzKFwidmVydGljYWxcIikpIHtcbiAgICAgIHRlbXBEaXYuY2xhc3NMaXN0LmFkZChcInRlbXAtcm90YXRlLXZlcnRpY2FsXCIpO1xuICAgICAgaWYgKGNsb25lZEltYWdlRWxlbWVudC5kYXRhc2V0LnNoaXBMZW5ndGggPT09IFwiNVwiKSB7XG4gICAgICAgIHRlbXBEaXYuY2xhc3NMaXN0LmFkZChcInRlbXAtcm90YXRlLXZlcnRpY2FsLTVcIik7XG4gICAgICB9IGVsc2UgaWYgKGNsb25lZEltYWdlRWxlbWVudC5kYXRhc2V0LnNoaXBMZW5ndGggPT09IFwiNFwiKSB7XG4gICAgICAgIHRlbXBEaXYuY2xhc3NMaXN0LmFkZChcInRlbXAtcm90YXRlLXZlcnRpY2FsLTRcIik7XG4gICAgICB9IGVsc2UgaWYgKGNsb25lZEltYWdlRWxlbWVudC5kYXRhc2V0LnNoaXBMZW5ndGggPT09IFwiM1wiKSB7XG4gICAgICAgIHRlbXBEaXYuY2xhc3NMaXN0LmFkZChcInRlbXAtcm90YXRlLXZlcnRpY2FsLTNcIik7XG4gICAgICB9IGVsc2UgaWYgKGNsb25lZEltYWdlRWxlbWVudC5kYXRhc2V0LnNoaXBMZW5ndGggPT09IFwiMlwiKSB7XG4gICAgICAgIHRlbXBEaXYuY2xhc3NMaXN0LmFkZChcInRlbXAtcm90YXRlLXZlcnRpY2FsLTJcIik7XG4gICAgICB9XG4gICAgfVxuICB9O1xuICBjb25zdCByb3RhdGVEcmFnZ2VkSW1hZ2UgPSAoZXZlbnQpID0+IHtcbiAgICBjb25zdCBpbWFnZUVsZW1lbnQgPSBldmVudC50YXJnZXQ7XG4gICAgY29uc3QgY2xvbmVkSW1hZ2VFbGVtZW50ID0gaW1hZ2VFbGVtZW50LmNsb25lTm9kZSgpO1xuICAgIGNvbnN0IHRlbXBEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHRlbXBEaXYuY2xhc3NMaXN0LmFkZChcInRlbXAtcm90YXRlXCIpO1xuICAgIHJvdGF0ZVBlckxlbmd0aCh0ZW1wRGl2LCBjbG9uZWRJbWFnZUVsZW1lbnQpO1xuICAgIHRlbXBEaXYuYXBwZW5kQ2hpbGQoY2xvbmVkSW1hZ2VFbGVtZW50KTtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRlbXBEaXYpO1xuICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREcmFnSW1hZ2UodGVtcERpdiwgMCwgMCk7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRlbXBEaXYpO1xuICAgIH0sIDApO1xuICB9O1xuICByZXR1cm4ge1xuICAgIGluaXRpYWxpemVCb2FyZERPTSxcbiAgICBpbnNlcnREcmFnZ2VkSW1hZ2UsXG4gICAgcm90YXRlU2hpcEltYWdlLFxuICAgIHJvdGF0ZURyYWdnZWRJbWFnZSxcbiAgICBnZXREcmFnZ2VkSW1hZ2UsXG4gICAgZHJhZ092ZXIsXG4gIH07XG59KSgpO1xuXG5leHBvcnQgeyBET01Db250cm9sbGVyIH07XG4iLCJpbXBvcnQgeyBET01Db250cm9sbGVyIH0gZnJvbSBcIi4vRE9NX2NvbnRyb2xsZXJcIjtcblxuY29uc3QgRXZlbnRMaXN0ZW5lckNvbnRyb2xsZXIgPSAoKCkgPT4ge1xuICBjb25zdCByb3RhdGVTaGlwSW1hZ2VMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgY29uc3Qgc2hpcFBsYWNlbWVudEVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zaGlwLXBsYWNlbWVudFwiKTtcbiAgICBzaGlwUGxhY2VtZW50RWxlbWVudHMuZm9yRWFjaCgoZ3JvdXApID0+IHtcbiAgICAgIGNvbnN0IGltZyA9IGdyb3VwLmNoaWxkcmVuWzBdO1xuICAgICAgY29uc3QgYnRuID0gZ3JvdXAuY2hpbGRyZW5bMl07XG4gICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgRE9NQ29udHJvbGxlci5yb3RhdGVTaGlwSW1hZ2UoaW1nKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuICBjb25zdCBhZGRTaGlwUGxhY2VtZW50RHJhZyA9ICgpID0+IHtcbiAgICBjb25zdCBzaGlwSW1hZ2VzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNoaXAtcGllY2VcIikpO1xuICAgIHNoaXBJbWFnZXMuZm9yRWFjaCgoc2hpcCkgPT4ge1xuICAgICAgc2hpcC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ3N0YXJ0XCIsIChldmVudCkgPT4ge1xuICAgICAgICBET01Db250cm9sbGVyLmdldERyYWdnZWRJbWFnZShldmVudCk7XG4gICAgICAgIERPTUNvbnRyb2xsZXIucm90YXRlRHJhZ2dlZEltYWdlKGV2ZW50KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuICByZXR1cm4ge1xuICAgIHJvdGF0ZVNoaXBJbWFnZUxpc3RlbmVycyxcbiAgICBhZGRTaGlwUGxhY2VtZW50RHJhZyxcbiAgfTtcbn0pKCk7XG5cbmV4cG9ydCB7IEV2ZW50TGlzdGVuZXJDb250cm9sbGVyIH07XG4iLCJpbXBvcnQgeyBHYW1lTG9vcCB9IGZyb20gXCIuL2dhbWVsb29wXCI7XG5pbXBvcnQgeyBET01Db250cm9sbGVyIH0gZnJvbSBcIi4vRE9NX2NvbnRyb2xsZXJcIjtcbmltcG9ydCB7IEV2ZW50TGlzdGVuZXJDb250cm9sbGVyIH0gZnJvbSBcIi4vZXZlbnRfbGlzdGVuZXJfY29udHJvbGxlclwiO1xuXG5HYW1lTG9vcC5jcmVhdGVHYW1lKCk7XG5cbkRPTUNvbnRyb2xsZXIuaW5pdGlhbGl6ZUJvYXJkRE9NKCk7XG5cbkV2ZW50TGlzdGVuZXJDb250cm9sbGVyLnJvdGF0ZVNoaXBJbWFnZUxpc3RlbmVycygpO1xuXG5FdmVudExpc3RlbmVyQ29udHJvbGxlci5hZGRTaGlwUGxhY2VtZW50RHJhZygpO1xuIl0sIm5hbWVzIjpbIlBsYXllciIsInBsYXllclR5cGUiLCJjb21wdXRlclBsYXllciIsInBsYXllckdhbWVib2FyZCIsImJvYXJkIiwiaSIsInB1c2giLCJqIiwidW5kZWZpbmVkIiwiY3JlYXRlQm9hcmQiLCJwbGFjZWRTaGlwcyIsInJlY2VpdmVkTWlzc2VkU2hvdHMiLCJyZWNlaXZlZEhpdFNob3RzIiwic2VudE1pc3NlZFNob3RzIiwic2VudEhpdFNob3RzIiwiYWxsU2hpcHNTdW5rIiwiZ2V0Q29vcmRpbmF0ZXMiLCJjb29yZGluYXRlcyIsImdldFBsYWNlZFNoaXBzIiwiZ2V0UmVjZWl2ZWRNaXNzZWRTaG90cyIsImdldFJlY2VpdmVkSGl0U2hvdHMiLCJnZXRTZW50TWlzc2VkU2hvdHMiLCJnZXRTZW50SGl0U2hvdHMiLCJpc0FsbFNoaXBzU3VuayIsInBsYWNlU2hpcCIsInNoaXAiLCJjb29yZGluYXRlc0xpc3QiLCJyZWNlaXZlQXR0YWNrIiwiZW50aXR5QXRDb29yZGluYXRlcyIsImhpdCIsImV2ZXJ5IiwiaXNTdW5rIiwiYWRkU2VudE1pc3NlZFNob3QiLCJhZGRTZW50SGl0U2hvdCIsIkdhbWVib2FyZCIsIm9wcG9zaW5nUGxheWVyIiwiYWRkU2hpcFRvR2FtZWJvYXJkIiwic2hpcExlbmd0aCIsImdpdmVuTGVuZ3RoIiwibGVuZ3RoIiwiaGl0cyIsInN1bmsiLCJnZXRTaGlwTGVuZ3RoIiwiZ2V0U2hpcEhpdHMiLCJTaGlwIiwic2VuZEF0dGFjayIsIm9wcG9zaW5nUGxheWVyR2FtZWJvYXJkIiwiZ2V0R2FtZWJvYXJkIiwiYXR0YWNrUmVzdWx0cyIsIkdhbWVMb29wIiwiZW5kR2FtZSIsImlzQ29tcHV0ZXIiLCJzZW5kQ29tcHV0ZXJBdHRhY2siLCJnZW5lcmF0ZUNvbXB1dGVyU2hpcENvb3JkaW5hdGVzIiwibGlzdE9mQ29vcmRpbmF0ZXMiLCJzdGFydGluZ0Nvb3JkaW5hdGVzIiwiZ2VuZXJhdGVTdGFydGluZ0Nvb3JkaW5hdGVzIiwibm9uU3RhcnRpbmdDb29yZGluYXRlcyIsImdlbmVyYXRlTm9uU3RhcnRpbmdDb29yZGluYXRlcyIsImNvbmNhdCIsImdlbmVyYXRlUmFuZG9tQ29vcmRpbmF0ZSIsInBvc3NpYmxlQ29vcmRpbmF0ZXMiLCJjaGVja0lmVmFsaWRFbXB0eUNvb3JkaW5hdGVzIiwidXBDb29yZGluYXRlcyIsInJpZ2h0Q29vcmRpbmF0ZXMiLCJkb3duQ29vcmRpbmF0ZXMiLCJsZWZ0Q29vcmRpbmF0ZXMiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJjaGVja0lmUHJldmlvdXNseUF0dGFja2VkIiwib3Bwb3NpbmdQbGF5ZXJSZWNlaXZlZFNob3RzIiwiYXR0YWNrQ29vcmRpbmF0ZXMiLCJzb21lIiwicmVjZWl2ZWRTaG90IiwiZGlyZWN0aW9uIiwiZ2V0T3Bwb3NpbmdQbGF5ZXIiLCJzZXRPcHBvc2luZ1BsYXllciIsInBsYXllciIsImluaXRpYWxpemVDb21wdXRlckdhbWVib2FyZCIsImxlbmd0aHNPZlNoaXBzIiwic2hpcENvb3JkaW5hdGVzIiwiZ2VuZXJhdGVBdHRhY2tDb29yZGluYXRlcyIsInBsYXllcnMiLCJ3aW5uZXIiLCJpblByb2dyZXNzIiwiZ2V0UGxheWVycyIsImlzSW5Qcm9ncmVzcyIsImdldFdpbm5lciIsImNyZWF0ZUdhbWUiLCJodW1hblBsYXllciIsImxvc2VyUGxheWVyIiwid2lubmVyUGxheWVyIiwic2V0V2lubmVyIiwicmVzZXRHYW1lIiwiRE9NQ29udHJvbGxlciIsImNyZWF0ZUJvYXJkQ2VsbHMiLCJnYW1lYm9hcmRET00iLCJjb2x1bW5MYWJlbHMiLCJyb3dMYWJlbHMiLCJpbnZpc2libGVQbGFjZWhvbGRlckVsZW1lbnQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJzdHlsZSIsInZpc2liaWxpdHkiLCJhcHBlbmRDaGlsZCIsImNvbHVtbkxhYmVsRWxlbWVudCIsInRleHRDb250ZW50Iiwicm93TGFiZWxFbGVtZW50IiwiY2VsbEVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJkcmFnT3ZlciIsImluc2VydERyYWdnZWRJbWFnZSIsInByZXZlbnREZWZhdWx0IiwidGFyZ2V0Q2VsbCIsInRhcmdldCIsIkFycmF5IiwiZnJvbSIsImluY2x1ZGVzIiwiZGF0YVN0cmluZyIsImRhdGFUcmFuc2ZlciIsImdldERhdGEiLCJkYXRhT2JqZWN0IiwiY2VsbENvb3JkaW5hdGVzIiwiTnVtYmVyIiwiZGF0YXNldCIsInJvdyIsImNvbHVtbiIsImhvcml6b250YWwiLCJjb25zb2xlIiwibG9nIiwidmVydGljYWwiLCJpc1ZhbGlkR2FtZWJvYXJkQ2VsbCIsIkpTT04iLCJwYXJzZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJpbml0aWFsaXplQm9hcmRET00iLCJodW1hblBsYXllckdhbWVib2FyZERPTSIsInF1ZXJ5U2VsZWN0b3IiLCJvcHBvbmVudEdhbWVib2FyZERPTSIsInJvdGF0ZVNoaXBJbWFnZSIsImltYWdlIiwiaW1hZ2VDbGFzc2VzIiwicmVtb3ZlIiwicm90YXRlRHJhZ2dlZEltYWdlIiwiY2xvbmVkSW1hZ2VFbGVtZW50IiwiY2xvbmVOb2RlIiwidGVtcERpdiIsImNsb25lZEltYWdlRWxlbWVudENsYXNzZXMiLCJyb3RhdGVQZXJMZW5ndGgiLCJib2R5Iiwic2V0RHJhZ0ltYWdlIiwic2V0VGltZW91dCIsInJlbW92ZUNoaWxkIiwiZ2V0RHJhZ2dlZEltYWdlIiwic3JjIiwic3RyaW5naWZ5Iiwic2V0RGF0YSIsIkV2ZW50TGlzdGVuZXJDb250cm9sbGVyIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJncm91cCIsImltZyIsImNoaWxkcmVuIl0sInNvdXJjZVJvb3QiOiIifQ==